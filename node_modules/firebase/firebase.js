!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).firebase=e()}(this,function(){"use strict";!function(t){var e,n,s,r,i,o,a,u,c,h;function l(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function f(t){return t="string"!=typeof t?String(t):t}function p(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function g(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function v(n){return new Promise(function(t,e){n.onload=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function y(t){var e=new FileReader,n=v(e);return e.readAsArrayBuffer(t),n}function m(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(s&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(r&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(i&&s&&a(t))this._bodyArrayBuffer=m(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!i||!ArrayBuffer.prototype.isPrototypeOf(t)&&!u(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=m(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s&&(this.blob=function(){var t=g(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?g(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(y)}),this.text=function(){var t,e,n=g(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=v(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}function w(t,e){var n,r=(e=e||{}).body;if(t instanceof w){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new d(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new d(e.headers)),this.method=(n=e.method||this.method||"GET",t=n.toUpperCase(),-1<c.indexOf(t)?t:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function _(t){var n=new FormData;return t.trim().split("&").forEach(function(t){var e;t&&(t=(e=t.split("=")).shift().replace(/\+/g," "),e=e.join("=").replace(/\+/g," "),n.append(decodeURIComponent(t),decodeURIComponent(e)))}),n}function I(t,e){e=e||{},this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new d(e.headers),this.url=e.url||"",this._initBody(t)}t.fetch||(e="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,s="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),r="FormData"in t,(i="ArrayBuffer"in t)&&(o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=function(t){return t&&DataView.prototype.isPrototypeOf(t)},u=ArrayBuffer.isView||function(t){return t&&-1<o.indexOf(Object.prototype.toString.call(t))}),d.prototype.append=function(t,e){t=l(t),e=f(e);var n=this.map[t];this.map[t]=n?n+","+e:e},d.prototype.delete=function(t){delete this.map[l(t)]},d.prototype.get=function(t){return t=l(t),this.has(t)?this.map[t]:null},d.prototype.has=function(t){return this.map.hasOwnProperty(l(t))},d.prototype.set=function(t,e){this.map[l(t)]=f(e)},d.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},d.prototype.keys=function(){var n=[];return this.forEach(function(t,e){n.push(e)}),p(n)},d.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),p(e)},d.prototype.entries=function(){var n=[];return this.forEach(function(t,e){n.push([e,t])}),p(n)},n&&(d.prototype[Symbol.iterator]=d.prototype.entries),c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},b.call(w.prototype),b.call(I.prototype),I.prototype.clone=function(){return new I(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},I.error=function(){var t=new I(null,{status:0,statusText:""});return t.type="error",t},h=[301,302,303,307,308],I.redirect=function(t,e){if(-1===h.indexOf(e))throw new RangeError("Invalid status code");return new I(null,{status:e,headers:{location:t}})},t.Headers=d,t.Request=w,t.Response=I,t.fetch=function(n,o){return new Promise(function(r,t){var e=new w(n,o),i=new XMLHttpRequest;i.onload=function(){var n,t={status:i.status,statusText:i.statusText,headers:(e=i.getAllResponseHeaders()||"",n=new d,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var e=t.split(":"),t=e.shift().trim();t&&(e=e.join(":").trim(),n.append(t,e))}),n)};t.url="responseURL"in i?i.responseURL:t.headers.get("X-Request-URL");var e="response"in i?i.response:i.responseText;r(new I(e,t))},i.onerror=function(){t(new TypeError("Network request failed"))},i.ontimeout=function(){t(new TypeError("Network request failed"))},i.open(e.method,e.url,!0),"include"===e.credentials?i.withCredentials=!0:"omit"===e.credentials&&(i.withCredentials=!1),"responseType"in i&&s&&(i.responseType="blob"),e.headers.forEach(function(t,e){i.setRequestHeader(e,t)}),i.send(void 0===e._bodyInit?null:e._bodyInit)})},t.fetch.polyfill=!0)}("undefined"!=typeof self?self:void 0);var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t){var e={exports:{}};return t(e,e.exports),e.exports}function v(t){try{return!!t()}catch(t){return!0}}function g(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function r(t){return d.call(t).slice(8,-1)}function s(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function u(t){return _(s(t))}function y(t){return"object"==typeof t?null!==t:"function"==typeof t}function i(t,e){if(!y(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!y(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!y(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!y(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function c(t,e){return I.call(t,e)}function n(t){return E?T.createElement(t):{}}function m(t){if(!y(t))throw TypeError(String(t)+" is not an object");return t}function h(e,n){try{R(b,e,n)}catch(t){b[e]=n}return n}var o=function(t){return t&&t.Math==Math&&t},b=o("object"==typeof globalThis&&globalThis)||o("object"==typeof window&&window)||o("object"==typeof self&&self)||o("object"==typeof t&&t)||function(){return this}()||Function("return this")(),f=!v(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),a={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,p={f:l&&!a.call({1:2},1)?function(t){t=l(this,t);return!!t&&t.enumerable}:a},d={}.toString,w="".split,_=v(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==r(t)?w.call(t,""):Object(t)}:Object,I={}.hasOwnProperty,T=b.document,E=y(T)&&y(T.createElement),S=!f&&!v(function(){return 7!=Object.defineProperty(n("div"),"a",{get:function(){return 7}}).a}),C=Object.getOwnPropertyDescriptor,A={f:f?C:function(t,e){if(t=u(t),e=i(e,!0),S)try{return C(t,e)}catch(t){}if(c(t,e))return g(!p.f.call(t,e),t[e])}},N=Object.defineProperty,k={f:f?N:function(t,e,n){if(m(t),e=i(e,!0),m(n),S)try{return N(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},R=f?function(t,e,n){return k.f(t,e,g(1,n))}:function(t,e,n){return t[e]=n,t},P="__core-js_shared__",D=b[P]||h(P,{}),O=Function.toString;"function"!=typeof D.inspectSource&&(D.inspectSource=function(t){return O.call(t)});function x(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++Q+Y).toString(36)}var L,M,F,U,j,q,V,B,K=D.inspectSource,G=b.WeakMap,W="function"==typeof G&&/native code/.test(K(G)),H=!1,z=e(function(t){(t.exports=function(t,e){return D[t]||(D[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.1",mode:"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})}),Q=0,Y=Math.random(),X=z("keys"),J=function(t){return X[t]||(X[t]=x(t))},$={},Z=b.WeakMap;V=W?(L=D.state||(D.state=new Z),M=L.get,F=L.has,U=L.set,j=function(t,e){return e.facade=t,U.call(L,t,e),e},q=function(t){return M.call(L,t)||{}},function(t){return F.call(L,t)}):(B=J("state"),$[B]=!0,j=function(t,e){return e.facade=t,R(t,B,e),e},q=function(t){return c(t,B)?t[B]:{}},function(t){return c(t,B)});function tt(t){return"function"==typeof t?t:void 0}function et(t,e){return arguments.length<2?tt(pt[t])||tt(b[t]):pt[t]&&pt[t][e]||b[t]&&b[t][e]}function nt(t){return isNaN(t=+t)?0:(0<t?gt:dt)(t)}function rt(t){return 0<t?vt(nt(t),9007199254740991):0}function it(t,e){var n,r=u(t),i=0,o=[];for(n in r)!c($,n)&&c(r,n)&&o.push(n);for(;e.length>i;)c(r,n=e[i++])&&(~wt(o,n)||o.push(n));return o}function ot(t,e){for(var n=St(e),r=k.f,i=A.f,o=0;o<n.length;o++){var s=n[o];c(t,s)||r(t,s,i(e,s))}}function st(t,e){var n,r,i,o=t.target,s=t.global,a=t.stat,u=s?b:a?b[o]||h(o,{}):(b[o]||{}).prototype;if(u)for(n in e){if(r=e[n],i=t.noTargetGet?(i=Dt(u,n))&&i.value:u[n],!Pt(s?n:o+(a?".":"#")+n,t.forced)&&void 0!==i){if(typeof r==typeof i)continue;ot(r,i)}(t.sham||i&&i.sham)&&R(r,"sham",!0),ft(u,n,r,t)}}function at(t){return Object(s(t))}function ut(){}function ct(t){return"<script>"+t+"</"+Vt+">"}var ht,lt={set:j,get:q,has:V,enforce:function(t){return V(t)?q(t):j(t,{})},getterFor:function(n){return function(t){var e;if(!y(t)||(e=q(t)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return e}}},ft=e(function(t){var e=lt.get,a=lt.enforce,u=String(String).split("String");(t.exports=function(t,e,n,r){var i=!!r&&!!r.unsafe,o=!!r&&!!r.enumerable,s=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof e||c(n,"name")||R(n,"name",e),(r=a(n)).source||(r.source=u.join("string"==typeof e?e:""))),t!==b?(i?!s&&t[e]&&(o=!0):delete t[e],o?t[e]=n:R(t,e,n)):o?t[e]=n:h(e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||K(this)})}),pt=b,dt=Math.ceil,gt=Math.floor,vt=Math.min,yt=Math.max,mt=Math.min,bt=function(a){return function(t,e,n){var r,i=u(t),o=rt(i.length),s=function(t,e){t=nt(t);return t<0?yt(t+e,0):mt(t,e)}(n,o);if(a&&e!=e){for(;s<o;)if((r=i[s++])!=r)return!0}else for(;s<o;s++)if((a||s in i)&&i[s]===e)return a||s||0;return!a&&-1}},wt={includes:bt(!0),indexOf:bt(!1)}.indexOf,_t=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],It=_t.concat("length","prototype"),Tt={f:Object.getOwnPropertyNames||function(t){return it(t,It)}},Et={f:Object.getOwnPropertySymbols},St=et("Reflect","ownKeys")||function(t){var e=Tt.f(m(t)),n=Et.f;return n?e.concat(n(t)):e},Ct=/#|\.prototype\./,o=function(t,e){t=Nt[At(t)];return t==Rt||t!=kt&&("function"==typeof e?v(e):!!e)},At=o.normalize=function(t){return String(t).replace(Ct,".").toLowerCase()},Nt=o.data={},kt=o.NATIVE="N",Rt=o.POLYFILL="P",Pt=o,Dt=A.f,t=!v(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),Ot=J("IE_PROTO"),xt=Object.prototype,Lt=t?Object.getPrototypeOf:function(t){return t=at(t),c(t,Ot)?t[Ot]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?xt:null},Mt=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,t={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),r=t instanceof Array}catch(t){}return function(t,e){return m(t),function(t){if(!y(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(e),r?n.call(t,e):t.__proto__=e,t}}():void 0),Ft=Object.keys||function(t){return it(t,_t)},Ut=f?Object.defineProperties:function(t,e){m(t);for(var n,r=Ft(e),i=r.length,o=0;o<i;)k.f(t,n=r[o++],e[n]);return t},jt=et("document","documentElement"),qt="prototype",Vt="script",Bt=J("IE_PROTO"),Kt=function(){try{ht=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t;Kt=ht?function(t){t.write(ct("")),t.close();var e=t.parentWindow.Object;return t=null,e}(ht):((t=n("iframe")).style.display="none",jt.appendChild(t),t.src=String("javascript:"),(t=t.contentWindow.document).open(),t.write(ct("document.F=Object")),t.close(),t.F);for(var e=_t.length;e--;)delete Kt[qt][_t[e]];return Kt()};$[Bt]=!0;function Gt(t){return c(Xt,t)||(Yt&&c(Jt,t)?Xt[t]=Jt[t]:Xt[t]=$t("Symbol."+t)),Xt[t]}function Wt(t){return void 0!==t&&(Zt.Array===t||ee[te]===t)}function Ht(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}function zt(r,i,t){if(Ht(r),void 0===i)return r;switch(t){case 0:return function(){return r.call(i)};case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}}var Qt=Object.create||function(t,e){var n;return null!==t?(ut[qt]=m(t),n=new ut,ut[qt]=null,n[Bt]=t):n=Kt(),void 0===e?n:Ut(n,e)},Yt=!!Object.getOwnPropertySymbols&&!v(function(){return!String(Symbol())}),a=Yt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Xt=z("wks"),Jt=b.Symbol,$t=a?Jt:Jt&&Jt.withoutSetter||x,Zt={},te=Gt("iterator"),ee=Array.prototype,P={};P[Gt("toStringTag")]="z";function ne(t){if(null!=t)return t[ce]||t["@@iterator"]||Zt[ue(t)]}function re(t){var e=t.return;return void 0!==e&&m(e.call(t)).value}function ie(t,e){this.stopped=t,this.result=e}function oe(t,e,n){function r(t){return o&&re(o),new ie(!0,t)}function i(t){return f?(m(t),d?g(t[0],t[1],r):g(t[0],t[1])):d?g(t,r):g(t)}var o,s,a,u,c,h,l=n&&n.that,f=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_ITERATOR),d=!(!n||!n.INTERRUPTED),g=zt(e,l,1+f+d);if(p)o=t;else{if("function"!=typeof(p=ne(t)))throw TypeError("Target is not iterable");if(Wt(p)){for(s=0,a=rt(t.length);s<a;s++)if((u=i(t[s]))&&u instanceof ie)return u;return new ie(!1)}o=p.call(t)}for(c=o.next;!(h=c.call(o)).done;){try{u=i(h.value)}catch(t){throw re(o),t}if("object"==typeof u&&u&&u instanceof ie)return u}return new ie(!1)}var G="[object z]"===String(P),se=Gt("toStringTag"),ae="Arguments"==r(function(){return arguments}()),ue=G?r:function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(t=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),se))?t:ae?r(e):"Object"==(t=r(e))&&"function"==typeof e.callee?"Arguments":t},ce=Gt("iterator"),he=function(t,e){var n=this;if(!(n instanceof he))return new he(t,e);Mt&&(n=Mt(new Error(void 0),Lt(n))),void 0!==e&&R(n,"message",String(e));e=[];return oe(t,e.push,{that:e}),R(n,"errors",e),n};he.prototype=Qt(Error.prototype,{constructor:g(5,he),message:g(5,""),name:g(5,"AggregateError")}),st({global:!0},{AggregateError:he});W=G?{}.toString:function(){return"[object "+ue(this)+"]"};G||ft(Object.prototype,"toString",W,{unsafe:!0});function le(t,e,n){for(var r in e)ft(t,r,e[r],n);return t}function fe(t,e,n){t&&!c(t=n?t:t.prototype,ye)&&ve(t,ye,{configurable:!0,value:e})}function pe(t){var e=et(t),t=k.f;f&&e&&!e[me]&&t(e,me,{configurable:!0,get:function(){return this}})}function de(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}var ge=b.Promise,ve=k.f,ye=Gt("toStringTag"),me=Gt("species"),be=Gt("iterator"),we=!1;try{var _e=0,Ie={next:function(){return{done:!!_e++}},return:function(){we=!0}};Ie[be]=function(){return this},Array.from(Ie,function(){throw 2})}catch(Ms){}function Te(t,e){if(!e&&!we)return!1;var n=!1;try{var r={};r[be]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}function Ee(t,e){var n;return void 0===(t=m(t).constructor)||null==(n=m(t)[Ne])?e:Ht(n)}function Se(t){var e;xe.hasOwnProperty(t)&&(e=xe[t],delete xe[t],e())}function Ce(t){return function(){Se(t)}}var Ae,Ne=Gt("species"),Z=et("navigator","userAgent")||"",bt=/(iphone|ipod|ipad).*applewebkit/i.test(Z),ke="process"==r(b.process),Re=b.location,o=b.setImmediate,t=b.clearImmediate,Pe=b.process,P=b.MessageChannel,De=b.Dispatch,Oe=0,xe={},Le="onreadystatechange",G=function(t){Se(t.data)},W=function(t){b.postMessage(t+"",Re.protocol+"//"+Re.host)};o&&t||(o=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return xe[++Oe]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},Ae(Oe),Oe},t=function(t){delete xe[t]},ke?Ae=function(t){Pe.nextTick(Ce(t))}:De&&De.now?Ae=function(t){De.now(Ce(t))}:P&&!bt?(Ge=(P=new P).port2,P.port1.onmessage=G,Ae=zt(Ge.postMessage,Ge,1)):b.addEventListener&&"function"==typeof postMessage&&!b.importScripts&&Re&&"file:"!==Re.protocol&&!v(W)?(Ae=W,b.addEventListener("message",G,!1)):Ae=Le in n("script")?function(t){jt.appendChild(n("script"))[Le]=function(){jt.removeChild(this),Se(t)}}:function(t){setTimeout(Ce(t),0)});var Me,Fe,Ue,je,qe,Ve,Be,Ke,Ge={set:o,clear:t},W=A.f,We=Ge.set,G=b.MutationObserver||b.WebKitMutationObserver,o=b.document,He=b.process,t=b.Promise,W=W(b,"queueMicrotask"),W=W&&W.value;W||(Me=function(){var t,e;for(ke&&(t=He.domain)&&t.exit();Fe;){e=Fe.fn,Fe=Fe.next;try{e()}catch(t){throw Fe?je():Ue=void 0,t}}Ue=void 0,t&&t.enter()},je=!bt&&!ke&&G&&o?(qe=!0,Ve=o.createTextNode(""),new G(Me).observe(Ve,{characterData:!0}),function(){Ve.data=qe=!qe}):t&&t.resolve?(Be=t.resolve(void 0),Ke=Be.then,function(){Ke.call(Be,Me)}):ke?function(){He.nextTick(Me)}:function(){We.call(b,Me)});function ze(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=Ht(n),this.reject=Ht(r)}function Qe(t,e){return m(t),y(e)&&e.constructor===t?e:((0,(t=Je.f(t)).resolve)(e),t.promise)}function Ye(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}var Xe=W||function(t){t={fn:t,next:void 0};Ue&&(Ue.next=t),Fe||(Fe=t,je()),Ue=t},Je={f:function(t){return new ze(t)}},W=b.process,W=W&&W.versions,W=W&&W.v8;W?Pn=(Sn=W.split("."))[0]+Sn[1]:Z&&(!(Sn=Z.match(/Edge\/(\d+)/))||74<=Sn[1])&&(Sn=Z.match(/Chrome\/(\d+)/))&&(Pn=Sn[1]);function $e(t){var e;return!(!y(t)||"function"!=typeof(e=t.then))&&e}function Ze(l,f){var p;l.notified||(l.notified=!0,p=l.reactions,Xe(function(){for(var t=l.value,e=1==l.state,n=0;p.length>n;){var r,i,o,s=p[n++],a=e?s.ok:s.fail,u=s.resolve,c=s.reject,h=s.domain;try{a?(e||(2===l.rejection&&Nn(l),l.rejection=1),!0===a?r=t:(h&&h.enter(),r=a(t),h&&(h.exit(),o=!0)),r===s.promise?c(vn("Promise-chain cycle")):(i=$e(r))?i.call(r,u,c):u(r)):c(t)}catch(t){h&&!o&&h.exit(),c(t)}}l.reactions=[],l.notified=!1,f&&!l.rejection&&Cn(l)}))}function tn(t,e,n){var r,i;In?((r=yn.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),b.dispatchEvent(r)):r={promise:e,reason:n},!Tn&&(i=b["on"+t])?i(r):t===En&&function(t,e){var n=b.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)}function en(e,n,r){return function(t){e(n,t,r)}}function nn(t,e,n){t.done||(t.done=!0,(t=n?n:t).value=e,t.state=2,Ze(t,!0))}var rn,on,sn,an,un=Pn&&+Pn,cn=Ge.set,hn=Gt("species"),ln="Promise",fn=lt.get,pn=lt.set,dn=lt.getterFor(ln),gn=ge,vn=b.TypeError,yn=b.document,mn=b.process,bn=et("fetch"),wn=Je.f,_n=wn,In=!!(yn&&yn.createEvent&&b.dispatchEvent),Tn="function"==typeof PromiseRejectionEvent,En="unhandledrejection",Z=Pt(ln,function(){if(!(K(gn)!==String(gn))){if(66===un)return!0;if(!ke&&!Tn)return!0}if(51<=un&&/native code/.test(gn))return!1;function t(t){t(function(){},function(){})}var e=gn.resolve(1);return(e.constructor={})[hn]=t,!(e.then(function(){})instanceof t)}),Sn=Z||!Te(function(t){gn.all(t).catch(function(){})}),Cn=function(i){cn.call(b,function(){var t,e=i.facade,n=i.value,r=An(i);if(r&&(t=Ye(function(){ke?mn.emit("unhandledRejection",n,e):tn(En,e,n)}),i.rejection=ke||An(i)?2:1,t.error))throw t.value})},An=function(t){return 1!==t.rejection&&!t.parent},Nn=function(e){cn.call(b,function(){var t=e.facade;ke?mn.emit("rejectionHandled",t):tn("rejectionhandled",t,e.value)})},kn=function(n,t,e){if(!n.done){n.done=!0,e&&(n=e);try{if(n.facade===t)throw vn("Promise can't be resolved itself");var r=$e(t);r?Xe(function(){var e={done:!1};try{r.call(t,en(kn,e,n),en(nn,e,n))}catch(t){nn(e,t,n)}}):(n.value=t,n.state=1,Ze(n,!1))}catch(t){nn({done:!1},t,n)}}};Z&&(gn=function(t){de(this,gn,ln),Ht(t),rn.call(this);var e=fn(this);try{t(en(kn,e),en(nn,e))}catch(t){nn(e,t)}},(rn=function(t){pn(this,{type:ln,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=le(gn.prototype,{then:function(t,e){var n=dn(this),r=wn(Ee(this,gn));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=ke?mn.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Ze(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),on=function(){var t=new rn,e=fn(t);this.promise=t,this.resolve=en(kn,e),this.reject=en(nn,e)},Je.f=wn=function(t){return t===gn||t===sn?new on:_n(t)},"function"==typeof ge&&(an=ge.prototype.then,ft(ge.prototype,"then",function(t,e){var n=this;return new gn(function(t,e){an.call(n,t,e)}).then(t,e)},{unsafe:!0}),"function"==typeof bn&&st({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return Qe(gn,bn.apply(b,arguments))}}))),st({global:!0,wrap:!0,forced:Z},{Promise:gn}),fe(gn,ln,!1),pe(ln),sn=et(ln),st({target:ln,stat:!0,forced:Z},{reject:function(t){var e=wn(this);return e.reject.call(void 0,t),e.promise}}),st({target:ln,stat:!0,forced:Z},{resolve:function(t){return Qe(this,t)}}),st({target:ln,stat:!0,forced:Sn},{all:function(t){var a=this,e=wn(a),u=e.resolve,c=e.reject,n=Ye(function(){var r=Ht(a.resolve),i=[],o=0,s=1;oe(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]=t,--s||u(i))},c)}),--s||u(i)});return n.error&&c(n.value),e.promise},race:function(t){var n=this,r=wn(n),i=r.reject,e=Ye(function(){var e=Ht(n.resolve);oe(t,function(t){e.call(n,t).then(r.resolve,i)})});return e.error&&i(e.value),r.promise}}),st({target:"Promise",stat:!0},{allSettled:function(t){var a=this,e=Je.f(a),u=e.resolve,n=e.reject,r=Ye(function(){var r=Ht(a.resolve),i=[],o=0,s=1;oe(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]={status:"fulfilled",value:t},--s||u(i))},function(t){n||(n=!0,i[e]={status:"rejected",reason:t},--s||u(i))})}),--s||u(i)});return r.error&&n(r.value),e.promise}});var Rn="No one promise resolved";st({target:"Promise",stat:!0},{any:function(t){var u=this,e=Je.f(u),c=e.resolve,h=e.reject,n=Ye(function(){var r=Ht(u.resolve),i=[],o=0,s=1,a=!1;oe(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(u,t).then(function(t){n||a||(a=!0,c(t))},function(t){n||a||(n=!0,i[e]=t,--s||h(new(et("AggregateError"))(i,Rn)))})}),--s||h(new(et("AggregateError"))(i,Rn))});return n.error&&h(n.value),e.promise}});var Pn=!!ge&&v(function(){ge.prototype.finally.call({then:function(){}},function(){})});st({target:"Promise",proto:!0,real:!0,forced:Pn},{finally:function(e){var n=Ee(this,et("Promise")),t="function"==typeof e;return this.then(t?function(t){return Qe(n,e()).then(function(){return t})}:e,t?function(t){return Qe(n,e()).then(function(){throw t})}:e)}}),"function"!=typeof ge||ge.prototype.finally||ft(ge.prototype,"finally",et("Promise").prototype.finally);Ge=function(o){return function(t,e){var n,r=String(s(t)),i=nt(e),t=r.length;return i<0||t<=i?o?"":void 0:(e=r.charCodeAt(i))<55296||56319<e||i+1===t||(n=r.charCodeAt(i+1))<56320||57343<n?o?r.charAt(i):e:o?r.slice(i,i+2):n-56320+(e-55296<<10)+65536}},Z={codeAt:Ge(!1),charAt:Ge(!0)},Sn=Gt("iterator"),Pn=!1;[].keys&&("next"in(Qn=[].keys())?(lr=Lt(Lt(Qn)))!==Object.prototype&&(dr=lr):Pn=!0),c(dr=null==dr?{}:dr,Sn)||R(dr,Sn,function(){return this});function Dn(){return this}function On(){return this}function xn(t,e,n,r,i,o,s){function a(t){if(t===i&&d)return d;if(!Fn&&t in f)return f[t];switch(t){case"keys":case jn:case qn:return function(){return new n(this,t)}}return function(){return new n(this)}}!function(t,e,n){e+=" Iterator";t.prototype=Qt(Ln,{next:g(1,n)}),fe(t,e,!1),Zt[e]=Dn}(n,e,r);var u,c,h=e+" Iterator",l=!1,f=t.prototype,p=f[Un]||f["@@iterator"]||i&&f[i],d=!Fn&&p||a(i);if((r="Array"==e&&f.entries||p)&&(t=Lt(r.call(new t)),Mn!==Object.prototype&&t.next&&(Lt(t)!==Mn&&(Mt?Mt(t,Mn):"function"!=typeof t[Un]&&R(t,Un,On)),fe(t,h,!0))),i==jn&&p&&p.name!==jn&&(l=!0,d=function(){return p.call(this)}),f[Un]!==d&&R(f,Un,d),Zt[e]=d,i)if(u={values:a(jn),keys:o?d:a("keys"),entries:a(qn)},s)for(c in u)!Fn&&!l&&c in f||ft(f,c,u[c]);else st({target:e,proto:!0,forced:Fn||l},u);return u}var Ge={IteratorPrototype:dr,BUGGY_SAFARI_ITERATORS:Pn},Ln=Ge.IteratorPrototype,Mn=Ge.IteratorPrototype,Fn=Ge.BUGGY_SAFARI_ITERATORS,Un=Gt("iterator"),jn="values",qn="entries",Vn=Z.charAt,Bn="String Iterator",Kn=lt.set,Gn=lt.getterFor(Bn);xn(String,"String",function(t){Kn(this,{type:Bn,string:String(t),index:0})},function(){var t=Gn(this),e=t.string,n=t.index;return n>=e.length?{value:void 0,done:!0}:(n=Vn(e,n),t.index+=n.length,{value:n,done:!1})});var Wn={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Hn=Gt("unscopables"),zn=Array.prototype;null==zn[Hn]&&k.f(zn,Hn,{configurable:!0,value:Qt(null)});var Qn=function(t){zn[Hn][t]=!0},Yn="Array Iterator",Xn=lt.set,Jn=lt.getterFor(Yn),$n=xn(Array,"Array",function(t,e){Xn(this,{type:Yn,target:u(t),index:0,kind:e})},function(){var t=Jn(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values");Zt.Arguments=Zt.Array,Qn("keys"),Qn("values"),Qn("entries");var Zn,tr=Gt("iterator"),er=Gt("toStringTag"),nr=$n.values;for(Zn in Wn){var rr=b[Zn],ir=rr&&rr.prototype;if(ir){if(ir[tr]!==nr)try{R(ir,tr,nr)}catch(Ms){ir[tr]=nr}if(ir[er]||R(ir,er,Zn),Wn[Zn])for(var or in $n)if(ir[or]!==$n[or])try{R(ir,or,$n[or])}catch(Ms){ir[or]=$n[or]}}}pt.Promise;st({target:"Promise",stat:!0},{try:function(t){var e=Je.f(this),t=Ye(t);return(t.error?e.reject:e.resolve)(t.value),e.promise}});function sr(t,e){var n;return new(void 0===(n=ur(t)&&("function"==typeof(n=t.constructor)&&(n===Array||ur(n.prototype))||y(n)&&null===(n=n[cr]))?void 0:n)?Array:n)(0===e?0:e)}function ar(t){throw t}var ur=Array.isArray||function(t){return"Array"==r(t)},cr=Gt("species"),hr=[].push,lr=function(f){var p=1==f,d=2==f,g=3==f,v=4==f,y=6==f,m=7==f,b=5==f||y;return function(t,e,n,r){for(var i,o,s=at(t),a=_(s),u=zt(e,n,3),c=rt(a.length),h=0,r=r||sr,l=p?r(t,c):d||m?r(t,0):void 0;h<c;h++)if((b||h in a)&&(o=u(i=a[h],h,s),f))if(p)l[h]=o;else if(o)switch(f){case 3:return!0;case 5:return i;case 6:return h;case 2:hr.call(l,i)}else switch(f){case 4:return!1;case 7:hr.call(l,i)}return y?-1:g||v?v:l}},Sn={forEach:lr(0),map:lr(1),filter:lr(2),some:lr(3),every:lr(4),find:lr(5),findIndex:lr(6),filterOut:lr(7)},fr=Object.defineProperty,pr={},dr=function(t,e){if(c(pr,t))return pr[t];var n=[][t],r=!!c(e=e||{},"ACCESSORS")&&e.ACCESSORS,i=c(e,0)?e[0]:ar,o=c(e,1)?e[1]:void 0;return pr[t]=!!n&&!v(function(){if(r&&!f)return 1;var t={length:-1};r?fr(t,1,{enumerable:!0,get:ar}):t[1]=1,n.call(t,i,o)})},gr=Sn.find,Pn="find",vr=!0,Ge=dr(Pn);Pn in[]&&Array(1)[Pn](function(){vr=!1}),st({target:"Array",proto:!0,forced:vr||!Ge},{find:function(t){return gr(this,t,1<arguments.length?arguments[1]:void 0)}}),Qn(Pn);var yr=Function.call,Z=function(t,e,n){return zt(yr,b[t].prototype[e],n)},mr=(Z("Array","find"),Sn.findIndex),lr="findIndex",br=!0,Ge=dr(lr);lr in[]&&Array(1)[lr](function(){br=!1}),st({target:"Array",proto:!0,forced:br||!Ge},{findIndex:function(t){return mr(this,t,1<arguments.length?arguments[1]:void 0)}}),Qn(lr);function wr(t,e,n){(e=i(e))in t?k.f(t,e,g(0,n)):t[e]=n}Z("Array","findIndex");Pn=!Te(function(t){Array.from(t)});st({target:"Array",stat:!0,forced:Pn},{from:function(t){var e,n,r,i,o,s,a=at(t),u="function"==typeof this?this:Array,c=arguments.length,h=1<c?arguments[1]:void 0,l=void 0!==h,t=ne(a),f=0;if(l&&(h=zt(h,2<c?arguments[2]:void 0,2)),null==t||u==Array&&Wt(t))for(n=new u(e=rt(a.length));f<e;f++)s=l?h(a[f],f):a[f],wr(n,f,s);else for(o=(i=t.call(a)).next,n=new u;!(r=o.call(i)).done;f++)s=l?function(e,t,n,r){try{return r?t(m(n)[0],n[1]):t(n)}catch(t){throw re(e),t}}(i,h,[r.value,f],!0):r.value,wr(n,f,s);return n.length=f,n}});pt.Array.from;var _r,Ir,Tr=Sn.some,Ge=!!(Ir=[]["some"])&&v(function(){Ir.call(null,_r||function(){throw 1},1)}),Qn=dr("some");st({target:"Array",proto:!0,forced:!Ge||!Qn},{some:function(t){return Tr(this,t,1<arguments.length?arguments[1]:void 0)}});Z("Array","some");function Er(t){return!!y(t)&&(t=ue(t),c(Dr,t)||c(Or,t))}var Sr,lr="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,Pn=k.f,Cr=b.Int8Array,Ar=Cr&&Cr.prototype,dr=b.Uint8ClampedArray,Ge=dr&&dr.prototype,Nr=Cr&&Lt(Cr),kr=Ar&&Lt(Ar),Qn=Object.prototype,dr=(Qn.isPrototypeOf,Gt("toStringTag")),Rr=x("TYPED_ARRAY_TAG"),Pr=lr&&!!Mt&&"Opera"!==ue(b.opera),lr=!1,Dr={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Or={BigInt64Array:8,BigUint64Array:8};for(Sr in Dr)b[Sr]||(Pr=!1);if((!Pr||"function"!=typeof Nr||Nr===Function.prototype)&&(Nr=function(){throw TypeError("Incorrect invocation")},Pr))for(Sr in Dr)b[Sr]&&Mt(b[Sr],Nr);if((!Pr||!kr||kr===Qn)&&(kr=Nr.prototype,Pr))for(Sr in Dr)b[Sr]&&Mt(b[Sr].prototype,kr);if(Pr&&Lt(Ge)!==kr&&Mt(Ge,kr),f&&!c(kr,dr))for(Sr in lr=!0,Pn(kr,dr,{get:function(){return y(this)?this[Rr]:void 0}}),Dr)b[Sr]&&R(b[Sr],Rr,Sr);var Ge=function(t){if(Er(t))return t;throw TypeError("Target is not a typed array")},Pn=function(t,e,n){if(f){if(n)for(var r in Dr){r=b[r];r&&c(r.prototype,t)&&delete r.prototype[t]}kr[t]&&!n||ft(kr,t,!n&&Pr&&Ar[t]||e)}},dr=Gt("iterator"),lr=b.Uint8Array,xr=$n.values,Lr=$n.keys,Mr=$n.entries,Fr=Ge,Ge=Pn,Pn=lr&&lr.prototype[dr],lr=!!Pn&&("values"==Pn.name||null==Pn.name),Pn=function(){return xr.call(Fr(this))};Ge("entries",function(){return Mr.call(Fr(this))}),Ge("keys",function(){return Lr.call(Fr(this))}),Ge("values",Pn,!lr),Ge(dr,Pn,!lr);var Ur=Object.assign,jr=Object.defineProperty,Pn=!Ur||v(function(){if(f&&1!==Ur({b:1},Ur(jr({},"a",{enumerable:!0,get:function(){jr(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return 1;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=Ur({},t)[n]||Ft(Ur({},e)).join("")!=r})?function(t,e){for(var n=at(t),r=arguments.length,i=1,o=Et.f,s=p.f;i<r;)for(var a,u=_(arguments[i++]),c=o?Ft(u).concat(o(u)):Ft(u),h=c.length,l=0;l<h;)a=c[l++],f&&!s.call(u,a)||(n[a]=u[a]);return n}:Ur;st({target:"Object",stat:!0,forced:Object.assign!==Pn},{assign:Pn});pt.Object.assign;var qr=p.f,lr=function(a){return function(t){for(var e,n=u(t),r=Ft(n),i=r.length,o=0,s=[];o<i;)e=r[o++],f&&!qr.call(n,e)||s.push(a?[e,n[e]]:n[e]);return s}},Pn={entries:lr(!0),values:lr(!1)},Vr=Pn.entries;st({target:"Object",stat:!0},{entries:function(t){return Vr(t)}});pt.Object.entries;var Br=Pn.values;st({target:"Object",stat:!0},{values:function(t){return Br(t)}});pt.Object.values;function Kr(t){if(y(e=t)&&(void 0!==(n=e[Gr])?!!n:"RegExp"==r(e)))throw TypeError("The method doesn't accept regular expressions");var e,n;return t}var Gr=Gt("match"),Wr=Gt("match"),lr=function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[Wr]=!1,"/./"[e](n)}catch(t){}}return!1};st({target:"String",proto:!0,forced:!lr("includes")},{includes:function(t){return!!~String(s(this)).indexOf(Kr(t),1<arguments.length?arguments[1]:void 0)}});Z("String","includes");var Hr,Pn=A.f,zr="".startsWith,Qr=Math.min,lr=lr("startsWith"),Hr=!(lr||(!(Hr=Pn(String.prototype,"startsWith"))||Hr.writable));st({target:"String",proto:!0,forced:!Hr&&!lr},{startsWith:function(t){var e=String(s(this));Kr(t);var n=rt(Qr(1<arguments.length?arguments[1]:void 0,e.length)),t=String(t);return zr?zr.call(e,t,n):e.slice(n,n+t.length)===t}});Z("String","startsWith");st({target:"String",proto:!0},{repeat:"".repeat||function(t){var e=String(s(this)),n="",r=nt(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;0<r;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}});Z("String","repeat");var Yr,Xr=Gt("species"),Jr=Gt("isConcatSpreadable"),$r=9007199254740991,Zr="Maximum allowed index exceeded",lr=51<=un||!v(function(){var t=[];return t[Jr]=!1,t.concat()[0]!==t}),Z=(Yr="concat",51<=un||!v(function(){var t=[];return(t.constructor={})[Xr]=function(){return{foo:1}},1!==t[Yr](Boolean).foo}));st({target:"Array",proto:!0,forced:!lr||!Z},{concat:function(t){for(var e,n,r,i=at(this),o=sr(i,0),s=0,a=-1,u=arguments.length;a<u;a++)if(function(t){if(!y(t))return!1;var e=t[Jr];return void 0!==e?!!e:ur(t)}(r=-1===a?i:arguments[a])){if(n=rt(r.length),$r<s+n)throw TypeError(Zr);for(e=0;e<n;e++,s++)e in r&&wr(o,s,r[e])}else{if($r<=s)throw TypeError(Zr);wr(o,s++,r)}return o.length=s,o}});function ti(t){var e=pt.Symbol||(pt.Symbol={});c(e,t)||ai(e,t,{value:si.f(t)})}function ei(t,e){var n=_i[t]=Qt(gi[li]);return fi(n,{type:hi,tag:t,description:e}),f||(n.description=e),n}function ni(e,t){m(e);var n=u(t),t=Ft(n).concat(Ri(n));return ui(t,function(t){f&&!ki.call(n,t)||Ni(e,t,n[t])}),e}var ri=Tt.f,ii={}.toString,oi="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Z={f:function(t){return oi&&"[object Window]"==ii.call(t)?function(t){try{return ri(t)}catch(t){return oi.slice()}}(t):ri(u(t))}},si={f:Gt},ai=k.f,ui=Sn.forEach,ci=J("hidden"),hi="Symbol",li="prototype",Sn=Gt("toPrimitive"),fi=lt.set,pi=lt.getterFor(hi),di=Object[li],gi=b.Symbol,vi=et("JSON","stringify"),yi=A.f,mi=k.f,bi=Z.f,wi=p.f,_i=z("symbols"),Ii=z("op-symbols"),Ti=z("string-to-symbol-registry"),Ei=z("symbol-to-string-registry"),J=z("wks"),z=b.QObject,Si=!z||!z[li]||!z[li].findChild,Ci=f&&v(function(){return 7!=Qt(mi({},"a",{get:function(){return mi(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=yi(di,e);r&&delete di[e],mi(t,e,n),r&&t!==di&&mi(di,e,r)}:mi,Ai=a?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof gi},Ni=function(t,e,n){t===di&&Ni(Ii,e,n),m(t);e=i(e,!0);return m(n),c(_i,e)?(n.enumerable?(c(t,ci)&&t[ci][e]&&(t[ci][e]=!1),n=Qt(n,{enumerable:g(0,!1)})):(c(t,ci)||mi(t,ci,g(1,{})),t[ci][e]=!0),Ci(t,e,n)):mi(t,e,n)},ki=function(t){var e=i(t,!0),t=wi.call(this,e);return!(this===di&&c(_i,e)&&!c(Ii,e))&&(!(t||!c(this,e)||!c(_i,e)||c(this,ci)&&this[ci][e])||t)},z=function(t,e){var n=u(t),t=i(e,!0);if(n!==di||!c(_i,t)||c(Ii,t)){e=yi(n,t);return!e||!c(_i,t)||c(n,ci)&&n[ci][t]||(e.enumerable=!0),e}},a=function(t){var t=bi(u(t)),e=[];return ui(t,function(t){c(_i,t)||c($,t)||e.push(t)}),e},Ri=function(t){var e=t===di,t=bi(e?Ii:u(t)),n=[];return ui(t,function(t){!c(_i,t)||e&&!c(di,t)||n.push(_i[t])}),n};Yt||(ft((gi=function(){if(this instanceof gi)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=x(t),n=function(t){this===di&&n.call(Ii,t),c(this,ci)&&c(this[ci],e)&&(this[ci][e]=!1),Ci(this,e,g(1,t))};return f&&Si&&Ci(di,e,{configurable:!0,set:n}),ei(e,t)})[li],"toString",function(){return pi(this).tag}),ft(gi,"withoutSetter",function(t){return ei(x(t),t)}),p.f=ki,k.f=Ni,A.f=z,Tt.f=Z.f=a,Et.f=Ri,si.f=function(t){return ei(Gt(t),t)},f&&(mi(gi[li],"description",{configurable:!0,get:function(){return pi(this).description}}),ft(di,"propertyIsEnumerable",ki,{unsafe:!0}))),st({global:!0,wrap:!0,forced:!Yt,sham:!Yt},{Symbol:gi}),ui(Ft(J),function(t){ti(t)}),st({target:hi,stat:!0,forced:!Yt},{for:function(t){var e=String(t);if(c(Ti,e))return Ti[e];t=gi(e);return Ti[e]=t,Ei[t]=e,t},keyFor:function(t){if(!Ai(t))throw TypeError(t+" is not a symbol");if(c(Ei,t))return Ei[t]},useSetter:function(){Si=!0},useSimple:function(){Si=!1}}),st({target:"Object",stat:!0,forced:!Yt,sham:!f},{create:function(t,e){return void 0===e?Qt(t):ni(Qt(t),e)},defineProperty:Ni,defineProperties:ni,getOwnPropertyDescriptor:z}),st({target:"Object",stat:!0,forced:!Yt},{getOwnPropertyNames:a,getOwnPropertySymbols:Ri}),st({target:"Object",stat:!0,forced:v(function(){Et.f(1)})},{getOwnPropertySymbols:function(t){return Et.f(at(t))}}),vi&&(Ki=!Yt||v(function(){var t=gi();return"[null]"!=vi([t])||"{}"!=vi({a:t})||"{}"!=vi(Object(t))}),st({target:"JSON",stat:!0,forced:Ki},{stringify:function(t,e,n){for(var r,i=[t],o=1;o<arguments.length;)i.push(arguments[o++]);if((y(r=e)||void 0!==t)&&!Ai(t))return ur(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!Ai(e))return e}),i[1]=e,vi.apply(null,i)}})),gi[li][Sn]||R(gi[li],Sn,gi[li].valueOf),fe(gi,hi),$[ci]=!0,ti("asyncIterator");var Pi,Di,Oi,xi,Li,z=k.f,Mi=b.Symbol;!f||"function"!=typeof Mi||"description"in Mi.prototype&&void 0===Mi().description||(Pi={},ot(Di=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof Di?new Mi(t):void 0===t?Mi():Mi(t);return""===t&&(Pi[e]=!0),e},Mi),(Hi=Di.prototype=Mi.prototype).constructor=Di,Oi=Hi.toString,xi="Symbol(test)"==String(Mi("test")),Li=/^Symbol\((.*)\)[^)]+$/,z(Hi,"description",{configurable:!0,get:function(){var t=y(this)?this.valueOf():this,e=Oi.call(t);if(c(Pi,t))return"";e=xi?e.slice(7,-1):e.replace(Li,"$1");return""===e?void 0:e}}),st({global:!0,forced:!0},{Symbol:Di})),ti("hasInstance"),ti("isConcatSpreadable"),ti("iterator"),ti("match"),ti("matchAll"),ti("replace"),ti("search"),ti("species"),ti("split"),ti("toPrimitive"),ti("toStringTag"),ti("unscopables"),fe(b.JSON,"JSON",!0),fe(Math,"Math",!0),st({global:!0},{Reflect:{}}),fe(b.Reflect,"Reflect",!0);pt.Symbol;ti("asyncDispose"),ti("dispose"),ti("observable"),ti("patternMatch"),ti("replaceAll");si.f("iterator");var Fi=!v(function(){return Object.isExtensible(Object.preventExtensions({}))}),Ui=e(function(t){function n(t){e(t,r,{value:{objectID:"O"+ ++i,weakData:{}}})}var e=k.f,r=x("meta"),i=0,o=Object.isExtensible||function(){return!0},s=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!y(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!c(t,r)){if(!o(t))return"F";if(!e)return"E";n(t)}return t[r].objectID},getWeakData:function(t,e){if(!c(t,r)){if(!o(t))return!0;if(!e)return!1;n(t)}return t[r].weakData},onFreeze:function(t){return Fi&&s.REQUIRED&&o(t)&&!c(t,r)&&n(t),t}};$[r]=!0}),a=function(s,t,e){function n(t){var n=p[t];ft(p,t,"add"==t?function(t){return n.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(h&&!y(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return h&&!y(t)?void 0:n.call(this,0===t?0:t)}:"has"==t?function(t){return!(h&&!y(t))&&n.call(this,0===t?0:t)}:function(t,e){return n.call(this,0===t?0:t,e),this})}var r,i,o,a,u,c=-1!==s.indexOf("Map"),h=-1!==s.indexOf("Weak"),l=c?"set":"add",f=b[s],p=f&&f.prototype,d=f,g={};return Pt(s,"function"!=typeof f||!(h||p.forEach&&!v(function(){(new f).entries().next()})))?(d=e.getConstructor(t,s,c,l),Ui.REQUIRED=!0):Pt(s,!0)&&(i=(r=new d)[l](h?{}:-0,1)!=r,o=v(function(){r.has(1)}),a=Te(function(t){new f(t)}),u=!h&&v(function(){for(var t=new f,e=5;e--;)t[l](e,e);return!t.has(-0)}),a||(((d=t(function(t,e){de(t,d,s);var n,r,i,o,n=(n=new f,r=t,t=d,Mt&&"function"==typeof(i=r.constructor)&&i!==t&&y(o=i.prototype)&&o!==t.prototype&&Mt(n,o),n);return null!=e&&oe(e,n[l],{that:n,AS_ENTRIES:c}),n})).prototype=p).constructor=d),(o||u)&&(n("delete"),n("has"),c&&n("get")),(u||i)&&n(l),h&&p.clear&&delete p.clear),g[s]=d,st({global:!0,forced:d!=f},g),fe(d,s),h||e.setStrong(d,s,c),d},ji=k.f,qi=Ui.fastKey,Vi=lt.set,Bi=lt.getterFor,Ki={getConstructor:function(t,n,r,i){function o(t,e,n){var r,i=a(t),o=u(t,e);return o?o.value=n:(i.last=o={index:r=qi(e,!0),key:e,value:n,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=o),n&&(n.next=o),f?i.size++:t.size++,"F"!==r&&(i.index[r]=o)),t}var s=t(function(t,e){de(t,s,n),Vi(t,{type:n,index:Qt(null),first:void 0,last:void 0,size:0}),f||(t.size=0),null!=e&&oe(e,t[i],{that:t,AS_ENTRIES:r})}),a=Bi(n),u=function(t,e){var n,r=a(t),t=qi(e);if("F"!==t)return r.index[t];for(n=r.first;n;n=n.next)if(n.key==e)return n};return le(s.prototype,{clear:function(){for(var t=a(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,f?t.size=0:this.size=0},delete:function(t){var e,n=a(this),r=u(this,t);return r&&(e=r.next,t=r.previous,delete n.index[r.index],r.removed=!0,t&&(t.next=e),e&&(e.previous=t),n.first==r&&(n.first=e),n.last==r&&(n.last=t),f?n.size--:this.size--),!!r},forEach:function(t){for(var e,n=a(this),r=zt(t,1<arguments.length?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!u(this,t)}}),le(s.prototype,r?{get:function(t){t=u(this,t);return t&&t.value},set:function(t,e){return o(this,0===t?0:t,e)}}:{add:function(t){return o(this,t=0===t?0:t,t)}}),f&&ji(s.prototype,"size",{get:function(){return a(this).size}}),s},setStrong:function(t,e,n){var r=e+" Iterator",i=Bi(e),o=Bi(r);xn(t,e,function(t,e){Vi(this,{type:r,target:t,state:i(t),kind:e,last:void 0})},function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:t.target=void 0,done:!0}},n?"entries":"values",!n,!0),pe(e)}},Sn=(a("Map",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},Ki),pt.Map,function(t){var e,n,r,i,o=arguments.length,s=1<o?arguments[1]:void 0;return Ht(this),(e=void 0!==s)&&Ht(s),null==t?new this:(n=[],e?(r=0,i=zt(s,2<o?arguments[2]:void 0,2),oe(t,function(t){n.push(i(t,r++))})):oe(t,n.push,{that:n}),new this(n))});st({target:"Map",stat:!0},{from:Sn});z=function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)};st({target:"Map",stat:!0},{of:z});function Gi(){for(var t,e=m(this),n=Ht(e.delete),r=!0,i=0,o=arguments.length;i<o;i++)t=n.call(e,arguments[i]),r=r&&t;return!!r}st({target:"Map",proto:!0,real:!0,forced:H},{deleteAll:function(){return Gi.apply(this,arguments)}});st({target:"Map",proto:!0,real:!0,forced:H},{emplace:function(t,e){var n=m(this),e=n.has(t)&&"update"in e?e.update(n.get(t),t,n):e.insert(t,n);return n.set(t,e),e}});function Wi(t){return Map.prototype.entries.call(t)}st({target:"Map",proto:!0,real:!0,forced:H},{every:function(t){var r=m(this),e=Wi(r),i=zt(t,1<arguments.length?arguments[1]:void 0,3);return!oe(e,function(t,e,n){if(!i(e,t,r))return n()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),st({target:"Map",proto:!0,real:!0,forced:H},{filter:function(t){var n=m(this),e=Wi(n),r=zt(t,1<arguments.length?arguments[1]:void 0,3),i=new(Ee(n,et("Map"))),o=Ht(i.set);return oe(e,function(t,e){r(e,t,n)&&o.call(i,t,e)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}}),st({target:"Map",proto:!0,real:!0,forced:H},{find:function(t){var r=m(this),e=Wi(r),i=zt(t,1<arguments.length?arguments[1]:void 0,3);return oe(e,function(t,e,n){if(i(e,t,r))return n(e)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),st({target:"Map",proto:!0,real:!0,forced:H},{findKey:function(t){var r=m(this),e=Wi(r),i=zt(t,1<arguments.length?arguments[1]:void 0,3);return oe(e,function(t,e,n){if(i(e,t,r))return n(t)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),st({target:"Map",stat:!0},{groupBy:function(t,n){var r=new this;Ht(n);var i=Ht(r.has),o=Ht(r.get),s=Ht(r.set);return oe(t,function(t){var e=n(t);i.call(r,e)?o.call(r,e).push(t):s.call(r,e,[t])}),r}});st({target:"Map",proto:!0,real:!0,forced:H},{includes:function(i){return oe(Wi(m(this)),function(t,e,n){if((r=e)===(e=i)||r!=r&&e!=e)return n();var r},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),st({target:"Map",stat:!0},{keyBy:function(t,e){var n=new this;Ht(e);var r=Ht(n.set);return oe(t,function(t){r.call(n,e(t),t)}),n}}),st({target:"Map",proto:!0,real:!0,forced:H},{keyOf:function(r){return oe(Wi(m(this)),function(t,e,n){if(e===r)return n(t)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),st({target:"Map",proto:!0,real:!0,forced:H},{mapKeys:function(t){var n=m(this),e=Wi(n),r=zt(t,1<arguments.length?arguments[1]:void 0,3),i=new(Ee(n,et("Map"))),o=Ht(i.set);return oe(e,function(t,e){o.call(i,r(e,t,n),e)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}}),st({target:"Map",proto:!0,real:!0,forced:H},{mapValues:function(t){var n=m(this),e=Wi(n),r=zt(t,1<arguments.length?arguments[1]:void 0,3),i=new(Ee(n,et("Map"))),o=Ht(i.set);return oe(e,function(t,e){o.call(i,t,r(e,t,n))},{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}}),st({target:"Map",proto:!0,real:!0,forced:H},{merge:function(t){for(var e=m(this),n=Ht(e.set),r=0;r<arguments.length;)oe(arguments[r++],n,{that:e,AS_ENTRIES:!0});return e}}),st({target:"Map",proto:!0,real:!0,forced:H},{reduce:function(n){var r=m(this),t=Wi(r),i=arguments.length<2,o=i?void 0:arguments[1];if(Ht(n),oe(t,function(t,e){o=i?(i=!1,e):n(o,e,t,r)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),i)throw TypeError("Reduce of empty map with no initial value");return o}}),st({target:"Map",proto:!0,real:!0,forced:H},{some:function(t){var r=m(this),e=Wi(r),i=zt(t,1<arguments.length?arguments[1]:void 0,3);return oe(e,function(t,e,n){if(i(e,t,r))return n()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),st({target:"Map",proto:!0,real:!0,forced:H},{update:function(t,e){var n=m(this),r=arguments.length;Ht(e);var i=n.has(t);if(!i&&r<3)throw TypeError("Updating absent value");r=i?n.get(t):Ht(2<r?arguments[2]:void 0)(t,n);return n.set(t,e(r,t,n)),n}});var Hi=function(t,e){var n,r=m(this),i=2<arguments.length?arguments[2]:void 0;if("function"!=typeof e&&"function"!=typeof i)throw TypeError("At least one callback required");return r.has(t)?(n=r.get(t),"function"==typeof e&&(n=e(n),r.set(t,n))):"function"==typeof i&&(n=i(),r.set(t,n)),n};st({target:"Map",proto:!0,real:!0,forced:H},{upsert:Hi}),st({target:"Map",proto:!0,real:!0,forced:H},{updateOrInsert:Hi});a("Set",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},Ki),pt.Set;st({target:"Set",stat:!0},{from:Sn}),st({target:"Set",stat:!0},{of:z});st({target:"Set",proto:!0,real:!0,forced:H},{addAll:function(){return function(){for(var t=m(this),e=Ht(t.add),n=0,r=arguments.length;n<r;n++)e.call(t,arguments[n]);return t}.apply(this,arguments)}}),st({target:"Set",proto:!0,real:!0,forced:H},{deleteAll:function(){return Gi.apply(this,arguments)}});function zi(t){return Set.prototype.values.call(t)}st({target:"Set",proto:!0,real:!0,forced:H},{every:function(t){var n=m(this),e=zi(n),r=zt(t,1<arguments.length?arguments[1]:void 0,3);return!oe(e,function(t,e){if(!r(t,t,n))return e()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),st({target:"Set",proto:!0,real:!0,forced:H},{difference:function(t){var e=m(this),n=new(Ee(e,et("Set")))(e),r=Ht(n.delete);return oe(t,function(t){r.call(n,t)}),n}}),st({target:"Set",proto:!0,real:!0,forced:H},{filter:function(t){var e=m(this),n=zi(e),r=zt(t,1<arguments.length?arguments[1]:void 0,3),i=new(Ee(e,et("Set"))),o=Ht(i.add);return oe(n,function(t){r(t,t,e)&&o.call(i,t)},{IS_ITERATOR:!0}),i}}),st({target:"Set",proto:!0,real:!0,forced:H},{find:function(t){var n=m(this),e=zi(n),r=zt(t,1<arguments.length?arguments[1]:void 0,3);return oe(e,function(t,e){if(r(t,t,n))return e(t)},{IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),st({target:"Set",proto:!0,real:!0,forced:H},{intersection:function(t){var e=m(this),n=new(Ee(e,et("Set"))),r=Ht(e.has),i=Ht(n.add);return oe(t,function(t){r.call(e,t)&&i.call(n,t)}),n}}),st({target:"Set",proto:!0,real:!0,forced:H},{isDisjointFrom:function(t){var n=m(this),r=Ht(n.has);return!oe(t,function(t,e){if(!0===r.call(n,t))return e()},{INTERRUPTED:!0}).stopped}}),st({target:"Set",proto:!0,real:!0,forced:H},{isSubsetOf:function(t){var e=function(t){var e=ne(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return m(e.call(t))}(this),n=m(t),r=n.has;return"function"!=typeof r&&(n=new(et("Set"))(t),r=Ht(n.has)),!oe(e,function(t,e){if(!1===r.call(n,t))return e()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),st({target:"Set",proto:!0,real:!0,forced:H},{isSupersetOf:function(t){var n=m(this),r=Ht(n.has);return!oe(t,function(t,e){if(!1===r.call(n,t))return e()},{INTERRUPTED:!0}).stopped}}),st({target:"Set",proto:!0,real:!0,forced:H},{join:function(t){var e=m(this),n=zi(e),e=void 0===t?",":String(t),t=[];return oe(n,t.push,{that:t,IS_ITERATOR:!0}),t.join(e)}}),st({target:"Set",proto:!0,real:!0,forced:H},{map:function(t){var e=m(this),n=zi(e),r=zt(t,1<arguments.length?arguments[1]:void 0,3),i=new(Ee(e,et("Set"))),o=Ht(i.add);return oe(n,function(t){o.call(i,r(t,t,e))},{IS_ITERATOR:!0}),i}}),st({target:"Set",proto:!0,real:!0,forced:H},{reduce:function(e){var n=m(this),t=zi(n),r=arguments.length<2,i=r?void 0:arguments[1];if(Ht(e),oe(t,function(t){i=r?(r=!1,t):e(i,t,t,n)},{IS_ITERATOR:!0}),r)throw TypeError("Reduce of empty set with no initial value");return i}}),st({target:"Set",proto:!0,real:!0,forced:H},{some:function(t){var n=m(this),e=zi(n),r=zt(t,1<arguments.length?arguments[1]:void 0,3);return oe(e,function(t,e){if(r(t,t,n))return e()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),st({target:"Set",proto:!0,real:!0,forced:H},{symmetricDifference:function(t){var e=m(this),n=new(Ee(e,et("Set")))(e),r=Ht(n.delete),i=Ht(n.add);return oe(t,function(t){r.call(n,t)||i.call(n,t)}),n}}),st({target:"Set",proto:!0,real:!0,forced:H},{union:function(t){var e=m(this),e=new(Ee(e,et("Set")))(e);return oe(t,Ht(e.add),{that:e}),e}});var Qi=Math.floor;st({target:"Number",stat:!0},{isInteger:function(t){return!y(t)&&isFinite(t)&&Qi(t)===t}});pt.Number.isInteger;st({target:"Number",stat:!0},{isNaN:function(t){return t!=t}});pt.Number.isNaN;var Yi=function(t,e){return(Yi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Xi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Yi(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Ji=function(){return(Ji=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function $i(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{o(u.next(t))}catch(t){e(t)}}function i(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,i)}o((u=u.apply(t,s||[])).next())})}function Zi(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function to(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&r>=t.length?void 0:t)&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function eo(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function no(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}function ro(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}function io(t){try{return uo.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}var oo={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},so=function(t,e){if(!t)throw ao(e)},ao=function(t){return new Error("Firebase Database ("+oo.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},uo={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,o=(3&o)<<4|a>>4,a=(15&a)<<2|c>>6,c=63&c;u||(c=64,s||(a=64)),r.push(n[h],n[o],n[a],n[c])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ro(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i,o,s,a=t[n++];a<128?e[r++]=String.fromCharCode(a):191<a&&a<224?(o=t[n++],e[r++]=String.fromCharCode((31&a)<<6|63&o)):239<a&&a<365?(i=((7&a)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536,e[r++]=String.fromCharCode(55296+(i>>10)),e[r++]=String.fromCharCode(56320+(1023&i))):(o=t[n++],s=t[n++],e[r++]=String.fromCharCode((15&a)<<12|(63&o)<<6|63&s))}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();o=o<<2|s>>4;r.push(o),64!==a&&(s=s<<4&240|a>>2,r.push(s),64!==u&&(u=a<<6&192|u,r.push(u)))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function co(t){return ho(void 0,t)}function ho(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=ho(t[n],e[n]));return t}var lo=(fo.prototype.wrapCallback=function(n){var r=this;return function(t,e){t?r.reject(t):r.resolve(e),"function"==typeof n&&(r.promise.catch(function(){}),1===n.length?n(t):n(t,e))}},fo);function fo(){var n=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}function po(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function go(){return"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(po())}function vo(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function yo(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function mo(){return!0===oo.NODE_ADMIN}function bo(){return"indexedDB"in self&&null!=indexedDB}function wo(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}})}function _o(){return!(!navigator||!navigator.cookieEnabled)}var Io,To="FirebaseError",Eo=(Xi(So,Io=Error),So);function So(t,e,n){e=Io.call(this,e)||this;return e.code=t,e.customData=n,e.name=To,Object.setPrototypeOf(e,So.prototype),Error.captureStackTrace&&Error.captureStackTrace(e,Co.prototype.create),e}var Co=(Ao.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r,i=e[0]||{},o=this.service+"/"+t,t=this.errors[t],t=t?(r=i,t.replace(No,function(t,e){var n=r[e];return null!=n?String(n):"<"+e+"?>"})):"Error",t=this.serviceName+": "+t+" ("+o+").";return new Eo(o,t,i)},Ao);function Ao(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var No=/\{\$([^}]+)}/g;function ko(t){return JSON.parse(t)}function Ro(t){return JSON.stringify(t)}function Po(t){var e={},n={},r={},i="";try{var o=t.split("."),e=ko(io(o[0])||""),n=ko(io(o[1])||""),i=o[2],r=n.d||{};delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}}function Do(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Oo(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function xo(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Lo(t,e,n){var r,i={};for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function Mo(t){for(var n=[],e=0,r=Object.entries(t);e<r.length;e++){var i=r[e];!function(e,t){Array.isArray(t)?t.forEach(function(t){n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}):n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}(i[0],i[1])}return n.length?"&"+n.join("&"):""}var Fo=(Uo.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},Uo.prototype.compress_=function(t,e){e=e||0;var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}for(var o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],h=this.chain_[4],r=0;r<80;r++)var l=r<40?r<20?(o=c^a&(u^c),1518500249):(o=a^u^c,1859775393):r<60?(o=a&u|c&(a|u),2400959708):(o=a^u^c,3395469782),i=(s<<5|s>>>27)+o+h+l+n[r]&4294967295,h=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=i;this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},Uo.prototype.update=function(t,e){if(null!=t){for(var n=(e=void 0===e?t.length:e)-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},Uo.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);for(var r=0,n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},Uo);function Uo(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}function jo(t,e){e=new qo(t,e);return e.subscribe.bind(e)}var qo=(Vo.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},Vo.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},Vo.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},Vo.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=Bo),void 0===r.error&&(r.error=Bo),void 0===r.complete&&(r.complete=Bo);n=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),n},Vo.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],--this.observerCount,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},Vo.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},Vo.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},Vo.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},Vo);function Vo(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}function Bo(){}function Ko(t,e,n,r){var i;if(r<e?i="at least "+e:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function Go(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}t+=" failed: ";return t+=r+" argument "}function Wo(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(Go(t,e,r)+"must be a valid function.")}function Ho(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(Go(t,e,r)+"must be a valid context object.")}function zo(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:55296<=r&&r<=56319?(e+=4,n++):e+=3}return e}var Qo=1e3,Yo=2,Xo=144e5,Jo=.5;function $o(t,e,n){void 0===n&&(n=Yo);n=(e=void 0===e?Qo:e)*Math.pow(n,t),t=Math.round(Jo*n*(Math.random()-.5)*2);return Math.min(Xo,n+t)}var Zo=(ts.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},ts.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},ts.prototype.setServiceProps=function(t){return this.serviceProps=t,this},ts);function ts(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var es="[DEFAULT]",ns=(rs.prototype.get=function(t){void 0===t&&(t=es);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new lo;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},rs.prototype.getImmediate=function(t){var e=Ji({identifier:es,optional:!1},t),t=e.identifier,n=e.optional,r=this.normalizeInstanceIdentifier(t);try{var i=this.getOrInitializeService({instanceIdentifier:r});if(i)return i;if(n)return null;throw Error("Service "+this.name+" is not available")}catch(t){if(n)return null;throw t}},rs.prototype.getComponent=function(){return this.component},rs.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if("EAGER"===(this.component=t).instantiationMode)try{this.getOrInitializeService({instanceIdentifier:es})}catch(t){}try{for(var r=to(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=eo(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService({instanceIdentifier:u});a.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},rs.prototype.clearInstance=function(t){void 0===t&&(t=es),this.instancesDeferred.delete(t),this.instances.delete(t)},rs.prototype.delete=function(){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(no(no([],eo(e.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),eo(e.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return t.sent(),[2]}})})},rs.prototype.isComponentSet=function(){return null!=this.component},rs.prototype.isInitialized=function(t){return void 0===t&&(t=es),this.instances.has(t)},rs.prototype.initialize=function(t){var e=(t=void 0===t?{}:t).instanceIdentifier,e=void 0===e?es:e,t=t.options,t=void 0===t?{}:t,e=this.normalizeInstanceIdentifier(e);if(this.isInitialized(e))throw Error(this.name+"("+e+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");return this.getOrInitializeService({instanceIdentifier:e,options:t})},rs.prototype.getOrInitializeService=function(t){var e=t.instanceIdentifier,n=t.options,r=void 0===n?{}:n,t=this.instances.get(e);return!t&&this.component&&(t=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e)===es?void 0:n,options:r}),this.instances.set(e,t)),t||null},rs.prototype.normalizeInstanceIdentifier=function(t){return!this.component||this.component.multipleInstances?t:es},rs);function rs(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}var is=(os.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},os.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},os.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new ns(t,this);return this.providers.set(t,e),e},os.prototype.getProviders=function(){return Array.from(this.providers.values())},os);function os(t){this.name=t,this.providers=new Map}var ss,as=[];(Sn=ss=ss||{})[Sn.DEBUG=0]="DEBUG",Sn[Sn.VERBOSE=1]="VERBOSE",Sn[Sn.INFO=2]="INFO",Sn[Sn.WARN=3]="WARN",Sn[Sn.ERROR=4]="ERROR",Sn[Sn.SILENT=5]="SILENT";function us(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=ls[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,no(["["+i+"]  "+t.name+":"],n))}}var cs={debug:ss.DEBUG,verbose:ss.VERBOSE,info:ss.INFO,warn:ss.WARN,error:ss.ERROR,silent:ss.SILENT},hs=ss.INFO,ls=((z={})[ss.DEBUG]="log",z[ss.VERBOSE]="log",z[ss.INFO]="info",z[ss.WARN]="warn",z[ss.ERROR]="error",z),fs=(Object.defineProperty(ps.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in ss))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),ps.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?cs[t]:t},Object.defineProperty(ps.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(ps.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),ps.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,no([this,ss.DEBUG],t)),this._logHandler.apply(this,no([this,ss.DEBUG],t))},ps.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,no([this,ss.VERBOSE],t)),this._logHandler.apply(this,no([this,ss.VERBOSE],t))},ps.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,no([this,ss.INFO],t)),this._logHandler.apply(this,no([this,ss.INFO],t))},ps.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,no([this,ss.WARN],t)),this._logHandler.apply(this,no([this,ss.WARN],t))},ps.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,no([this,ss.ERROR],t)),this._logHandler.apply(this,no([this,ss.ERROR],t))},ps);function ps(t){this.name=t,this._logLevel=hs,this._logHandler=us,this._userLogHandler=null,as.push(this)}function ds(e){as.forEach(function(t){t.setLogLevel(e)})}function gs(s,e){for(var t=0,n=as;t<n.length;t++)!function(t){var o=null;e&&e.level&&(o=cs[e.level]),t.userLogHandler=null===s?null:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}}).filter(function(t){return t}).join(" ");e>=(null!=o?o:t.logLevel)&&s({level:ss[e].toLowerCase(),message:i,args:n,type:t.name})}}(n[t])}var Sn=((H={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",H["bad-app-name"]="Illegal App name: '{$appName}",H["duplicate-app"]="Firebase App named '{$appName}' already exists",H["app-deleted"]="Firebase App named '{$appName}' already deleted",H["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",H["invalid-log-argument"]="First argument to `onLog` must be null or a function.",H),vs=new Co("app","Firebase",Sn),ys="@firebase/app",ms="[DEFAULT]",bs=((z={})[ys]="fire-core",z["@firebase/analytics"]="fire-analytics",z["@firebase/auth"]="fire-auth",z["@firebase/database"]="fire-rtdb",z["@firebase/functions"]="fire-fn",z["@firebase/installations"]="fire-iid",z["@firebase/messaging"]="fire-fcm",z["@firebase/performance"]="fire-perf",z["@firebase/remote-config"]="fire-rc",z["@firebase/storage"]="fire-gcs",z["@firebase/firestore"]="fire-fst",z["fire-js"]="fire-js",z["firebase-wrapper"]="fire-js-all",z),ws=new fs("@firebase/app"),_s=(Object.defineProperty(Is.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(Is.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(Is.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),Is.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(t){return t.delete()}))}).then(function(){e.isDeleted_=!0})},Is.prototype._getService=function(t,e){return void 0===e&&(e=ms),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},Is.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=ms),this.container.getProvider(t).clearInstance(e)},Is.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){ws.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},Is.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},Is.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},Is.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw vs.create("app-deleted",{appName:this.name_})},Is);function Is(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=co(t),this.container=new is(e.name),this._addComponent(new Zo("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}_s.prototype.name&&_s.prototype.options||_s.prototype.delete||console.log("dc");var Ts="8.3.1";function Es(s){var a={},u=new Map,c={__esModule:!0,initializeApp:function(t,e){void 0===e&&(e={});"object"==typeof e&&null!==e||(e={name:e});var n=e;void 0===n.name&&(n.name=ms);e=n.name;if("string"!=typeof e||!e)throw vs.create("bad-app-name",{appName:String(e)});if(Do(a,e))throw vs.create("duplicate-app",{appName:e});n=new s(t,n,c);return a[e]=n},app:h,registerVersion:function(t,e,n){var r=null!==(i=bs[t])&&void 0!==i?i:t;n&&(r+="-"+n);var i=r.match(/\s|\//),t=e.match(/\s|\//);if(i||t){n=['Unable to register library "'+r+'" with version "'+e+'":'];return i&&n.push('library name "'+r+'" contains illegal characters (whitespace or "/")'),i&&t&&n.push("and"),t&&n.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void ws.warn(n.join(" "))}o(new Zo(r+"-version",function(){return{library:r,version:e}},"VERSION"))},setLogLevel:ds,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw vs.create("invalid-log-argument");gs(t,e)},apps:null,SDK_VERSION:Ts,INTERNAL:{registerComponent:o,removeApp:function(t){delete a[t]},components:u,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function h(t){if(!Do(a,t=t||ms))throw vs.create("no-app",{appName:t});return a[t]}function o(n){var t,r=n.name;if(u.has(r))return ws.debug("There were multiple attempts to register component "+r+"."),"PUBLIC"===n.type?c[r]:null;u.set(r,n),"PUBLIC"===n.type&&(t=function(t){if("function"!=typeof(t=void 0===t?h():t)[r])throw vs.create("invalid-app-argument",{appName:r});return t[r]()},void 0!==n.serviceProps&&ho(t,n.serviceProps),c[r]=t,s.prototype[r]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,r).apply(this,n.multipleInstances?t:[])});for(var e=0,i=Object.keys(a);e<i.length;e++){var o=i[e];a[o]._addComponent(n)}return"PUBLIC"===n.type?c[r]:null}return c.default=c,Object.defineProperty(c,"apps",{get:function(){return Object.keys(a).map(function(t){return a[t]})}}),h.App=s,c}var H=function t(){var e=Es(_s);return e.INTERNAL=Ji(Ji({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){ho(e,t)},createSubscribe:jo,ErrorFactory:Co,deepExtend:ho}),e}(),Ss=(Cs.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){t=t.getComponent();return"VERSION"===(null==t?void 0:t.type)}(t)){t=t.getImmediate();return t.library+"/"+t.version}return null}).filter(function(t){return t}).join(" ")},Cs);function Cs(t){this.container=t}"object"==typeof self&&self.self===self&&void 0!==self.firebase&&(ws.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  "),(bu=self.firebase.SDK_VERSION)&&0<=bu.indexOf("LITE")&&ws.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    "));var As=H.initializeApp;H.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return}}()&&ws.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),As.apply(void 0,t)};var Ns,ks,Xl=H;(Ns=Xl).INTERNAL.registerComponent(new Zo("platform-logger",function(t){return new Ss(t)},"PRIVATE")),Ns.registerVersion(ys,"0.6.17",ks),Ns.registerVersion("fire-js","");Xl.registerVersion("firebase","8.3.1","app");!function(){var t,o="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var u=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function c(t){var e,n,r="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return r?r.call(t):{next:(e=t,n=0,function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}})}}!function(t,e){if(e){var n=u;t=t.split(".");for(var r=0;r<t.length-1;r++){var i=t[r];i in n||(n[i]={}),n=n[i]}(e=e(r=n[t=t[t.length-1]]))!=r&&null!=e&&o(n,t,{configurable:!0,writable:!0,value:e})}}("Promise",function(t){function s(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function e(){this.a=null}function a(e){return e instanceof s?e:new s(function(t){t(e)})}if(t)return t;e.prototype.b=function(t){var e;null==this.a&&(this.a=[],(e=this).c(function(){e.g()})),this.a.push(t)};var n=u.setTimeout;e.prototype.c=function(t){n(t,0)},e.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},e.prototype.f=function(t){this.c(function(){throw t})},s.prototype.f=function(){function t(e){return function(t){r||(r=!0,e.call(n,t))}}var n=this,r=!1;return{resolve:t(this.m),reject:t(this.g)}},s.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof s)this.s(t);else{t:switch(typeof t){case"object":var e=null!=t;break t;case"function":e=!0;break t;default:e=!1}e?this.v(t):this.h(t)}},s.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},s.prototype.g=function(t){this.i(2,t)},s.prototype.h=function(t){this.i(1,t)},s.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},s.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)i.b(this.a[t]);this.a=null}};var i=new e;return s.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},s.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},s.prototype.then=function(t,e){function n(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(t){i(t)}}:t}var r,i,o=new s(function(t,e){r=t,i=e});return this.Qa(n(t,r),n(e,i)),o},s.prototype.catch=function(t){return this.then(void 0,t)},s.prototype.Qa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?i.b(n):this.a.push(n)},s.resolve=a,s.reject=function(n){return new s(function(t,e){e(n)})},s.race=function(i){return new s(function(t,e){for(var n=c(i),r=n.next();!r.done;r=n.next())a(r.value).Qa(t,e)})},s.all=function(t){var e=c(t),o=e.next();return o.done?a([]):new s(function(n,t){for(var r=[],i=0;r.push(void 0),i++,a(o.value).Qa(function(e){return function(t){r[e]=t,0==--i&&n(r)}}(r.length-1),t),o=e.next(),!o.done;);})},s});var h=h||{},l=this||self,e=/^[\w+/_-]+[=]{0,2}$/,a=null;function f(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&e.test(t)?t:""}function s(){}function p(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function d(t){var e=p(t);return"array"==e||"object"==e&&"number"==typeof t.length}function g(t){return"function"==p(t)}function v(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var n="closure_uid_"+(1e9*Math.random()>>>0),r=0;function i(t,e,n){return t.call.apply(t.bind,arguments)}function y(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function m(t,e,n){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i:y).apply(null,arguments)}function b(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function w(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function _(t){return t}function I(t,e,n){this.code=S+t,this.message=e||C[t]||"",this.a=n||null}function T(t){var e=t&&t.code;return e?new I(e.substring(S.length),t.message,t.serverResponse):null}w(I,Error),I.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},I.prototype.toJSON=function(){return this.w()};var E,S="auth/",C={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},A={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function N(t){for(var e in A)if(A[e].id===t)return t=A[e],{firebaseEndpoint:t.Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function k(t){if(t)try{return t.$goog_Thenable}catch(t){return}}function R(t){var e;Error.captureStackTrace?Error.captureStackTrace(this,R):(e=Error().stack)&&(this.stack=e),t&&(this.message=String(t))}function P(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");R.call(this,n+t[r])}function D(t){throw new P("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function O(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function x(t,e){t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}function L(){this.b=this.a=null}E=N("__EID__")?"__EID__":void 0,w(R,Error),R.prototype.name="CustomError",w(P,R),P.prototype.name="AssertionError",O.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t};var M=new O(function(){return new F},function(t){t.reset()});function F(){this.next=this.b=this.a=null}L.prototype.add=function(t,e){var n=M.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},F.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},F.prototype.reset=function(){this.next=this.b=this.a=null};var U=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},j=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var q=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n,r=t.length,i=[],o=0,s="string"==typeof t?t.split(""):t,a=0;a<r;a++)a in s&&(n=s[a],e.call(void 0,n,a,t)&&(i[o++]=n));return i},V=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},B=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function K(t,e){return 0<=U(t,e)}function G(t,e){var n;return(n=0<=(e=U(t,e)))&&Array.prototype.splice.call(t,e,1),n}function W(n,r){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(n,function(t,e){r.call(void 0,t,e,n)&&1==Array.prototype.splice.call(n,e,1).length&&0})}function H(){return Array.prototype.concat.apply([],arguments)}function z(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Q,Y=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},X=/&/g,J=/</g,$=/>/g,Z=/"/g,tt=/'/g,et=/\x00/g,nt=/[\x00&<>"']/;function rt(t,e){return-1!=t.indexOf(e)}function it(t,e){return t<e?-1:e<t?1:0}t:{var ot=l.navigator;if(ot){ot=ot.userAgent;if(ot){Q=ot;break t}}Q=""}function st(t){return rt(Q,t)}function at(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ut(t){for(var e in t)return;return 1}function ct(t){var e,n={};for(e in t)n[e]=t[e];return n}var ht="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lt(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<ht.length;i++)e=ht[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function ft(t,e){t:{try{var n=t&&t.ownerDocument,n=n&&(n.defaultView||n.parentWindow);if((n=n||l).Element&&n.Location){var r=n;break t}}catch(t){}r=null}if(r&&void 0!==r[e]&&(!t||!(t instanceof r[e])&&(t instanceof r.Location||t instanceof r.Element))){if(v(t))try{var i=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){i="<object could not be stringified>"}else i=void 0===t?"undefined":null===t?"null":typeof t;D("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,i)}}function pt(t,e){this.a=t===yt&&e||"",this.b=vt}function dt(t){return t instanceof pt&&t.constructor===pt&&t.b===vt?t.a:(D("expected object of type Const, got '"+t+"'"),"type_error:Const")}pt.prototype.sa=!0,pt.prototype.ra=function(){return this.a},pt.prototype.toString=function(){return"Const{"+this.a+"}"};var gt,vt={},yt={};function mt(){if(void 0===gt){var t=null,e=l.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:_,createScript:_,createScriptURL:_})}catch(t){l.console&&l.console.error(t.message)}gt=t}else gt=t}return gt}function bt(t,e){this.a=e===Et?t:""}function wt(t){return t instanceof bt&&t.constructor===bt?t.a:(D("expected object of type TrustedResourceUrl, got '"+t+"' of type "+p(t)),"type_error:TrustedResourceUrl")}function _t(t,n){var e,r=dt(t);if(!Tt.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return t=r.replace(It,function(t,e){if(!Object.prototype.hasOwnProperty.call(n,e))throw Error('Found marker, "'+e+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(n));return(t=n[e])instanceof pt?dt(t):encodeURIComponent(String(t))}),e=t,t=mt(),new bt(e=t?t.createScriptURL(e):e,Et)}bt.prototype.sa=!0,bt.prototype.ra=function(){return this.a.toString()},bt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var It=/%{(\w+)}/g,Tt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Et={};function St(t,e){this.a=e===Dt?t:""}function Ct(t){return t instanceof St&&t.constructor===St?t.a:(D("expected object of type SafeUrl, got '"+t+"' of type "+p(t)),"type_error:SafeUrl")}St.prototype.sa=!0,St.prototype.ra=function(){return this.a.toString()},St.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var At=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Nt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,kt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Rt(t){return t instanceof St?t:(t="object"==typeof t&&t.sa?t.ra():String(t),t=kt.test(t)||(e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Nt))&&At.test(e[1])?new St(t,Dt):null);var e}function Pt(t){return t instanceof St?t:(t="object"==typeof t&&t.sa?t.ra():String(t),new St(t=!kt.test(t)?"about:invalid#zClosurez":t,Dt))}var Dt={},Ot=new St("about:invalid#zClosurez",Dt);function xt(t,e,n){this.a=n===Lt?t:""}xt.prototype.sa=!0,xt.prototype.ra=function(){return this.a.toString()},xt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Lt={};function Mt(t,e,n,r){return t=t instanceof St?t:Pt(t),e=e||l,n=n instanceof pt?dt(n):n||"",e.open(Ct(t),n,r,void 0)}function Ft(t){for(var e=t.split("%s"),n="",r=Array.prototype.slice.call(arguments,1);r.length&&1<e.length;)n+=e.shift()+r.shift();return n+e.join("%s")}function Ut(t){return nt.test(t)&&(-1!=(t=-1!=(t=-1!=(t=-1!=(t=-1!=(t=-1!=t.indexOf("&")?t.replace(X,"&amp;"):t).indexOf("<")?t.replace(J,"&lt;"):t).indexOf(">")?t.replace($,"&gt;"):t).indexOf('"')?t.replace(Z,"&quot;"):t).indexOf("'")?t.replace(tt,"&#39;"):t).indexOf("\0")&&(t=t.replace(et,"&#0;"))),t}function jt(t){return jt[" "](t),t}jt[" "]=s;var qt,Vt=st("Opera"),Bt=st("Trident")||st("MSIE"),Kt=st("Edge"),Gt=Kt||Bt,Wt=st("Gecko")&&!(rt(Q.toLowerCase(),"webkit")&&!st("Edge"))&&!(st("Trident")||st("MSIE"))&&!st("Edge"),Ht=rt(Q.toLowerCase(),"webkit")&&!st("Edge");function zt(){var t=l.document;return t?t.documentMode:void 0}t:{var Qt="",Yt=(Yt=Q,Wt?/rv:([^\);]+)(\)|;)/.exec(Yt):Kt?/Edge\/([\d\.]+)/.exec(Yt):Bt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Yt):Ht?/WebKit\/(\S+)/.exec(Yt):Vt?/(?:Version)[ \/]?(\S+)/.exec(Yt):void 0);if(Yt&&(Qt=Yt?Yt[1]:""),Bt){Yt=zt();if(null!=Yt&&Yt>parseFloat(Qt)){qt=String(Yt);break t}}qt=Qt}var Xt={};function Jt(a){return t=a,e=function(){for(var t=0,e=Y(String(qt)).split("."),n=Y(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++)for(var o=e[i]||"",s=n[i]||"";o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],(0!=o[0].length||0!=s[0].length)&&(t=it(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||it(0==o[2].length,0==s[2].length)||it(o[2],s[2]),o=o[3],s=s[3],0==t););return 0<=t},n=Xt,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}var $t=l.document&&Bt&&(zt()||parseInt(qt,10))||void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(t){}var Zt=!Bt||9<=Number($t);function te(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ee(n,t){at(t,function(t,e){t&&"object"==typeof t&&t.sa&&(t=t.ra()),"style"==e?n.style.cssText=t:"class"==e?n.className=t:"for"==e?n.htmlFor=t:ie.hasOwnProperty(e)?n.setAttribute(ie[e],t):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?n.setAttribute(e,t):n[e]=t})}var ne,re,ie={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function oe(){var t,e=arguments,n=document,r=String(e[0]),i=e[1];return!Zt&&i&&(i.name||i.type)&&(r=["<",r],i.name&&r.push(' name="',Ut(i.name),'"'),i.type&&(r.push(' type="',Ut(i.type),'"'),lt(t={},i),delete t.type,i=t),r.push(">"),r=r.join("")),r=se(n,r),i&&("string"==typeof i?r.className=i:Array.isArray(i)?r.className=i.join(" "):ee(r,i)),2<e.length&&function(e,n,t){function r(t){t&&n.appendChild("string"==typeof t?e.createTextNode(t):t)}for(var i=2;i<t.length;i++){var o=t[i];if(!d(o)||v(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(v(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(g(o)){s="function"==typeof o.item;break t}}s=!1}j(s?z(o):o,r)}}}(n,r,e),r}function se(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ae(t){l.setTimeout(function(){throw t},0)}function ue(t,e){re||function(){{var t;re=l.Promise&&l.Promise.resolve?(t=l.Promise.resolve(void 0),function(){t.then(le)}):function(){var t=le;!g(l.setImmediate)||l.Window&&l.Window.prototype&&!st("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(ne=ne||function(){var t=l.MessageChannel;if(void 0===(t=void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!st("Presto")?function(){var t=se(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=m(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}:t)||st("Trident")||st("MSIE"))return function(t){l.setTimeout(t,0)};var e=new t,n={},r=n;return e.port1.onmessage=function(){var t;void 0!==n.next&&(t=(n=n.next).Gb,n.Gb=null,t())},function(t){r.next={Gb:t},r=r.next,e.port2.postMessage(0)}}())(t):l.setImmediate(t)}}}(),ce||(re(),ce=!0),he.add(t,e)}var ce=!1,he=new L;function le(){for(var t,e,n;n=e=void 0,n=null,(e=he).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){ae(t)}x(M,t)}ce=!1}function fe(t,e){if(this.a=pe,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=s)try{var n=this;t.call(e,function(t){Se(n,de,t)},function(t){if(!(t instanceof De))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Se(n,ge,t)})}catch(t){Se(this,ge,t)}}var pe=0,de=2,ge=3;function ve(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}ve.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var ye=new O(function(){return new ve},function(t){t.reset()});function me(t,e,n){var r=ye.get();return r.g=t,r.b=e,r.f=n,r}function be(t){if(t instanceof fe)return t;var e=new fe(s);return Se(e,de,t),e}function we(n){return new fe(function(t,e){e(n)})}function _e(t,e,n){Ce(t,e,n,null)||ue(b(e,t))}function Ie(n){return new fe(function(r){var i=n.length,o=[];if(i)for(var t=function(t,e,n){i--,o[t]=e?{Pb:!0,value:n}:{Pb:!1,reason:n},0==i&&r(o)},e=0;e<n.length;e++)_e(n[e],b(t,e,!0),b(t,e,!1));else r(o)})}function Te(t,e){t.b||t.a!=de&&t.a!=ge||Ae(t),t.f?t.f.next=e:t.b=e,t.f=e}function Ee(t,i,o,s){var e=me(null,null,null);return e.a=new fe(function(n,r){e.g=i?function(t){try{var e=i.call(s,t);n(e)}catch(t){r(t)}}:n,e.b=o?function(t){try{var e=o.call(s,t);void 0===e&&t instanceof De?r(t):n(e)}catch(t){r(t)}}:r}),Te(e.a.c=t,e),e.a}function Se(t,e,n){var r,i;t.a==pe&&(t===n&&(e=ge,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Ce(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Ae(t),e!=ge||n instanceof De||(i=n,(r=t).g=!0,ue(function(){r.g&&Pe.call(null,i)}))))}function Ce(t,e,n,r){if(t instanceof fe)return Te(t,me(e||s,n||null,r)),1;if(k(t))return t.then(e,n,r),1;if(v(t))try{var i=t.then;if(g(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(t){o(t)}}(t,i,e,n,r),1}catch(t){return n.call(r,t),1}}function Ae(t){t.h||(t.h=!0,ue(t.gc,t))}function Ne(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function ke(t,e,n,r){if(n==ge&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Re(e,n,r);else try{e.c?e.g.call(e.f):Re(e,n,r)}catch(t){Pe.call(null,t)}x(ye,e)}function Re(t,e,n){e==de?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}fe.prototype.then=function(t,e,n){return Ee(this,g(t)?t:null,g(e)?e:null,n)},fe.prototype.$goog_Thenable=!0,(t=fe.prototype).oa=function(t,e){return(t=me(t,t,e)).c=!0,Te(this,t),this},t.o=function(t,e){return Ee(this,null,t,e)},t.cancel=function(t){var e;this.a==pe&&(e=new De(t),ue(function(){!function t(e,n){if(e.a==pe)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,!((o=a.a==e?a:o)&&1<i)));a=a.next)o||(s=a);o&&(r.a==pe&&1==i?t(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):Ne(r),ke(r,o,ge,n)))}e.c=null}else Se(e,ge,n)}(this,e)},this))},t.$c=function(t){this.a=pe,Se(this,de,t)},t.ad=function(t){this.a=pe,Se(this,ge,t)},t.gc=function(){for(var t;t=Ne(this);)ke(this,t,this.a,this.i);this.h=!1};var Pe=ae;function De(t){R.call(this,t)}function Oe(){this.xa=this.xa,this.pa=this.pa}w(De,R);var xe=0;function Le(t){t.xa||(t.xa=!0,t.Da(),0==xe)||(t=t,Object.prototype.hasOwnProperty.call(t,n)&&t[n]||(t[n]=++r))}Oe.prototype.xa=!(De.prototype.name="cancel"),Oe.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Me=Object.freeze||function(t){return t},Fe=!Bt||9<=Number($t),Ue=Bt&&!Jt("9"),je=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{l.addEventListener("test",s,e),l.removeEventListener("test",s,e)}catch(t){}return t}();function qe(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Ve(t,e){if(qe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Wt){t:{try{jt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Be[t.pointerType]||"",(this.a=t).defaultPrevented&&this.preventDefault()}}qe.prototype.preventDefault=function(){this.defaultPrevented=!0},w(Ve,qe);var Be=Me({2:"touch",3:"pen",4:"mouse"});Ve.prototype.preventDefault=function(){Ve.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ue)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}},Ve.prototype.g=function(){return this.a};var Ke="closure_listenable_"+(1e6*Math.random()|0),Ge=0;function We(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Va=i,this.key=++Ge,this.va=this.Pa=!1}function He(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function ze(t){this.src=t,this.a={},this.b=0}function Qe(t,e){var n=e.type;n in t.a&&G(t.a[n],e)&&(He(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function Ye(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==r)return i}return-1}ze.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Ye(t,e,r,i);return-1<s?(e=t[s],n||(e.Pa=!1)):((e=new We(e,this.src,o,!!r,i)).Pa=n,t.push(e)),e};var Xe="closure_lm_"+(1e6*Math.random()|0),Je={};function $e(t,e,n,r,i){if(r&&r.once)tn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)$e(t,e[o],n,r,i);else n=hn(n),t&&t[Ke]?fn(t,e,n,v(r)?!!r.capture:!!r,i):Ze(t,e,n,!1,r,i)}function Ze(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s,a,u=v(i)?!!i.capture:!!i,c=un(t);if(c||(t[Xe]=c=new ze(t)),!(n=c.add(e,n,r,u,o)).proxy)if(s=an,r=a=Fe?function(t){return s.call(a.src,a.listener,t)}:function(t){if(!(t=s.call(a.src,a.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)void 0===(i=!je?u:i)&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(rn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function tn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)tn(t,e[o],n,r,i);else n=hn(n),t&&t[Ke]?pn(t,e,n,v(r)?!!r.capture:!!r,i):Ze(t,e,n,!0,r,i)}function en(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)en(t,e[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=hn(n),t&&t[Ke]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=Ye(o=t.a[e],n,r,i))&&(He(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):(t=t&&un(t))&&(e=t.a[e.toString()],(n=(t=-1)<(t=e?Ye(e,n,r,i):t)?e[t]:null)&&nn(n))}function nn(t){var e,n,r;"number"!=typeof t&&t&&!t.va&&((e=t.src)&&e[Ke]?Qe(e.v,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(rn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=un(e))?(Qe(n,t),0==n.b&&(n.src=null,e[Xe]=null)):He(t)))}function rn(t){return t in Je?Je[t]:Je[t]="on"+t}function on(t,e,n,r){var i=!0;if((t=un(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=sn(o,r),i=i&&!1!==o)}return i}function sn(t,e){var n=t.listener,r=t.Va||t.src;return t.Pa&&nn(t),n.call(r,e)}function an(t,e){if(t.va)return!0;if(Fe)return sn(t,new Ve(e,this));if(!e)t:{e=["window","event"];for(var n=l,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Ve(r=e,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=on(r[i],t,!0,e),n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=on(r[i],t,!1,e),n=n&&o}return n}function un(t){return(t=t[Xe])instanceof ze?t:null}var cn="__closure_events_fn_"+(1e9*Math.random()>>>0);function hn(e){return g(e)?e:(e[cn]||(e[cn]=function(t){return e.handleEvent(t)}),e[cn])}function ln(){Oe.call(this),this.v=new ze(this),(this.ac=this).gb=null}function fn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function pn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function dn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,a,u=e[o];u&&!u.va&&u.capture==n&&(s=u.listener,a=u.Va||u.src,u.Pa&&Qe(t.v,u),i=!1!==s.call(a,r)&&i)}return i&&!r.defaultPrevented}function gn(t,e,n){if(g(t))n&&(t=m(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=m(t.handleEvent,t)}return 2147483647<Number(e)?-1:l.setTimeout(t,e||0)}function vn(n){var r=null;return new fe(function(t,e){-1==(r=gn(function(){t(void 0)},n))&&e(Error("Failed to schedule timer."))}).o(function(t){throw l.clearTimeout(r),t})}function yn(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"==typeof t)return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function mn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(d(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function bn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof bn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function wn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];_n(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)_n(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function _n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}w(ln,Oe),ln.prototype[Ke]=!0,ln.prototype.addEventListener=function(t,e,n,r){$e(this,t,e,n,r)},ln.prototype.removeEventListener=function(t,e,n,r){en(this,t,e,n,r)},ln.prototype.dispatchEvent=function(t){var e;if(n=this.gb)for(e=[];n;n=n.gb)e.push(n);var n=this.ac,r=t.type||t;if("string"==typeof t?t=new qe(t,n):t instanceof qe?t.target=t.target||n:(s=t,lt(t=new qe(r,n),s)),s=!0,e)for(var i=e.length-1;0<=i;i--)var o=t.b=e[i],s=dn(o,r,!0,t)&&s;if(s=dn(o=t.b=n,r,!0,t)&&s,s=dn(o,r,!1,t)&&s,e)for(i=0;i<e.length;i++)s=dn(o=t.b=e[i],r,!1,t)&&s;return s},ln.prototype.Da=function(){if(ln.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)He(n[r]);delete e.a[t],e.b--}}this.gb=null},(t=bn.prototype).W=function(){wn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return wn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return _n(this.b,t)?this.b[t]:e},t.set=function(t,e){_n(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var In=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Tn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Tn?(this.i=void 0!==e?e:t.i,En(this,t.c),this.l=t.l,this.a=t.a,Sn(this,t.g),this.f=t.f,Cn(this,Wn(t.b)),this.h=t.h):t&&(n=String(t).match(In))?(this.i=!!e,En(this,n[1]||"",!0),this.l=Pn(n[2]||""),this.a=Pn(n[3]||"",!0),Sn(this,n[4]),this.f=Pn(n[5]||"",!0),Cn(this,n[6]||"",!0),this.h=Pn(n[7]||"")):(this.i=!!e,this.b=new jn(null,this.i))}function En(t,e,n){t.c=n?Pn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Sn(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Cn(t,e,n){var r,i;e instanceof jn?(t.b=e,r=t.b,(i=t.i)&&!r.f&&(qn(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Bn(this,e),Gn(this,n,t))},r)),r.f=i):(n||(e=Dn(e,Fn)),t.b=new jn(e,t.i))}function An(t,e,n){t.b.set(e,n)}function Nn(t,e){return t.b.get(e)}function kn(t){return t instanceof Tn?new Tn(t):new Tn(t,void 0)}function Rn(t,e,n,r){var i=new Tn(null,void 0);return t&&En(i,t),e&&(i.a=e),n&&Sn(i,n),r&&(i.f=r),i}function Pn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Dn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,On),t=n?t.replace(/%25([0-9a-fA-F]{2})/g,"%$1"):t):null}function On(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Tn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Dn(e,xn,!0),":");var n=this.a;return!n&&"file"!=e||(t.push("//"),(e=this.l)&&t.push(Dn(e,xn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Dn(n,"/"==n.charAt(0)?Mn:Ln,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Dn(n,Un)),t.join("")},Tn.prototype.resolve=function(t){var e=new Tn(this),n=!!t.c;n?En(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Sn(e,t.g);else if(n=!!t.f)if("/"!=r.charAt(0)&&(this.a&&!this.f?r="/"+r:-1!=(i=e.f.lastIndexOf("/"))&&(r=e.f.substr(0,i+1)+r)),".."==(i=r)||"."==i)r="";else if(rt(i,"./")||rt(i,"/.")){for(var r=0==i.lastIndexOf("/",0),i=i.split("/"),o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i;return n?e.f=r:n=""!==t.b.toString(),n?Cn(e,Wn(t.b)):n=!!t.h,n&&(e.h=t.h),e};var xn=/[#\/\?@]/g,Ln=/[#\?:]/g,Mn=/[#\?]/g,Fn=/[#\?@]/g,Un=/#/g;function jn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function qn(n){n.a||(n.a=new bn,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function Vn(t){var e=mn(t);if(void 0===e)throw Error("Keys are undefined");var n=new jn(null,void 0);t=yn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Gn(n,i,o):n.add(i,o)}return n}function Bn(t,e){qn(t),e=Hn(t,e),_n(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,_n((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&wn(t)))}function Kn(t,e){return qn(t),e=Hn(t,e),_n(t.a.b,e)}function Gn(t,e,n){Bn(t,e),0<n.length&&(t.c=null,t.a.set(Hn(t,e),z(n)),t.b+=n.length)}function Wn(t){var e=new jn;return e.c=t.c,t.a&&(e.a=new bn(t.a),e.b=t.b),e}function Hn(t,e){return e=String(e),e=t.f?e.toLowerCase():e}function zn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),t(e,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&(s=n[i],"function"!=typeof s&&(r.push(o),Jn(i,r),r.push(":"),t(e,s,r),o=","));return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Jn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Qn,t,e),e.join("")}function Qn(){}(t=jn.prototype).add=function(t,e){qn(this),this.c=null,t=Hn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(n,r){qn(this),this.a.forEach(function(t,e){j(t,function(t){n.call(r,t,e,this)},this)},this)},t.Y=function(){qn(this);for(var t=this.a.W(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.W=function(t){qn(this);var e=[];if("string"==typeof t)Kn(this,t)&&(e=H(e,this.a.get(Hn(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=H(e,t[n])}return e},t.set=function(t,e){return qn(this),this.c=null,Kn(this,t=Hn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.W(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var Yn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Xn=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Jn(t,e){e.push('"',t.replace(Xn,function(t){var e=Yn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Yn[t]=e),e}),'"')}function $n(){var t=yr();return Bt&&$t&&11==$t||/Edge\/\d+/.test(t)}function Zn(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function tr(t,e){e=e||l.window;var n="about:blank";t&&(n=Ct(Rt(t)||Ot)),e.location.href=n}function er(t){return!!((t=(t||yr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function nr(t){t=t||l.window;try{t.close()}catch(t){}}function rr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=yr().toLowerCase(),r&&(e.target=r,rt(n,"crios/")&&(e.target="_blank")),dr(yr())==fr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof St?n:Rt(void 0!==n.href?n.href:String(n))||Ot,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((st("iPhone")&&!st("iPod")&&!st("iPad")||st("iPad")||st("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(ft(s=se(document,"A"),"HTMLAnchorElement"),e=e instanceof St?e:Pt(e),s.href=Ct(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=Mt("",r,n,s),t=Ct(e),s&&(Gt&&rt(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ut(t)+'">',t=new xt(t=(r=mt())?r.createHTML(t):t,0,Lt),r=s.document)&&(r.write((o=t)instanceof xt&&o.constructor===xt?o.a:(D("expected object of type SafeHtml, got '"+o+"' of type "+p(o)),"type_error:SafeHtml")),r.close())):(s=Mt(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var ir=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,or=/^[^@]+@[^@]+$/;function sr(){var e=null;return new fe(function(t){"complete"==l.document.readyState?t():(e=function(){t()},tn(window,"load",e))}).o(function(t){throw en(window,"load",e),t})}function ar(t){return t=t||yr(),!("file:"!==Ir()&&"ionic:"!==Ir()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function ur(){var t=l.window;try{return t&&t!=t.top}catch(t){return}}function cr(){return void 0!==l.WorkerGlobalScope&&"function"==typeof l.importScripts}function hr(){return Xl.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Xl.INTERNAL.hasOwnProperty("node")?"Node":cr()?"Worker":"Browser"}function lr(){var t=hr();return"ReactNative"===t||"Node"===t}var fr="Firefox",pr="Chrome";function dr(t){var e=t.toLowerCase();return rt(e,"opera/")||rt(e,"opr/")||rt(e,"opios/")?"Opera":rt(e,"iemobile")?"IEMobile":rt(e,"msie")||rt(e,"trident/")?"IE":rt(e,"edge/")?"Edge":rt(e,"firefox/")?fr:rt(e,"silk/")?"Silk":rt(e,"blackberry")?"Blackberry":rt(e,"webos")?"Webos":!rt(e,"safari/")||rt(e,"chrome/")||rt(e,"crios/")||rt(e,"android")?!rt(e,"chrome/")&&!rt(e,"crios/")||rt(e,"edge/")?rt(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":pr:"Safari"}var gr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function vr(t,e){e=e||[];var n,r=[],i={};for(n in gr)i[gr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=hr())?r=dr(i=yr()):"Worker"===r&&(r=dr(i=yr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function yr(){return l.navigator&&l.navigator.userAgent||""}function mr(t,e){t=t.split("."),e=e||l;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return e=n!=t.length?void 0:e}function br(){try{var t=l.localStorage,e=Ar();if(t)return t.setItem(e,"1"),t.removeItem(e),!$n()||!!l.indexedDB}catch(t){return cr()&&!!l.indexedDB}return!1}function wr(){return(_r()||"chrome-extension:"===Ir()||ar())&&!lr()&&br()&&!cr()}function _r(){return"http:"===Ir()||"https:"===Ir()}function Ir(){return l.location&&l.location.protocol||null}function Tr(t){return!er(t=t||yr())&&dr(t)!=fr}function Er(t){return void 0===t?null:zn(t)}function Sr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Cr(t){if(null!==t)return JSON.parse(t)}function Ar(t){return t||Math.floor(1e9*Math.random()).toString()}function Nr(t){return"Safari"!=dr(t=t||yr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function kr(){var t=l.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Rr(t,e){if(e<t)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=yr(),e=hr(),this.b=er(t)||"ReactNative"===e}function Pr(){var t=l.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Dr(){var e=l.document,n=null;return Pr()||!e?be():new fe(function(t){n=function(){Pr()&&(e.removeEventListener("visibilitychange",n,!1),t())},e.addEventListener("visibilitychange",n,!1)}).o(function(t){throw e.removeEventListener("visibilitychange",n,!1),t})}function Or(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function xr(){return mr("fireauth.oauthhelper",l)||mr("fireauth.iframe",l)}Rr.prototype.get=function(){var t=l.navigator;return!t||"boolean"!=typeof t.onLine||!_r()&&"chrome-extension:"!==Ir()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Lr,Mr={};function Fr(t){Mr[t]||(Mr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Ur={};Object.defineProperty(Ur,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Ur,"abcd",{configurable:!0,enumerable:!0,value:2}),Lr=2==Ur.abcd}catch(t){Lr=!1}function jr(t,e,n){Lr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function qr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&jr(t,n,e[n])}function Vr(t){var e={};return qr(e,t),e}function Br(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)jr(e,n,Br(t[n]));return e}function Kr(t){var e=t&&(t[Qr]?"phone":null);if(!(e&&t&&t[zr]))throw new I("internal-error","Internal assert: invalid MultiFactorInfo object");jr(this,"uid",t[zr]),jr(this,"displayName",t[Wr]||null);var n=null;jr(this,"enrollmentTime",n=t[Hr]?new Date(t[Hr]).toUTCString():n),jr(this,"factorId",e)}function Gr(t){try{var e=new Yr(t)}catch(t){e=null}return e}Kr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Wr="displayName",Hr="enrolledAt",zr="mfaEnrollmentId",Qr="phoneInfo";function Yr(t){Kr.call(this,t),jr(this,"phoneNumber",t[Qr])}function Xr(t){var e={},n=t[ti],r=t[ni],i=t[ri];if(t=Gr(t[ei]),!i||i!=$r&&i!=Zr&&!n||i==Zr&&!r||i==Jr&&!t)throw Error("Invalid checkActionCode response!");i==Zr?(e[oi]=n||null,e[ai]=n||null,e[ii]=r):(e[oi]=r||null,e[ai]=r||null,e[ii]=n||null),e[si]=t||null,jr(this,ci,i),jr(this,ui,Br(e))}w(Yr,Kr),Yr.prototype.w=function(){var t=Yr.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var Jr="REVERT_SECOND_FACTOR_ADDITION",$r="EMAIL_SIGNIN",Zr="VERIFY_AND_CHANGE_EMAIL",ti="email",ei="mfaInfo",ni="newEmail",ri="requestType",ii="email",oi="fromEmail",si="multiFactorInfo",ai="previousEmail",ui="data",ci="operation";function hi(t){var e=Nn(t=kn(t),li)||null,n=Nn(t,fi)||null,r=(r=Nn(t,gi)||null)&&yi[r]||null;if(!e||!n||!r)throw new I("argument-error",li+", "+fi+"and "+gi+" are required in a valid action code URL.");qr(this,{apiKey:e,operation:r,code:n,continueUrl:Nn(t,pi)||null,languageCode:Nn(t,di)||null,tenantId:Nn(t,vi)||null})}var li="apiKey",fi="oobCode",pi="continueUrl",di="languageCode",gi="mode",vi="tenantId",yi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Jr,signIn:$r,verifyAndChangeEmail:Zr,verifyEmail:"VERIFY_EMAIL"};function mi(t){try{return new hi(t)}catch(t){return null}}function bi(t){if(void 0===(e=t[Ei]))throw new I("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new I("invalid-continue-uri");if(this.h=e,this.b=this.a=null,this.g=!1,(r=t[wi])&&"object"==typeof r){var e=r[Ai],n=r[Si],r=r[Ci];if("string"==typeof e&&e.length){if(this.a=e,void 0!==n&&"boolean"!=typeof n)throw new I("argument-error",Si+" property must be a boolean when specified.");if(this.g=!!n,void 0!==r&&("string"!=typeof r||"string"==typeof r&&!r.length))throw new I("argument-error",Ci+" property must be a non empty string when specified.");this.b=r||null}else{if(void 0!==e)throw new I("argument-error",Ai+" property must be a non empty string when specified.");if(void 0!==n||void 0!==r)throw new I("missing-android-pkg-name")}}else if(void 0!==r)throw new I("argument-error",wi+" property must be a non null object when specified.");if(this.f=null,(e=t[Ti])&&"object"==typeof e){if("string"==typeof(e=e[Ni])&&e.length)this.f=e;else if(void 0!==e)throw new I("argument-error",Ni+" property must be a non empty string when specified.")}else if(void 0!==e)throw new I("argument-error",Ti+" property must be a non null object when specified.");if(void 0!==(e=t[Ii])&&"boolean"!=typeof e)throw new I("argument-error",Ii+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[_i])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new I("argument-error",_i+" property must be a non empty string when specified.");this.i=t||null}var wi="android",_i="dynamicLinkDomain",Ii="handleCodeInApp",Ti="iOS",Ei="url",Si="installApp",Ci="minimumVersion",Ai="packageName",Ni="bundleId";function ki(t){var e,n={};for(e in n.continueUrl=t.h,n.canHandleCodeInApp=t.c,(n.androidPackageName=t.a)&&(n.androidMinimumVersion=t.b,n.androidInstallApp=t.g),n.iOSBundleId=t.f,n.dynamicLinkDomain=t.i,n)null===n[e]&&delete n[e];return n}var Ri=null;function Pi(t){var e=[];return function(r,t){function e(t){for(;i<r.length;){var e=r.charAt(i++),n=Ri[e];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(e))throw Error("Unknown base64 encoding at char: "+e)}return t}!function(){if(!Ri){Ri={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;n<5;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Ri[o]&&(Ri[o]=i)}}}();for(var i=0;;){var n=e(-1),o=e(0),s=e(64),a=e(64);if(64===a&&-1===n)break;t(n<<2|o>>4),64!=s&&(t(o<<4&240|s>>2),64!=a&&t(s<<6&192|a))}}(t,function(t){e.push(t)}),e}function Di(t){var e=xi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Oi(t){try{return new Di(t)}catch(t){return null}}function xi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=Pi(t);for(t=[],n=e=0;e<r.length;){var i,o,s,a=r[e++];a<128?t[n++]=String.fromCharCode(a):191<a&&a<224?(i=r[e++],t[n++]=String.fromCharCode((31&a)<<6|63&i)):239<a&&a<365?(s=((7&a)<<18|(63&(i=r[e++]))<<12|(63&(o=r[e++]))<<6|63&r[e++])-65536,t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))):(i=r[e++],o=r[e++],t[n++]=String.fromCharCode((15&a)<<12|(63&i)<<6|63&o))}return JSON.parse(t.join(""))}catch(t){}return null}Di.prototype.T=function(){return this.f},Di.prototype.l=function(){return this.c},Di.prototype.toString=function(){return this.h};var Li="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Mi=["client_id","response_type","scope","redirect_uri","state"],Fi={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Mi},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Mi},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Mi},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:Li},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function Ui(t){for(var e in Fi)if(Fi[e].fa==t)return Fi[e];return null}function ji(t){var e={};e["facebook.com"]=Gi,e["google.com"]=Hi,e["github.com"]=Wi,e["twitter.com"]=zi;var n=t&&t[Vi];try{if(n)return new(e[n]||Ki)(t);if(void 0!==t[qi])return new Bi(t)}catch(t){}return null}var qi="idToken",Vi="providerId";function Bi(t){var e,n=t[Vi];if(n||!t[qi]||(e=Oi(t[qi]))&&e.b&&(n=e.b),!n)throw Error("Invalid additional user info!");"anonymous"!=n&&"custom"!=n||(n=null),e=!1,void 0!==t.isNewUser?e=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(e=!0),jr(this,"providerId",n),jr(this,"isNewUser",e)}function Ki(t){Bi.call(this,t),jr(this,"profile",Br((t=Cr(t.rawUserInfo||"{}"))||{}))}function Gi(t){if(Ki.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Wi(t){if(Ki.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");jr(this,"username",this.profile&&this.profile.login||null)}function Hi(t){if(Ki.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function zi(t){if(Ki.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");jr(this,"username",t.screenName||null)}function Qi(t){var e=Nn(r=kn(t),"link"),n=Nn(kn(e),"link"),r=Nn(r,"deep_link_id");return Nn(kn(r),"link")||r||n||e||t}function Yi(t,e){if(!t&&!e)throw new I("internal-error","Internal assert: no raw session string available");if(t&&e)throw new I("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?Xi:Ji}w(Ki,Bi),w(Gi,Ki),w(Wi,Ki),w(Hi,Ki),w(zi,Ki);var Xi="enroll",Ji="signin";function $i(){}function Zi(t,n){return t.then(function(t){if(t[Bs]){var e=Oi(t[Bs]);if(!e||n!=e.i)throw new I("user-mismatch");return t}throw new I("user-mismatch")}).o(function(t){throw t&&t.code&&t.code==S+"user-not-found"?new I("user-mismatch"):t})}function to(t,e){if(!e)throw new I("internal-error","failed to construct a credential");this.a=e,jr(this,"providerId",t),jr(this,"signInMethod",t)}function eo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function no(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new to(t.providerId,t.pendingToken)}catch(t){}return null}function ro(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&jr(this,"idToken",e.idToken),e.accessToken&&jr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&jr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new I("internal-error","failed to construct a credential");jr(this,"accessToken",e.oauthToken),jr(this,"secret",e.oauthTokenSecret)}jr(this,"providerId",t),jr(this,"signInMethod",n)}function io(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Vn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function oo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new ro(t.providerId,e,t.signInMethod)}catch(t){}}return null}function so(t,e){this.Qc=e||[],qr(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=(Ui(t)||{}).Ja||null,this.ob=null}function ao(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new I("argument-error",'SAML provider IDs must be prefixed with "saml."');so.call(this,t,[])}function uo(t){so.call(this,t,Mi),this.a=[]}function co(){uo.call(this,"facebook.com")}function ho(t){if(!t)throw new I("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new co).credential({accessToken:e})}function lo(){uo.call(this,"github.com")}function fo(t){if(!t)throw new I("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new lo).credential({accessToken:e})}function po(){uo.call(this,"google.com"),this.Ca("profile")}function go(t,e){var n=t;return v(t)&&(n=t.idToken,e=t.accessToken),(new po).credential({idToken:n,accessToken:e})}function vo(){so.call(this,"twitter.com",Li)}function yo(t,e){var n=t;if(!(n=!v(n)?{oauthToken:t,oauthTokenSecret:e}:n).oauthToken||!n.oauthTokenSecret)throw new I("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new ro("twitter.com",n,"twitter.com")}function mo(t,e,n){this.a=t,this.f=e,jr(this,"providerId","password"),jr(this,"signInMethod",n===wo.EMAIL_LINK_SIGN_IN_METHOD?wo.EMAIL_LINK_SIGN_IN_METHOD:wo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function bo(t){return t&&t.email&&t.password?new mo(t.email,t.password,t.signInMethod):null}function wo(){qr(this,{providerId:"password",isOAuthProvider:!1})}function _o(t,e){if(!(e=Io(e)))throw new I("argument-error","Invalid email link!");return new mo(t,e.code,wo.EMAIL_LINK_SIGN_IN_METHOD)}function Io(t){return(t=mi(t=Qi(t)))&&t.operation===$r?t:null}function To(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new I("internal-error");this.a=t,jr(this,"providerId","phone"),this.fa="phone",jr(this,"signInMethod","phone")}function Eo(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var n={};return j(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(t){e[t]&&(n[t]=e[t])}),new To(n)}return null}function So(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function Co(t){try{this.a=t||Xl.auth()}catch(t){throw new I("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}qr(this,{providerId:"phone",isOAuthProvider:!1})}function Ao(t,e){if(!t)throw new I("missing-verification-id");if(!e)throw new I("missing-verification-code");return new To({eb:t,cb:e})}function No(t){if(t.temporaryProof&&t.phoneNumber)return new To({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return go(o,n);case"facebook.com":return ho(n);case"github.com":return fo(n);case"twitter.com":return yo(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new to(e,s):new ro(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new uo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function ko(t){if(!t.isOAuthProvider)throw new I("invalid-oauth-provider")}function Ro(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new I("invalid-auth-event");if(this.g&&this.a)throw new I("invalid-auth-event");if(this.g&&!this.f)throw new I("invalid-auth-event")}function Po(t){return(t=t||{}).type?new Ro(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&T(t.error),t.postBody,t.tenantId):null}function Do(){this.b=null,this.a=[]}Yi.prototype.Ha=function(){return this.a?be(this.a):be(this.b)},Yi.prototype.w=function(){return this.type==Xi?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},$i.prototype.ka=function(){},$i.prototype.b=function(){},$i.prototype.c=function(){},$i.prototype.w=function(){},to.prototype.ka=function(t){return ha(t,eo(this))},to.prototype.b=function(t,e){var n=eo(this);return n.idToken=e,la(t,n)},to.prototype.c=function(t,e){return Zi(fa(t,eo(this)),e)},to.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},ro.prototype.ka=function(t){return ha(t,io(this))},ro.prototype.b=function(t,e){var n=io(this);return n.idToken=e,la(t,n)},ro.prototype.c=function(t,e){return Zi(fa(t,io(this)),e)},ro.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},so.prototype.Ka=function(t){return this.Ib=ct(t),this},w(ao,so),w(uo,so),uo.prototype.Ca=function(t){return K(this.a,t)||this.a.push(t),this},uo.prototype.Qb=function(){return z(this.a)},uo.prototype.credential=function(t,e){e=v(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null};if(!e.idToken&&!e.accessToken)throw new I("argument-error","credential failed: must provide the ID token and/or the access token.");return new ro(this.providerId,e,this.providerId)},w(co,uo),jr(co,"PROVIDER_ID","facebook.com"),jr(co,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),w(lo,uo),jr(lo,"PROVIDER_ID","github.com"),jr(lo,"GITHUB_SIGN_IN_METHOD","github.com"),w(po,uo),jr(po,"PROVIDER_ID","google.com"),jr(po,"GOOGLE_SIGN_IN_METHOD","google.com"),w(vo,so),jr(vo,"PROVIDER_ID","twitter.com"),jr(vo,"TWITTER_SIGN_IN_METHOD","twitter.com"),mo.prototype.ka=function(t){return this.signInMethod==wo.EMAIL_LINK_SIGN_IN_METHOD?za(t,wa,{email:this.a,oobCode:this.f}):za(t,Ba,{email:this.a,password:this.f})},mo.prototype.b=function(t,e){return this.signInMethod==wo.EMAIL_LINK_SIGN_IN_METHOD?za(t,_a,{idToken:e,email:this.a,oobCode:this.f}):za(t,xa,{idToken:e,email:this.a,password:this.f})},mo.prototype.c=function(t,e){return Zi(this.ka(t),e)},mo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},qr(wo,{PROVIDER_ID:"password"}),qr(wo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),qr(wo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),To.prototype.ka=function(t){return t.fb(So(this))},To.prototype.b=function(t,e){var n=So(this);return n.idToken=e,za(t,Ga,n)},To.prototype.c=function(t,e){var n=So(this);return n.operation="REAUTH",Zi(t=za(t,Wa,n),e)},To.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Co.prototype.fb=function(r,i){var o=this.a.a;return be(i.verify()).then(function(n){if("string"!=typeof n)throw new I("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"!==i.type)throw new I("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.');var t=v(r)?r.session:null,e=v(r)?r.phoneNumber:r,t=t&&t.type==Xi?t.Ha().then(function(t){return za(o,Ma,{idToken:t,phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:n}}).then(function(t){return t.phoneSessionInfo.sessionInfo})}):t&&t.type==Ji?t.Ha().then(function(t){return e=o,t={mfaPendingCredential:t,mfaEnrollmentId:r.multiFactorHint&&r.multiFactorHint.uid||r.multiFactorUid,phoneSignInInfo:{recaptchaToken:n}},za(e,Fa,t).then(function(t){return t.phoneResponseInfo.sessionInfo});var e}):za(o,Da,{phoneNumber:e,recaptchaToken:n});return t.then(function(t){return"function"==typeof i.reset&&i.reset(),t},function(t){throw"function"==typeof i.reset&&i.reset(),t})})},qr(Co,{PROVIDER_ID:"phone"}),qr(Co,{PHONE_SIGN_IN_METHOD:"phone"}),Ro.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Ro.prototype.T=function(){return this.h},Ro.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Oo,xo=null;function Lo(t){var e="unauthorized-domain",n=void 0,r=kn(t);t=r.a,"chrome-extension"==(r=r.c)?n=Ft("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Ft("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",I.call(this,e,n)}function Mo(t,e,n){I.call(this,t,n),(t=e||{}).Jb&&jr(this,"email",t.Jb),t.ea&&jr(this,"phoneNumber",t.ea),t.credential&&jr(this,"credential",t.credential),t.Zb&&jr(this,"tenantId",t.Zb)}function Fo(t){if(t.code){var e=t.code||"";0==e.indexOf(S)&&(e=e.substring(S.length));var n={credential:No(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new I(e,t.message||void 0);return new Mo(e,n,t.message)}return null}function Uo(){}function jo(t){return t.c||(t.c=t.b())}function qo(){}function Vo(t){if(t.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return t.f;for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function Bo(){}function Ko(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=m(this.qc,this),this.a.onerror=m(this.Sb,this),this.a.onprogress=m(this.rc,this),this.a.ontimeout=m(this.vc,this)}function Go(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Wo(t,e,n){this.reset(t,e,n,void 0,void 0)}function Ho(t){this.f=t,this.b=this.c=this.a=null}function zo(t,e){this.name=t,this.value=e}w(Lo,I),w(Mo,I),Mo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&lt(t,e),t},Mo.prototype.toJSON=function(){return this.w()},Uo.prototype.c=null,w(qo,Uo),qo.prototype.a=function(){var t=Vo(this);return t?new ActiveXObject(t):new XMLHttpRequest},qo.prototype.b=function(){var t={};return Vo(this)&&(t[0]=!0,t[1]=!0),t},Oo=new qo,w(Bo,Uo),Bo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Ko;throw Error("Unsupported browser")},Bo.prototype.b=function(){return{}},(t=Ko.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Go(this,4)},t.Sb=function(){this.status=500,this.response=this.responseText="",Go(this,4)},t.vc=function(){this.Sb()},t.rc=function(){this.status=200,Go(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Wo.prototype.a=null,Wo.prototype.reset=function(t,e,n,r,i){delete this.a},zo.prototype.toString=function(){return this.name};var Qo=new zo("SEVERE",1e3),Yo=new zo("WARNING",900),Xo=new zo("CONFIG",700),Jo=new zo("FINE",500);Ho.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c||(e.a?t(e.a):(D("Root logger has no level set."),null))}(this).value)for(g(e)&&(e=e()),t=new Wo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var $o,Zo={},ts=null;function es(t){var e,n,r;return ts||(ts=new Ho(""),(Zo[""]=ts).c=Xo),(e=Zo[t])||(e=new Ho(t),r=t.lastIndexOf("."),n=t.substr(r+1),(r=es(t.substr(0,r))).b||(r.b={}),(r.b[n]=e).a=r,Zo[t]=e),e}function ns(t,e){t&&t.log(Jo,e,void 0)}function rs(t){this.f=t}function is(t){ln.call(this),this.u=t,this.h=void 0,this.readyState=os,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=es("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}w(rs,Uo),rs.prototype.a=function(){return new is(this.f)},rs.prototype.b=($o={},function(){return $o}),w(is,ln);var os=0;function ss(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function as(t){t.readyState=4,t.g=null,t.c=null,t.m=null,us(t)}function us(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function cs(t){ln.call(this),this.headers=new bn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=hs,this.u=this.S=!1}(t=is.prototype).open=function(t,e){if(this.readyState!=os)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,us(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,as(this)),this.readyState=os},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,us(this)),this.a&&(this.readyState=3,us(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):void 0!==l.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,ss(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},t.pc=function(t){var e;this.a&&((e=this.m.decode(t.value||new Uint8Array(0),{stream:!t.done}))&&(this.response=this.responseText+=e),(t.done?as:us)(this),3==this.readyState&&ss(this))},t.tc=function(t){this.a&&(this.response=this.responseText=t,as(this))},t.sc=function(t){this.a&&(this.response=t,as(this))},t.Ua=function(t){var e=this.i;e&&e.log(Yo,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&as(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(Yo,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(Yo,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}for(var t=[],e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(is.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),w(cs,ln);var hs="";cs.prototype.b=es("goog.net.XhrIo");var ls=/^https?$/i,fs=["POST","PUT"];function ps(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.R=n,e.J=!1,e.c=!0,e.a=(e.D||Oo).a(),e.C=e.D?jo(e.D):jo(Oo),e.a.onreadystatechange=m(e.Vb,e);try{ns(e.b,Is(e,"Opening Xhr")),e.O=!0,e.a.open(n,String(t),!0),e.O=!1}catch(t){return ns(e.b,Is(e,"Error opening Xhr: "+t.message)),void gs(e,t)}t=r||"";var o,s=new bn(e.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||"string"==typeof t)j(t,e,void 0);else for(var n=mn(t),r=yn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){s.set(e,t)}),i=function(t){t:{for(var e=ds,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(s.Y()),r=l.FormData&&t instanceof l.FormData,!K(fs,n)||i||r||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(t,e){this.a.setRequestHeader(e,t)},e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.S&&(e.a.withCredentials=e.S);try{bs(e),0<e.g&&(e.u=(o=e.a,Bt&&Jt(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout),ns(e.b,Is(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.u)),e.u?(e.a.timeout=e.g,e.a.ontimeout=m(e.Ma,e)):e.s=gn(e.Ma,e.g,e)),ns(e.b,Is(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(t){ns(e.b,Is(e,"Send error: "+t.message)),gs(e,t)}}function ds(t){return"content-type"==t.toLowerCase()}function gs(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,vs(t),ms(t)}function vs(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ys(e){if(e.c&&void 0!==h)if(e.C[1]&&4==ws(e)&&2==_s(e))ns(e.b,Is(e,"Local request error detected and ignored"));else if(e.i&&4==ws(e))gn(e.Vb,0,e);else if(e.dispatchEvent("readystatechange"),4==ws(e)){ns(e.b,Is(e,"Request complete")),e.c=!1;try{var t,n,r,i,o=_s(e);t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}if((t=s)||((n=0===o)&&(!(i=String(e.l).match(In)[1]||null)&&l.self&&l.self.location&&(i=(r=l.self.location.protocol).substr(0,r.length-1)),n=!ls.test(i?i.toLowerCase():"")),t=n),t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var a=2<ws(e)?e.a.statusText:""}catch(t){ns(e.b,"Can not get status: "+t.message),a=""}e.h=a+" ["+_s(e)+"]",vs(e)}}finally{ms(e)}}}function ms(e,t){if(e.a){bs(e);var n=e.a,r=e.C[0]?s:null;e.a=null,e.C=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){(e=e.b)&&e.log(Qo,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function bs(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(l.clearTimeout(t.s),t.s=null)}function ws(t){return t.a?t.a.readyState:0}function _s(t){try{return 2<ws(t)?t.a.status:-1}catch(t){return-1}}function Is(t,e){return e+" ["+t.R+" "+t.l+" "+_s(t)+"]"}function Ts(t){var e=xs;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Es(t,e,n){t.a=!0,t.c=n,t.f=!e,Ns(t)}function Ss(t){if(t.a){if(!t.v)throw new ks;t.v=!1}}function Cs(t,e,n,r){t.g.push([e,n,r]),t.a&&Ns(t)}function As(t){return B(t.g,function(t){return g(t[1])})}function Ns(e){var n;e.h&&e.a&&As(e)&&(r=e.h,(n=Ds[r])&&(l.clearTimeout(n.a),delete Ds[r]),e.h=0),e.b&&(e.b.l--,delete e.b);for(var r=e.c,t=n=!1;e.g.length&&!e.i;){var i=(s=e.g.shift())[0],o=s[1],s=s[2];if(i=e.f?o:i)try{var a=i.call(s||e.s,r);void 0!==a&&(e.f=e.f&&(a==r||a instanceof Error),e.c=r=a),(k(r)||"function"==typeof l.Promise&&r instanceof l.Promise)&&(t=!0,e.i=!0)}catch(t){r=t,e.f=!0,As(e)||(n=!0)}}e.c=r,t&&(a=m(e.m,e,!0),t=m(e.m,e,!1),r instanceof Ts?(Cs(r,a,t),r.C=!0):r.then(a,t)),n&&(r=new Ps(r),Ds[r.a]=r,e.h=r.a)}function ks(){R.call(this)}function Rs(){R.call(this)}function Ps(t){this.a=l.setTimeout(m(this.c,this),0),this.b=t}(t=cs.prototype).Ma=function(){void 0!==h&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ns(this.b,Is(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(ns(this.b,Is(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ms(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ms(this,!0)),cs.ab.Da.call(this)},t.Vb=function(){this.xa||(this.O||this.i||this.f?ys(this):this.Jc())},t.Jc=function(){ys(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case hs:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Qo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return ns(this.b,"Can not get response: "+t.message),null}},Ts.prototype.cancel=function(t){var e;this.a?this.c instanceof Ts&&this.c.cancel():(this.b&&(e=this.b,delete this.b,t?e.cancel(t):(e.l--,e.l<=0&&e.cancel())),this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Rs,Ss(this),Es(this,!1,t)))},Ts.prototype.m=function(t,e){this.i=!1,Es(this,t,e)},Ts.prototype.then=function(t,e,n){var r,i,o=new fe(function(t,e){r=t,i=e});return Cs(this,r,function(t){t instanceof Rs?o.cancel():i(t)}),o.then(t,e,n)},Ts.prototype.$goog_Thenable=!0,w(ks,R),ks.prototype.message="Deferred has already fired",ks.prototype.name="AlreadyCalledError",w(Rs,R),Rs.prototype.message="Deferred was canceled",Rs.prototype.name="CanceledError",Ps.prototype.c=function(){throw delete Ds[this.a],this.b};var Ds={};function Os(t){var e=document,n=wt(t).toString(),r=se(document,"SCRIPT"),i={Wb:r,Ma:void 0},o=new Ts(i),s=window.setTimeout(function(){Ls(r,!0);var t=new Us(Fs,"Timeout reached for loading script "+n);Ss(o),Es(o,!1,t)},5e3);return i.Ma=s,r.onload=r.onreadystatechange=function(){r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(Ls(r,!1,s),Ss(o),Es(o,!0,null))},r.onerror=function(){Ls(r,!0,s);var t=new Us(Ms,"Error while loading script "+n);Ss(o),Es(o,!1,t)},lt(i={},{type:"text/javascript",charset:"UTF-8"}),ee(r,i),i=t,ft(t=r,"HTMLScriptElement"),t.src=wt(i),(i=(i=t.ownerDocument&&t.ownerDocument.defaultView)&&i!=l?f(i.document):a=null===a?f(l.document):a)&&t.setAttribute("nonce",i),((e=((i=e)||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:i.documentElement).appendChild(r),o}function xs(){var t;this&&this.Wb&&((t=this.Wb)&&"SCRIPT"==t.tagName&&Ls(t,!0,this.Ma))}function Ls(t,e,n){null!=n&&l.clearTimeout(n),t.onload=s,t.onerror=s,t.onreadystatechange=s,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Ms=0,Fs=1;function Us(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),R.call(this,n),this.code=t}function js(t){this.f=t}function qs(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Ks,this.g=ct(t.secureTokenHeaders||Gs),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||Ws,this.a=ct(t.firebaseHeaders||Hs),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==hr(),!(n=l.XMLHttpRequest||n&&Xl.INTERNAL.node&&Xl.INTERNAL.node.XMLHttpRequest)&&!cr())throw new I("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,cr()?this.f=new rs(self):lr()?this.f=new js(n):this.f=new Bo,this.b=null}w(Us,R),w(js,Uo),js.prototype.a=function(){return new this.f},js.prototype.b=function(){return{}};var Vs,Bs="idToken",Ks=new Rr(3e4,6e4),Gs={"Content-Type":"application/x-www-form-urlencoded"},Ws=new Rr(3e4,6e4),Hs={"Content-Type":"application/json"};function zs(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Qs(t,e){e&&(t.l=Ys("https://securetoken.googleapis.com/v1/token",e),t.h=Ys("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=Ys("https://identitytoolkit.googleapis.com/v2/",e))}function Ys(t,e){return t=kn(t),e=kn(e.url),t.f=t.a+t.f,En(t,e.c),t.a=e.a,Sn(t,e.g),t.toString()}function Xs(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function Js(t,e,n,r,i,o,s){var a;(t=((a=dr(a=yr())==pr&&(a=a.match(/\sChrome\/(\d+)/i))&&2==a.length?parseInt(a[1],10):null)&&a<30||Bt&&$t&&!(9<$t))&&!cr()?(Vs=Vs||new fe(function(t,e){var n,r;n=t,r=e,((window.gapi||{}).client||{}).request?n():(l[Zs]=function(){((window.gapi||{}).client||{}).request?n():r(Error("CORS_UNSUPPORTED"))},function(t,e){Cs(t,null,e,void 0)}(Os(_t($s,{onload:Zs})),function(){r(Error("CORS_UNSUPPORTED"))}))}),m(t.s,t)):m(t.u,t))(e,n,r,i,o,s)}qs.prototype.T=function(){return this.b},qs.prototype.u=function(t,n,e,r,i,o){if(cr()&&(void 0===l.fetch||void 0===l.Headers||void 0===l.Request))throw new I("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s,a=new cs(this.f);o&&(a.g=Math.max(0,o),s=setTimeout(function(){a.dispatchEvent("timeout")},o)),fn(a,"complete",function(){s&&clearTimeout(s);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return ns(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){e=null}n&&n(e)}),pn(a,"ready",function(){s&&clearTimeout(s),Le(this)}),pn(a,"timeout",function(){s&&clearTimeout(s),Le(this),n&&n(null)}),ps(a,t,e,r,i)};var $s=new pt(yt,"https://apis.google.com/js/client.js?onload=%{onload}"),Zs="__fcb"+Math.floor(1e6*Math.random()).toString();function ta(t,e,n,r,i,o,s){var a=kn(e+n);An(a,"key",t.c),s&&An(a,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&An(a,c,i[c]);return new fe(function(e,n){Js(t,a.toString(),function(t){t?t.error?n(Ya(t,o||{})):e(t):n(new I("network-request-failed"))},r,u?void 0:zn(Sr(i)),t.a,t.v.get())})}function ea(t){if("string"!=typeof(t=t.email)||!or.test(t))throw new I("invalid-email")}function na(t){"email"in t&&ea(t)}function ra(t){if(!t[Bs]){if(t.mfaPendingCredential)throw new I("multi-factor-auth-required",null,ct(t));throw new I("internal-error")}}function ia(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new I("internal-error")}else{if(!t.sessionInfo)throw new I("missing-verification-id");if(!t.code)throw new I("missing-verification-code")}}qs.prototype.s=function(t,n,r,i,o){var s=this;Vs.then(function(){window.gapi.client.setApiKey(s.c);var e=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:r,body:i,headers:o,authType:"none",callback:function(t){window.gapi.auth.setToken(e),n&&n(t)}})}).o(function(t){n&&n({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},qs.prototype.zb=function(){return za(this,La,{})},qs.prototype.Bb=function(t,e){return za(this,Oa,{idToken:t,email:e})},qs.prototype.Cb=function(t,e){return za(this,xa,{idToken:t,password:e})};var oa={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function sa(t){if(!t.phoneVerificationInfo)throw new I("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new I("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new I("missing-verification-code")}function aa(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new I("internal-error")}function ua(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(Kn(t=new jn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function ca(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Fo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Fo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Fo(t)):t.errorMessage&&(e=Qa(t.errorMessage)),e)throw e;ra(t)}function ha(t,e){return e.returnIdpCredential=!0,za(t,Ua,e)}function la(t,e){return e.returnIdpCredential=!0,za(t,qa,e)}function fa(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,za(t,ja,e)}function pa(t){if(!t.oobCode)throw new I("invalid-action-code")}(t=qs.prototype).Db=function(t,r){var i={idToken:t},o=[];return at(oa,function(t,e){var n=r[e];null===n?o.push(t):e in r&&(i[e]=n)}),o.length&&(i.deleteAttribute=o),za(this,Oa,i)},t.vb=function(t,e){return lt(t={requestType:"PASSWORD_RESET",email:t},e),za(this,Na,t)},t.wb=function(t,e){return lt(t={requestType:"EMAIL_SIGNIN",email:t},e),za(this,Sa,t)},t.ub=function(t,e){return lt(t={requestType:"VERIFY_EMAIL",idToken:t},e),za(this,Ca,t)},t.Eb=function(t,e,n){return lt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),za(this,Aa,t)},t.fb=function(t){return za(this,Ka,t)},t.nb=function(t,e){return za(this,Pa,{oobCode:t,newPassword:e})},t.Ra=function(t){return za(this,ga,{oobCode:t})},t.jb=function(t){return za(this,da,{oobCode:t})};var da={endpoint:"setAccountInfo",A:pa,Z:"email",B:!0},ga={endpoint:"resetPassword",A:pa,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new I("internal-error")},B:!0},va={endpoint:"signupNewUser",A:function(t){if(ea(t),!t.password)throw new I("weak-password")},G:ra,V:!0,B:!0},ya={endpoint:"createAuthUri",B:!0},ma={endpoint:"deleteAccount",N:["idToken"]},ba={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new I("internal-error")}},wa={endpoint:"emailLinkSignin",N:["email","oobCode"],A:ea,G:ra,V:!0,B:!0},_a={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:ea,G:ra,V:!0},Ia={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:sa,G:ra,B:!0,Na:!0},Ta={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:sa,G:ra,B:!0,Na:!0},Ea={endpoint:"getAccountInfo"},Sa={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new I("internal-error");ea(t)},Z:"email",B:!0},Ca={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new I("internal-error")},Z:"email",B:!0},Aa={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new I("internal-error")},Z:"email",B:!0},Na={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new I("internal-error");ea(t)},Z:"email",B:!0},ka={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},Ra={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new I("internal-error")}},Pa={endpoint:"resetPassword",A:pa,Z:"email",B:!0},Da={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Oa={endpoint:"setAccountInfo",N:["idToken"],A:na,V:!0},xa={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(na(t),!t.password)throw new I("weak-password")},G:ra,V:!0},La={endpoint:"signupNewUser",G:ra,V:!0,B:!0},Ma={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new I("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new I("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new I("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new I("internal-error")},B:!0,Na:!0},Fa={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new I("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new I("internal-error")},B:!0,Na:!0},Ua={endpoint:"verifyAssertion",A:aa,Ya:ua,G:ca,V:!0,B:!0},ja={endpoint:"verifyAssertion",A:aa,Ya:ua,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new I("user-not-found");if(t.errorMessage)throw Qa(t.errorMessage);ra(t)},V:!0,B:!0},qa={endpoint:"verifyAssertion",A:function(t){if(aa(t),!t.idToken)throw new I("internal-error")},Ya:ua,G:ca,V:!0},Va={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new I("invalid-custom-token")},G:ra,V:!0,B:!0},Ba={endpoint:"verifyPassword",A:function(t){if(ea(t),!t.password)throw new I("wrong-password")},G:ra,V:!0,B:!0},Ka={endpoint:"verifyPhoneNumber",A:ia,G:ra,B:!0},Ga={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new I("internal-error");ia(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Fo(t);ra(t)}},Wa={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ia,G:ra,B:!0},Ha={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Bs]^!!t.refreshToken)throw new I("internal-error")},B:!0,Na:!0};function za(t,e,n){if(!function(t,e){if(!e||!e.length)return 1;if(t){for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return}return 1}}(n,e.N))return we(new I("internal-error"));var r,i=!!e.Na,o=e.Ub||"POST";return be(n).then(e.A).then(function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),ta(t,i?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)}).then(function(t){return r=t,e.Ya?e.Ya(n,r):r}).then(e.G).then(function(){if(!e.Z)return r;if(!(e.Z in r))throw new I("internal-error");return r[e.Z]})}function Qa(t){return Ya({error:{errors:[{message:t}],code:400,message:t}})}function Ya(t,e){var n,r=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",i={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(r=i[r]?new I(i[r]):null)return r;for(n in r=t.error&&t.error.message||"",lt(i={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=r.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,i)if(0===r.indexOf(n))return new I(i[n],e);return new I("internal-error",e=!e&&t?Er(t):e)}function Xa(t){var o;this.b=t,this.a=null,this.rb=(o=this,(tu=tu||new fe(function(t,e){function n(){kr(),mr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){kr(),e(Error("Network Error"))},timeout:$a.get()})}var r;mr("gapi.iframes.Iframe")?t():mr("gapi.load")?n():(r="__iframefcb"+Math.floor(1e6*Math.random()).toString(),l[r]=function(){mr("gapi.load")?n():e(Error("Network Error"))},be(Os(r=_t(Ja,{onload:r}))).o(function(){e(Error("Network Error"))}))}).o(function(t){throw tu=null,t})).then(function(){return new fe(function(r,i){mr("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:mr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(t){function e(){clearTimeout(n),r()}o.a=t,o.a.restyle({setHideOnLeave:!1});var n=setTimeout(function(){i(Error("Network Error"))},Za.get());t.ping(e).then(e,function(){i(Error("Network Error"))})})})}))}var Ja=new pt(yt,"https://apis.google.com/js/api.js?onload=%{onload}"),$a=new Rr(3e4,6e4),Za=new Rr(5e3,15e3),tu=null;function eu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?Rn((t=kn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):Rn("https",this.l,null,"/__/auth/iframe"),this.a=t,An(this.a,"apiKey",this.h),An(this.a,"appName",this.i),this.b=null,this.c=[]}function nu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function ru(t){try{return Xl.app(t).auth().Ga()}catch(t){return[]}}function iu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function ou(t){var a=Zn();return za(t,ka,{}).then(function(t){return t.authorizedDomains||[]}).then(function(t){t:{for(var e=(n=kn(a)).c,n=n.a,r=0;r<t.length;r++){var i=t[r],o=n,s=e;if(o=0==i.indexOf("chrome-extension://")?kn(i).a==o&&"chrome-extension"==s:("http"==s||"https"==s)&&(ir.test(i)?o==i:(i=i.split(".").join("\\."),new RegExp("^(.+\\."+i+"|"+i+")$","i").test(o)))){t=!0;break t}}t=!1}if(!t)throw new Lo(Zn())})}function su(i){return i.m||(i.m=sr().then(function(){var t,e,n,r;i.u||(t=i.c,e=i.i,n=ru(i.b),(r=new eu(i.s,i.g,i.b,i.f)).f=t,r.b=e,r.c=z(n||[]),i.u=r.toString()),i.v=new Xa(i.u),function(r){if(!r.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.rb.then(function(){t.a.register("authEvent",e,mr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(r.v,function(t){var e={};if(t&&t.authEvent){var n=!1;for(t=Po(t.authEvent),e=0;e<r.h.length;e++)n=r.h[e](t)||n;return(e={}).status=n?"ACK":"ERROR",be(e)}return e.status="ERROR",be(e)})}(i)}),i.m)}function au(t){return t.l||(t.C=t.c?vr(t.c,ru(t.b)):null,t.l=new qs(t.g,N(t.i),t.C),t.f&&Qs(t.l,t.f)),t.l}function uu(t,e,n,r,i,o,s,a,u,c,h,l){return(t=new nu(t,e,n,r,i,l)).l=o,t.g=s,t.i=a,t.b=ct(u||null),t.f=c,t.yb(h).toString()}function cu(t){if(this.a=t||Xl.INTERNAL.reactNative&&Xl.INTERNAL.reactNative.AsyncStorage,!this.a)throw new I("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function hu(t){this.b=t,this.a={},this.f=m(this.c,this)}eu.prototype.toString=function(){return this.f?An(this.a,"v",this.f):Bn(this.a.b,"v"),this.b?An(this.a,"eid",this.b):Bn(this.a.b,"eid"),this.c.length?An(this.a,"fw",this.c.join(",")):Bn(this.a.b,"fw"),this.a.toString()},nu.prototype.yb=function(t){return this.h=t,this},nu.prototype.toString=function(){var t;if(An(t=this.v?Rn((t=kn(this.v.url)).c,t.a,t.g,"/emulator/auth/handler"):Rn("https",this.u,null,"/__/auth/handler"),"apiKey",this.s),An(t,"appName",this.c),An(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=Xl.app(this.c).auth().la()}catch(t){n=null}for(r in e.ob=n,An(t,"providerId",this.a.providerId),e=Sr((n=this.a).Ib))e[r]=e[r].toString();for(var r=n.Qc,e=ct(e),i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.pb&&n.ob&&!e[n.pb]&&(e[n.pb]=n.ob),ut(e)||An(t,"customParameters",Er(e))}if("function"==typeof this.a.Qb&&((n=this.a.Qb()).length&&An(t,"scopes",n.join(","))),this.l?An(t,"redirectUrl",this.l):Bn(t.b,"redirectUrl"),this.g?An(t,"eventId",this.g):Bn(t.b,"eventId"),this.i?An(t,"v",this.i):Bn(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Nn(t,s)&&An(t,s,this.b[s]);return this.h?An(t,"tid",this.h):Bn(t.b,"tid"),this.f?An(t,"eid",this.f):Bn(t.b,"eid"),(s=ru(this.c)).length&&An(t,"fw",s.join(",")),t.toString()},(t=iu.prototype).Ob=function(e,n,t){var r=new I("popup-closed-by-user"),i=new I("web-storage-unsupported"),o=this,s=!1;return this.ma().then(function(){var t,r;r={type:"webStorageSupport"},su(t=o).then(function(){return e=t.v,n=r,e.rb.then(function(){return new fe(function(t){e.a.send(n.type,n,t,mr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})});var e,n}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}).then(function(t){t||(e&&nr(e),n(i),s=!0)})}).o(function(){}).then(function(){if(!s)return n=e,new fe(function(e){return function t(){vn(2e3).then(function(){return n&&!n.closed?t():void e()})}()});var n}).then(function(){if(!s)return vn(t).then(function(){n(r)})})},t.Xb=function(){var t=yr();return!Tr(t)&&!Nr(t)},t.Tb=function(){return!1},t.Mb=function(e,t,n,r,i,o,s,a){if(!e)return we(new I("popup-blocked"));if(s&&!Tr())return this.ma().o(function(t){nr(e),i(t)}),r(),be();this.a||(this.a=ou(au(this)));var u=this;return this.a.then(function(){var t=u.ma().o(function(t){throw nr(e),i(t),t});return r(),t}).then(function(){ko(n),s||tr(uu(u.s,u.g,u.b,t,n,null,o,u.c,void 0,u.i,a,u.f),e)}).o(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Nb=function(t,e,n,r){this.a||(this.a=ou(au(this)));var i=this;return this.a.then(function(){ko(e),tr(uu(i.s,i.g,i.b,t,e,Zn(),n,i.c,void 0,i.i,r,i.f))}).o(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.ma=function(){var t=this;return su(this).then(function(){return t.v.rb}).o(function(){throw t.a=null,new I("network-request-failed")})},t.$b=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Sa=function(e){W(this.h,function(t){return t==e})},(t=cu.prototype).get=function(t){return be(this.a.getItem(t)).then(function(t){return t&&Cr(t)})},t.set=function(t,e){return be(this.a.setItem(t,Er(e)))},t.U=function(t){return be(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var lu,fu=[];function pu(t,e,n){ut(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function du(t){this.a=t}function gu(t){this.c=t,this.b=!1,this.a=[]}function vu(r,t,e,n){var i,o,s,a,u=e||{},c=null;if(r.b)return we(Error("connection_unavailable"));var h=n?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new fe(function(e,n){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout(function(){n(Error("unsupported_event"))},h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){n(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?e(t.data.response):n(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),n(Error("invalid_response"))))}},r.a.push(c),l.port1.addEventListener("message",o),r.c.postMessage({eventType:t,eventId:i,data:u},[l.port2])):n(Error("connection_unavailable"))}).then(function(t){return yu(r,c),t}).o(function(t){throw yu(r,c),t})}function yu(t,e){var n,r;e&&(n=e.messageChannel,r=e.onMessage,n&&(n.port1.removeEventListener("message",r),n.port1.close()),W(t.a,function(t){return t==e}))}function mu(){if(!Iu())throw new I("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=l.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t,e,n,r=this;cr()&&self?(this.v=(n=cr()?self:null,j(fu,function(t){t.b==n&&(e=t)}),e||(e=new hu(n),fu.push(e)),e),pu(this.v,"keyChanged",function(t,n){return Au(r).then(function(e){return 0<e.length&&j(r.a,function(t){t(e)}),{keyProcessed:K(e,n.key)}})}),pu(this.v,"ping",function(){return be(["keyChanged"])})):((t=l.navigator)&&t.serviceWorker?be().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).o(function(){return null}):be(null)).then(function(t){(r.h=t)&&(r.g=new gu(new du(t)),vu(r.g,"ping",null,!0).then(function(t){t[0].fulfilled&&K(t[0].value,"keyChanged")&&(r.s=!0)}).o(function(){}))})}function bu(i){return new fe(function(e,n){var t=i.m.open("firebaseLocalStorageDb",1);t.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},t.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},t.onsuccess=function(t){var r;(t=t.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(t):(r=i,new fe(function(t,e){var n=r.m.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){t()},n.onerror=function(t){e(Error(t.target.error))}}).then(function(){return bu(i)}).then(function(t){e(t)}).o(function(t){n(t)}))}})}function wu(t){return t.i||(t.i=bu(t)),t.i}function _u(i,t){var o=0;return new fe(function e(n,r){wu(i).then(t).then(n).o(function(t){return 3<++o?void r(t):wu(i).then(function(t){return t.close(),i.i=void 0,e(n,r)}).o(function(t){r(t)})})})}function Iu(){try{return l.indexedDB}catch(t){return}}function Tu(t){return t.objectStore("firebaseLocalStorage")}function Eu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Su(t){return new fe(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Cu(t,e){return t.g&&t.h&&((n=l.navigator)&&n.serviceWorker&&n.serviceWorker.controller||null)===t.h?vu(t.g,"keyChanged",{key:e},t.s).then(function(){}).o(function(){}):be();var n}function Au(r){return wu(r).then(function(t){var i=Tu(Eu(t,!1));return i.getAll?Su(i.getAll()):new fe(function(e,n){var r=[],t=i.openCursor();t.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},t.onerror=function(t){n(t.target.error)}})}).then(function(t){var e={},n=[];if(0==r.b){for(n=0;n<t.length;n++)e[t[n].fbase_key]=t[n].value;n=function t(e,n){var r,i=[];for(r in e)r in n&&typeof e[r]==typeof n[r]?"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(r.c,e),r.c=e}return n})}function Nu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function ku(t){var r=this,i=null;this.a=[],this.type="indexedDB",this.c=t,this.b=be().then(function(){if(Iu()){var e=Ar(),n="__sak"+e;return lu=lu||new mu,(i=lu).set(n,e).then(function(){return i.get(n)}).then(function(t){if(t!==e)throw Error("indexedDB not supported!");return i.U(n)}).then(function(){return i}).o(function(){return r.c})}return r.c}).then(function(t){return r.type=t.type,t.ca(function(e){j(r.a,function(t){t(e)})}),t})}function Ru(){this.a={},this.type="inMemory"}function Pu(){if(!function(){var t="Node"==hr();if(!(t=Du()||t&&Xl.INTERNAL.node&&Xl.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==hr())throw new I("internal-error","The LocalStorage compatibility library was not found.");throw new I("web-storage-unsupported")}this.a=Du()||Xl.INTERNAL.node.localStorage,this.type="localStorage"}function Du(){try{var t=l.localStorage,e=Ar();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Ou(){this.type="nullStorage"}function xu(){if(!function(){var t="Node"==hr();if(!(t=Lu()||t&&Xl.INTERNAL.node&&Xl.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==hr())throw new I("internal-error","The SessionStorage compatibility library was not found.");throw new I("web-storage-unsupported")}this.a=Lu()||Xl.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Lu(){try{var t=l.sessionStorage,e=Ar();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Mu(){var t={};t.Browser=ju,t.Node=qu,t.ReactNative=Vu,t.Worker=Bu,this.a=t[hr()]}hu.prototype.c=function(n){var e,r=n.data.eventType,i=n.data.eventId,t=this.a[r];t&&0<t.length&&(n.ports[0].postMessage({status:"ack",eventId:i,eventType:r,response:null}),e=[],j(t,function(t){e.push(be().then(function(){return t(n.origin,n.data.data)}))}),Ie(e).then(function(t){var e=[];j(t,function(t){e.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})}),j(e,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:e})}))},du.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},gu.prototype.close=function(){for(;0<this.a.length;)yu(this,this.a[0]);this.b=!0},(t=mu.prototype).set=function(r,i){var o=this,s=!1;return _u(this,function(t){return Su((t=Tu(Eu(t,!0))).get(r))}).then(function(n){return _u(o,function(t){if(t=Tu(Eu(t,!0)),n)return n.value=i,Su(t.put(n));o.b++,s=!0;var e={};return e.fbase_key=r,e.value=i,Su(t.add(e))})}).then(function(){return o.c[r]=i,Cu(o,r)}).oa(function(){s&&o.b--})},t.get=function(e){return _u(this,function(t){return Su(Tu(Eu(t,!1)).get(e))}).then(function(t){return t&&t.value})},t.U=function(e){var n=this,r=!1;return _u(this,function(t){return r=!0,n.b++,Su(Tu(Eu(t,!0)).delete(e))}).then(function(){return delete n.c[e],Cu(n,e)}).oa(function(){r&&n.b--})},t.ca=function(t){var n;0==this.a.length&&(Nu(n=this),function e(){n.f=setTimeout(function(){n.l=Au(n).then(function(e){0<e.length&&j(n.a,function(t){t(e)})}).then(function(){e()}).o(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()),this.a.push(t)},t.ia=function(e){W(this.a,function(t){return t==e}),0==this.a.length&&Nu(this)},(t=ku.prototype).get=function(e){return this.b.then(function(t){return t.get(e)})},t.set=function(e,n){return this.b.then(function(t){return t.set(e,n)})},t.U=function(e){return this.b.then(function(t){return t.U(e)})},t.ca=function(t){this.a.push(t)},t.ia=function(e){W(this.a,function(t){return t==e})},(t=Ru.prototype).get=function(t){return be(this.a[t])},t.set=function(t,e){return this.a[t]=e,be()},t.U=function(t){return delete this.a[t],be()},t.ca=function(){},t.ia=function(){},(t=Pu.prototype).get=function(t){var e=this;return be().then(function(){return Cr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return be().then(function(){var t=Er(n);null===t?r.U(e):r.a.setItem(e,t)})},t.U=function(t){var e=this;return be().then(function(){e.a.removeItem(t)})},t.ca=function(t){l.window&&$e(l.window,"storage",t)},t.ia=function(t){l.window&&en(l.window,"storage",t)},(t=Ou.prototype).get=function(){return be(null)},t.set=function(){return be()},t.U=function(){return be()},t.ca=function(){},t.ia=function(){},(t=xu.prototype).get=function(t){var e=this;return be().then(function(){return Cr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return be().then(function(){var t=Er(n);null===t?r.U(e):r.a.setItem(e,t)})},t.U=function(t){var e=this;return be().then(function(){e.a.removeItem(t)})},t.ca=function(){},t.ia=function(){};var Fu,Uu,ju={F:Pu,bb:xu},qu={F:Pu,bb:xu},Vu={F:cu,bb:Ou},Bu={F:Pu,bb:Ou},Ku={rd:"local",NONE:"none",td:"session"};function Gu(){var t=!(Nr(yr())||!ur()),e=Tr(),n=br();this.m=t,this.h=e,this.l=n,this.a={},t=Fu=Fu||new Mu;try{this.g=!$n()&&xr()||!l.indexedDB?new t.a.F:new ku(new(cr()?Ru:t.a.F))}catch(t){this.g=new Ru,this.h=!0}try{this.i=new t.a.bb}catch(t){this.i=new Ru}this.v=new Ru,this.f=m(this.Yb,this),this.b={}}function Wu(){return Uu=Uu||new Gu}function Hu(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function zu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Qu(t,e,n){return n=zu(e,n),"local"==e.F&&(t.b[n]=null),Hu(t,e.F).U(n)}function Yu(t){t.c&&(clearInterval(t.c),t.c=null)}function Xu(t){this.a=t,this.b=Wu()}(t=Gu.prototype).get=function(t,e){return Hu(this,t.F).get(zu(t,e))},t.set=function(e,t,n){var r=zu(e,n),i=this,o=Hu(this,e.F);return o.set(r,t).then(function(){return o.get(r)}).then(function(t){"local"==e.F&&(i.b[r]=t)})},t.addListener=function(t,e,n){var r;t=zu(t,e),this.l&&(this.b[t]=l.localStorage.getItem(t)),ut(this.a)&&(Hu(this,"local").ca(this.f),this.h||($n()||!xr())&&l.indexedDB||!this.l||(Yu(r=this),r.c=setInterval(function(){for(var t in r.a){var e=l.localStorage.getItem(t),n=r.b[t];e!=n&&(r.b[t]=e,e=new Ve({type:"storage",key:t,target:window,oldValue:n,newValue:e,a:!0}),r.Yb(e))}},1e3))),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=zu(t,e),this.a[t]&&(W(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),ut(this.a)&&(Hu(this,"local").ia(this.f),Yu(this))},t.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=l.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Hu(this,"local").ia(this.f):Yu(this),this.m)if(n=l.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?l.localStorage.setItem(e,r):l.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this,n=function(){void 0===t.a.a&&o.b[e]===l.localStorage.getItem(e)||(o.b[e]=l.localStorage.getItem(e),o.mb(e))};Bt&&$t&&10==$t&&l.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else j(t,m(this.mb,this))},t.mb=function(t){this.a[t]&&j(this.a[t],function(t){t()})};var Ju,$u={name:"authEvent",F:"local"};function Zu(){this.a=Wu()}function tc(t,e){this.b=ec,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=l.Int32Array?new Int32Array(64):Array(64),void 0===Ju&&(Ju=l.Int32Array?new Int32Array(uc):uc),this.reset()}w(tc,function(){this.b=-1});for(var ec=64,nc=ec-1,rc=[],ic=0;ic<nc;ic++)rc[ic]=0;var oc=H(128,rc);function sc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;e<64;e++){var i=0|n[e-15],r=0|n[e-2],o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;e<64;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&l)+(0|Ju[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function ac(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(sc(t),i=0);else{if(!d(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(sc(t),i=0)}}t.c=i,t.g+=n}tc.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):z(this.h)};var uc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function cc(){tc.call(this,8,hc)}w(cc,tc);var hc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function lc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new Zu,this.g=new Xu(this.h),this.f=null,this.b=[],this.a=this.c=null}function fc(t){return new I("invalid-cordova-configuration",t)}function pc(t){var e=new cc;ac(e,t),t=[];var n=8*e.g;e.c<56?ac(e,oc,56-e.c):ac(e,oc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(sc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return V(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}function dc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function gc(a){return a.f||(a.f=a.ma().then(function(){return new fe(function(n){function e(r){t=!0,s&&s.cancel(),vc(i).then(function(t){var e,n=o;t&&r&&r.url&&(e=null,n=(e=-1!=(n=Qi(r.url)).indexOf("/__/auth/callback")?(e="object"==typeof(e=Cr(Nn(e=kn(n),"firebaseError")||null))?T(e):null)?new Ro(t.c,t.b,null,null,e,null,t.T()):new Ro(t.c,t.b,n,t.f,null,null,t.T()):e)||o),dc(i,n)})}var i,o,t,s,r;a.Ea(function t(e){return n(e),a.Sa(t),!1}),i=a,o=new Ro("unknown",null,null,null,new I("no-auth-event")),t=!1,s=vn(500).then(function(){return vc(i).then(function(){t||dc(i,o)})}),r=l.handleOpenURL,l.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(mr("BuildInfo.packageName",l).toLowerCase()+"://")&&e({url:t}),"function"==typeof r)try{r(t)}catch(t){console.error(t)}},xo=xo||new Do,function(t){var n=xo;n.a.push(t),n.b||(n.b=function(t){for(var e=0;e<n.a.length;e++)n.a[e](t)},"function"==typeof(t=mr("universalLinks.subscribe",l))&&t(null,n.b))}(e)})})),a.f}function vc(e){var t,n=null;return(t=e.g).b.get($u,t.a).then(Po).then(function(t){return n=t,Qu((t=e.g).b,$u,t.a)}).then(function(){return n})}function yc(t){this.a=t,this.b=Wu()}(t=lc.prototype).ma=function(){return this.Ia||(this.Ia=(ar(void 0)?sr().then(function(){return new fe(function(t,e){var n=l.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):we(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof mr("universalLinks.subscribe",l))throw fc("cordova-universal-links-plugin-fix is not installed");if(void 0===mr("BuildInfo.packageName",l))throw fc("cordova-plugin-buildinfo is not installed");if("function"!=typeof mr("cordova.plugins.browsertab.openUrl",l))throw fc("cordova-plugin-browsertab is not installed");if("function"!=typeof mr("cordova.InAppBrowser.open",l))throw fc("cordova-plugin-inappbrowser is not installed")},function(){throw new I("cordova-not-ready")}))},t.Ob=function(t,e){return e(new I("operation-not-supported-in-this-environment")),be()},t.Mb=function(){return we(new I("operation-not-supported-in-this-environment"))},t.$b=function(){return!1},t.Xb=function(){return!0},t.Tb=function(){return!0},t.Nb=function(t,e,n,r){if(this.c)return we(new I("redirect-operation-pending"));var i=this,o=l.document,s=null,a=null,u=null,c=null;return this.c=be().then(function(){return ko(e),gc(i)}).then(function(){return function(n,t,e,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Ro(t,r,null,o,new I("no-auth-event"),null,i),a=mr("BuildInfo.packageName",l);if("string"!=typeof a)throw new I("invalid-cordova-configuration");var u=mr("BuildInfo.displayName",l),c={};if(yr().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=a;else{if(!yr().toLowerCase().match(/android/))return we(new I("operation-not-supported-in-this-environment"));c.apn=a}u&&(c.appDisplayName=u),o=pc(o),c.sessionId=o;var h=uu(n.v,n.i,n.l,t,e,null,r,n.m,c,n.u,i,n.s);return n.ma().then(function(){var t=n.h;return n.C.a.set($u,s.w(),t)}).then(function(){var t=mr("cordova.plugins.browsertab.isAvailable",l);if("function"!=typeof t)throw new I("invalid-cordova-configuration");var e=null;t(function(t){if(t){if("function"!=typeof(e=mr("cordova.plugins.browsertab.openUrl",l)))throw new I("invalid-cordova-configuration");e(h)}else{if("function"!=typeof(e=mr("cordova.InAppBrowser.open",l)))throw new I("invalid-cordova-configuration");t=yr(),n.a=e(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new fe(function(e,t){a=function(){var t=mr("cordova.plugins.browsertab.close",l);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(a),u=function(){s=s||vn(2e3).then(function(){t(new I("redirect-cancelled-by-user"))})},c=function(){Pr()&&u()},o.addEventListener("resume",u,!1),yr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)}).o(function(t){return vc(i).then(function(){throw t})})}).oa(function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),s&&s.cancel(),a&&i.Sa(a),i.c=null})},t.Ea=function(e){this.b.push(e),gc(this).o(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new Ro("unknown",null,null,null,new I("no-auth-event")),e(t))})},t.Sa=function(e){W(this.b,function(t){return t==e})};var mc={name:"pendingRedirect",F:"session"};function bc(t){return Qu(t.b,mc,t.a)}function wc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=m(this.s,this),this.b=new Lc,this.C=new qc,this.g=new yc(Oc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=_c(this.D,this.v,this.m,E,this.J)}function _c(t,e,n,r,i){var o=Xl.SDK_VERSION||null;return new(ar()?lc:iu)(t,e,n,o,r,i)}function Ic(e){e.f||(e.f=!0,e.a.Ea(e.l));var n=e.a;return e.a.ma().o(function(t){throw e.a==n&&e.reset(),t})}function Tc(n){n.a.Xb()&&Ic(n).o(function(t){var e=new Ro("unknown",null,null,null,new I("operation-not-supported-in-this-environment"));kc(t)&&n.s(e)}),n.a.Tb()||Mc(n.b)}function Ec(n,t){K(n.h,t)||n.h.push(t),n.f||(t=n.g).b.get(mc,t.a).then(function(t){return"pending"==t}).then(function(t){t?bc(n.g).then(function(){Ic(n).o(function(t){var e=new Ro("unknown",null,null,null,new I("operation-not-supported-in-this-environment"));kc(t)&&n.s(e)})}):Tc(n)}).o(function(){Tc(n)})}function Sc(t,e){W(t.h,function(t){return t==e})}wc.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=_c(this.D,this.v,this.m,null,this.J),this.i={}},wc.prototype.s=function(t){if(!t)throw new I("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return Mc(this.b),e};var Cc=new Rr(2e3,1e4),Ac=new Rr(3e4,6e4);function Nc(t,e,n,r,i,o,s){return t.a.Mb(e,n,r,function(){t.f||(t.f=!0,t.a.Ea(t.l))},function(){t.reset()},i,o,s)}function kc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Rc(e,t,n,r,i){var o,s;return(s=e.g).b.set(mc,"pending",s.a).then(function(){return e.a.Nb(t,n,r,i).o(function(t){if(kc(t))throw new I("operation-not-supported-in-this-environment");return o=t,bc(e.g).then(function(){throw o})}).then(function(){return e.a.$b()?new fe(function(){}):bc(e.g).then(function(){return e.qa()}).then(function(){}).o(function(){})})})}function Pc(t,e,n,r,i){return t.a.Ob(r,function(t){e.na(n,null,t,i)},Cc.get())}wc.prototype.qa=function(){return this.b.qa()};var Dc={};function Oc(t,e,n){return t=t+":"+e,t=n?t+":"+n.url:t}function xc(t,e,n,r){var i=Oc(e,n,r);return Dc[i]||(Dc[i]=new wc(t,e,n,r)),Dc[i]}function Lc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Mc(t){t.g||(t.g=!0,jc(t,!1,null,null))}function Fc(t){t.g&&!t.i&&jc(t,!1,null,null)}function Uc(t,e){if(t.b=function(){return be(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function jc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return we(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Uc(t,n):Uc(t,{user:null}),t.f=[],t.c=[]}function qc(){}function Vc(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function Bc(t,e){this.a=e,jr(this,"verificationId",t)}function Kc(t,e,n,r){return new Co(t).fb(e,n).then(function(t){return new Bc(t,r)})}function Gc(t){var e=xi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new I("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");qr(this,{token:t,expirationTime:Or(1e3*e.exp),authTime:Or(1e3*e.auth_time),issuedAtTime:Or(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Wc(t,e,n){var r=e&&e[zc];if(!r)throw new I("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ct(e),this.g=n,this.c=new Yi(null,r),this.b=[];var i=this;j(e[Hc]||[],function(t){(t=Gr(t))&&i.b.push(t)}),jr(this,"auth",this.a),jr(this,"session",this.c),jr(this,"hints",this.b)}Lc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Lc.prototype.h=function(t,e){var n,r,i,o;t?(this.reset(),this.g=!0,n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code,this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(jc(this,!0,null,t.a),be()):e.Fa(n,r)?function(e,t,n){n=n.Fa(t.c,t.b);var r=t.g,i=t.f,o=t.i,s=t.T(),a=!!t.c.match(/Redirect$/);n(r,i,s,o).then(function(t){jc(e,a,t,null)}).o(function(t){jc(e,a,null,t)})}(this,t,e):we(new I("invalid-auth-event")):(jc(this,!1,null,null),be())):we(new I("invalid-auth-event"))},Lc.prototype.qa=function(){var i=this;return new fe(function(t,e){var n,r;i.b?i.b().then(t,e):(i.f.push(t),i.c.push(e),n=i,r=new I("timeout"),n.a&&n.a.cancel(),n.a=vn(Ac.get()).then(function(){n.b||(n.g=!0,jc(n,!0,null,r))}))})},qc.prototype.h=function(t,e){var n,r,i,o,s;t?(n=t.c,r=t.b,t.a?(e.na(t.c,null,t.a,t.b),be()):e.Fa(n,r)?(i=e,o=(t=t).b,s=t.c,i.Fa(s,o)(t.g,t.f,t.T(),t.i).then(function(t){i.na(s,t,null,o)}).o(function(t){i.na(s,null,t,o)})):we(new I("invalid-auth-event"))):we(new I("invalid-auth-event"))},Bc.prototype.confirm=function(t){return t=Ao(this.verificationId,t),this.a(t)};var Hc="mfaInfo",zc="mfaPendingCredential";function Qc(t,e,n,r){I.call(this,"multi-factor-auth-required",r,e),this.b=new Wc(t,e,n),jr(this,"resolver",this.b)}function Yc(t,e,n){if(t&&v(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new Qc(e,t.serverResponse,n,t.message)}catch(t){}return null}function Xc(){}function Jc(t){jr(this,"factorId",t.fa),this.a=t}function $c(t){if(Jc.call(this,t),this.a.fa!=Co.PROVIDER_ID)throw new I("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function Zc(t,e){for(var n in qe.call(this,t),e)this[n]=e[n]}function th(t,e){this.a=t,this.b=[],this.c=m(this.yc,this),$e(this.a,"userReloaded",this.c);var r=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&j(e.multiFactor.enrolledFactors,function(t){var e=null,n={};if(t){t.uid&&(n[zr]=t.uid),t.displayName&&(n[Wr]=t.displayName),t.enrollmentTime&&(n[Hr]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(n[Qr]=t.phoneNumber);try{e=new Yr(n)}catch(t){}t=e}else t=null;t&&r.push(t)}),eh(this,r)}function eh(t,e){t.b=e,jr(t,"enrolledFactors",e)}function nh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function rh(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}function ih(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function oh(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function sh(t,e){t.b=Oi(e[Bs]||""),t.a=e.refreshToken,oh(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function ah(e,t){return r=e.f,i=t,new fe(function(e,n){"refresh_token"==i.grant_type&&i.refresh_token||"authorization_code"==i.grant_type&&i.code?Js(r,r.l+"?key="+encodeURIComponent(r.c),function(t){t?t.error?n(Ya(t)):t.access_token&&t.refresh_token?e(t):n(new I("internal-error")):n(new I("network-request-failed"))},"POST",Vn(i).toString(),r.g,r.m.get()):n(new I("internal-error"))}).then(function(t){return e.b=Oi(t.access_token),e.a=t.refresh_token,oh(e,t.expires_in),{accessToken:e.b.toString(),refreshToken:e.a}}).o(function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t});var r,i}function uh(t,e){this.a=t||null,this.b=e||null,qr(this,{lastSignInTime:Or(e||null),creationTime:Or(t||null)})}function ch(t,e,n,r,i,o){qr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function hh(t,e,n){this.J=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r,i=Xl.SDK_VERSION?vr(Xl.SDK_VERSION):null;this.a=new qs(this.l,N(E),i),t.emulatorConfig&&Qs(this.a,t.emulatorConfig),this.b=new ih(this.a),mh(this,e[Bs]),sh(this.b,e),jr(this,"refreshToken",this.b.a),_h(this,n||{}),ln.call(this),this.R=!1,this.s&&wr()&&(this.i=xc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=(r=this,new nh(function(){return r.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var t=r.b.c-Date.now()-3e5;return 0<t?t:0})),this.aa=m(this.hb,this);var o=this;this.ya=null,this.Oa=function(t){o.wa(t.h)},this.ja=null,this.Aa=function(t){Qs(o.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){ph(o,t.f)},this.ba=null,this.O=new th(this,n),jr(this,"multiFactor",this.O)}function lh(t,e){t.ja&&en(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&$e(e,"languageCodeChanged",t.Oa)}function fh(t,e){t.X&&en(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&$e(e,"emulatorConfigChanged",t.Aa)}function ph(t,e){t.$=e,Xs(t.a,Xl.SDK_VERSION?vr(Xl.SDK_VERSION,t.$):null)}function dh(t,e){t.ba&&en(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&$e(e,"frameworkChanged",t.Ba)}function gh(e){try{return Xl.app(e.m).auth()}catch(t){throw new I("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function vh(t){t.D||t.u.b||(t.u.start(),en(t,"tokenChanged",t.aa),$e(t,"tokenChanged",t.aa))}function yh(t){en(t,"tokenChanged",t.aa),t.u.stop()}function mh(t,e){t.za=e,jr(t,"_lat",e)}function bh(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return Ie(e).then(function(){return t})}function wh(t){t.i&&!t.R&&(t.R=!0,Ec(t.i,t))}function _h(t,e){qr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new uh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Ih(){}function Th(t){return be().then(function(){if(t.D)throw new I("app-deleted")})}function Eh(t){return V(t.providerData,function(t){return t.providerId})}function Sh(t,e){e&&(Ch(t,e.providerId),t.providerData.push(e))}function Ch(t,e){W(t.providerData,function(t){return t.providerId==e})}function Ah(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&jr(t,e,n)}function Nh(e,t){var n,r;e!=t&&(qr(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?jr(e,"metadata",new uh((r=t.metadata).a,r.b)):jr(e,"metadata",new uh),j(t.providerData,function(t){Sh(e,t)}),n=e.b,r=t.b,n.b=r.b,n.a=r.a,n.c=r.c,jr(e,"refreshToken",e.b.a),eh(e.O,t.O.b))}function kh(i){return i.I().then(function(t){var e,n,r=i.isAnonymous;return n=t,za((e=i).a,Ea,{idToken:n}).then(m(e.Kc,e)).then(function(){return r||Ah(i,"isAnonymous",!1),t})})}function Rh(t,e){e[Bs]&&t.za!=e[Bs]&&(sh(t.b,e),t.dispatchEvent(new Zc("tokenChanged")),mh(t,e[Bs]),Ah(t,"refreshToken",t.b.a))}function Ph(t,e){return kh(t).then(function(){if(K(Eh(t),e))return bh(t).then(function(){throw new I("provider-already-linked")})})}function Dh(t,e,n){return Vr({user:t,credential:No(e),additionalUserInfo:e=ji(e),operationType:n})}function Oh(t,e){return Rh(t,e),t.reload().then(function(){return t})}function xh(n,r,t,e,i){if(!wr())return we(new I("operation-not-supported-in-this-environment"));if(n.h&&!i)return we(n.h);var o=Ui(t.providerId),s=Ar(n.uid+":::"),a=null,u=rr(a=(!Tr()||ur())&&n.s&&t.isOAuthProvider?uu(n.s,n.l,n.m,r,t,null,s,Xl.SDK_VERSION||null,null,null,n.tenantId):a,o&&o.ua,o&&o.ta);return e=e().then(function(){if(Mh(n),!i)return n.I().then(function(){})}).then(function(){return Nc(n.i,u,r,t,s,!!a,n.tenantId)}).then(function(){return new fe(function(t,e){n.na(r,null,new I("cancelled-popup-request"),n.g||null),n.f=t,n.C=e,n.g=s,n.c=Pc(n.i,n,r,u,s)})}).then(function(t){return u&&nr(u),t?Vr(t):null}).o(function(t){throw u&&nr(u),t}),Fh(n,e,i)}function Lh(e,t,n,r,i){if(!wr())return we(new I("operation-not-supported-in-this-environment"));if(e.h&&!i)return we(e.h);var o=null,s=Ar(e.uid+":::");return r=r().then(function(){if(Mh(e),!i)return e.I().then(function(){})}).then(function(){return e.ga=s,bh(e)}).then(function(t){return t=e.ha?(t=e.ha).b.set(qh,e.w(),t.a):t}).then(function(){return Rc(e.i,t,n,s,e.tenantId)}).o(function(t){if(o=t,e.ha)return Vh(e.ha);throw o}).then(function(){if(o)throw o}),Fh(e,r,i)}function Mh(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new I("internal-error");throw new I("auth-domain-config-required")}}function Fh(n,t,e){var r,i=(t=t,e=e,(r=n).h&&!e?(t.cancel(),we(r.h)):t.o(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(r.h||r.dispatchEvent(new Zc("userInvalidated")),r.h=t),t}));return n.J.push(i),i.oa(function(){G(n.J,i)}),i.o(function(t){var e=null;throw(e=t&&"auth/multi-factor-auth-required"===t.code?Yc(t.w(),gh(n),m(n.jc,n)):e)||t})}function Uh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Bs]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new hh(e,n,t);return t.providerData&&j(t.providerData,function(t){t&&Sh(i,Vr(t))}),t.redirectEventId&&(i.ga=t.redirectEventId),i}function jh(t){this.a=t,this.b=Wu()}Wc.prototype.Rc=function(t){var n=this;return t.sb(this.a.a,this.c).then(function(t){var e=ct(n.f);return delete e[Hc],delete e[zc],lt(e,t),n.g(e)})},w(Qc,I),Xc.prototype.sb=function(t,e,n){return e.type==Xi?(o=this,s=t,a=n,e.Ha().then(function(t){return t={idToken:t},void 0!==a&&(t.displayName=a),lt(t,{phoneVerificationInfo:So(o.a)}),za(s,Ia,t)})):(r=this,i=t,e.Ha().then(function(t){return lt(t={mfaPendingCredential:t},{phoneVerificationInfo:So(r.a)}),za(i,Ta,t)}));var r,i,o,s,a},w(Jc,Xc),w($c,Jc),w(Zc,qe),(t=th.prototype).yc=function(t){var e;eh(this,(t=t.hd,e=[],j(t.mfaInfo||[],function(t){(t=Gr(t))&&e.push(t)}),e))},t.Rb=function(){return this.a.I().then(function(t){return new Yi(t,null)})},t.fc=function(e,n){var r=this,i=this.a.a;return this.Rb().then(function(t){return e.sb(i,t,n)}).then(function(t){return Rh(r.a,t),r.a.reload()})},t.bd=function(t){var n=this,r="string"==typeof t?t:t.uid,e=this.a.a;return this.a.I().then(function(t){return za(e,Ha,{idToken:t,mfaEnrollmentId:r})}).then(function(t){var e=q(n.b,function(t){return t.uid!=r});return eh(n,e),Rh(n.a,t),n.a.reload().o(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.w=function(){return{multiFactor:{enrolledFactors:V(this.b,function(t){return t.w()})}}},nh.prototype.start=function(){this.a=this.c,function e(n,t){n.stop();n.b=vn(rh(n,t)).then(Dr).then(function(){return n.h()}).then(function(){e(n,!0)}).o(function(t){n.i(t)&&e(n,!1)})}(this,!0)},nh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},ih.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},ih.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?we(new I("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?ah(this,{grant_type:"refresh_token",refresh_token:this.a}):be(null):be({accessToken:this.b.toString(),refreshToken:this.a})},uh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},w(hh,ln),hh.prototype.wa=function(t){this.ya=t,zs(this.a,t)},hh.prototype.la=function(){return this.ya},hh.prototype.Ga=function(){return z(this.$)},hh.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},jr(hh.prototype,"providerId","firebase"),(t=hh.prototype).reload=function(){var t=this;return Fh(this,Th(this).then(function(){return kh(t).then(function(){return bh(t)}).then(Ih)}))},t.oc=function(t){return this.I(t).then(function(t){return new Gc(t)})},t.I=function(t){var e=this;return Fh(this,Th(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new I("internal-error");return t.accessToken!=e.za&&(mh(e,t.accessToken),e.dispatchEvent(new Zc("tokenChanged"))),Ah(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new I("internal-error");_h(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e,n=(e=(e=t).providerUserInfo)&&e.length?V(e,function(t){return new ch(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[],r=0;r<n.length;r++)Sh(this,n[r]);Ah(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new Zc("userReloaded",{hd:t}))},t.Lc=function(t){return Fr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},t.tb=function(t){var e=this,n=null;return Fh(this,t.c(this.a,this.uid).then(function(t){return Rh(e,t),n=Dh(e,t,"reauthenticate"),e.h=null,e.reload()}).then(function(){return n}),!0)},t.Cc=function(t){return Fr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},t.qb=function(e){var n=this,r=null;return Fh(this,Ph(this,e.providerId).then(function(){return n.I()}).then(function(t){return e.b(n.a,t)}).then(function(t){return r=Dh(n,t,"link"),Oh(n,t)}).then(function(){return r}))},t.Dc=function(t,e){var n=this;return Fh(this,Ph(this,"phone").then(function(){return Kc(gh(n),t,e,m(n.qb,n))}))},t.Mc=function(t,e){var n=this;return Fh(this,be().then(function(){return Kc(gh(n),t,e,m(n.tb,n))}),!0)},t.Bb=function(e){var n=this;return Fh(this,this.I().then(function(t){return n.a.Bb(t,e)}).then(function(t){return Rh(n,t),n.reload()}))},t.ed=function(e){var n=this;return Fh(this,this.I().then(function(t){return e.b(n.a,t)}).then(function(t){return Rh(n,t),n.reload()}))},t.Cb=function(e){var n=this;return Fh(this,this.I().then(function(t){return n.a.Cb(t,e)}).then(function(t){return Rh(n,t),n.reload()}))},t.Db=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Th(this);var n=this;return Fh(this,this.I().then(function(t){return n.a.Db(t,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(t){return Rh(n,t),Ah(n,"displayName",t.displayName||null),Ah(n,"photoURL",t.photoUrl||null),j(n.providerData,function(t){"password"===t.providerId&&(jr(t,"displayName",n.displayName),jr(t,"photoURL",n.photoURL))}),bh(n)}).then(Ih))},t.cd=function(e){var n=this;return Fh(this,kh(this).then(function(t){return K(Eh(n),e)?za(n.a,ba,{idToken:t,deleteProvider:[e]}).then(function(t){var e={};return j(t.providerUserInfo||[],function(t){e[t.providerId]=!0}),j(Eh(n),function(t){e[t]||Ch(n,t)}),e[Co.PROVIDER_ID]||jr(n,"phoneNumber",null),bh(n)}):bh(n).then(function(){throw new I("no-such-provider")})}))},t.delete=function(){var e=this;return Fh(this,this.I().then(function(t){return za(e.a,ma,{idToken:t})}).then(function(){e.dispatchEvent(new Zc("userDeleted"))})).then(function(){for(var t=0;t<e.J.length;t++)e.J[t].cancel("app-deleted");lh(e,null),fh(e,null),dh(e,null),e.J=[],e.D=!0,yh(e),jr(e,"refreshToken",null),e.i&&Sc(e.i,e)})},t.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?m(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?m(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?m(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?m(this.Lb,this):null},t.Ec=function(t){var e=this;return xh(this,"linkViaPopup",t,function(){return Ph(e,t.providerId).then(function(){return bh(e)})},!1)},t.Nc=function(t){return xh(this,"reauthViaPopup",t,function(){return be()},!0)},t.Fc=function(t){var e=this;return Lh(this,"linkViaRedirect",t,function(){return Ph(e,t.providerId)},!1)},t.Oc=function(t){return Lh(this,"reauthViaRedirect",t,function(){return be()},!0)},t.Kb=function(e,n,t,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return t=this.I().then(function(t){return la(i.a,{requestUri:e,postBody:r,sessionId:n,idToken:t})}).then(function(t){return o=Dh(i,t,"link"),Oh(i,t)}).then(function(){return o}),Fh(this,t)},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Fh(this,be().then(function(){return Zi(fa(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=Dh(i,t,"reauthenticate"),Rh(i,t),i.h=null,i.reload()}).then(function(){return o}),!0)},t.ub=function(e){var n=this,r=null;return Fh(this,this.I().then(function(t){return r=t,void 0===e||ut(e)?{}:ki(new bi(e))}).then(function(t){return n.a.ub(r,t)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.Eb=function(e,n){var r=this,i=null;return Fh(this,this.I().then(function(t){return i=t,void 0===n||ut(n)?{}:ki(new bi(n))}).then(function(t){return r.a.Eb(i,e,t)}).then(function(t){if(r.email!=t)return r.reload()}).then(function(){}))},t.jc=function(t){var e=null,n=this;return Fh(this,t=Zi(be(t),n.uid).then(function(t){return e=Dh(n,t,"reauthenticate"),Rh(n,t),n.h=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.w()},t.w=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&lt(e,this.metadata.w()),j(this.providerData,function(t){e.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(t))}),lt(e,this.O.w()),e};var qh={name:"redirectUser",F:"session"};function Vh(t){return Qu(t.b,qh,t.a)}function Bh(t){var e,n,r,i;this.a=t,this.b=Wu(),this.c=null,this.f=(n=Wh("local"),r=Wh("session"),i=Wh("none"),function(n,r,i){var o=zu(r,i),s=Hu(n,r.F);return n.get(r,i).then(function(t){var e=null;try{e=Cr(l.localStorage.getItem(o))}catch(t){}if(e&&!t)return l.localStorage.removeItem(o),n.set(r,e,i);e&&t&&"localStorage"!=s.type&&l.localStorage.removeItem(o)})}((e=this).b,n,e.a).then(function(){return e.b.get(r,e.a)}).then(function(t){return t?r:e.b.get(i,e.a).then(function(t){return t?i:e.b.get(n,e.a).then(function(t){return t?n:e.b.get(Gh,e.a).then(function(t){return t?Wh(t):n})})})}).then(function(t){return e.c=t,Kh(e,t.F)}).o(function(){e.c||(e.c=n)})),this.b.addListener(Wh("local"),this.a,m(this.g,this))}function Kh(t,e){var n,a,r=[];for(n in Ku)Ku[n]!==e&&r.push(Qu(t.b,Wh(Ku[n]),t.a));return r.push(Qu(t.b,Gh,t.a)),a=r,new fe(function(n,e){var r=a.length,i=[];if(r)for(var t=function(t,e){r--,i[t]=e,0==r&&n(i)},o=function(t){e(t)},s=0;s<a.length;s++)_e(a[s],b(t,s),o);else n(i)})}Bh.prototype.g=function(){var e=this,n=Wh("local");Yh(this,function(){return be().then(function(){return e.c&&"local"!=e.c.F?e.b.get(n,e.a):null}).then(function(t){if(t)return Kh(e,"local").then(function(){e.c=n})})})};var Gh={name:"persistence",F:"session"};function Wh(t){return{name:"authUser",F:t}}function Hh(t,e){return Yh(t,function(){return t.b.set(t.c,e.w(),t.a)})}function zh(t){return Yh(t,function(){return Qu(t.b,t.c,t.a)})}function Qh(t,e,n){return Yh(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Uh(t||{})})})}function Yh(t,e){return t.f=t.f.then(e,e),t.f}function Xh(t){if(this.l=!1,jr(this,"settings",new Vc),jr(this,"app",t),!this.app.options||!this.app.options.apiKey)throw new I("invalid-api-key");var n,e,r,i,o,s;t=Xl.SDK_VERSION?vr(Xl.SDK_VERSION):null,this.a=new qs(this.app.options&&this.app.options.apiKey,N(E),t),this.R=[],this.s=[],this.O=[],this.hb=Xl.INTERNAL.createSubscribe(m(this.zc,this)),this.X=void 0,this.bc=Xl.INTERNAL.createSubscribe(m(this.Ac,this)),rl(this,null),this.i=new Bh(this.app.options.apiKey+":"+this.app.name),this.D=new jh(this.app.options.apiKey+":"+this.app.name),this.$=ul(this,(e=(n=this).app.options.authDomain,t=function(e){var t=function(t,e){return t.b.get(qh,t.a).then(function(t){return t&&e&&(t.authDomain=e),Uh(t||{})})}(e.D,e.app.options.authDomain).then(function(t){return(e.m=t)&&(t.ha=e.D),Vh(e.D)});return ul(e,t)}(n).then(function(){return Qh(n.i,e,n.P)}).then(function(e){return e?(e.ha=n.D,n.m&&(n.m.ga||null)==(e.ga||null)?e:e.reload().then(function(){return Hh(n.i,e).then(function(){return e})}).o(function(t){return"auth/network-request-failed"==t.code?e:zh(n.i)})):null}).then(function(t){rl(n,t||null)}),ul(n,t))),this.h=ul(this,(r=this).$.then(function(){return el(r)}).o(function(){}).then(function(){if(!r.l)return r.ja()}).o(function(){}).then(function(){var t;r.l||(r.ba=!0,(t=r.i).b.addListener(Wh("local"),t.a,r.ja))})),this.ba=!1,this.ja=m(this.Zc,this),this.Ba=m(this.da,this),this.ya=m(this.mc,this),this.za=m(this.wc,this),this.Aa=m(this.xc,this),this.b=null,o=(i=this).app.options.authDomain,s=i.app.options.apiKey,o&&wr()&&(i.Oa=i.$.then(function(){var t;if(!i.l)return i.b=xc(o,s,i.app.name,i.P),Ec(i.b,i),ol(i)&&wh(ol(i)),i.m&&(wh(i.m),(t=i.m).wa(i.la()),lh(t,i),ph(t=i.m,i.J),dh(t,i),Qs((t=i.m).a,i.P),fh(t,i),i.m=null),i.b})),this.INTERNAL={},this.INTERNAL.delete=m(this.delete,this),this.INTERNAL.logFramework=m(this.Gc,this),this.u=0,ln.call(this),t=this,Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){var t;return t=this.P?Vr({protocol:(t=kn(this.P.url)).c,host:t.a,port:t.g,options:Vr({disableWarnings:this.P.ec})}):null},enumerable:!1}),this.J=[],this.P=null}function Jh(t){qe.call(this,"languageCodeChanged"),this.h=t}function $h(t){qe.call(this,"emulatorConfigChanged"),this.c=t}function Zh(t){qe.call(this,"frameworkChanged"),this.f=t}function tl(t){return t.Oa||we(new I("auth-domain-config-required"))}function el(t){if(!wr())return we(new I("operation-not-supported-in-this-environment"));var e=tl(t).then(function(){return t.b.qa()}).then(function(t){return t?Vr(t):null});return ul(t,e)}function nl(o,s){var a={};return a.apiKey=o.app.options.apiKey,a.authDomain=o.app.options.authDomain,a.appName=o.app.name,o.P&&(a.emulatorConfig=o.P),o.$.then(function(){return t=a,e=s,n=o.D,r=o.Ga(),i=new hh(t,e),n&&(i.ha=n),r&&ph(i,r),i.reload().then(function(){return i});var t,e,n,r,i}).then(function(t){return ol(o)&&t.uid==ol(o).uid?Nh(ol(o),t):(rl(o,t),wh(t)),o.da(t)}).then(function(){al(o)})}function rl(t,e){var n,r;ol(t)&&(n=ol(t),r=t.Ba,W(n.S,function(t){return t==r}),en(ol(t),"tokenChanged",t.ya),en(ol(t),"userDeleted",t.za),en(ol(t),"userInvalidated",t.Aa),yh(ol(t))),e&&(e.S.push(t.Ba),$e(e,"tokenChanged",t.ya),$e(e,"userDeleted",t.za),$e(e,"userInvalidated",t.Aa),0<t.u&&vh(e)),jr(t,"currentUser",e),e&&(e.wa(t.la()),lh(e,t),ph(e,t.J),dh(e,t),Qs(e.a,t.P),fh(e,t))}function il(n,t){var e=null,r=null;return ul(n,t.then(function(t){return e=No(t),r=ji(t),nl(n,t)},function(t){var e=null;throw(e=t&&"auth/multi-factor-auth-required"===t.code?Yc(t.w(),n,m(n.kc,n)):e)||t}).then(function(){return Vr({user:ol(n),credential:e,additionalUserInfo:r,operationType:"signIn"})}))}function ol(t){return t.currentUser}function sl(t){return ol(t)&&ol(t)._lat||null}function al(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](sl(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](sl(t))}}function ul(t,e){return t.R.push(e),e.oa(function(){G(t.R,e)}),e}function cl(){}function hl(){this.a={},this.b=1e12}Bh.prototype.xb=function(e){var n=null,r=this;return function(t){var e=new I("invalid-persistence-type"),n=new I("unsupported-persistence-type");t:{for(r in Ku)if(Ku[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(hr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Iu()&&"none"!==t)throw n;break;default:if(!br()&&"none"!==t)throw n}}(e),Yh(this,function(){return e!=r.c.F?r.b.get(r.c,r.a).then(function(t){return n=t,Kh(r,e)}).then(function(){if(r.c=Wh(e),n)return r.b.set(r.c,n,r.a)}):be()})},w(Xh,ln),w(Jh,qe),w($h,qe),w(Zh,qe),(t=Xh.prototype).xb=function(t){return t=this.i.xb(t),ul(this,t)},t.wa=function(t){this.aa===t||this.l||(this.aa=t,zs(this.a,this.aa),this.dispatchEvent(new Jh(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=l.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new I("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");e=!!e&&!!e.disableWarnings,n=e,"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),l.document&&!n&&sr().then(function(){var t=l.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),l.document.body.appendChild(t)}),this.P={url:t,ec:e},this.settings.ib=!0,Qs(this.a,this.P),this.dispatchEvent(new $h(this.P))}var n},t.Gc=function(t){this.J.push(t),Xs(this.a,Xl.SDK_VERSION?vr(Xl.SDK_VERSION,this.J):null),this.dispatchEvent(new Zh(this.J))},t.Ga=function(){return z(this.J)},t.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:this.app.options.apiKey,authDomain:this.app.options.authDomain,appName:this.app.name,currentUser:ol(this)&&ol(this).w()}},t.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?m(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then(function(){return il(i,ha(i.a,o))})},t.Xc=function(e){if(!wr())return we(new I("operation-not-supported-in-this-environment"));var n=this,t=Ui(e.providerId),r=Ar(),i=null,o=rr(i=(!Tr()||ur())&&this.app.options.authDomain&&e.isOAuthProvider?uu(this.app.options.authDomain,this.app.options.apiKey,this.app.name,"signInViaPopup",e,null,r,Xl.SDK_VERSION||null,null,null,this.T(),this.P):i,t&&t.ua,t&&t.ta);return ul(this,t=tl(this).then(function(t){return Nc(t,o,"signInViaPopup",e,r,!!i,n.T())}).then(function(){return new fe(function(t,e){n.na("signInViaPopup",null,new I("cancelled-popup-request"),n.g),n.f=t,n.C=e,n.g=r,n.c=Pc(n.b,n,"signInViaPopup",o,r)})}).then(function(t){return o&&nr(o),t?Vr(t):null}).o(function(t){throw o&&nr(o),t}))},t.Yc=function(t){if(!wr())return we(new I("operation-not-supported-in-this-environment"));var e=this;return ul(this,tl(this).then(function(){return Yh(t=e.i,function(){return t.b.set(Gh,t.c.F,t.a)});var t}).then(function(){return Rc(e.b,"signInViaRedirect",t,void 0,e.T())}))},t.qa=function(){var e=this;return el(this).then(function(t){return e.b&&Fc(e.b.b),t}).o(function(t){throw e.b&&Fc(e.b.b),t})},t.dd=function(t){if(!t)return we(new I("null-user"));if(this.S!=t.tenantId)return we(new I("tenant-id-mismatch"));var e=this,n={};n.apiKey=this.app.options.apiKey,n.authDomain=this.app.options.authDomain,n.appName=this.app.name;var r,i,o,s,a,u=(r=t,i=n,o=e.D,s=e.Ga(),a=r.b,(n={})[Bs]=a.b&&a.b.toString(),n.refreshToken=a.a,i=new hh(i||{apiKey:r.l,authDomain:r.s,appName:r.m},n),o&&(i.ha=o),s&&ph(i,s),Nh(i,r),i);return ul(this,this.h.then(function(){if(e.app.options.apiKey!=t.l)return u.reload()}).then(function(){return ol(e)&&t.uid==ol(e).uid?(Nh(ol(e),t),e.da(t)):(rl(e,u),wh(u),e.da(u))}).then(function(){al(e)}))},t.Ab=function(){var t=this,e=this.h.then(function(){return t.b&&Fc(t.b.b),ol(t)?(rl(t,null),zh(t.i).then(function(){al(t)})):be()});return ul(this,e)},t.Zc=function(){var r=this;return Qh(this.i,this.app.options.authDomain).then(function(t){if(!r.l){var e,n;if((e=ol(r)&&t)&&(e=ol(r).uid,n=t.uid,e=null!=e&&""!==e&&null!=n&&""!==n&&e==n),e)return Nh(ol(r),t),ol(r).I();(ol(r)||t)&&(rl(r,t),t&&(wh(t),t.ha=r.D),r.b&&Ec(r.b,r),al(r))}})},t.da=function(t){return Hh(this.i,t)},t.mc=function(){al(this),this.da(ol(this))},t.wc=function(){this.Ab()},t.xc=function(){this.Ab()},t.kc=function(t){var e=this;return this.h.then(function(){return il(e,be(t))})},t.zc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(ol(e))})},t.Ac=function(t){var e,n,r=this;n=function(){t.next(ol(r))},(e=this).O.push(n),ul(e,e.h.then(function(){!e.l&&K(e.O,n)&&e.X!==e.getUid()&&(e.X=e.getUid(),n(sl(e)))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof t?t(ol(r)):"function"==typeof t.next&&t.next(ol(r))}),this.hb(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){r.X=r.getUid(),"function"==typeof t?t(ol(r)):"function"==typeof t.next&&t.next(ol(r))}),this.bc(t,e,n)},t.nc=function(t){var e=this,n=this.h.then(function(){return ol(e)?ol(e).I(t).then(function(t){return{accessToken:t}}):null});return ul(this,n)},t.Tc=function(t){var n=this;return this.h.then(function(){return il(n,za(n.a,Va,{token:t}))}).then(function(t){var e=t.user;return Ah(e,"isAnonymous",!1),n.da(e),t})},t.Uc=function(t,e){var n=this;return this.h.then(function(){return il(n,za(n.a,Ba,{email:t,password:e}))})},t.dc=function(t,e){var n=this;return this.h.then(function(){return il(n,za(n.a,va,{email:t,password:e}))})},t.$a=function(t){var e=this;return this.h.then(function(){return il(e,t.ka(e.a))})},t.Sc=function(t){return Fr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},t.zb=function(){var n=this;return this.h.then(function(){var t=ol(n);if(t&&t.isAnonymous){var e=Vr({providerId:null,isNewUser:!1});return Vr({user:t,credential:null,additionalUserInfo:e,operationType:"signIn"})}return il(n,n.a.zb()).then(function(t){var e=t.user;return Ah(e,"isAnonymous",!0),n.da(e),t})})},t.getUid=function(){return ol(this)&&ol(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&ol(this)&&vh(ol(this))},t.Pc=function(e){var n=this;j(this.s,function(t){t==e&&n.u--}),this.u<0&&(this.u=0),0==this.u&&ol(this)&&yh(ol(this)),this.removeAuthTokenListener(e)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),ul(this,this.h.then(function(){e.l||K(e.s,t)&&t(sl(e))}))},t.removeAuthTokenListener=function(e){W(this.s,function(t){return t==e})},t.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i).b.removeListener(Wh("local"),t.a,this.ja),this.b&&(Sc(this.b,this),Fc(this.b.b)),Promise.resolve()},t.hc=function(t){return ul(this,za(this.a,ya,{identifier:t,continueUri:_r()?Zn():"http://localhost"}).then(function(t){return t.signinMethods||[]}))},t.Bc=function(t){return!!Io(t)},t.wb=function(e,n){var r=this;return ul(this,be().then(function(){var t=new bi(n);if(!t.c)throw new I("argument-error",Ii+" must be true when sending sign in link to email");return ki(t)}).then(function(t){return r.a.wb(e,t)}).then(function(){}))},t.jd=function(t){return this.Ra(t).then(function(t){return t.data.email})},t.nb=function(t,e){return ul(this,this.a.nb(t,e).then(function(){}))},t.Ra=function(t){return ul(this,this.a.Ra(t).then(function(t){return new Xr(t)}))},t.jb=function(t){return ul(this,this.a.jb(t).then(function(){}))},t.vb=function(e,t){var n=this;return ul(this,be().then(function(){return void 0===t||ut(t)?{}:ki(new bi(t))}).then(function(t){return n.a.vb(e,t)}).then(function(){}))},t.Wc=function(t,e){return ul(this,Kc(this,t,e,m(this.$a,this)))},t.Vc=function(n,r){var i=this;return ul(this,be().then(function(){var t=r||Zn(),e=_o(n,t);if(!(t=Io(t)))throw new I("argument-error","Invalid email link!");if(t.tenantId!==i.T())throw new I("tenant-id-mismatch");return i.$a(e)}))},cl.prototype.render=function(){},cl.prototype.reset=function(){},cl.prototype.getResponse=function(){},cl.prototype.execute=function(){};var ll=null;function fl(t,e){return(e=pl(e))&&t.a[e]||null}function pl(t){return(t=void 0===t?1e12:t)?t.toString():null}function dl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=te(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():$e(this.f,"click",this.i)}function gl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function vl(){}function yl(){}hl.prototype.render=function(t,e){return this.a[this.b.toString()]=new dl(t,e),this.b++},hl.prototype.reset=function(t){var e=fl(this,t);t=pl(t),e&&t&&(e.delete(),delete this.a[t])},hl.prototype.getResponse=function(t){return(t=fl(this,t))?t.getResponse():null},hl.prototype.execute=function(t){(t=fl(this,t))&&t.execute()},dl.prototype.getResponse=function(){return gl(this),this.b},dl.prototype.execute=function(){gl(this);var n=this;this.a||(this.a=setTimeout(function(){n.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var t=n.c.callback,e=n.c["expired-callback"];if(t)try{t(n.b)}catch(t){}n.a=setTimeout(function(){if(n.a=null,n.b=null,e)try{e()}catch(t){}n.h&&n.execute()},6e4)},500))},dl.prototype.delete=function(){gl(this),this.g=!0,clearTimeout(this.a),this.a=null,en(this.f,"click",this.i)},jr(vl,"FACTOR_ID","phone"),yl.prototype.g=function(){return be(ll=ll||new hl)},yl.prototype.c=function(){};var ml=null;function bl(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var wl=new pt(yt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),_l=new Rr(3e4,6e4);bl.prototype.g=function(i){var o=this;return new fe(function(t,e){var r=setTimeout(function(){e(new I("network-request-failed"))},_l.get());!l.grecaptcha||i!==o.f&&!o.b?(l[o.a]=function(){var n;l.grecaptcha?(o.f=i,n=l.grecaptcha.render,l.grecaptcha.render=function(t,e){return t=n(t,e),o.b++,t},clearTimeout(r),t(l.grecaptcha)):(clearTimeout(r),e(new I("internal-error"))),delete l[o.a]},be(Os(_t(wl,{onload:o.a,hl:i||""}))).o(function(){clearTimeout(r),e(new I("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(r),t(l.grecaptcha))})},bl.prototype.c=function(){this.b--};var Il=null;function Tl(t,e,n,r,i,o,s){if(jr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,s=s?ml=ml||new yl:Il=Il||new bl,this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Cl])throw new I("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Al],!l.document)throw new I("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!te(e)||!this.i&&te(e).hasChildNodes())throw new I("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new qs(t,o||null,i||null),this.u=r||function(){return null};var a=this;this.l=[];var u=this.a[El];this.a[El]=function(t){var e;Nl(a,t),"function"==typeof u?u(t):"string"!=typeof u||"function"==typeof(e=mr(u,l))&&e(t)};var c=this.a[Sl];this.a[Sl]=function(){var t;Nl(a,null),"function"==typeof c?c():"string"!=typeof c||"function"==typeof(t=mr(c,l))&&t()}}var El="callback",Sl="expired-callback",Cl="sitekey",Al="size";function Nl(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function kl(t,e){return t.h.push(e),e.oa(function(){G(t.h,e)}),e}function Rl(t){if(t.D)throw new I("internal-error","RecaptchaVerifier instance has been destroyed.")}function Pl(t,e,n){var r=!1;try{this.b=n||Xl.app()}catch(t){throw new I("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new I("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Xl.SDK_VERSION?vr(Xl.SDK_VERSION,o):null,Tl.call(this,n,t,e,function(){try{var e=i.b.auth().la()}catch(t){e=null}return e},o,N(E),r)}function Dl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new I("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],i<0||i>=Ol.length)throw new I("internal-error","Argument validator received an unsupported number of arguments.");n=Ol[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new I("argument-error",t+" failed: "+r)}(t=Tl.prototype).Ia=function(){var e=this;return this.f||(this.f=kl(this,be().then(function(){if(_r()&&!cr())return sr();throw new I("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.m.g(e.u())}).then(function(t){return e.g=t,za(e.s,Ra,{})}).then(function(t){e.a[Cl]=t.recaptchaSiteKey}).o(function(t){throw e.f=null,t})))},t.render=function(){Rl(this);var n=this;return kl(this,this.Ia().then(function(){var t,e;return null===n.c&&(e=n.v,n.i||(t=te(e),e=oe("DIV"),t.appendChild(e)),n.c=n.g.render(e,n.a)),n.c}))},t.verify=function(){Rl(this);var i=this;return kl(this,this.render().then(function(e){return new fe(function(n){var r,t=i.g.getResponse(e);t?n(t):(r=function(t){var e;t&&(e=r,W(i.l,function(t){return t==e}),n(t))},i.l.push(r),i.i&&i.g.execute(i.c))})}))},t.reset=function(){Rl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Rl(this),this.D=!0,this.m.c();for(var t,e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=te(this.v);for(;t=e.firstChild;)e.removeChild(t)}},w(Pl,Tl);var Ol="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function xl(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Ll(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Ml(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:v}}function Fl(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Ul(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function jl(n){return{name:n?n+"Credential":"credential",K:n?"a valid "+n+" credential":"a valid credential",optional:!1,M:function(t){if(!t)return!1;var e=!n||t.providerId===n;return!(!t.ka||!e)}}}function ql(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}}function Vl(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}}function Bl(t,e){return v(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Kl(t){return v(t)&&"string"==typeof t.uid}function Gl(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}}function Wl(e,n,t,r){return{name:t||"",K:e.K+" or "+n.K,optional:!!r,M:function(t){return e.M(t)||n.M(t)}}}function Hl(t,e){for(var n in e){var r=e[n].name;t[r]=Yl(r,t[n],e[n].j)}}function zl(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:b(function(t){return this[t]},n),set:b(function(t,e,n,r){Dl(t,[n],[r],!0),this[e]=r},r,n,e[n].kb),enumerable:!0})}}function Ql(t,e,n,r){t[e]=Yl(e,n,r)}function Yl(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Dl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=(t=(t=t).split("."))[t.length-1];for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Hl(Xh.prototype,{jb:{name:"applyActionCode",j:[xl("code")]},Ra:{name:"checkActionCode",j:[xl("code")]},nb:{name:"confirmPasswordReset",j:[xl("code"),xl("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[xl("email"),xl("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[xl("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[xl("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Wl(Ml(),Fl(),"nextOrObserver"),Fl("opt_error",!0),Fl("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Wl(Ml(),Fl(),"nextOrObserver"),Fl("opt_error",!0),Fl("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[xl("email"),Wl(Ml("opt_actionCodeSettings",!0),Ul(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[xl("email"),Ml("actionCodeSettings")]},xb:{name:"setPersistence",j:[xl("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[jl()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[jl()]},Tc:{name:"signInWithCustomToken",j:[xl("token")]},Uc:{name:"signInWithEmailAndPassword",j:[xl("email"),xl("password")]},Vc:{name:"signInWithEmailLink",j:[xl("email"),xl("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[xl("phoneNumber"),Gl()]},Xc:{name:"signInWithPopup",j:[Vl()]},Yc:{name:"signInWithRedirect",j:[Vl()]},dd:{name:"updateCurrentUser",j:[Wl({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof hh)}},Ul(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[xl(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[xl("url"),Ml("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[xl("code")]}}),zl(Xh.prototype,{lc:{name:"languageCode",kb:Wl(xl(),Ul(),"languageCode")},ti:{name:"tenantId",kb:Wl(xl(),Ul(),"tenantId")}}),(Xh.Persistence=Ku).LOCAL="local",Xh.Persistence.SESSION="session",Xh.Persistence.NONE="none",Hl(hh.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Ll("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Ll("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[jl()]},qb:{name:"linkWithCredential",j:[jl()]},Dc:{name:"linkWithPhoneNumber",j:[xl("phoneNumber"),Gl()]},Ec:{name:"linkWithPopup",j:[Vl()]},Fc:{name:"linkWithRedirect",j:[Vl()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[jl()]},tb:{name:"reauthenticateWithCredential",j:[jl()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[xl("phoneNumber"),Gl()]},Nc:{name:"reauthenticateWithPopup",j:[Vl()]},Oc:{name:"reauthenticateWithRedirect",j:[Vl()]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[Wl(Ml("opt_actionCodeSettings",!0),Ul(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[xl(null,!0)]},cd:{name:"unlink",j:[xl("provider")]},Bb:{name:"updateEmail",j:[xl("email")]},Cb:{name:"updatePassword",j:[xl("password")]},ed:{name:"updatePhoneNumber",j:[jl("phone")]},Db:{name:"updateProfile",j:[Ml("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[xl("email"),Wl(Ml("opt_actionCodeSettings",!0),Ul(null,!0),"opt_actionCodeSettings",!0)]}}),Hl(hl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Hl(cl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Hl(fe.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),zl(Vc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:Ll("appVerificationDisabledForTesting")}}),Hl(Bc.prototype,{confirm:{name:"confirm",j:[xl("verificationCode")]}}),Ql($i,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[oo,bo,Eo,no],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[Wl(xl(),Ml(),"json")]),Ql(wo,"credential",function(t,e){return new mo(t,e)},[xl("email"),xl("password")]),Hl(mo.prototype,{w:{name:"toJSON",j:[xl(null,!0)]}}),Hl(co.prototype,{Ca:{name:"addScope",j:[xl("scope")]},Ka:{name:"setCustomParameters",j:[Ml("customOAuthParameters")]}}),Ql(co,"credential",ho,[Wl(xl(),Ml(),"token")]),Ql(wo,"credentialWithLink",_o,[xl("email"),xl("emailLink")]),Hl(lo.prototype,{Ca:{name:"addScope",j:[xl("scope")]},Ka:{name:"setCustomParameters",j:[Ml("customOAuthParameters")]}}),Ql(lo,"credential",fo,[Wl(xl(),Ml(),"token")]),Hl(po.prototype,{Ca:{name:"addScope",j:[xl("scope")]},Ka:{name:"setCustomParameters",j:[Ml("customOAuthParameters")]}}),Ql(po,"credential",go,[Wl(xl(),Wl(Ml(),Ul()),"idToken"),Wl(xl(),Ul(),"accessToken",!0)]),Hl(vo.prototype,{Ka:{name:"setCustomParameters",j:[Ml("customOAuthParameters")]}}),Ql(vo,"credential",yo,[Wl(xl(),Ml(),"token"),xl("secret",!0)]),Hl(uo.prototype,{Ca:{name:"addScope",j:[xl("scope")]},credential:{name:"credential",j:[Wl(xl(),Wl(Ml(),Ul()),"optionsOrIdToken"),Wl(xl(),Ul(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Ml("customOAuthParameters")]}}),Hl(ro.prototype,{w:{name:"toJSON",j:[xl(null,!0)]}}),Hl(to.prototype,{w:{name:"toJSON",j:[xl(null,!0)]}}),Ql(Co,"credential",Ao,[xl("verificationId"),xl("verificationCode")]),Hl(Co.prototype,{fb:{name:"verifyPhoneNumber",j:[Wl(xl(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Bl(t.session,Xi)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Bl(t.session,Ji)&&Kl(t.multiFactorHint):t.session&&t.multiFactorUid?Bl(t.session,Ji)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),Gl()]}}),Hl(To.prototype,{w:{name:"toJSON",j:[xl(null,!0)]}}),Hl(I.prototype,{toJSON:{name:"toJSON",j:[xl(null,!0)]}}),Hl(Mo.prototype,{toJSON:{name:"toJSON",j:[xl(null,!0)]}}),Hl(Lo.prototype,{toJSON:{name:"toJSON",j:[xl(null,!0)]}}),Hl(Qc.prototype,{toJSON:{name:"toJSON",j:[xl(null,!0)]}}),Hl(Wc.prototype,{Rc:{name:"resolveSignIn",j:[ql()]}}),Hl(th.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[ql(),xl("displayName",!0)]},bd:{name:"unenroll",j:[Wl({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Kl},xl(),"multiFactorInfoIdentifier")]}}),Hl(Pl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Ql(hi,"parseLink",mi,[xl("link")]),Ql(vl,"assertion",function(t){return new $c(t)},[jl("phone")]),function(){if(void 0===Xl||!Xl.INTERNAL||!Xl.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:$r,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Jr,VERIFY_AND_CHANGE_EMAIL:Zr,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Xh,AuthCredential:$i,Error:I};Ql(t,"EmailAuthProvider",wo,[]),Ql(t,"FacebookAuthProvider",co,[]),Ql(t,"GithubAuthProvider",lo,[]),Ql(t,"GoogleAuthProvider",po,[]),Ql(t,"TwitterAuthProvider",vo,[]),Ql(t,"OAuthProvider",uo,[xl("providerId")]),Ql(t,"SAMLAuthProvider",ao,[xl("providerId")]),Ql(t,"PhoneAuthProvider",Co,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof Xh)}}]),Ql(t,"RecaptchaVerifier",Pl,[Wl(xl(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Ml("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof Xl.app.App)}}]),Ql(t,"ActionCodeURL",hi,[]),Ql(t,"PhoneMultiFactorGenerator",vl,[]),Xl.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new Xh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),Xl.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:m((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:m(t.nc,t),addAuthTokenListener:m(t.cc,t),removeAuthTokenListener:m(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Xl.registerVersion("@firebase/auth","0.16.4"),Xl.INTERNAL.extendNamespace({User:hh})}()}.apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Rs=(Ps.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Ro(e))},Ps.prototype.get=function(t){t=this.domStorage_.getItem(this.prefixedName_(t));return null==t?null:ko(t)},Ps.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},Ps.prototype.prefixedName_=function(t){return this.prefix_+t},Ps.prototype.toString=function(){return this.domStorage_.toString()},Ps);function Ps(t){this.domStorage_=t,this.prefix_="firebase:"}var Ds=(Os.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},Os.prototype.get=function(t){return Do(this.cache_,t)?this.cache_[t]:null},Os.prototype.remove=function(t){delete this.cache_[t]},Os);function Os(){this.cache_={},this.isInMemoryStorage=!0}function xs(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i,o=t.charCodeAt(r);55296<=o&&o<=56319&&(i=o-55296,so(++r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(i<<10)+(t.charCodeAt(r)-56320)),o<128?e[n++]=o:(o<2048?e[n++]=o>>6|192:(o<65536?e[n++]=o>>12|224:(e[n++]=o>>18|240,e[n++]=o>>12&63|128),e[n++]=o>>6&63|128),e[n++]=63&o|128)}return e}(t);return(t=new Fo).update(e),t=t.digest(),uo.encodeByteArray(t)}function Ls(t,e){so(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(Gs.logLevel=ss.VERBOSE,zs=Gs.log.bind(Gs),e&&Ks.set("logging_enabled",!0)):"function"==typeof t?zs=t:(zs=null,Ks.remove("logging_enabled"))}function Ms(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+Hs.apply(void 0,no([],eo(t)));Gs.error(n)}function Fs(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)}function Us(t,e){return t===e?0:t<e?-1:1}function js(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Ro(e))}function qs(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)n<i+e?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r}var Vs,Sn=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Rs(e)}}catch(t){}return new Ds},Bs=Sn("localStorage"),Ks=Sn("sessionStorage"),Gs=new fs("@firebase/database"),Ws=(Vs=1,function(){return Vs++}),Hs=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=Hs.apply(null,i):n+="object"==typeof i?Ro(i):i,n+=" "}return n},zs=null,Qs=!0,Ys=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];!0===Qs&&(Qs=!1,null===zs&&!0===Ks.get("logging_enabled")&&Ls(!0)),zs&&(t=Hs.apply(null,e),zs(t))},Xs=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Ys.apply(void 0,no([n],eo(t)))}},Js=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+Hs.apply(void 0,no([],eo(t)));throw Gs.error(n),new Error(n)},$s=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+Hs.apply(void 0,no([],eo(t)));Gs.warn(n)},Zs="[MIN_NAME]",ta="[MAX_NAME]",ea=function(t,e){if(t===e)return 0;if(t===Zs||e===ta)return-1;if(e===Zs||t===ta)return 1;var n=ha(t),r=ha(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null===r&&t<e?-1:1},na=function(t){if("object"!=typeof t||null===t)return Ro(t);var e,n=[];for(e in t)n.push(e);n.sort();for(var r="{",i=0;i<n.length;i++)0!==i&&(r+=","),r+=Ro(n[i]),r+=":",r+=na(t[n[i]]);return r+="}"};function ra(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function ia(t){var e,n,r,i;so(!Fs(t),"Invalid JSON number"),0===t?e=1/t==-1/(r=n=0)?1:0:(e=t<0,r=(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(t/Math.pow(2,-1074))));for(var o=[],s=52;s;--s)o.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;--s)o.push(n%2?1:0),n=Math.floor(n/2);o.push(e?1:0),o.reverse();var a=o.join(""),u="";for(s=0;s<64;s+=8){var c=parseInt(a.substr(s,8),2).toString(16);u+=c=1===c.length?"0"+c:c}return u.toLowerCase()}function oa(t,e){return"object"==typeof(e=setTimeout(t,e))&&e.unref&&e.unref(),e}var sa=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");n=new Error(t+" at "+e.path.toString()+": "+n);return n.code=t.toUpperCase(),n},aa=new RegExp("^-?(0*)\\d{1,10}$"),ua=-2147483648,ca=2147483647,ha=function(t){if(aa.test(t)){t=Number(t);if(ua<=t&&t<=ca)return t}return null},la=function(t){try{t()}catch(e){setTimeout(function(){var t=e.stack||"";throw $s("Exception was thrown by user callback.",t),e},Math.floor(0))}},fa=32,pa=768,da=(ga.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},ga);function ga(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}function va(){return new da("")}function ya(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ma(t){return t.pieces_.length-t.pieceNum_}function ba(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new da(t.pieces_,e)}function wa(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function _a(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function Ia(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new da(e,0)}function Ta(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof da)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else for(var i=e.split("/"),r=0;r<i.length;r++)0<i[r].length&&n.push(i[r]);return new da(n,0)}function Ea(t){return t.pieceNum_>=t.pieces_.length}function Sa(t,e){var n=ya(t),r=ya(e);if(null===n)return e;if(n===r)return Sa(ba(t),ba(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Ca(t,e){for(var n=_a(t,0),r=_a(e,0),i=0;i<n.length&&i<r.length;i++){var o=ea(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Aa(t,e){if(ma(t)!==ma(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Na(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(ma(t)>ma(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var ka=function(t,e){this.errorPrefix_=e,this.parts_=_a(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=zo(this.parts_[n]);Ra(this)};function Ra(t){if(t.byteLength_>pa)throw new Error(t.errorPrefix_+"has a key path longer than "+pa+" bytes ("+t.byteLength_+").");if(t.parts_.length>fa)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+fa+") or object contains a cycle "+Pa(t))}function Pa(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var Da=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Oa="websocket",xa="long_polling",La=(Ma.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},Ma.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(Ma.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Bs.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),Ma.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},Ma.prototype.toURLString=function(){var t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return t+this.host+"/"+e},Ma);function Ma(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Bs.get("host:"+t)||this._host}function Fa(t,e,n){var r;if(so("string"==typeof e,"typeof type must == string"),so("object"==typeof n,"typeof params must == object"),e===Oa)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==xa)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}((e=t).host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams)&&(n.ns=t.namespace);var i=[];return ra(n,function(t,e){i.push(t+"="+e)}),r+i.join("&")}function Ua(t){return"string"==typeof t&&0!==t.length&&!Ja.test(t)}function ja(t){return"string"==typeof t&&0!==t.length&&!$a.test(t)}function qa(t){return null===t||"string"==typeof t||"number"==typeof t&&!Fs(t)||t&&"object"==typeof t&&Do(t,".sv")}function Va(t,e,n,r,i){i&&void 0===n||tu(Go(t,e,i),n,r)}function Ba(t,e,n,r,i){if(!i||void 0!==n){var o=Go(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];ra(n,function(t,e){t=new da(t);if(tu(o,e,Ta(r,t)),".priority"===wa(t)&&!qa(e))throw new Error(o+"contains an invalid value for '"+t.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(t)}),function(t,e){for(var n=0;n<e.length;n++)for(var r,i=_a(r=e[n]),o=0;o<i.length;o++)if((".priority"!==i[o]||o!==i.length-1)&&!Ua(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Ca);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&Na(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,s)}}function Ka(t,e,n,r){if(!r||void 0!==n){if(Fs(n))throw new Error(Go(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!qa(n))throw new Error(Go(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}function Ga(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Go(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function Wa(t,e,n,r){if(!(r&&void 0===n||Ua(n)))throw new Error(Go(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function Ha(t,e,n,r){if(!(r&&void 0===n||ja(n)))throw new Error(Go(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function za(t,e){if(".info"===ya(e))throw new Error(t+" failed = Can't modify data under /.info/")}var Qa,Ya=function(t,e){var n=Xa(t),r=n.namespace;"firebase.com"===n.domain&&Js(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Js("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&$s("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");t="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new La(n.host,n.secure,r,e,t,"",r!==n.subdomain),path:new da(n.pathString)}},Xa=function(t){var e,n,r,i="",o="",s="",a="",u="",c=!0,h="https",l=443;return"string"==typeof t&&(0<=(r=t.indexOf("//"))&&(h=t.substring(0,r-1),t=t.substring(r+2)),-1===(e=t.indexOf("/"))&&(e=t.length),-1===(n=t.indexOf("?"))&&(n=t.length),i=t.substring(0,Math.min(e,n)),e<n&&(a=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(0<n[r].length){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(e,n))),n=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=to(t.split("&")),o=i.next();!o.done;o=i.next()){var s,a=o.value;0!==a.length&&(2===(s=a.split("=")).length?r[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):$s("Invalid query segment '"+a+"' in query '"+t+"'"))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,n))),0<=(r=i.indexOf(":"))?(c="https"===h||"wss"===h,l=parseInt(i.substring(r+1),10)):r=i.length,"localhost"===(r=i.slice(0,r)).toLowerCase()?o="localhost":r.split(".").length<=2?o=r:(r=i.indexOf("."),s=i.substring(0,r).toLowerCase(),o=i.substring(r+1),u=s),"ns"in n&&(u=n.ns)),{host:i,port:l,domain:o,subdomain:s,secure:c,scheme:h,pathString:a,namespace:u}},Ja=/[\[\].#$\/\u0000-\u001F\u007F]/,$a=/[\[\].#$\u0000-\u001F\u007F]/,Za=10485760,tu=function(r,t,e){var i=e instanceof da?new ka(e,r):e;if(void 0===t)throw new Error(r+"contains undefined "+Pa(i));if("function"==typeof t)throw new Error(r+"contains a function "+Pa(i)+" with contents = "+t.toString());if(Fs(t))throw new Error(r+"contains "+t.toString()+" "+Pa(i));if("string"==typeof t&&t.length>Za/3&&zo(t)>Za)throw new Error(r+"contains a string greater than "+Za+" utf8 bytes "+Pa(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var o=!1,s=!1;if(ra(t,function(t,e){if(".value"===t)o=!0;else if(".priority"!==t&&".sv"!==t&&(s=!0,!Ua(t)))throw new Error(r+" contains an invalid key ("+t+") "+Pa(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var n;n=t,0<(t=i).parts_.length&&(t.byteLength_+=1),t.parts_.push(n),t.byteLength_+=zo(n),Ra(t),tu(r,e,i),e=(t=i).parts_.pop(),t.byteLength_-=zo(e),0<t.parts_.length&&--t.byteLength_}),o&&s)throw new Error(r+' contains ".value" child '+Pa(i)+" in addition to actual children.")}},eu=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!Ua(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&(r=(r=r)&&r.replace(/^\/*\.info(\/|$)/,"/"),!ja(r)))throw new Error(Go(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};function nu(t){return"number"==typeof t?"number:"+ia(t):"string:"+t}var ru,iu=function(t){var e;t.isLeafNode()?(e=t.val(),so("string"==typeof e||"number"==typeof e||"object"==typeof e&&Do(e,".sv"),"Priority must be a string or number.")):so(t===Qa||t.isEmpty(),"priority of unexpected type."),so(t===Qa||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},ou=(Object.defineProperty(su,"__childrenNodeConstructor",{get:function(){return ru},set:function(t){ru=t},enumerable:!1,configurable:!0}),su.prototype.isLeafNode=function(){return!0},su.prototype.getPriority=function(){return this.priorityNode_},su.prototype.updatePriority=function(t){return new su(this.value_,t)},su.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:su.__childrenNodeConstructor.EMPTY_NODE},su.prototype.getChild=function(t){return Ea(t)?this:".priority"===ya(t)?this.priorityNode_:su.__childrenNodeConstructor.EMPTY_NODE},su.prototype.hasChild=function(){return!1},su.prototype.getPredecessorChildName=function(t,e){return null},su.prototype.updateImmediateChild=function(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:su.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)},su.prototype.updateChild=function(t,e){var n=ya(t);return null===n?e:e.isEmpty()&&".priority"!==n?this:(so(".priority"!==n||1===ma(t),".priority must be the last token in a path"),this.updateImmediateChild(n,su.__childrenNodeConstructor.EMPTY_NODE.updateChild(ba(t),e)))},su.prototype.isEmpty=function(){return!1},su.prototype.numChildren=function(){return 0},su.prototype.forEachChild=function(t,e){return!1},su.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},su.prototype.hash=function(){var t,e;return null===this.lazyHash_&&(t="",this.priorityNode_.isEmpty()||(t+="priority:"+nu(this.priorityNode_.val())+":"),t+=(e=typeof this.value_)+":",t+="number"==e?ia(this.value_):this.value_,this.lazyHash_=xs(t)),this.lazyHash_},su.prototype.getValue=function(){return this.value_},su.prototype.compareTo=function(t){return t===su.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof su.__childrenNodeConstructor?-1:(so(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},su.prototype.compareToLeafNode_=function(t){var e=typeof t.value_,n=typeof this.value_,r=su.VALUE_TYPE_ORDER.indexOf(e),i=su.VALUE_TYPE_ORDER.indexOf(n);return so(0<=r,"Unknown leaf type: "+e),so(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r},su.prototype.withIndex=function(){return this},su.prototype.isIndexed=function(){return!0},su.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))},su.VALUE_TYPE_ORDER=["object","boolean","number","string"],su);function su(t,e){void 0===e&&(e=su.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=e,this.lazyHash_=null,so(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),iu(this.priorityNode_)}var au=(uu.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_.pop(),e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value};if(this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},uu.prototype.hasNext=function(){return 0<this.nodeStack_.length},uu.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},uu);function uu(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}var cu=(hu.prototype.copy=function(t,e,n,r,i){return new hu(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},hu.prototype.count=function(){return this.left.count()+1+this.right.count()},hu.prototype.isEmpty=function(){return!1},hu.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},hu.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},hu.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},hu.prototype.minKey=function(){return this.min_().key},hu.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},hu.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},hu.prototype.removeMin_=function(){if(this.left.isEmpty())return fu.EMPTY_NODE;var t=this;return(t=(t=!t.left.isRed_()&&!t.left.left.isRed_()?t.moveRedLeft_():t).copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},hu.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r=(r=!(r.left.isEmpty()||r.left.isRed_()||r.left.left.isRed_())?r.moveRedLeft_():r).copy(null,null,null,r.left.remove(t,e),null);else{if(0===e(t,(r=!((r=r.left.isRed_()?r.rotateRight_():r).right.isEmpty()||r.right.isRed_()||r.right.left.isRed_())?r.moveRedRight_():r).key)){if(r.right.isEmpty())return fu.EMPTY_NODE;n=r.right.min_(),r=r.copy(n.key,n.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp_()},hu.prototype.isRed_=function(){return this.color},hu.prototype.fixUp_=function(){var t=this;return t=(t=(t=t.right.isRed_()&&!t.left.isRed_()?t.rotateLeft_():t).left.isRed_()&&t.left.left.isRed_()?t.rotateRight_():t).left.isRed_()&&t.right.isRed_()?t.colorFlip_():t},hu.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t=t.right.left.isRed_()?(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_():t},hu.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t=t.left.left.isRed_()?(t=t.rotateRight_()).colorFlip_():t},hu.prototype.rotateLeft_=function(){var t=this.copy(null,null,hu.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},hu.prototype.rotateRight_=function(){var t=this.copy(null,null,hu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},hu.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},hu.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},hu.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},hu.RED=!0,hu.BLACK=!1,hu);function hu(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:hu.RED,this.left=null!=r?r:fu.EMPTY_NODE,this.right=null!=i?i:fu.EMPTY_NODE}lu.prototype.copy=function(t,e,n,r,i){return this},lu.prototype.insert=function(t,e,n){return new cu(t,e,null)},lu.prototype.remove=function(t,e){return this},lu.prototype.count=function(){return 0},lu.prototype.isEmpty=function(){return!0},lu.prototype.inorderTraversal=function(t){return!1},lu.prototype.reverseTraversal=function(t){return!1},lu.prototype.minKey=function(){return null},lu.prototype.maxKey=function(){return null},lu.prototype.check_=function(){return 0},lu.prototype.isRed_=function(){return!1},z=lu;function lu(){}var fu=(pu.prototype.insert=function(t,e){return new pu(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,cu.BLACK,null,null))},pu.prototype.remove=function(t){return new pu(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,cu.BLACK,null,null))},pu.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:0<e&&(n=n.right)}return null},pu.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:0<e&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},pu.prototype.isEmpty=function(){return this.root_.isEmpty()},pu.prototype.count=function(){return this.root_.count()},pu.prototype.minKey=function(){return this.root_.minKey()},pu.prototype.maxKey=function(){return this.root_.maxKey()},pu.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},pu.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},pu.prototype.getIterator=function(t){return new au(this.root_,null,this.comparator_,!1,t)},pu.prototype.getIteratorFrom=function(t,e){return new au(this.root_,t,this.comparator_,!1,e)},pu.prototype.getReverseIteratorFrom=function(t,e){return new au(this.root_,t,this.comparator_,!0,e)},pu.prototype.getReverseIterator=function(t){return new au(this.root_,null,this.comparator_,!0,t)},pu.EMPTY_NODE=new z,pu);function pu(t,e){void 0===e&&(e=pu.EMPTY_NODE),this.comparator_=t,this.root_=e}var du=(gu.Wrap=function(t,e){return new gu(t,e)},gu);function gu(t,e){this.name=t,this.node=e}var vu,yu,mu,bu=(wu.prototype.getCompare=function(){return this.compare.bind(this)},wu.prototype.indexedValueChanged=function(t,e){t=new du(Zs,t),e=new du(Zs,e);return 0!==this.compare(t,e)},wu.prototype.minPost=function(){return du.MIN},wu);function wu(){}function _u(){return null!==mu&&mu.apply(this,arguments)||this}var Iu,Tu,Eu=new(Xi(_u,mu=bu),_u.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),r=n.compareTo(r);return 0===r?ea(t.name,e.name):r},_u.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},_u.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},_u.prototype.minPost=function(){return du.MIN},_u.prototype.maxPost=function(){return new du(ta,new ou("[PRIORITY-POST]",yu))},_u.prototype.makePost=function(t,e){t=vu(t);return new du(e,new ou("[PRIORITY-POST]",t))},_u.prototype.toString=function(){return".priority"},_u),H=(Xi(Su,Tu=bu),Object.defineProperty(Su,"__EMPTY_NODE",{get:function(){return Iu},set:function(t){Iu=t},enumerable:!1,configurable:!0}),Su.prototype.compare=function(t,e){return ea(t.name,e.name)},Su.prototype.isDefinedOn=function(t){throw ao("KeyIndex.isDefinedOn not expected to be called.")},Su.prototype.indexedValueChanged=function(t,e){return!1},Su.prototype.minPost=function(){return du.MIN},Su.prototype.maxPost=function(){return new du(ta,Iu)},Su.prototype.makePost=function(t,e){return so("string"==typeof t,"KeyIndex indexValue must always be a string."),new du(t,Iu)},Su.prototype.toString=function(){return".key"},Su);function Su(){return null!==Tu&&Tu.apply(this,arguments)||this}var Cu=new H,Au=Math.log(2),Nu=(ku.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},ku);function ku(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Au,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}var Ru,Pu,Du=function(c,t,h,e){c.sort(t);var l=function(t,e){var n=e-t;if(0==n)return null;if(1==n)return r=c[t],i=h?h(r):r,new cu(i,r.node,cu.BLACK,null,null);var n=parseInt(n/2,10)+t,t=l(t,n),e=l(n+1,e),r=c[n],i=h?h(r):r;return new cu(i,r.node,cu.BLACK,t,e)},n=function(t){for(var e=null,n=null,i=c.length,r=function(t,e){var n=i-t,r=i;i-=t;t=l(1+n,r),r=c[n],n=h?h(r):r;o(new cu(n,r.node,e,null,t))},o=function(t){e=e?e.left=t:n=t},s=0;s<t.count;++s){var a=t.nextBitIsOne(),u=Math.pow(2,t.count-(s+1));a?r(u,cu.BLACK):(r(u,cu.BLACK),r(u,cu.RED))}return n}(new Nu(c.length));return new fu(e||t,n)},Ou={},xu=(Object.defineProperty(Lu,"Default",{get:function(){return so(Eu,"ChildrenNode.ts has not been loaded"),Ru=Ru||new Lu({".priority":Ou},{".priority":Eu})},enumerable:!1,configurable:!0}),Lu.prototype.get=function(t){var e=Oo(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof fu?e:null},Lu.prototype.hasIndex=function(t){return Do(this.indexSet_,t.toString())},Lu.prototype.addIndex=function(t,e){so(t!==Cu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n=[],r=!1,i=e.getIterator(du.Wrap),o=i.getNext();o;)r=r||t.isDefinedOn(o.node),n.push(o),o=i.getNext();var s=r?Du(n,t.getCompare()):Ou,a=t.toString(),u=Ji({},this.indexSet_);u[a]=t;e=Ji({},this.indexes_);return e[a]=s,new Lu(e,u)},Lu.prototype.addToIndexes=function(s,a){var u=this;return new Lu(Lo(this.indexes_,function(t,e){var n=Oo(u.indexSet_,e);if(so(n,"Missing index implementation for "+e),t===Ou){if(n.isDefinedOn(s.node)){for(var r=[],i=a.getIterator(du.Wrap),o=i.getNext();o;)o.name!==s.name&&r.push(o),o=i.getNext();return r.push(s),Du(r,n.getCompare())}return Ou}n=a.get(s.name);return(t=n?t.remove(new du(s.name,n)):t).insert(s,s.node)}),this.indexSet_)},Lu.prototype.removeFromIndexes=function(n,r){return new Lu(Lo(this.indexes_,function(t){if(t===Ou)return t;var e=r.get(n.name);return e?t.remove(new du(n.name,e)):t}),this.indexSet_)},Lu);function Lu(t,e){this.indexes_=t,this.indexSet_=e}function Mu(t,e){return ea(t.name,e.name)}function Fu(t,e){return ea(t,e)}var Uu,ju=(Object.defineProperty(qu,"EMPTY_NODE",{get:function(){return Pu=Pu||new qu(new fu(Fu),null,xu.Default)},enumerable:!1,configurable:!0}),qu.prototype.isLeafNode=function(){return!1},qu.prototype.getPriority=function(){return this.priorityNode_||Pu},qu.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new qu(this.children_,t,this.indexMap_)},qu.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();t=this.children_.get(t);return null===t?Pu:t},qu.prototype.getChild=function(t){var e=ya(t);return null===e?this:this.getImmediateChild(e).getChild(ba(t))},qu.prototype.hasChild=function(t){return null!==this.children_.get(t)},qu.prototype.updateImmediateChild=function(t,e){if(so(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);var n=new du(t,e),r=void 0,i=void 0,i=e.isEmpty()?(r=this.children_.remove(t),this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(t,e),this.indexMap_.addToIndexes(n,this.children_)),n=r.isEmpty()?Pu:this.priorityNode_;return new qu(r,n,i)},qu.prototype.updateChild=function(t,e){var n=ya(t);if(null===n)return e;so(".priority"!==ya(t)||1===ma(t),".priority must be the last token in a path");e=this.getImmediateChild(n).updateChild(ba(t),e);return this.updateImmediateChild(n,e)},qu.prototype.isEmpty=function(){return this.children_.isEmpty()},qu.prototype.numChildren=function(){return this.children_.count()},qu.prototype.val=function(n){if(this.isEmpty())return null;var r={},i=0,o=0,s=!0;if(this.forEachChild(Eu,function(t,e){r[t]=e.val(n),i++,s&&qu.INTEGER_REGEXP_.test(t)?o=Math.max(o,Number(t)):s=!1}),!n&&s&&o<2*i){var t,e=[];for(t in r)e[t]=r[t];return e}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r},qu.prototype.hash=function(){var n;return null===this.lazyHash_&&(n="",this.getPriority().isEmpty()||(n+="priority:"+nu(this.getPriority().val())+":"),this.forEachChild(Eu,function(t,e){e=e.hash();""!==e&&(n+=":"+t+":"+e)}),this.lazyHash_=""===n?"":xs(n)),this.lazyHash_},qu.prototype.getPredecessorChildName=function(t,e,n){n=this.resolveIndex_(n);if(n){e=n.getPredecessorKey(new du(t,e));return e?e.name:null}return this.children_.getPredecessorKey(t)},qu.prototype.getFirstChildName=function(t){t=this.resolveIndex_(t);if(t){t=t.minKey();return t&&t.name}return this.children_.minKey()},qu.prototype.getFirstChild=function(t){t=this.getFirstChildName(t);return t?new du(t,this.children_.get(t)):null},qu.prototype.getLastChildName=function(t){t=this.resolveIndex_(t);if(t){t=t.maxKey();return t&&t.name}return this.children_.maxKey()},qu.prototype.getLastChild=function(t){t=this.getLastChildName(t);return t?new du(t,this.children_.get(t)):null},qu.prototype.forEachChild=function(t,e){t=this.resolveIndex_(t);return t?t.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},qu.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},qu.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,du.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},qu.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},qu.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,du.Wrap),i=r.peek();null!=i&&0<e.compare(i,t);)r.getNext(),i=r.peek();return r},qu.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Bu?-1:0},qu.prototype.withIndex=function(t){if(t===Cu||this.indexMap_.hasIndex(t))return this;t=this.indexMap_.addIndex(t,this.children_);return new qu(this.children_,this.priorityNode_,t)},qu.prototype.isIndexed=function(t){return t===Cu||this.indexMap_.hasIndex(t)},qu.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()!==t.children_.count())return!1;for(var e=this.getIterator(Eu),n=t.getIterator(Eu),r=e.getNext(),i=n.getNext();r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1},qu.prototype.resolveIndex_=function(t){return t===Cu?null:this.indexMap_.get(t.toString())},qu.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,qu);function qu(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&iu(this.priorityNode_),this.children_.isEmpty()&&so(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}function Vu(){return Uu.call(this,new fu(Fu),ju.EMPTY_NODE,xu.Default)||this}var Bu=new(Xi(Vu,Uu=ju),Vu.prototype.compareTo=function(t){return t===this?0:1},Vu.prototype.equals=function(t){return t===this},Vu.prototype.getPriority=function(){return this},Vu.prototype.getImmediateChild=function(t){return ju.EMPTY_NODE},Vu.prototype.isEmpty=function(){return!1},Vu);Object.defineProperties(du,{MIN:{value:new du(Zs,ju.EMPTY_NODE)},MAX:{value:new du(ta,Bu)}}),H.__EMPTY_NODE=ju.EMPTY_NODE,ou.__childrenNodeConstructor=ju,Qa=Bu,yu=Bu;var Ku,Gu=!0;function Wu(n,t){if(void 0===t&&(t=null),null===n)return ju.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),so(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new ou(n,Wu(t));if(n instanceof Array||!Gu){var r=ju.EMPTY_NODE;return ra(n,function(t,e){Do(n,t)&&"."!==t.substring(0,1)&&(!(e=Wu(e)).isLeafNode()&&e.isEmpty()||(r=r.updateImmediateChild(t,e)))}),r.updatePriority(Wu(t))}var i=[],o=!1;if(ra(n,function(t,e){"."!==t.substring(0,1)&&((e=Wu(e)).isEmpty()||(o=o||!e.getPriority().isEmpty(),i.push(new du(t,e))))}),0===i.length)return ju.EMPTY_NODE;var e=Du(i,Mu,function(t){return t.name},Fu);if(o){var s=Du(i,Eu.getCompare());return new ju(e,Wu(t),new xu({".priority":s},{".priority":Eu}))}return new ju(e,Wu(t),xu.Default)}function Hu(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function zu(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Qu(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}vu=Wu,(Sn=Ku=Ku||{})[Sn.OVERWRITE=0]="OVERWRITE",Sn[Sn.MERGE=1]="MERGE",Sn[Sn.ACK_USER_WRITE=2]="ACK_USER_WRITE",Sn[Sn.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var Yu,Xu=(Ju.prototype.operationForChild=function(t){if(Ea(this.path)){if(null!=this.affectedTree.value)return so(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var e=this.affectedTree.subtree(new da(t));return new Ju(va(),e,this.revert)}return so(ya(this.path)===t,"operationForChild called for unrelated child."),new Ju(ba(this.path),this.affectedTree,this.revert)},Ju);function Ju(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Ku.ACK_USER_WRITE,this.source=Hu()}var $u=(Zu.fromObject=function(t){var n=new Zu(null);return ra(t,function(t,e){n=n.set(new da(t),e)}),n},Zu.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},Zu.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:va(),value:this.value};if(Ea(t))return null;var n=ya(t),r=this.children.get(n);if(null===r)return null;e=r.findRootMostMatchingPathAndValue(ba(t),e);return null==e?null:{path:Ta(new da(n),e.path),value:e.value}},Zu.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},Zu.prototype.subtree=function(t){if(Ea(t))return this;var e=ya(t),e=this.children.get(e);return null!==e?e.subtree(ba(t)):new Zu(null)},Zu.prototype.set=function(t,e){if(Ea(t))return new Zu(e,this.children);var n=ya(t),e=(this.children.get(n)||new Zu(null)).set(ba(t),e),e=this.children.insert(n,e);return new Zu(this.value,e)},Zu.prototype.remove=function(t){if(Ea(t))return this.children.isEmpty()?new Zu(null):new Zu(null,this.children);var e=ya(t),n=this.children.get(e);if(n){n=n.remove(ba(t)),t=void 0,t=n.isEmpty()?this.children.remove(e):this.children.insert(e,n);return null===this.value&&t.isEmpty()?new Zu(null):new Zu(this.value,t)}return this},Zu.prototype.get=function(t){if(Ea(t))return this.value;var e=ya(t),e=this.children.get(e);return e?e.get(ba(t)):null},Zu.prototype.setTree=function(t,e){if(Ea(t))return e;var n=ya(t),t=(this.children.get(n)||new Zu(null)).setTree(ba(t),e),e=void 0,e=t.isEmpty()?this.children.remove(n):this.children.insert(n,t);return new Zu(this.value,e)},Zu.prototype.fold=function(t){return this.fold_(va(),t)},Zu.prototype.fold_=function(n,r){var i={};return this.children.inorderTraversal(function(t,e){i[t]=e.fold_(Ta(n,t),r)}),r(n,this.value,i)},Zu.prototype.findOnPath=function(t,e){return this.findOnPath_(t,va(),e)},Zu.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(Ea(t))return null;var i=ya(t),r=this.children.get(i);return r?r.findOnPath_(ba(t),Ta(e,i),n):null},Zu.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,va(),e)},Zu.prototype.foreachOnPath_=function(t,e,n){if(Ea(t))return this;this.value&&n(e,this.value);var r=ya(t),i=this.children.get(r);return i?i.foreachOnPath_(ba(t),Ta(e,r),n):new Zu(null)},Zu.prototype.foreach=function(t){this.foreach_(va(),t)},Zu.prototype.foreach_=function(n,r){this.children.inorderTraversal(function(t,e){e.foreach_(Ta(n,t),r)}),this.value&&r(n,this.value)},Zu.prototype.foreachChild=function(n){this.children.inorderTraversal(function(t,e){e.value&&n(t,e.value)})},Zu);function Zu(t,e){void 0===e&&(e=Yu=Yu||new fu(Us)),this.value=t,this.children=e}var tc=(ec.prototype.operationForChild=function(t){return Ea(this.path)?new ec(this.source,va()):new ec(this.source,ba(this.path))},ec);function ec(t,e){this.source=t,this.path=e,this.type=Ku.LISTEN_COMPLETE}var nc=(rc.prototype.operationForChild=function(t){return Ea(this.path)?new rc(this.source,va(),this.snap.getImmediateChild(t)):new rc(this.source,ba(this.path),this.snap)},rc);function rc(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Ku.OVERWRITE}var ic=(oc.prototype.operationForChild=function(t){if(Ea(this.path)){var e=this.children.subtree(new da(t));return e.isEmpty()?null:e.value?new nc(this.source,va(),e.value):new oc(this.source,va(),e)}return so(ya(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new oc(this.source,ba(this.path),this.children)},oc.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},oc);function oc(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Ku.MERGE}var sc=(ac.prototype.isFullyInitialized=function(){return this.fullyInitialized_},ac.prototype.isFiltered=function(){return this.filtered_},ac.prototype.isCompleteForPath=function(t){if(Ea(t))return this.isFullyInitialized()&&!this.filtered_;t=ya(t);return this.isCompleteForChild(t)},ac.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},ac.prototype.getNode=function(){return this.node_},ac);function ac(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}function uc(t,e){return{eventCache:t,serverCache:e}}function cc(t,e,n,r){return uc(new sc(e,n,r),t.serverCache)}function hc(t,e,n,r){return uc(t.eventCache,new sc(e,n,r))}function lc(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function fc(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}function pc(t){return{type:"value",snapshotNode:t}}function dc(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function gc(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function vc(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var yc=(mc.prototype.updateChild=function(t,e,n,r,i,o){so(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(gc(e,s)):so(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(dc(e,n)):o.trackChildChange(vc(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},mc.prototype.updateFullNode=function(r,n,i){return null!=i&&(r.isLeafNode()||r.forEachChild(Eu,function(t,e){n.hasChild(t)||i.trackChildChange(gc(t,e))}),n.isLeafNode()||n.forEachChild(Eu,function(t,e){var n;r.hasChild(t)?(n=r.getImmediateChild(t)).equals(e)||i.trackChildChange(vc(t,e,n)):i.trackChildChange(dc(t,e))})),n.withIndex(this.index_)},mc.prototype.updatePriority=function(t,e){return t.isEmpty()?ju.EMPTY_NODE:t.updatePriority(e)},mc.prototype.filtersNodes=function(){return!1},mc.prototype.getIndexedFilter=function(){return this},mc.prototype.getIndex=function(){return this.index_},mc);function mc(t){this.index_=t}var bc=(wc.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;so("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),so(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,vc(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,gc(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,dc(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw ao("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,vc(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},wc.prototype.getChanges=function(){return Array.from(this.changeMap.values())},wc);function wc(){this.changeMap=new Map}var _c=(Ic.empty=function(){return new Ic(new $u(null))},Ic);function Ic(t){this.writeTree_=t}function Tc(t,e,n){if(Ea(e))return new _c(new $u(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,r=Sa(i,e),o=o.updateChild(r,n);return new _c(t.writeTree_.set(i,o))}n=new $u(n),n=t.writeTree_.setTree(e,n);return new _c(n)}function Ec(t,n,e){var r=t;return ra(e,function(t,e){r=Tc(r,Ta(n,t),e)}),r}function Sc(t,e){if(Ea(e))return _c.empty();e=t.writeTree_.setTree(e,new $u(null));return new _c(e)}function Cc(t,e){return null!=Ac(t,e)}function Ac(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(Sa(n.path,e)):null}function Nc(t){var n=[],e=t.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Eu,function(t,e){n.push(new du(t,e))}):t.writeTree_.children.inorderTraversal(function(t,e){null!=e.value&&n.push(new du(t,e.value))}),n}function kc(t,e){if(Ea(e))return t;var n=Ac(t,e);return new _c(null!=n?new $u(n):t.writeTree_.subtree(e))}function Rc(t){return t.writeTree_.isEmpty()}function Pc(t,e){return function n(r,t,i){{if(null!=t.value)return i.updateChild(r,t.value);var o=null;return t.children.inorderTraversal(function(t,e){".priority"===t?(so(null!==e.value,"Priority writes must always be leaf nodes"),o=e.value):i=n(Ta(r,t),e,i)}),i=!i.getChild(r).isEmpty()&&null!==o?i.updateChild(Ta(r,".priority"),o):i}}(va(),t.writeTree_,e)}function Dc(t,e){return Gc(e,t)}function Oc(e,n){var t=e.allWrites.findIndex(function(t){return t.writeId===n});so(0<=t,"removeWrite called with nonexistent writeId.");var r=e.allWrites[t];e.allWrites.splice(t,1);for(var i,o=r.visible,s=!1,a=e.allWrites.length-1;o&&0<=a;){var u=e.allWrites[a];u.visible&&(t<=a&&function(t,e){{if(t.snap)return Na(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&Na(Ta(t.path,n),e))return!0;return!1}}(u,r.path)?o=!1:Na(r.path,u.path)&&(s=!0)),a--}return!!o&&(s?((i=e).visibleWrites=Lc(i.allWrites,xc,va()),0<i.allWrites.length?i.lastWriteId=i.allWrites[i.allWrites.length-1].writeId:i.lastWriteId=-1):r.snap?e.visibleWrites=Sc(e.visibleWrites,r.path):ra(r.children,function(t){e.visibleWrites=Sc(e.visibleWrites,Ta(r.path,t))}),!0)}function xc(t){return t.visible}function Lc(t,e,n){for(var r=_c.empty(),i=0;i<t.length;++i){var o=t[i];if(e(o)){var s=o.path,a=void 0;if(o.snap)Na(n,s)?r=Tc(r,a=Sa(n,s),o.snap):Na(s,n)&&(a=Sa(s,n),r=Tc(r,va(),o.snap.getChild(a)));else{if(!o.children)throw ao("WriteRecord should have .snap or .children");Na(n,s)?r=Ec(r,a=Sa(n,s),o.children):Na(s,n)&&(Ea(a=Sa(s,n))?r=Ec(r,va(),o.children):(o=Oo(o.children,ya(a)))&&(a=o.getChild(ba(a)),r=Tc(r,va(),a)))}}}return r}function Mc(t,e,n,r,i){if(r||i){var o=kc(t.visibleWrites,e);if(!i&&Rc(o))return n;if(i||null!=n||Cc(o,va()))return Pc(Lc(t.allWrites,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(Na(t.path,e)||Na(e,t.path))},e),n||ju.EMPTY_NODE);return null}o=Ac(t.visibleWrites,e);if(null!=o)return o;t=kc(t.visibleWrites,e);return Rc(t)?n:null!=n||Cc(t,va())?Pc(t,n||ju.EMPTY_NODE):null}function Fc(t,e,n,r){return Mc(t.writeTree,t.treePath,e,n,r)}function Uc(t,e){return function(t,e,n){var r=ju.EMPTY_NODE,i=Ac(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Eu,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(n){var o=kc(t.visibleWrites,e);return n.forEachChild(Eu,function(t,e){e=Pc(kc(o,new da(t)),e);r=r.updateImmediateChild(t,e)}),Nc(o).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return Nc(kc(t.visibleWrites,e)).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}(t.writeTree,t.treePath,e)}function jc(t,e,n,r){return i=t.writeTree,t=t.treePath,e=e,r=r,so(n||r,"Either existingEventSnap or existingServerSnap must exist"),t=Ta(t,e),Cc(i.visibleWrites,t)?null:Rc(t=kc(i.visibleWrites,t))?r.getChild(e):Pc(t,r.getChild(e));var i}function qc(t,e){return n=t.writeTree,e=Ta(t.treePath,e),Ac(n.visibleWrites,e);var n}function Vc(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var a,t=kc(t.visibleWrites,e);if(null!=(e=Ac(t,va())))a=e;else{if(null==n)return[];a=Pc(t,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var u=[],c=s.getCompare(),h=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),l=h.getNext();l&&u.length<i;)0!==c(l,r)&&u.push(l),l=h.getNext();return u}(t.writeTree,t.treePath,e,n,r,i,o)}function Bc(t,e,n){return r=t.writeTree,i=t.treePath,t=n,e=Ta(i,n=e),null!=(i=Ac(r.visibleWrites,e))?i:t.isCompleteForChild(n)?Pc(kc(r.visibleWrites,e),t.getNode().getImmediateChild(n)):null;var r,i}function Kc(t,e){return Gc(Ta(t.treePath,e),t.writeTree)}function Gc(t,e){return{treePath:t,writeTree:e}}function Wc(){}var Hc=new(Wc.prototype.getCompleteChild=function(t){return null},Wc.prototype.getChildAfterChild=function(t,e,n){return null},Wc),zc=(Qc.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);e=null!=this.optCompleteServerCache_?new sc(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Bc(this.writes_,t,e)},Qc.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:fc(this.viewCache_),t=Vc(this.writes_,r,e,1,n,t);return 0===t.length?null:t[0]},Qc);function Qc(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}function Yc(t,e,n,r,i){var o,s,a,u,c,h,l,f,p=new bc;if(n.type===Ku.OVERWRITE)var d=n,g=d.source.fromUser?$c(t,e,d.path,d.snap,r,i,p):(so(d.source.fromServer,"Unknown source."),o=d.source.tagged||e.serverCache.isFiltered()&&!Ea(d.path),Jc(t,e,d.path,d.snap,r,i,o,p));else if(n.type===Ku.MERGE){var v=n;g=v.source.fromUser?(s=t,a=e,u=v.path,d=v.children,c=r,h=i,l=p,f=a,d.foreach(function(t,e){t=Ta(u,t);Zc(a,ya(t))&&(f=$c(s,f,t,e,c,h,l))}),d.foreach(function(t,e){t=Ta(u,t);Zc(a,ya(t))||(f=$c(s,f,t,e,c,h,l))}),f):(so(v.source.fromServer,"Unknown source."),o=v.source.tagged||e.serverCache.isFiltered(),eh(t,e,v.path,v.children,r,i,o,p))}else if(n.type===Ku.ACK_USER_WRITE){var y=n;g=y.revert?function(t,e,n,r,i,o){var s;{if(null!=qc(r,n))return e;var a,u,c=new zc(r,e,i),h=e.eventCache.getNode(),i=void 0;return Ea(n)||".priority"===ya(n)?(u=void 0,u=e.serverCache.isFullyInitialized()?Fc(r,fc(e)):(a=e.serverCache.getNode(),so(a instanceof ju,"serverChildren would be complete if leaf node"),Uc(r,a)),i=t.filter.updateFullNode(h,u,o)):(a=ya(n),null==(u=Bc(r,a,e.serverCache))&&e.serverCache.isCompleteForChild(a)&&(u=h.getImmediateChild(a)),(i=null!=u?t.filter.updateChild(h,a,u,ba(n),c,o):e.eventCache.getNode().hasChild(a)?t.filter.updateChild(h,a,ju.EMPTY_NODE,ba(n),c,o):h).isEmpty()&&e.serverCache.isFullyInitialized()&&(s=Fc(r,fc(e))).isLeafNode()&&(i=t.filter.updateFullNode(i,s,o))),s=e.serverCache.isFullyInitialized()||null!=qc(r,va()),cc(e,i,s,t.filter.filtersNodes())}}(t,e,y.path,r,i,p):function(t,e,r,n,i,o,s){if(null!=qc(i,r))return e;var a=e.serverCache.isFiltered(),u=e.serverCache;{if(null!=n.value){if(Ea(r)&&u.isFullyInitialized()||u.isCompleteForPath(r))return Jc(t,e,r,u.getNode().getChild(r),i,o,a,s);if(Ea(r)){var c=new $u(null);return u.getNode().forEachChild(Cu,function(t,e){c=c.set(new da(t),e)}),eh(t,e,r,c,i,o,a,s)}return e}var h=new $u(null);return n.foreach(function(t,e){var n=Ta(r,t);u.isCompleteForPath(n)&&(h=h.set(t,u.getNode().getChild(n)))}),eh(t,e,r,h,i,o,a,s)}}(t,e,y.path,y.affectedTree,r,i,p)}else{if(n.type!==Ku.LISTEN_COMPLETE)throw ao("Unknown operation type: "+n.type);o=t,y=e,i=n.path,t=r,n=p,r=y.serverCache,r=hc(y,r.getNode(),r.isFullyInitialized()||Ea(i),r.isFiltered()),g=Xc(o,r,i,t,Hc,n)}p=p.getChanges();return function(t,e,n){var r=e.eventCache;{var i,o;r.isFullyInitialized()&&(i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=lc(t),(0<n.length||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(pc(lc(e))))}}(e,g,p),{viewCache:g,changes:p}}function Xc(t,e,n,r,i,o){var s=e.eventCache;if(null!=qc(r,n))return e;var a,u,c,h,l=void 0,f=void 0;return l=Ea(n)?(so(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()?(a=Uc(r,(a=fc(e))instanceof ju?a:ju.EMPTY_NODE),t.filter.updateFullNode(e.eventCache.getNode(),a,o)):(u=Fc(r,fc(e)),t.filter.updateFullNode(e.eventCache.getNode(),u,o))):".priority"===(u=ya(n))?(so(1===ma(n),"Can't have a priority with additional path components"),null!=(h=jc(r,n,c=s.getNode(),f=e.serverCache.getNode()))?t.filter.updatePriority(c,h):s.getNode()):(c=ba(n),h=void 0,null!=(h=s.isCompleteForChild(u)?(f=e.serverCache.getNode(),null!=(f=jc(r,n,s.getNode(),f))?s.getNode().getImmediateChild(u).updateChild(c,f):s.getNode().getImmediateChild(u)):Bc(r,u,e.serverCache))?t.filter.updateChild(s.getNode(),u,h,c,i,o):s.getNode()),cc(e,l,s.isFullyInitialized()||Ea(n),t.filter.filtersNodes())}function Jc(t,e,n,r,i,o,s,a){var u=e.serverCache,c=s?t.filter:t.filter.getIndexedFilter();if(Ea(n))l=c.updateFullNode(u.getNode(),r,null);else if(c.filtersNodes()&&!u.isFiltered())var h=u.getNode().updateChild(n,r),l=c.updateFullNode(u.getNode(),h,null);else{s=ya(n);if(!u.isCompleteForPath(n)&&1<ma(n))return e;h=ba(n),r=u.getNode().getImmediateChild(s).updateChild(h,r);l=".priority"===s?c.updatePriority(u.getNode(),r):c.updateChild(u.getNode(),s,r,h,Hc,null)}c=hc(e,l,u.isFullyInitialized()||Ea(n),c.filtersNodes());return Xc(t,c,n,i,new zc(i,c,o),a)}function $c(t,e,n,r,i,o,s){var a,u,c=e.eventCache,h=new zc(i,e,o);return Ea(n)?(u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),cc(e,u,!0,t.filter.filtersNodes())):".priority"===(a=ya(n))?(u=t.filter.updatePriority(e.eventCache.getNode(),r),cc(e,u,c.isFullyInitialized(),c.isFiltered())):(i=ba(n),o=c.getNode().getImmediateChild(a),u=void 0,u=Ea(i)?r:null!=(n=h.getCompleteChild(a))?".priority"===wa(i)&&n.getChild(Ia(i)).isEmpty()?n:n.updateChild(i,r):ju.EMPTY_NODE,o.equals(u)?e:cc(e,t.filter.updateChild(c.getNode(),a,u,i,h,s),c.isFullyInitialized(),t.filter.filtersNodes()))}function Zc(t,e){return t.eventCache.isCompleteForChild(e)}function th(t,n,e){return e.foreach(function(t,e){n=n.updateChild(t,e)}),n}function eh(r,i,t,e,o,s,a,u){if(i.serverCache.getNode().isEmpty()&&!i.serverCache.isFullyInitialized())return i;var c=i,e=Ea(t)?e:new $u(null).setTree(t,e),h=i.serverCache.getNode();return e.children.inorderTraversal(function(t,e){h.hasChild(t)&&(e=th(0,i.serverCache.getNode().getImmediateChild(t),e),c=Jc(r,c,new da(t),e,o,s,a,u))}),e.children.inorderTraversal(function(t,e){var n=!i.serverCache.isCompleteForChild(t)&&void 0===e.value;h.hasChild(t)||n||(e=th(0,i.serverCache.getNode().getImmediateChild(t),e),c=Jc(r,c,new da(t),e,o,s,a,u))}),c}var nh=function(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()};function rh(n,t,e,r){var i=[],o=[];return t.forEach(function(t){var e;"child_changed"===t.type&&n.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push((e=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:e}))}),ih(n,i,"child_removed",t,r,e),ih(n,i,"child_added",t,r,e),ih(n,i,"child_moved",o,r,e),ih(n,i,"child_changed",t,r,e),ih(n,i,"value",t,r,e),i}function ih(o,s,e,t,a,u){t=t.filter(function(t){return t.type===e});t.sort(function(t,e){return function(t,e,n){if(null==e.childName||null==n.childName)throw ao("Should only compare child_ events.");e=new du(e.childName,e.snapshotNode),n=new du(n.childName,n.snapshotNode);return t.index_.compare(e,n)}(o,t,e)}),t.forEach(function(e){var t,n,r,i=(t=o,r=u,"value"===(n=e).type||"child_removed"===n.type||(n.prevName=r.getPredecessorChildName(n.childName,n.snapshotNode,t.index_)),n);a.forEach(function(t){t.respondsTo(e.type)&&s.push(t.createEvent(i,o.query_))})})}function oh(t){if(t===""+ca)return"-";var e=ha(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;0<=i&&"z"===n[i];)i--;return-1===i?ta:(e=n[i],e=hh.charAt(hh.indexOf(e)+1),n[i]=e,n.slice(0,i+1).join(""))}function sh(t){if(t===""+ua)return Zs;var e=ha(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?""+ca:(delete n[n.length-1],n.join("")):(n[n.length-1]=hh.charAt(hh.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))}var ah,uh,ch,hh="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",lh=(ah=0,uh=[],function(t){var e=t===ah;ah=t;for(var n=new Array(8),r=7;0<=r;r--)n[r]=hh.charAt(t%64),t=Math.floor(t/64);so(0===t,"Cannot push at time == 0");var i=n.join("");if(e){for(r=11;0<=r&&63===uh[r];r--)uh[r]=0;uh[r]++}else for(r=0;r<12;r++)uh[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)i+=hh.charAt(uh[r]);return so(20===i.length,"nextPushId: Length should be 20."),i});function fh(){return null!==ch&&ch.apply(this,arguments)||this}var ph,dh=new(Xi(fh,ch=bu),fh.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?ea(t.name,e.name):n},fh.prototype.isDefinedOn=function(t){return!0},fh.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},fh.prototype.minPost=function(){return du.MIN},fh.prototype.maxPost=function(){return du.MAX},fh.prototype.makePost=function(t,e){t=Wu(t);return new du(e,t)},fh.prototype.toString=function(){return".value"},fh),gh=(Xi(vh,ph=bu),vh.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},vh.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},vh.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),r=n.compareTo(r);return 0===r?ea(t.name,e.name):r},vh.prototype.makePost=function(t,e){t=Wu(t),t=ju.EMPTY_NODE.updateChild(this.indexPath_,t);return new du(e,t)},vh.prototype.maxPost=function(){var t=ju.EMPTY_NODE.updateChild(this.indexPath_,Bu);return new du(ta,t)},vh.prototype.toString=function(){return _a(this.indexPath_,0).join("/")},vh);function vh(t){var e=ph.call(this)||this;return e.indexPath_=t,so(!Ea(t)&&".priority"!==ya(t),"Can't create PathIndex with empty path or .priority key"),e}var yh=(mh.prototype.getStartPost=function(){return this.startPost_},mh.prototype.getEndPost=function(){return this.endPost_},mh.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},mh.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new du(e,n))||(n=ju.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},mh.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=ju.EMPTY_NODE);var r=(r=e.withIndex(this.index_)).updatePriority(ju.EMPTY_NODE),i=this;return e.forEachChild(Eu,function(t,e){i.matches(new du(t,e))||(r=r.updateImmediateChild(t,ju.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},mh.prototype.updatePriority=function(t,e){return t},mh.prototype.filtersNodes=function(){return!0},mh.prototype.getIndexedFilter=function(){return this.indexedFilter_},mh.prototype.getIndex=function(){return this.index_},mh.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},mh.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},mh);function mh(t){this.indexedFilter_=new yc(t.getIndex()),this.index_=t.getIndex(),this.startPost_=mh.getStartPost_(t),this.endPost_=mh.getEndPost_(t)}var bh=(wh.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new du(e,n))||(n=ju.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},wh.prototype.updateFullNode=function(t,e,n){if(e.isLeafNode()||e.isEmpty())r=ju.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){var r=ju.EMPTY_NODE.withIndex(this.index_),i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(ju.EMPTY_NODE);var a,u=void 0,c=void 0,h=void 0,i=void 0;h=this.reverse_?(i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost(),a=this.index_.getCompare(),function(t,e){return a(e,t)}):(i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),this.index_.getCompare());for(var o=0,l=!1;i.hasNext();){s=i.getNext();(l=!l&&h(u,s)<=0?!0:l)&&o<this.limit_&&h(s,c)<=0?o++:r=r.updateImmediateChild(s.name,ju.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},wh.prototype.updatePriority=function(t,e){return t},wh.prototype.filtersNodes=function(){return!0},wh.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},wh.prototype.getIndex=function(){return this.index_},wh.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o,s;s=this.reverse_?(o=this.index_.getCompare(),function(t,e){return o(e,t)}):this.index_.getCompare();var a=t;so(a.numChildren()===this.limit_,"");var u=new du(e,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(a.hasChild(e)){for(var l=a.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,u);if(h&&!n.isEmpty()&&0<=p)return null!=i&&i.trackChildChange(vc(e,n,l)),a.updateImmediateChild(e,n);null!=i&&i.trackChildChange(gc(e,l));l=a.updateImmediateChild(e,ju.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(dc(f.name,f.node)),l.updateImmediateChild(f.name,f.node)):l}return!n.isEmpty()&&h&&0<=s(c,u)?(null!=i&&(i.trackChildChange(gc(c.name,c.node)),i.trackChildChange(dc(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(c.name,ju.EMPTY_NODE)):t},wh);function wh(t){this.rangedFilter_=new yh(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}var _h=(Ih.prototype.hasStart=function(){return this.startSet_},Ih.prototype.hasStartAfter=function(){return this.startAfterSet_},Ih.prototype.hasEndBefore=function(){return this.endBeforeSet_},Ih.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},Ih.prototype.getIndexStartValue=function(){return so(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},Ih.prototype.getIndexStartName=function(){return so(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Zs},Ih.prototype.hasEnd=function(){return this.endSet_},Ih.prototype.getIndexEndValue=function(){return so(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},Ih.prototype.getIndexEndName=function(){return so(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ta},Ih.prototype.hasLimit=function(){return this.limitSet_},Ih.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},Ih.prototype.getLimit=function(){return so(this.limitSet_,"Only valid if limit has been set"),this.limit_},Ih.prototype.getIndex=function(){return this.index_},Ih.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},Ih.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Eu},Ih.prototype.copy=function(){var t=new Ih;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},Ih);function Ih(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Eu}function Th(t,e,n){t=t.copy();return t.startSet_=!0,void 0===e&&(e=null),t.indexStartValue_=e,null!=n?(t.startNameSet_=!0,t.indexStartName_=n):(t.startNameSet_=!1,t.indexStartName_=""),t}function Eh(t,e,n){t=t.copy();return t.endSet_=!0,void 0===e&&(e=null),t.indexEndValue_=e,void 0!==n?(t.endNameSet_=!0,t.indexEndName_=n):(t.endNameSet_=!1,t.indexEndName_=""),t}function Sh(t,e){t=t.copy();return t.index_=e,t}function Ch(t){var e,n={};return t.isDefault()||(e=t.index_===Eu?"$priority":t.index_===dh?"$value":t.index_===Cu?"$key":(so(t.index_ instanceof gh,"Unrecognized index type!"),t.index_.toString()),n.orderBy=Ro(e),t.startSet_&&(n.startAt=Ro(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Ro(t.indexStartName_))),t.endSet_&&(n.endAt=Ro(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Ro(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}var Ah,Nh=(Object.defineProperty(kh.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),kh);function kh(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new yc(n.getIndex()),i=(o=n).loadsAllData()?new yc(o.getIndex()):new(o.hasLimit()?bh:yh)(o);this.processor_={filter:i};var t=e.serverCache,n=e.eventCache,o=r.updateFullNode(ju.EMPTY_NODE,t.getNode(),null),e=i.updateFullNode(ju.EMPTY_NODE,n.getNode(),null),r=new sc(o,t.isFullyInitialized(),r.filtersNodes()),i=new sc(e,n.isFullyInitialized(),i.filtersNodes());this.viewCache_=uc(i,r),this.eventGenerator_=new nh(this.query_)}function Rh(t){return 0===t.eventRegistrations_.length}function Ph(t,e,n){var r,i=[];if(n&&(so(null==e,"A cancel should cancel all event registrations."),r=t.query.path,t.eventRegistrations_.forEach(function(t){t=t.createCancelEvent(n,r);t&&i.push(t)})),e){for(var o=[],s=0;s<t.eventRegistrations_.length;++s){var a=t.eventRegistrations_[s];if(a.matches(e)){if(e.hasAnyCallback()){o=o.concat(t.eventRegistrations_.slice(s+1));break}}else o.push(a)}t.eventRegistrations_=o}else t.eventRegistrations_=[];return i}function Dh(t,e,n,r){e.type===Ku.MERGE&&null!==e.source.queryId&&(so(fc(t.viewCache_),"We should always have a full cache before handling merges"),so(lc(t.viewCache_),"Missing event cache, even though we have a server cache"));var i=t.viewCache_,e=Yc(t.processor_,i,e,n,r);return n=t.processor_,r=e.viewCache,so(r.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),so(r.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed"),so(e.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=e.viewCache,Oh(t,e.changes,e.viewCache.eventCache.getNode(),null)}function Oh(t,e,n,r){r=r?[r]:t.eventRegistrations_;return rh(t.eventGenerator_,e,n,r)}var xh=function(){this.views=new Map};function Lh(t,e,n,r){var i,o,s=e.source.queryId;if(null!==s){var a=t.views.get(s);return so(null!=a,"SyncTree gave us an op for an invalid query."),Dh(a,e,n,r)}var u=[];try{for(var c=to(t.views.values()),h=c.next();!h.done;h=c.next())a=h.value,u=u.concat(Dh(a,e,n,r))}catch(t){i={error:t}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return u}function Mh(t,e,n,r,i){var o=e.queryIdentifier(),t=t.views.get(o);if(t)return t;o=Fc(n,i?r:null),t=!1,t=!!o||(o=r instanceof ju?Uc(n,r):ju.EMPTY_NODE,!1),i=uc(new sc(o,t,!1),new sc(r,i,!1));return new Nh(e,i)}function Fh(t,e,n,r,i,o){var s,o=Mh(t,e,r,i,o);return t.views.has(e.queryIdentifier())||t.views.set(e.queryIdentifier(),o),e=n,o.eventRegistrations_.push(e),e=n,o=(n=o).viewCache_.eventCache,s=[],o.getNode().isLeafNode()||o.getNode().forEachChild(Eu,function(t,e){s.push(dc(t,e))}),o.isFullyInitialized()&&s.push(pc(o.getNode())),Oh(n,s,o.getNode(),e)}function Uh(t,e,n,r){var i,o,s=e.queryIdentifier(),a=[],u=[],c=Kh(t);if("default"===s)try{for(var h=to(t.views.entries()),l=h.next();!l.done;l=h.next()){var f=eo(l.value,2),p=f[0],d=f[1],u=u.concat(Ph(d,n,r));Rh(d)&&(t.views.delete(p),d.query.getQueryParams().loadsAllData()||a.push(d.query))}}catch(t){i={error:t}}finally{try{l&&!l.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}else(d=t.views.get(s))&&(u=u.concat(Ph(d,n,r)),Rh(d)&&(t.views.delete(s),d.query.getQueryParams().loadsAllData()||a.push(d.query)));return c&&!Kh(t)&&a.push((so(Ah,"Reference.ts has not been loaded"),new Ah(e.repo,e.path))),{removed:a,events:u}}function jh(t){var e,n,r=[];try{for(var i=to(t.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;s.query.getQueryParams().loadsAllData()||r.push(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function qh(t,e){var n,r,i,o,s=null;try{for(var a=to(t.views.values()),u=a.next();!u.done;u=a.next())var c=u.value,s=s||(i=e,o=void 0,(o=fc((c=c).viewCache_))&&(c.query.getQueryParams().loadsAllData()||!Ea(i)&&!o.getImmediateChild(ya(i)).isEmpty())?o.getChild(i):null)}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return s}function Vh(t,e){if(e.getQueryParams().loadsAllData())return Gh(t);e=e.queryIdentifier();return t.views.get(e)}function Bh(t,e){return null!=Vh(t,e)}function Kh(t){return null!=Gh(t)}function Gh(t){var e,n;try{for(var r=to(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query.getQueryParams().loadsAllData())return o}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var Wh=1,Hh=function(t){this.listenProvider_=t,this.syncPointTree_=new $u(null),this.pendingWriteTree_={visibleWrites:_c.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function zh(t,e,n,r,i){var o,s,a,u;return o=t.pendingWriteTree_,s=e,a=n,u=i,so((r=r)>o.lastWriteId,"Stacking an older write on top of newer ones"),void 0===u&&(u=!0),o.allWrites.push({path:s,snap:a,writeId:r,visible:u}),u&&(o.visibleWrites=Tc(o.visibleWrites,s,a)),o.lastWriteId=r,i?el(t,new nc(Hu(),e,n)):[]}function Qh(t,e,n,r){var i,o,s;i=t.pendingWriteTree_,o=e,s=n,so((r=r)>i.lastWriteId,"Stacking an older merge on top of newer ones"),i.allWrites.push({path:o,children:s,writeId:r,visible:!0}),i.visibleWrites=Ec(i.visibleWrites,o,s),i.lastWriteId=r;n=$u.fromObject(n);return el(t,new ic(Hu(),e,n))}function Yh(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(Oc(t.pendingWriteTree_,e)){var i=new $u(null);return null!=r.snap?i=i.set(va(),!0):ra(r.children,function(t){i=i.set(new da(t),!0)}),el(t,new Xu(r.path,i,n))}return[]}function Xh(t,e,n){return el(t,new nc(zu(),e,n))}function Jh(n,t,e,r){var i=t.path,o=n.syncPointTree_.get(i),s=[];if(o&&("default"===t.queryIdentifier()||Bh(o,t))){var a=Uh(o,t,e,r);0===o.views.size&&(n.syncPointTree_=n.syncPointTree_.remove(i));e=a.removed,s=a.events,o=-1!==e.findIndex(function(t){return t.getQueryParams().loadsAllData()}),a=n.syncPointTree_.findOnPath(i,function(t,e){return Kh(e)});if(o&&!a){i=n.syncPointTree_.subtree(i);if(!i.isEmpty())for(var u=i.fold(function(t,e,n){if(e&&Kh(e))return[Gh(e)];var r=[];return e&&(r=jh(e)),ra(n,function(t,e){r=r.concat(e)}),r}),c=0;c<u.length;++c){var h=u[c],l=h.query,h=rl(n,h);n.listenProvider_.startListening(cl(l),il(n,l),h.hashFn,h.onComplete)}}!a&&0<e.length&&!r&&(o?n.listenProvider_.stopListening(cl(t),null):e.forEach(function(t){var e=n.queryToTagMap.get(ol(t));n.listenProvider_.stopListening(cl(t),e)})),function(t,e){for(var n=0;n<e.length;++n){var r,i=e[n];i.getQueryParams().loadsAllData()||(r=ol(i),i=t.queryToTagMap.get(r),t.queryToTagMap.delete(r),t.tagToQueryMap.delete(i))}}(n,e)}return s}function $h(t,e,n){var r=e.path,i=null,o=!1;t.syncPointTree_.foreachOnPath(r,function(t,e){t=Sa(t,r);i=i||qh(e,t),o=o||Kh(e)});var s=t.syncPointTree_.get(r);s?(o=o||Kh(s),i=i||qh(s,va())):(s=new xh,t.syncPointTree_=t.syncPointTree_.set(r,s)),null!=i?h=!0:(h=!1,i=ju.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(function(t,e){e=qh(e,va());e&&(i=i.updateImmediateChild(t,e))}));var a,u,c=Bh(s,e);c||e.getQueryParams().loadsAllData()||(a=ol(e),so(!t.queryToTagMap.has(a),"View does not exist, but we have a tag"),u=Wh++,t.queryToTagMap.set(a,u),t.tagToQueryMap.set(u,a));var h=Fh(s,e,n,Dc(t.pendingWriteTree_,r),i,h);return c||o||(s=Vh(s,e),h=h.concat(function(t,e,n){var r=e.path,i=il(t,e),n=rl(t,n),n=t.listenProvider_.startListening(cl(e),i,n.hashFn,n.onComplete),r=t.syncPointTree_.subtree(r);if(i)so(!Kh(r.value),"If we're adding a query, it shouldn't be shadowed");else for(var o=r.fold(function(t,e,n){if(!Ea(t)&&e&&Kh(e))return[Gh(e).query];var r=[];return e&&(r=r.concat(jh(e).map(function(t){return t.query}))),ra(n,function(t,e){r=r.concat(e)}),r}),s=0;s<o.length;++s){var a=o[s];t.listenProvider_.stopListening(cl(a),il(t,a))}return n}(t,e,s))),h}function Zh(t,n,e){var r=t.pendingWriteTree_,t=t.syncPointTree_.findOnPath(n,function(t,e){t=qh(e,Sa(t,n));if(t)return t});return Mc(r,n,t,e,!0)}function tl(t,e){var n=e.path,r=null;t.syncPointTree_.foreachOnPath(n,function(t,e){t=Sa(t,n);r=r||qh(e,t)});var i=t.syncPointTree_.get(n);i?r=r||qh(i,va()):(i=new xh,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new sc(r,!0,!1):null,o=Mh(i,e,Dc(t.pendingWriteTree_,e.path),o?s.getNode():ju.EMPTY_NODE,o);return lc(o.viewCache_)}function el(t,e){return function t(e,n,r,i){{if(Ea(e.path))return nl(e,n,r,i);var o=n.get(va());null==r&&null!=o&&(r=qh(o,va()));var s=[],a=ya(e.path),u=e.operationForChild(a),c=n.children.get(a);return c&&u&&(n=r?r.getImmediateChild(a):null,a=Kc(i,a),s=s.concat(t(u,c,n,a))),s=o?s.concat(Lh(o,e,i,r)):s}}(e,t.syncPointTree_,null,Dc(t.pendingWriteTree_,va()))}function nl(i,t,o,s){var e=t.get(va());null==o&&null!=e&&(o=qh(e,va()));var a=[];return t.children.inorderTraversal(function(t,e){var n=o?o.getImmediateChild(t):null,r=Kc(s,t),t=i.operationForChild(t);t&&(a=a.concat(nl(t,e,n,r)))}),a=e?a.concat(Lh(e,i,s,o)):a}function rl(r,t){var i=t.query,o=il(r,i);return{hashFn:function(){return(t.viewCache_.serverCache.getNode()||ju.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return o?function(t,e,n){var r=sl(t,n);if(r){n=al(r),r=n.path,n=n.queryId,e=Sa(r,e);return ul(t,r,new tc(Qu(n),e))}return[]}(r,i.path,o):(e=r,n=i.path,el(e,new tc(zu(),n)));var e,n,t=sa(t,i);return Jh(r,i,null,t)}}}function il(t,e){e=ol(e);return t.queryToTagMap.get(e)}function ol(t){return t.path.toString()+"$"+t.queryIdentifier()}function sl(t,e){return t.tagToQueryMap.get(e)}function al(t){var e=t.indexOf("$");return so(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new da(t.substr(0,e))}}function ul(t,e,n){var r=t.syncPointTree_.get(e);return so(r,"Missing sync point for query tag that we're tracking"),Lh(r,n,Dc(t.pendingWriteTree_,e),null)}function cl(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t}var hl=(ll.prototype.getImmediateChild=function(t){return new ll(this.node_.getImmediateChild(t))},ll.prototype.node=function(){return this.node_},ll);function ll(t){this.node_=t}var fl=(pl.prototype.getImmediateChild=function(t){t=Ta(this.path_,t);return new pl(this.syncTree_,t)},pl.prototype.node=function(){return Zh(this.syncTree_,this.path_)},pl);function pl(t,e){this.syncTree_=t,this.path_=e}var dl=function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t},gl=function(t,e,n){return t&&"object"==typeof t?(so(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?vl(t[".sv"],e,n):"object"==typeof t[".sv"]?yl(t[".sv"],e):void so(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},vl=function(t,e,n){if("timestamp"===t)return n.timestamp;so(!1,"Unexpected server value: "+t)},yl=function(t,e,n){t.hasOwnProperty("increment")||so(!1,"Unexpected server value: "+JSON.stringify(t,null,2));t=t.increment;"number"!=typeof t&&so(!1,"Unexpected increment value: "+t);e=e.node();if(so(null!=e,"Expected ChildrenNode.EMPTY_NODE for nulls"),!e.isLeafNode())return t;e=e.getValue();return"number"!=typeof e?t:e+t},ml=function(t,e,n,r){return wl(e,new fl(n,t),r)},bl=function(t,e,n){return wl(t,new hl(e),n)};function wl(t,r,i){var e=t.getPriority().val(),n=gl(e,r.getImmediateChild(".priority"),i);if(t.isLeafNode()){var o=t,e=gl(o.getValue(),r,i);return e!==o.getValue()||n!==o.getPriority().val()?new ou(e,Wu(n)):t}var t=t,s=t;return n!==t.getPriority().val()&&(s=s.updatePriority(new ou(n))),t.forEachChild(Eu,function(t,e){var n=wl(e,r.getImmediateChild(t),i);n!==e&&(s=s.updateImmediateChild(t,n))}),s}function _l(){return{value:null,children:new Map}}function Il(t,e,n){var r;Ea(e)?(t.value=n,t.children.clear()):null!==t.value?t.value=t.value.updateChild(e,n):(r=ya(e),t.children.has(r)||t.children.set(r,_l()),Il(t.children.get(r),e=ba(e),n))}function Tl(t,n,r){var i;null!==t.value?r(n,t.value):(i=function(t,e){Tl(e,new da(n.toString()+"/"+t),r)},t.children.forEach(function(t,e){i(e,t)}))}var El=(Sl.prototype.getNode=function(t){return this.rootNode_.getChild(t)},Sl.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},Sl);function Sl(){this.rootNode_=ju.EMPTY_NODE}var Cl=(Al.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Do(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},Al.prototype.get=function(){return co(this.counters_)},Al);function Al(){this.counters_={}}var Nl={},kl={};function Rl(t){t=t.toString();return Nl[t]||(Nl[t]=new Cl),Nl[t]}var Pl=(Dl.prototype.get=function(){var t=this.collection_.get(),n=Ji({},t);return this.last_&&ra(this.last_,function(t,e){n[t]=n[t]-e}),this.last_=t,n},Dl);function Dl(t){this.collection_=t,this.last_=null}var Ol=(xl.prototype.reportStats_=function(){var n=this,t=this.statsListener_.get(),r={},i=!1;ra(t,function(t,e){0<e&&Do(n.statsToReport_,t)&&(r[t]=e,i=!0)}),i&&this.server_.reportStats(r),oa(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},xl);function xl(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Pl(t);t=1e4+2e4*Math.random();oa(this.reportStats_.bind(this),Math.floor(t))}var Ll=function(){this.eventLists_=[],this.recursionDepth_=0};function Ml(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||Aa(o,n.path)||(t.eventLists_.push(n),n=null),(n=null===n?{events:[],path:o}:n).events.push(i)}n&&t.eventLists_.push(n)}function Fl(t,e,n){Ml(t,n),jl(t,function(t){return Aa(t,e)})}function Ul(t,e,n){Ml(t,n),jl(t,function(t){return Na(t,e)||Na(e,t)})}function jl(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(function(t){for(var e=0;e<t.events.length;e++){var n,r=t.events[e];null!==r&&(t.events[e]=null,n=r.getEventRunner(),zs&&Ys("event: "+r.toString()),la(n))}}(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}ql.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=no([],eo(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},ql.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});t=this.getInitialEvent(t);t&&e.apply(n,t)},ql.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},ql.prototype.validateEventType_=function(e){so(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},z=ql;function ql(t){this.allowedEvents_=t,this.listeners_={},so(Array.isArray(t)&&0<t.length,"Requires a non-empty array")}var Vl,Bl=(Xi(Kl,Vl=z),Kl.getInstance=function(){return new Kl},Kl.prototype.getInitialEvent=function(t){return so("visible"===t,"Unknown event type: "+t),[this.visible_]},Kl);function Kl(){var e,t,n=Vl.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),n.visible_=!0,t&&document.addEventListener(t,function(){var t=!document[e];t!==n.visible_&&(n.visible_=t,n.trigger("visible",t))},!1),n}var Gl,Wl=(Xi(Hl,Gl=z),Hl.getInstance=function(){return new Hl},Hl.prototype.getInitialEvent=function(t){return so("online"===t,"Unknown event type: "+t),[this.online_]},Hl.prototype.currentlyOnline=function(){return this.online_},Hl);function Hl(){var t=Gl.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||go()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}var zl=(Ql.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},Ql.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=this;this.pendingResponses[this.currentResponseNum];)if("break"===function(){var e=r.pendingResponses[r.currentResponseNum];delete r.pendingResponses[r.currentResponseNum];for(var t=0;t<e.length;++t)!function(t){e[t]&&la(function(){n.onMessage_(e[t])})}(t);if(r.currentResponseNum===r.closeAfterResponse)return r.onClose&&(r.onClose(),r.onClose=null),"break";r.currentResponseNum++}())break},Ql);function Ql(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}var Yl="pLPCommand",Jl="pRTLPCB",$l=(Zl.prototype.open=function(t,e){var n,r,i,s=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new zl(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){s.log_("Timed out trying to connect."),s.onClosed_(),s.connectTimeoutTimer_=null},Math.floor(3e4)),n=function(){var t;s.isClosed_||(s.scriptTagHolder=new tf(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=eo(t,5),r=n[0],i=n[1],o=n[2];n[3],n[4];if(s.incrementIncomingBytes_(t),s.scriptTagHolder)if(s.connectTimeoutTimer_&&(clearTimeout(s.connectTimeoutTimer_),s.connectTimeoutTimer_=null),s.everConnected_=!0,"start"===r)s.id=i,s.password=o;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(s.scriptTagHolder.sendNewPolls=!1,s.myPacketOrderer.closeAfter(i,function(){s.onClosed_()})):s.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=eo(t,2),r=n[0],n=n[1];s.incrementIncomingBytes_(t),s.myPacketOrderer.handleResponse(r,n)},function(){s.onClosed_()},s.urlFn),(t={start:"t"}).ser=Math.floor(1e8*Math.random()),s.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=s.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",s.transportSessionId&&(t.s=s.transportSessionId),s.lastSessionId&&(t.ls=s.lastSessionId),s.applicationId&&(t.p=s.applicationId),"undefined"!=typeof location&&location.hostname&&Da.test(location.hostname)&&(t.r="f"),t=s.urlFn(t),s.log_("Connecting via long-poll to "+t),s.scriptTagHolder.addTag(t,function(){}))},"complete"===document.readyState?n():(r=!1,i=function(){document.body?r||(r=!0,n()):setTimeout(i,Math.floor(10))},document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&i()}),window.attachEvent("onload",i)))},Zl.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},Zl.forceAllow=function(){Zl.forceAllow_=!0},Zl.forceDisallow=function(){Zl.forceDisallow_=!0},Zl.isAvailable=function(){return!!Zl.forceAllow_||!(Zl.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},Zl.prototype.markConnectionHealthy=function(){},Zl.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},Zl.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},Zl.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},Zl.prototype.send=function(t){t=Ro(t);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var t=function(t){t=ro(t);return uo.encodeByteArray(t,!0)}(t),e=qs(t,1840),n=0;n<e.length;n++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,e.length,e[n]),this.curSegmentNum++},Zl.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},Zl.prototype.incrementIncomingBytes_=function(t){t=Ro(t).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},Zl);function Zl(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Xs(t),this.stats_=Rl(e),this.urlFn=function(t){return Fa(e,xa,t)}}var tf=(ef.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ys("No IE domain setting required")}catch(t){var n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},ef.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},ef.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},ef.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var t=this.urlFn(t),e="",n=0;0<this.pendingSegs.length;){if(!(this.pendingSegs[0].d.length+30+e.length<=1870))break;var r=this.pendingSegs.shift(),e=e+"&seg"+n+"="+r.seg+"&ts"+n+"="+r.ts+"&d"+n+"="+r.d;n++}return t+=e,this.addLongPollTag_(t,this.currentSerial),!0}return!1},ef.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},ef.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);function r(){n.outstandingRequests.delete(e),n.newRequest_()}var i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},ef.prototype.addTag=function(t,n){var r=this;setTimeout(function(){try{if(!r.sendNewPolls)return;var e=r.myIFrame.doc.createElement("script");e.type="text/javascript",e.async=!0,e.src=t,e.onload=e.onreadystatechange=function(){var t=e.readyState;t&&"loaded"!==t&&"complete"!==t||(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),n())},e.onerror=function(){Ys("Long-poll script failed to load: "+t),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(e)}catch(t){}},Math.floor(1))},ef);function ef(t,e,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=Ws(),window[Yl+this.uniqueCallbackIdentifier]=t,window[Jl+this.uniqueCallbackIdentifier]=e,this.myIFrame=ef.createIFrame_();var e="",i="<html><body>"+(e=this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)?'<script>document.domain="'+document.domain+'";<\/script>':e)+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(t){Ys("frame writing exception"),t.stack&&Ys(t.stack),Ys(t)}}var nf="";function rf(t){nf=t}var of=null;"undefined"!=typeof MozWebSocket?of=MozWebSocket:"undefined"!=typeof WebSocket&&(of=WebSocket);var sf=(af.connectionURL_=function(t,e,n){var r={v:"5"};return"undefined"!=typeof location&&location.hostname&&Da.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),Fa(t,Oa,r)},af.prototype.open=function(e,t){var n,r=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Bs.set("previous_websocket_failure",!0);try{mo()||(n={headers:{"X-Firebase-GMPID":this.applicationId||""}},this.mySock=new of(this.connURL,[],n))}catch(t){this.log_("Error instantiating WebSocket.");e=t.message||t.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(t){r.handleIncomingFrame(t)},this.mySock.onerror=function(t){r.log_("WebSocket error.  Closing connection.");t=t.message||t.data;t&&r.log_(t),r.onClosed_()}},af.prototype.start=function(){},af.forceDisallow=function(){af.forceDisallow_=!0},af.isAvailable=function(){var t,e=!1;return"undefined"!=typeof navigator&&navigator.userAgent&&((t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/))&&1<t.length&&parseFloat(t[1])<4.4&&(e=!0)),!e&&null!==of&&!af.forceDisallow_},af.previouslyFailed=function(){return Bs.isInMemoryStorage||!0===Bs.get("previous_websocket_failure")},af.prototype.markConnectionHealthy=function(){Bs.remove("previous_websocket_failure")},af.prototype.appendFrame_=function(t){this.frames.push(t),this.frames.length===this.totalFrames&&(t=this.frames.join(""),this.frames=null,t=ko(t),this.onMessage(t))},af.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},af.prototype.extractFrameCount_=function(t){if(so(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},af.prototype.handleIncomingFrame=function(t){null!==this.mySock&&(t=t.data,this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames?this.appendFrame_(t):null!==(t=this.extractFrameCount_(t))&&this.appendFrame_(t))},af.prototype.send=function(t){this.resetKeepAlive();t=Ro(t);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var e=qs(t,16384);1<e.length&&this.sendString_(String(e.length));for(var n=0;n<e.length;n++)this.sendString_(e[n])},af.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},af.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},af.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},af.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},af.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},af.responsesRequiredToBeHealthy=2,af.healthyTimeout=3e4,af);function af(t,e,n,r,i){this.connId=t,this.applicationId=n,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Xs(this.connId),this.stats_=Rl(e),this.connURL=af.connectionURL_(e,r,i),this.nodeAdmin=e.nodeAdmin}var uf=(Object.defineProperty(cf,"ALL_TRANSPORTS",{get:function(){return[$l,sf]},enumerable:!1,configurable:!0}),cf.prototype.initTransports_=function(t){var e,n,r=sf&&sf.isAvailable(),i=r&&!sf.previouslyFailed();if(t.webSocketOnly&&(r||$s("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[sf];else{var o=this.transports_=[];try{for(var s=to(cf.ALL_TRANSPORTS),a=s.next();!a.done;a=s.next()){var u=a.value;u&&u.isAvailable()&&o.push(u)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}}},cf.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},cf.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},cf);function cf(t){this.initTransports_(t)}var hf=(lf.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));e=e.healthyTimeout||0;0<e&&(this.healthyTimeout_=oa(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&102400<t.conn_.bytesReceived?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&10240<t.conn_.bytesSent?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(e)))},lf.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},lf.prototype.disconnReceiver_=function(e){var n=this;return function(t){e===n.conn_?n.onConnectionLost_(t):e===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},lf.prototype.connReceiver_=function(e){var n=this;return function(t){2!==n.state_&&(e===n.rx_?n.onPrimaryMessageReceived_(t):e===n.secondaryConn_?n.onSecondaryMessageReceived_(t):n.log_("message on old connection"))}},lf.prototype.sendRequest=function(t){t={t:"d",d:t};this.sendData_(t)},lf.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},lf.prototype.onSecondaryControl_=function(t){"t"in t&&("a"===(t=t.t)?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_()))},lf.prototype.onSecondaryMessageReceived_=function(t){var e=js("t",t),t=js("d",t);if("c"===e)this.onSecondaryControl_(t);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(t)}},lf.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},lf.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},lf.prototype.onPrimaryMessageReceived_=function(t){var e=js("t",t),t=js("d",t);"c"===e?this.onControl_(t):"d"===e&&this.onDataMessage_(t)},lf.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},lf.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},lf.prototype.onControl_=function(t){var e=js("t",t);if("d"in t){t=t.d;if("h"===e)this.onHandshake_(t);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var n=0;n<this.pendingDataMessages.length;++n)this.onDataMessage_(this.pendingDataMessages[n]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(t):"r"===e?this.onReset_(t):"e"===e?Ms("Server Error: "+t):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ms("Unknown control packet command: "+e)}},lf.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&$s("Protocol version mismatch detected"),this.tryStartUpgrade_())},lf.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},lf.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),t=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,t),oa(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},lf.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},lf.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):oa(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},lf.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},lf.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},lf.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Bs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},lf.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},lf.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},lf.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},lf.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},lf);function lf(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Xs("c:"+this.id+":"),this.transportManager_=new uf(e),this.log_("Connection created"),this.start_()}ff.prototype.put=function(t,e,n,r){},ff.prototype.merge=function(t,e,n,r){},ff.prototype.refreshAuthToken=function(t){},ff.prototype.onDisconnectPut=function(t,e,n){},ff.prototype.onDisconnectMerge=function(t,e,n){},ff.prototype.onDisconnectCancel=function(t,e){},ff.prototype.reportStats=function(t){},H=ff;function ff(){}var pf,df=1e3,gf=3e5,vf=(Xi(yf,pf=H),yf.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,e={r:r,a:t,b:e};this.log_(Ro(e)),so(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(e),n&&(this.requestCBHash_[r]=n)},yf.prototype.get=function(t){var n=this,r=new lo,i={p:t.path.toString(),q:t.queryObject()},e={action:"g",request:i,onComplete:function(t){var e=t.d;"ok"===t.s?(n.onDataUpdate_(i.p,e,!1,null),r.resolve(e)):r.reject(e)}};this.outstandingGets_.push(e),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=n.outstandingGets_[o];void 0!==t&&e===t&&(delete n.outstandingGets_[o],n.outstandingGetCount_--,0===n.outstandingGetCount_&&(n.outstandingGets_=[]),n.log_("get "+o+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(o),r.promise},yf.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),so(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),so(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");n={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,n),this.connected_&&this.sendListen_(n)},yf.prototype.sendGet_=function(e){var n=this,r=this.outstandingGets_[e];this.sendRequest("g",r.request,function(t){delete n.outstandingGets_[e],n.outstandingGetCount_--,0===n.outstandingGetCount_&&(n.outstandingGets_=[]),r.onComplete&&r.onComplete(t)})},yf.prototype.sendListen_=function(r){var i=this,o=r.query,s=o.path.toString(),a=o.queryIdentifier();this.log_("Listen on "+s+" for "+a);var t={p:s};r.tag&&(t.q=o.queryObject(),t.t=r.tag),t.h=r.hashFn(),this.sendRequest("q",t,function(t){var e=t.d,n=t.s;yf.warnOnListenWarnings_(e,o),(i.listens.get(s)&&i.listens.get(s).get(a))===r&&(i.log_("listen response",t),"ok"!==n&&i.removeListen_(s,a),r.onComplete&&r.onComplete(n,e))})},yf.warnOnListenWarnings_=function(t,e){t&&"object"==typeof t&&Do(t,"w")&&(t=Oo(t,"w"),Array.isArray(t)&&~t.indexOf("no_index")&&(t='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',e=e.path.toString(),$s("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+t+" at "+e+" to your security rules for better performance.")))},yf.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},yf.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||function(t){t=Po(t).claims;return"object"==typeof t&&!0===t.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},yf.prototype.tryAuth=function(){var n,t,e,r=this;this.connected_&&this.authToken_&&(t=function(t){t=Po(t).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(n=this.authToken_)?"auth":"gauth",e={cred:n},null===this.authOverride_?e.noauth=!0:"object"==typeof this.authOverride_&&(e.authvar=this.authOverride_),this.sendRequest(t,e,function(t){var e=t.s,t=t.d||"error";r.authToken_===n&&("ok"===e?r.invalidAuthTokenCount_=0:r.onAuthRevoked_(e,t))}))},yf.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),so(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},yf.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);t={p:t};r&&(t.q=n,t.t=r),this.sendRequest("n",t)},yf.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},yf.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},yf.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},yf.prototype.sendOnDisconnect_=function(t,e,n,r){n={p:e,d:n};this.log_("onDisconnect "+t,n),this.sendRequest(t,n,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},yf.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},yf.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},yf.prototype.putInternal=function(t,e,n,r,i){n={p:e,d:n};void 0!==i&&(n.h=i),this.outstandingPuts_.push({action:t,request:n,onComplete:r}),this.outstandingPutCount_++;r=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(r):this.log_("Buffering put: "+e)},yf.prototype.sendPut_=function(e){var n=this,r=this.outstandingPuts_[e].action,t=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,t,function(t){n.log_(r+" response",t),delete n.outstandingPuts_[e],n.outstandingPutCount_--,0===n.outstandingPutCount_&&(n.outstandingPuts_=[]),i&&i(t.s,t.d)})},yf.prototype.reportStats=function(t){var e=this;this.connected_&&(t={c:t},this.log_("reportStats",t),this.sendRequest("s",t,function(t){"ok"!==t.s&&(t=t.d,e.log_("reportStats","Error sending stats: "+t))}))},yf.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Ro(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},yf.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):Ms("Unrecognized action received from server: "+Ro(t)+"\nAre you using the latest client?")},yf.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},yf.prototype.scheduleConnect_=function(t){var e=this;so(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},yf.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=df,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},yf.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=df,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},yf.prototype.onRealtimeDisconnect_=function(){var t;this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()&&(this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=df),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime()),t=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-t),t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)),this.onConnectStatus_(!1)},yf.prototype.establishConnection_=function(){var e,n,r,i,o,s,a,u,c,t,h=this;this.shouldReconnect_()&&(this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+yf.nextConnectionId_++,s=(o=this).lastSessionId,a=!1,u=null,c=function(){u?u.close():(a=!0,r())},this.realtime_={close:c,sendRequest:function(t){so(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}},t=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(t).then(function(t){a?Ys("getToken() completed but was canceled"):(Ys("getToken() completed. Creating connection."),o.authToken_=t&&t.accessToken,u=new hf(i,o.repoInfo_,o.applicationId_,e,n,r,function(t){$s(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},s))}).then(null,function(t){o.log_("Failed to get token: "+t),a||(h.repoInfo_.nodeAdmin&&$s(t),c())}))},yf.prototype.interrupt=function(t){Ys("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},yf.prototype.resume=function(t){Ys("Resuming connection for reason: "+t),delete this.interruptReasons_[t],xo(this.interruptReasons_)&&(this.reconnectDelay_=df,this.realtime_||this.scheduleConnect_(0))},yf.prototype.handleTimestamp_=function(t){t-=(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},yf.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},yf.prototype.onListenRevoked_=function(t,e){e=e?e.map(function(t){return na(t)}).join("$"):"default",e=this.removeListen_(t,e);e&&e.onComplete&&e.onComplete("permission_denied")},yf.prototype.removeListen_=function(t,e){var n,r=new da(t).toString();return this.listens.has(r)?(n=(t=this.listens.get(r)).get(e),t.delete(e),0===t.size&&this.listens.delete(r)):n=void 0,n},yf.prototype.onAuthRevoked_=function(t,e){Ys("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},yf.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},yf.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth();try{for(var i=to(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,to(s.values())),u=a.next();!u.done;u=a.next()){var c=u.value;this.sendListen_(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(h=0;h<this.outstandingGets_.length;h++)this.outstandingGets_[h]&&this.sendGet_(h)},yf.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+nf.replace(/\./g,"-")]=1,go()?t["framework.cordova"]=1:yo()&&(t["framework.reactnative"]=1),this.reportStats(t)},yf.prototype.shouldReconnect_=function(){var t=Wl.getInstance().currentlyOnline();return xo(this.interruptReasons_)&&t},yf.nextPersistentConnectionId_=0,yf.nextConnectionId_=0,yf);function yf(t,e,n,r,i,o,s){var a=pf.call(this)||this;if(a.repoInfo_=t,a.applicationId_=e,a.onDataUpdate_=n,a.onConnectStatus_=r,a.onServerInfoUpdate_=i,a.authTokenProvider_=o,a.authOverride_=s,a.id=yf.nextPersistentConnectionId_++,a.log_=Xs("p:"+a.id+":"),a.interruptReasons_={},a.listens=new Map,a.outstandingPuts_=[],a.outstandingGets_=[],a.outstandingPutCount_=0,a.outstandingGetCount_=0,a.onDisconnectRequestQueue_=[],a.connected_=!1,a.reconnectDelay_=df,a.maxReconnectDelay_=gf,a.securityDebugCallback_=null,a.lastSessionId=null,a.establishConnectionTimer_=null,a.visible_=!1,a.requestCBHash_={},a.requestNumber_=0,a.realtime_=null,a.authToken_=null,a.forceTokenRefresh_=!1,a.invalidAuthTokenCount_=0,a.firstConnection_=!0,a.lastConnectionAttemptTime_=null,a.lastConnectionEstablishedTime_=null,s&&!mo())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return a.scheduleConnect_(0),Bl.getInstance().on("visible",a.onVisible_,a),-1===t.host.indexOf("fblocal")&&Wl.getInstance().on("online",a.onOnline_,a),a}var mf,bf=(Xi(wf,mf=H),wf.prototype.reportStats=function(t){throw new Error("Method not implemented.")},wf.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(so(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},wf.prototype.listen=function(t,e,n,r){var i=this,o=t.path.toString();this.log_("Listen called for "+o+" "+t.queryIdentifier());var s=wf.getListenId_(t,n),a={};this.listens_[s]=a;t=Ch(t.getQueryParams());this.restRequest_(o+".json",t,function(t,e){null===(t=404===t?e=null:t)&&i.onDataUpdate_(o,e,!1,n),Oo(i.listens_,s)===a&&r(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},wf.prototype.unlisten=function(t,e){e=wf.getListenId_(t,e);delete this.listens_[e]},wf.prototype.get=function(t){var n=this,e=Ch(t.getQueryParams()),r=t.path.toString(),i=new lo;return this.restRequest_(r+".json",e,function(t,e){null===(t=404===t?e=null:t)?(n.onDataUpdate_(r,e,!1,null),i.resolve(e)):i.reject(new Error(e))}),i.promise},wf.prototype.refreshAuthToken=function(t){},wf.prototype.restRequest_=function(r,i,o){var s=this;(i=void 0===i?{}:i).format="export",this.authTokenProvider_.getToken(!1).then(function(t){t=t&&t.accessToken;t&&(i.auth=t);var e=(s.repoInfo_.secure?"https://":"http://")+s.repoInfo_.host+r+"?ns="+s.repoInfo_.namespace+Mo(i);s.log_("Sending REST request for "+e);var n=new XMLHttpRequest;n.onreadystatechange=function(){if(o&&4===n.readyState){s.log_("REST Response for "+e+" received. status:",n.status,"response:",n.responseText);var t=null;if(200<=n.status&&n.status<300){try{t=ko(n.responseText)}catch(t){$s("Failed to parse JSON response for "+e+": "+n.responseText)}o(null,t)}else 401!==n.status&&404!==n.status&&$s("Got unsuccessful REST response for "+e+" Status: "+n.status),o(n.status);o=null}},n.open("GET",e,!0),n.send()})},wf);function wf(t,e,n){var r=mf.call(this)||this;return r.repoInfo_=t,r.onDataUpdate_=e,r.authTokenProvider_=n,r.log_=Xs("p:rest:"),r.listens_={},r}var _f=(If.prototype.val=function(){return Ko("DataSnapshot.val",0,0,arguments.length),this.node_.val()},If.prototype.exportVal=function(){return Ko("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},If.prototype.toJSON=function(){return Ko("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},If.prototype.exists=function(){return Ko("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},If.prototype.child=function(t){Ko("DataSnapshot.child",0,1,arguments.length),t=String(t),Ha("DataSnapshot.child",1,t,!1);var e=new da(t),t=this.ref_.child(e);return new If(this.node_.getChild(e),t,Eu)},If.prototype.hasChild=function(t){Ko("DataSnapshot.hasChild",1,1,arguments.length),Ha("DataSnapshot.hasChild",1,t,!1);t=new da(t);return!this.node_.getChild(t).isEmpty()},If.prototype.getPriority=function(){return Ko("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},If.prototype.forEach=function(n){var r=this;return Ko("DataSnapshot.forEach",1,1,arguments.length),Wo("DataSnapshot.forEach",1,n,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(t,e){return n(new If(e,r.ref_.child(t),Eu))})},If.prototype.hasChildren=function(){return Ko("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(If.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),If.prototype.numChildren=function(){return Ko("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},If.prototype.getRef=function(){return Ko("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(If.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),If);function If(t,e,n){this.node_=t,this.ref_=e,this.index_=n}var Tf=function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n};function Ef(t,e){for(var n=e instanceof da?e:new da(e),r=t,i=ya(n);null!==i;)var o=Oo(r.node.children,i)||{children:{},childCount:0},r=new Tf(i,r,o),i=ya(n=ba(n));return r}function Sf(t){return t.node.value}function Cf(t,e){t.node.value=e,Rf(t)}function Af(t){return 0<t.node.childCount}function Nf(n,r){ra(n.node.children,function(t,e){r(new Tf(t,n,e))})}function kf(t){return new da(null===t.parent?t.name:kf(t.parent)+"/"+t.name)}function Rf(t){var e,n,r,i;null!==t.parent&&(e=t.parent,n=t.name,i=function(t){return void 0===Sf(t)&&!Af(t)}(r=t),t=Do(e.node.children,n),i&&t?(delete e.node.children[n],e.node.childCount--,Rf(e)):i||t||(e.node.children[n]=r.node,e.node.childCount++,Rf(e)))}var Pf="repo_interrupt",Df=25,Of=(xf.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},xf);function xf(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ll,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=_l(),this.transactionQueueTree_=new Tf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}function Lf(s){if(s.stats_=Rl(s.repoInfo_),s.forceRestClient_||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))s.server_=new bf(s.repoInfo_,function(t,e,n,r){Uf(s,t,e,n,r)},s.authTokenProvider_),setTimeout(function(){return jf(s,!0)},0);else{var t=s.app.options.databaseAuthVariableOverride;if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ro(t)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}s.persistentConnection_=new vf(s.repoInfo_,s.app.options.appId,function(t,e,n,r){Uf(s,t,e,n,r)},function(t){jf(s,t)},function(t){var n;n=s,ra(t,function(t,e){qf(n,t,e)})},s.authTokenProvider_,t),s.server_=s.persistentConnection_}var e,n;s.authTokenProvider_.addTokenChangeListener(function(t){s.server_.refreshAuthToken(t)}),s.statsReporter_=(e=s.repoInfo_,n=function(){return new Ol(s.stats_,s.server_)},e=e.toString(),kl[e]||(kl[e]=n()),kl[e]),s.infoData_=new El,s.infoSyncTree_=new Hh({startListening:function(t,e,n,r){var i=[],o=s.infoData_.getNode(t.path);return o.isEmpty()||(i=Xh(s.infoSyncTree_,t.path,o),setTimeout(function(){r("ok")},0)),i},stopListening:function(){}}),qf(s,"connected",!1),s.serverSyncTree_=new Hh({startListening:function(n,t,e,r){return s.server_.listen(n,e,t,function(t,e){e=r(t,e);Ul(s.eventQueue_,n.path,e)}),[]},stopListening:function(t,e){s.server_.unlisten(t,e)}})}function Mf(t){t=t.infoData_.getNode(new da(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Ff(t){return dl({timestamp:Mf(t)})}function Uf(t,e,n,r,i){t.dataUpdateCount++;var o=new da(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var s,a,u,c=[],h=o;0<(c=i?r?(s=Lo(n,function(t){return Wu(t)}),function(t,e,n,r){var i=sl(t,r);if(i){r=al(i),i=r.path,r=r.queryId,e=Sa(i,e),n=$u.fromObject(n);return ul(t,i,new ic(Qu(r),e,n))}return[]}(t.serverSyncTree_,o,s,i)):(e=Wu(n),s=t.serverSyncTree_,a=o,u=e,null==(i=sl(s,e=i))?[]:(e=al(i),i=e.path,e=e.queryId,a=Sa(i,a),ul(s,i,new nc(Qu(e),a,u)))):r?(a=Lo(n,function(t){return Wu(t)}),u=t.serverSyncTree_,r=o,a=a,a=$u.fromObject(a),el(u,new ic(zu(),r,a))):(n=Wu(n),Xh(t.serverSyncTree_,o,n))).length&&(h=$f(t,o)),Ul(t.eventQueue_,h,c)}function jf(t,e){qf(t,"connected",e),!1===e&&function(n){zf(n,"onDisconnectEvents");var r=Ff(n),i=_l();Tl(n.onDisconnect_,va(),function(t,e){e=ml(t,e,n.serverSyncTree_,r);Il(i,t,e)});var o=[];Tl(i,va(),function(t,e){o=o.concat(Xh(n.serverSyncTree_,t,e));t=np(n,t);$f(n,t)}),n.onDisconnect_=_l(),Ul(n.eventQueue_,va(),o)}(t)}function qf(t,e,n){e=new da("/.info/"+e),n=Wu(n);t.infoData_.updateSnapshot(e,n);n=Xh(t.infoSyncTree_,e,n);Ul(t.eventQueue_,e,n)}function Vf(t){return t.nextWriteId_++}function Bf(r,i,t,e,o){zf(r,"set",{path:i.toString(),value:t,priority:e});var n=Ff(r),t=Wu(t,e),e=Zh(r.serverSyncTree_,i),n=bl(t,e,n),s=Vf(r),n=zh(r.serverSyncTree_,i,n,s,!0);Ml(r.eventQueue_,n),r.server_.put(i.toString(),t.val(!0),function(t,e){var n="ok"===t;n||$s("set at "+i+" failed: "+t);n=Yh(r.serverSyncTree_,s,!n);Ul(r.eventQueue_,i,n),Qf(0,o,t,e)});t=np(r,i);$f(r,t),Ul(r.eventQueue_,t,[])}function Kf(n,r,i){n.server_.onDisconnectCancel(r.toString(),function(t,e){"ok"===t&&!function t(n,e){if(Ea(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;var r=n.value;return n.value=null,r.forEachChild(Eu,function(t,e){Il(n,new da(t),e)}),t(n,e)}if(0<n.children.size)return r=ya(e),e=ba(e),n.children.has(r)&&t(n.children.get(r),e)&&n.children.delete(r),0===n.children.size;return!0}(n.onDisconnect_,r),Qf(0,i,t,e)})}function Gf(n,r,t,i){var o=Wu(t);n.server_.onDisconnectPut(r.toString(),o.val(!0),function(t,e){"ok"===t&&Il(n.onDisconnect_,r,o),Qf(0,i,t,e)})}function Wf(t,e,n){n=".info"===ya(e.path)?$h(t.infoSyncTree_,e,n):$h(t.serverSyncTree_,e,n);Fl(t.eventQueue_,e.path,n)}function Hf(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Pf)}function zf(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),Ys.apply(void 0,no([r],eo(e)))}function Qf(t,n,r,i){n&&la(function(){var t,e;"ok"===r?n(null):(e=t=(r||"error").toUpperCase(),i&&(e+=": "+i),(e=new Error(e)).code=t,n(e))})}function Yf(t){return t.__database||(t.__database=new Pp(t))}function Xf(t,e,n){return Zh(t.serverSyncTree_,e,n)||ju.EMPTY_NODE}function Jf(e,t){var n;(t=void 0===t?e.transactionQueueTree_:t)||ep(e,t),Sf(t)?(n=tp(e,t),so(0<n.length,"Sending zero length transaction queue"),n.every(function(t){return 0===t.status})&&function(s,a,u){for(var t=u.map(function(t){return t.currentWriteId}),e=Xf(s,a,t),n=e,t=e.hash(),r=0;r<u.length;r++){var i=u[r];so(0===i.status,"tryToSendTransactionQueue_: items in queue should all be run."),i.status=1,i.retryCount++;var o=Sa(a,i.path);n=n.updateChild(o,i.currentOutputSnapshotRaw)}var e=n.val(!0),c=a;s.server_.put(c.toString(),e,function(t){zf(s,"transaction put response",{path:c.toString(),status:t});var e=[];if("ok"===t){for(var n,r,i=[],o=0;o<u.length;o++)u[o].status=2,e=e.concat(Yh(s.serverSyncTree_,u[o].currentWriteId)),u[o].onComplete&&(n=u[o].currentOutputSnapshotResolved,r=new _p(s,u[o].path),r=new _f(n,r,Eu),i.push(u[o].onComplete.bind(null,null,!0,r))),u[o].unwatcher();ep(s,Ef(s.transactionQueueTree_,a)),Jf(s,s.transactionQueueTree_),Ul(s.eventQueue_,a,e);for(o=0;o<i.length;o++)la(i[o])}else{if("datastale"===t)for(o=0;o<u.length;o++)3===u[o].status?u[o].status=4:u[o].status=0;else{$s("transaction at "+c.toString()+" failed: "+t);for(o=0;o<u.length;o++)u[o].status=4,u[o].abortReason=t}$f(s,a)}},t)}(e,kf(t),n)):Af(t)&&Nf(t,function(t){Jf(e,t)})}function $f(t,e){var n=Zf(t,e),e=kf(n);return function(t,e,n){if(0===e.length)return;for(var r=[],i=[],o=e.filter(function(t){return 0===t.status}).map(function(t){return t.currentWriteId}),s=0;s<e.length;s++){var a,u,c,h=e[s],l=Sa(n,h.path),f=!1,p=void 0;so(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===h.status?(f=!0,p=h.abortReason,i=i.concat(Yh(t.serverSyncTree_,h.currentWriteId,!0))):0===h.status&&(i=h.retryCount>=Df?(f=!0,p="maxretry",i.concat(Yh(t.serverSyncTree_,h.currentWriteId,!0))):(a=Xf(t,h.path,o),h.currentInputSnapshot=a,void 0!==(c=e[s].update(a.val()))?(tu("transaction failed: Data returned ",c,h.path),u=Wu(c),"object"==typeof c&&null!=c&&Do(c,".priority")||(u=u.updatePriority(a.getPriority())),l=h.currentWriteId,c=Ff(t),c=bl(u,a,c),h.currentOutputSnapshotRaw=u,h.currentOutputSnapshotResolved=c,h.currentWriteId=Vf(t),o.splice(o.indexOf(l),1),(i=i.concat(zh(t.serverSyncTree_,h.path,c,h.currentWriteId,h.applyLocally))).concat(Yh(t.serverSyncTree_,l,!0))):(f=!0,p="nodata",i.concat(Yh(t.serverSyncTree_,h.currentWriteId,!0))))),Ul(t.eventQueue_,n,i),i=[],f&&(e[s].status=2,function(t){setTimeout(t,Math.floor(0))}(e[s].unwatcher),e[s].onComplete&&("nodata"===p?(h=new _p(t,e[s].path),f=e[s].currentInputSnapshot,h=new _f(f,h,Eu),r.push(e[s].onComplete.bind(null,null,!1,h))):r.push(e[s].onComplete.bind(null,new Error(p),!1,null))))}ep(t,t.transactionQueueTree_);for(s=0;s<r.length;s++)la(r[s]);Jf(t,t.transactionQueueTree_)}(t,tp(t,n),e),e}function Zf(t,e){for(var n=t.transactionQueueTree_,r=ya(e);null!==r&&void 0===Sf(n);)n=Ef(n,r),r=ya(e=ba(e));return n}function tp(t,e){var n=[];return function e(n,t,r){var i=Sf(t);if(i)for(var o=0;o<i.length;o++)r.push(i[o]);Nf(t,function(t){e(n,t,r)})}(t,e,n),n.sort(function(t,e){return t.order-e.order}),n}function ep(e,t){var n=Sf(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Cf(t,0<n.length?n:void 0)}Nf(t,function(t){ep(e,t)})}function np(e,t){var n=kf(Zf(e,t)),t=Ef(e.transactionQueueTree_,t);return function(t,e,n){for(var r=n?t:t.parent;null!==r;){if(e(r))return;r=r.parent}}(t,function(t){rp(e,t)}),rp(e,t),function e(t,n,r,i){r&&!i&&n(t),Nf(t,function(t){e(t,n,!0,i)}),r&&i&&n(t)}(t,function(t){rp(e,t)}),n}function rp(t,e){var n=Sf(e);if(n){for(var r=[],i=[],o=-1,s=0;s<n.length;s++)3===n[s].status||(1===n[s].status?(so(o===s-1,"All SENT items should be at beginning of queue."),n[o=s].status=3,n[s].abortReason="set"):(so(0===n[s].status,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(Yh(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));-1===o?Cf(e,void 0):n.length=o+1,Ul(t.eventQueue_,kf(e),i);for(s=0;s<r.length;s++)la(r[s])}}var ip=(op.prototype.cancel=function(t){Ko("OnDisconnect.cancel",0,1,arguments.length),Wo("OnDisconnect.cancel",1,t,!0);var e=new lo;return Kf(this.repo_,this.path_,e.wrapCallback(t)),e.promise},op.prototype.remove=function(t){Ko("OnDisconnect.remove",0,1,arguments.length),za("OnDisconnect.remove",this.path_),Wo("OnDisconnect.remove",1,t,!0);var e=new lo;return Gf(this.repo_,this.path_,null,e.wrapCallback(t)),e.promise},op.prototype.set=function(t,e){Ko("OnDisconnect.set",1,2,arguments.length),za("OnDisconnect.set",this.path_),Va("OnDisconnect.set",1,t,this.path_,!1),Wo("OnDisconnect.set",2,e,!0);var n=new lo;return Gf(this.repo_,this.path_,t,n.wrapCallback(e)),n.promise},op.prototype.setWithPriority=function(t,e,n){Ko("OnDisconnect.setWithPriority",2,3,arguments.length),za("OnDisconnect.setWithPriority",this.path_),Va("OnDisconnect.setWithPriority",1,t,this.path_,!1),Ka("OnDisconnect.setWithPriority",2,e,!1),Wo("OnDisconnect.setWithPriority",3,n,!0);var r,i,o,s,a=new lo;return r=this.repo_,i=this.path_,t=t,e=e,o=a.wrapCallback(n),s=Wu(t,e),r.server_.onDisconnectPut(i.toString(),s.val(!0),function(t,e){"ok"===t&&Il(r.onDisconnect_,i,s),Qf(0,o,t,e)}),a.promise},op.prototype.update=function(t,e){if(Ko("OnDisconnect.update",1,2,arguments.length),za("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,$s("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ba("OnDisconnect.update",1,t,this.path_,!1),Wo("OnDisconnect.update",2,e,!0);var i=new lo;return function(n,r,i,o){if(xo(i))return Ys("onDisconnect().update() called with empty data.  Don't do anything."),Qf(0,o,"ok",void 0);n.server_.onDisconnectMerge(r.toString(),i,function(t,e){"ok"===t&&ra(i,function(t,e){e=Wu(e);Il(n.onDisconnect_,Ta(r,t),e)}),Qf(0,o,t,e)})}(this.repo_,this.path_,t,i.wrapCallback(e)),i.promise},op);function op(t,e){this.repo_=t,this.path_=e}var sp=(ap.prototype.toJSON=function(){return Ko("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},ap);function ap(t,e){this.committed=t,this.snapshot=e}var up=(cp.prototype.getPath=function(){var t=this.snapshot.getRef();return("value"===this.eventType?t:t.getParent()).path},cp.prototype.getEventType=function(){return this.eventType},cp.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},cp.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Ro(this.snapshot.exportVal())},cp);function cp(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}var hp=(lp.prototype.getPath=function(){return this.path},lp.prototype.getEventType=function(){return"cancel"},lp.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},lp.prototype.toString=function(){return this.path.toString()+":cancel"},lp);function lp(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}var fp=(pp.prototype.respondsTo=function(t){return"value"===t},pp.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new up("value",this,new _f(t.snapshotNode,e.getRef(),n))},pp.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){so(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},pp.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new hp(this,t,e):null},pp.prototype.matches=function(t){return t instanceof pp&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},pp.prototype.hasAnyCallback=function(){return null!==this.callback_},pp);function pp(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}var dp,gp=(vp.prototype.respondsTo=function(t){t="children_removed"===(t="children_added"===t?"child_added":t)?"child_removed":t;return Do(this.callbacks_,t)},vp.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new hp(this,t,e):null},vp.prototype.createEvent=function(t,e){so(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),e=e.getQueryParams().getIndex();return new up(t.type,this,new _f(t.snapshotNode,n,e),t.prevName)},vp.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){so(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},vp.prototype.matches=function(e){var n=this;if(e instanceof vp){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var t=Object.keys(e.callbacks_),r=Object.keys(this.callbacks_),i=t.length;if(i===r.length){if(1!==i)return r.every(function(t){return e.callbacks_[t]===n.callbacks_[t]});t=t[0],r=r[0];return!(r!==t||e.callbacks_[t]&&this.callbacks_[r]&&e.callbacks_[t]!==this.callbacks_[r])}}}return!1},vp.prototype.hasAnyCallback=function(){return null!==this.callbacks_},vp);function vp(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}var yp=(Object.defineProperty(mp,"__referenceConstructor",{get:function(){return so(dp,"Reference.ts has not been loaded"),dp},set:function(t){dp=t},enumerable:!1,configurable:!0}),mp.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Cu){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Zs)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==ta)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Eu){if(null!=e&&!qa(e)||null!=n&&!qa(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(so(t.getIndex()instanceof gh||t.getIndex()===dh,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")},mp.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")},mp.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},mp.prototype.getQueryParams=function(){return this.queryParams_},mp.prototype.getRef=function(){return Ko("Query.ref",0,0,arguments.length),new mp.__referenceConstructor(this.repo,this.path)},mp.prototype.on=function(t,e,n,r){Ko("Query.on",2,4,arguments.length),Ga("Query.on",1,t,!1),Wo("Query.on",2,e,!1);n=mp.getCancelAndContextArgs_("Query.on",n,r);return"value"===t?this.onValueEvent(e,n.cancel,n.context):((r={})[t]=e,this.onChildEvent(r,n.cancel,n.context)),e},mp.prototype.onValueEvent=function(t,e,n){n=new fp(t,e||null,n||null);Wf(this.repo,this,n)},mp.prototype.onChildEvent=function(t,e,n){n=new gp(t,e,n);Wf(this.repo,this,n)},mp.prototype.off=function(t,e,n){Ko("Query.off",0,3,arguments.length),Ga("Query.off",1,t,!0),Wo("Query.off",2,e,!0),Ho("Query.off",3,n,!0);var r=null,i=null;"value"===t?r=new fp(e||null,null,n||null):t&&(e&&((i={})[t]=e),r=new gp(i,null,n||null)),i=this.repo,n=r,n=".info"===ya((r=this).path)?Jh(i.infoSyncTree_,r,n):Jh(i.serverSyncTree_,r,n),Fl(i.eventQueue_,r.path,n)},mp.prototype.get=function(){return n=this.repo,r=this,null!=(t=tl(n.serverSyncTree_,r))?Promise.resolve(new _f(t,r.getRef(),r.getQueryParams().getIndex())):n.server_.get(r).then(function(t){var e=Wu(t),t=Xh(n.serverSyncTree_,r.path,e);return Fl(n.eventQueue_,r.path,t),Promise.resolve(new _f(e,r.getRef(),r.getQueryParams().getIndex()))},function(t){return zf(n,"get for query "+Ro(r)+" failed: "+t),Promise.reject(new Error(t))});var n,r,t},mp.prototype.once=function(e,n,t,r){var i=this;Ko("Query.once",1,4,arguments.length),Ga("Query.once",1,e,!1),Wo("Query.once",2,n,!0);var o=mp.getCancelAndContextArgs_("Query.once",t,r),s=!0,a=new lo;a.promise.catch(function(){});var u=function(t){s&&(s=!1,i.off(e,u),n&&n.bind(o.context)(t),a.resolve(t))};return this.on(e,u,function(t){i.off(e,u),o.cancel&&o.cancel.bind(o.context)(t),a.reject(t)}),a.promise},mp.prototype.limitToFirst=function(t){if(Ko("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new mp(this.repo,this.path,(e=this.queryParams_,t=t,(e=e.copy()).limitSet_=!0,e.limit_=t,e.viewFrom_="l",e),this.orderByCalled_);var e},mp.prototype.limitToLast=function(t){if(Ko("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new mp(this.repo,this.path,(e=this.queryParams_,t=t,(e=e.copy()).limitSet_=!0,e.limit_=t,e.viewFrom_="r",e),this.orderByCalled_);var e},mp.prototype.orderByChild=function(t){if(Ko("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Ha("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");t=new da(t);if(Ea(t))throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");t=new gh(t),t=Sh(this.queryParams_,t);return mp.validateQueryEndpoints_(t),new mp(this.repo,this.path,t,!0)},mp.prototype.orderByKey=function(){Ko("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=Sh(this.queryParams_,Cu);return mp.validateQueryEndpoints_(t),new mp(this.repo,this.path,t,!0)},mp.prototype.orderByPriority=function(){Ko("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=Sh(this.queryParams_,Eu);return mp.validateQueryEndpoints_(t),new mp(this.repo,this.path,t,!0)},mp.prototype.orderByValue=function(){Ko("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=Sh(this.queryParams_,dh);return mp.validateQueryEndpoints_(t),new mp(this.repo,this.path,t,!0)},mp.prototype.startAt=function(t,e){void 0===t&&(t=null),Ko("Query.startAt",0,2,arguments.length),Va("Query.startAt",1,t,this.path,!0),Wa("Query.startAt",2,e,!0);var n=Th(this.queryParams_,t,e);if(mp.validateLimit_(n),mp.validateQueryEndpoints_(n),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(e=t=null),new mp(this.repo,this.path,n,this.orderByCalled_)},mp.prototype.startAfter=function(t,e){void 0===t&&(t=null),Ko("Query.startAfter",0,2,arguments.length),Va("Query.startAfter",1,t,this.path,!1),Wa("Query.startAfter",2,e,!0);var n,e=(n=this.queryParams_,t=t,e=e,(e=n.index_===Cu?Th(n,t="string"==typeof t?oh(t):t,e):Th(n,t,null==e?ta:oh(e))).startAfterSet_=!0,e);if(mp.validateLimit_(e),mp.validateQueryEndpoints_(e),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new mp(this.repo,this.path,e,this.orderByCalled_)},mp.prototype.endAt=function(t,e){void 0===t&&(t=null),Ko("Query.endAt",0,2,arguments.length),Va("Query.endAt",1,t,this.path,!0),Wa("Query.endAt",2,e,!0);e=Eh(this.queryParams_,t,e);if(mp.validateLimit_(e),mp.validateQueryEndpoints_(e),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new mp(this.repo,this.path,e,this.orderByCalled_)},mp.prototype.endBefore=function(t,e){void 0===t&&(t=null),Ko("Query.endBefore",0,2,arguments.length),Va("Query.endBefore",1,t,this.path,!1),Wa("Query.endBefore",2,e,!0);var n,e=(n=this.queryParams_,t=t,e=e,(e=n.index_===Cu?Eh(n,t="string"==typeof t?sh(t):t,e):Eh(n,t,null==e?Zs:sh(e))).endBeforeSet_=!0,e);if(mp.validateLimit_(e),mp.validateQueryEndpoints_(e),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new mp(this.repo,this.path,e,this.orderByCalled_)},mp.prototype.equalTo=function(t,e){if(Ko("Query.equalTo",1,2,arguments.length),Va("Query.equalTo",1,t,this.path,!1),Wa("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return this.startAt(t,e).endAt(t,e)},mp.prototype.toString=function(){return Ko("Query.toString",0,0,arguments.length),this.repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this.path)},mp.prototype.toJSON=function(){return Ko("Query.toJSON",0,1,arguments.length),this.toString()},mp.prototype.queryObject=function(){return t=this.queryParams_,n={},t.startSet_&&(n.sp=t.indexStartValue_,t.startNameSet_&&(n.sn=t.indexStartName_)),t.endSet_&&(n.ep=t.indexEndValue_,t.endNameSet_&&(n.en=t.indexEndName_)),t.limitSet_&&(n.l=t.limit_,""===(e=t.viewFrom_)&&(e=t.isViewFromLeft()?"l":"r"),n.vf=e),t.index_!==Eu&&(n.i=t.index_.toString()),n;var t,e,n},mp.prototype.queryIdentifier=function(){var t=this.queryObject(),t=na(t);return"{}"===t?"default":t},mp.prototype.isEqual=function(t){if(Ko("Query.isEqual",1,1,arguments.length),!(t instanceof mp))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var e=this.repo===t.repo,n=Aa(this.path,t.path),t=this.queryIdentifier()===t.queryIdentifier();return e&&n&&t},mp.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Wo(t,3,r.cancel,!0),r.context=n,Ho(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Go(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(mp.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),mp);function mp(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}var bp,wp,_p=(Xi(Ip,bp=yp),Ip.prototype.getKey=function(){return Ko("Reference.key",0,0,arguments.length),Ea(this.path)?null:wa(this.path)},Ip.prototype.child=function(t){var e,n,r,i;return Ko("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof da||(null===ya(this.path)?(e="Reference.child",i=!(n=1),r=(r=t)&&r.replace(/^\/*\.info(\/|$)/,"/"),Ha(e,n,r,i)):Ha("Reference.child",1,t,!1)),new Ip(this.repo,Ta(this.path,t))},Ip.prototype.getParent=function(){Ko("Reference.parent",0,0,arguments.length);var t=Ia(this.path);return null===t?null:new Ip(this.repo,t)},Ip.prototype.getRoot=function(){Ko("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},Ip.prototype.databaseProp=function(){return Yf(this.repo)},Ip.prototype.set=function(t,e){Ko("Reference.set",1,2,arguments.length),za("Reference.set",this.path),Va("Reference.set",1,t,this.path,!1),Wo("Reference.set",2,e,!0);var n=new lo;return Bf(this.repo,this.path,t,null,n.wrapCallback(e)),n.promise},Ip.prototype.update=function(t,e){if(Ko("Reference.update",1,2,arguments.length),za("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,$s("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ba("Reference.update",1,t,this.path,!1),Wo("Reference.update",2,e,!0);var i=new lo;return function(i,o,t,s){zf(i,"update",{path:o.toString(),value:t});var a,e,n=!0,r=Ff(i),u={};ra(t,function(t,e){n=!1,u[t]=ml(Ta(o,t),Wu(e),i.serverSyncTree_,r)}),n?(Ys("update() called with empty data.  Don't do anything."),Qf(0,s,"ok",void 0)):(a=Vf(i),e=Qh(i.serverSyncTree_,o,u,a),Ml(i.eventQueue_,e),i.server_.merge(o.toString(),t,function(t,e){var n="ok"===t;n||$s("update at "+o+" failed: "+t);var r=Yh(i.serverSyncTree_,a,!n),n=0<r.length?$f(i,o):o;Ul(i.eventQueue_,n,r),Qf(0,s,t,e)}),ra(t,function(t){t=np(i,Ta(o,t));$f(i,t)}),Ul(i.eventQueue_,o,[]))}(this.repo,this.path,t,i.wrapCallback(e)),i.promise},Ip.prototype.setWithPriority=function(t,e,n){if(Ko("Reference.setWithPriority",2,3,arguments.length),za("Reference.setWithPriority",this.path),Va("Reference.setWithPriority",1,t,this.path,!1),Ka("Reference.setWithPriority",2,e,!1),Wo("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new lo;return Bf(this.repo,this.path,t,e,r.wrapCallback(n)),r.promise},Ip.prototype.remove=function(t){return Ko("Reference.remove",0,1,arguments.length),za("Reference.remove",this.path),Wo("Reference.remove",1,t,!0),this.set(null,t)},Ip.prototype.transaction=function(t,r,e){if(Ko("Reference.transaction",1,3,arguments.length),za("Reference.transaction",this.path),Wo("Reference.transaction",1,t,!1),Wo("Reference.transaction",2,r,!0),function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Go(t,e,r)+"must be a boolean.")}("Reference.transaction",3,e,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===e&&(e=!0);var i=new lo;"function"==typeof r&&i.promise.catch(function(){});return function(t,e,n,r,i){function o(){}zf(t,"transaction on "+e);var s=new _p(t,e);s.on("value",o);var a={path:e,update:n,onComplete:r,status:null,order:Ws(),applyLocally:i,retryCount:0,unwatcher:function(){s.off("value",o)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},n=Xf(t,e,void 0);a.currentInputSnapshot=n;var u,r=a.update(n.val());void 0===r?(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&(u=new _f(a.currentInputSnapshot,new _p(t,a.path),Eu),a.onComplete(null,!1,u))):(tu("transaction failed: Data returned ",r,a.path),a.status=0,(u=Sf(i=Ef(t.transactionQueueTree_,e))||[]).push(a),Cf(i,u),i=void 0,"object"==typeof r&&null!==r&&Do(r,".priority")?(i=Oo(r,".priority"),so(qa(i),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):i=(Zh(t.serverSyncTree_,e)||ju.EMPTY_NODE).getPriority().val(),u=Ff(t),i=Wu(r,i),u=bl(i,n,u),a.currentOutputSnapshotRaw=i,a.currentOutputSnapshotResolved=u,a.currentWriteId=Vf(t),a=zh(t.serverSyncTree_,e,u,a.currentWriteId,a.applyLocally),Ul(t.eventQueue_,e,a),Jf(t,t.transactionQueueTree_))}(this.repo,this.path,t,function(t,e,n){t?i.reject(t):i.resolve(new sp(e,n)),"function"==typeof r&&r(t,e,n)},e),i.promise},Ip.prototype.setPriority=function(t,e){Ko("Reference.setPriority",1,2,arguments.length),za("Reference.setPriority",this.path),Ka("Reference.setPriority",1,t,!1),Wo("Reference.setPriority",2,e,!0);var n=new lo;return Bf(this.repo,Ta(this.path,".priority"),t,null,n.wrapCallback(e)),n.promise},Ip.prototype.push=function(t,e){Ko("Reference.push",0,2,arguments.length),za("Reference.push",this.path),Va("Reference.push",1,t,this.path,!0),Wo("Reference.push",2,e,!0);var n=Mf(this.repo),r=lh(n),n=this.child(r),i=this.child(r),t=null!=t?n.set(t,e).then(function(){return i}):Promise.resolve(i);return n.then=t.then.bind(t),n.catch=t.then.bind(t,void 0),"function"==typeof e&&t.catch(function(){}),n},Ip.prototype.onDisconnect=function(){return za("Reference.onDisconnect",this.path),new ip(this.repo,this.path)},Object.defineProperty(Ip.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(Ip.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(Ip.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(Ip.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),Ip);function Ip(t,e){if(!(t instanceof Of))throw new Error("new Reference() no longer supported - use app.database().");return bp.call(this,t,e,new _h,!1)||this}yp.__referenceConstructor=_p,wp=_p,so(!Ah,"__referenceConstructor has already been defined"),Ah=wp;var Tp=(Ep.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(Ys("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},Ep.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):(setTimeout(function(){return e(null)},0),this.authProvider_.get().then(function(t){return t.addAuthTokenListener(e)}))},Ep.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then(function(t){return t.removeAuthTokenListener(e)})},Ep.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',$s(t)},Ep);function Ep(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}var Sp=(Cp.prototype.getToken=function(t){return Promise.resolve({accessToken:Cp.EMULATOR_AUTH_TOKEN})},Cp.prototype.addTokenChangeListener=function(t){t(Cp.EMULATOR_AUTH_TOKEN)},Cp.prototype.removeTokenChangeListener=function(t){},Cp.prototype.notifyForInvalidToken=function(){},Cp.EMULATOR_AUTH_TOKEN="owner",Cp);function Cp(){}var Ap="FIREBASE_DATABASE_EMULATOR_HOST",Np={},kp=!1;function Rp(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||Js("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ys("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=Ya(i,r),a=s.repoInfo,n=void 0;(n="undefined"!=typeof process?process.env[Ap]:n)?(o=!0,i="http://"+n+"?ns="+a.namespace,a=(s=Ya(i,r)).repoInfo):o=!s.repoInfo.secure;e=r&&o?new Sp:new Tp(t,e);return eu("Invalid Firebase Database URL",1,s),Ea(s.path)||Js("Database URL must point to the root of a Firebase Database (not including a child path)."),Yf(function(t,e,n){var r=Oo(Np,e.name);r||(r={},Np[e.name]=r);var i=Oo(r,t.toURLString());i&&Js("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return i=new Of(t,kp,e,n),r[t.toURLString()]=i}(a,t,e))}var Pp=(Object.defineProperty(Dp.prototype,"repo_",{get:function(){return this.instanceStarted_||(Lf(this.repoInternal_),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(Dp.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new _p(this.repo_,va())),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(Dp.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),Dp.prototype.useEmulator=function(t,e){var n;this.checkDeleted_("useEmulator"),this.instanceStarted_?Js("Cannot call useEmulator() after instance has already been initialized."):(n=this.repoInternal_,t=t,e=e,n.repoInfo_=new La(t+":"+e,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),n.repoInfo_.nodeAdmin&&(n.authTokenProvider_=new Sp))},Dp.prototype.ref=function(t){return this.checkDeleted_("ref"),Ko("database.ref",0,1,arguments.length),t instanceof _p?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},Dp.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Ko(e,1,1,arguments.length);var n=Ya(t,this.repo_.repoInfo_.nodeAdmin);eu(e,1,n);t=n.repoInfo;return this.repo_.repoInfo_.isCustomHost()||t.host===this.repo_.repoInfo_.host||Js(e+": Host name does not match the current database: (found "+t.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},Dp.prototype.checkDeleted_=function(t){null===this.repoInternal_&&Js("Cannot call "+t+" on a deleted database.")},Dp.prototype.goOffline=function(){Ko("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),Hf(this.repo_)},Dp.prototype.goOnline=function(){var t;Ko("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),(t=this.repo_).persistentConnection_&&t.persistentConnection_.resume(Pf)},Dp.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},Dp);function Dp(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return $i(e,void 0,void 0,function(){return Zi(this,function(t){var e,n;return this.checkDeleted_("delete"),e=this.repo_,(n=Oo(Np,e.app.name))&&Oo(n,e.key)===e||Js("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted."),Hf(e),delete n[e.key],this.repoInternal_=null,this.rootInternal_=null,[2]})})}},t instanceof Of||Js("Don't call new Database() directly - please use firebase.database().")}var Op=Object.freeze({__proto__:null,forceLongPolling:function(){sf.forceDisallow(),$l.forceAllow()},forceWebSockets:function(){$l.forceDisallow()},isWebSocketsAvailable:function(){return sf.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){var i;t=t.repo,void 0===(e=e)&&(e=!1),"undefined"!=typeof console&&(t=e?(t.statsListener_||(t.statsListener_=new Pl(t.stats_)),t.statsListener_.get()):t.stats_.get(),i=Object.keys(t).reduce(function(t,e){return Math.max(e.length,t)},0),ra(t,function(t,e){for(var n=t,r=t.length;r<i+2;r++)n+=" ";console.log(n+e)}))},statsIncrementCounter:function(t,e){t=t.repo,e=e,t.stats_.incrementCounter(e),t=t.statsReporter_,e=e,t.statsToReport_[e]=!0},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){t=t.repo,e=e,t.interceptServerDataCallback_=e},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,i=t.customAuthImpl,o=t.namespace,t=void 0!==(t=t.nodeAdmin)&&t;return rf(r),(r=new ns("auth-internal",new is("database-standalone"))).setComponent(new Zo("auth-internal",function(){return i},"PRIVATE")),{instance:Rp(e,r,n,t),namespace:o}}}),Sn=vf;vf.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},vf.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var xp,Lp=Object.freeze({__proto__:null,DataConnection:Sn,RealTimeConnection:hf,hijackHash:function(i){var o=vf.prototype.put;return vf.prototype.put=function(t,e,n,r){void 0!==r&&(r=i()),o.call(this,t,e,n,r)},function(){vf.prototype.put=o}},ConnectionTarget:La,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){kp=t}}),Mp=Pp.ServerValue;rf((xp=Xl).SDK_VERSION),xp.INTERNAL.registerComponent(new Zo("database",function(t,e){e=e.instanceIdentifier;return Rp(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),e,void 0)},"PUBLIC").setServiceProps({Reference:_p,Query:yp,Database:Pp,DataSnapshot:_f,enableLogging:Ls,INTERNAL:Op,ServerValue:Mp,TEST_ACCESS:Lp}).setMultipleInstances(!0)),xp.registerVersion("@firebase/database","0.9.6");var Fp=function(t,e){return(Fp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Up(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&r>=t.length?void 0:t)&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var bu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},jp={},qp=bu||self;function Vp(){}function Bp(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Kp(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Gp="closure_uid_"+(1e9*Math.random()>>>0),Wp=0;function Hp(t,e,n){return t.call.apply(t.bind,arguments)}function zp(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function Qp(t,e,n){return(Qp=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Hp:zp).apply(null,arguments)}function Yp(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Xp(){return Date.now()}function Jp(t,o){function e(){}e.prototype=o.prototype,t.X=o.prototype,t.prototype=new e,(t.prototype.constructor=t).Kb=function(t,e,n){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return o.prototype[e].apply(t,r)}}function $p(){this.j=this.j,this.i=this.i}$p.prototype.j=!1,$p.prototype.ja=function(){var t;!this.j&&(this.j=!0,this.G(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,Gp)&&t[Gp]||(t[Gp]=++Wp))},$p.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Zp=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},td=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function ed(){return Array.prototype.concat.apply([],arguments)}function nd(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function rd(t){return/^[\s\xa0]*$/.test(t)}var id,od=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function sd(t,e){return-1!=t.indexOf(e)}function ad(t,e){return t<e?-1:e<t?1:0}t:{var ud=qp.navigator;if(ud){ud=ud.userAgent;if(ud){id=ud;break t}}id=""}function cd(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function hd(t){var e,n={};for(e in t)n[e]=t[e];return n}var ld="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fd(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<ld.length;i++)e=ld[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function pd(t){return pd[" "](t),t}pd[" "]=Vp;var dd,gd=sd(id,"Opera"),vd=sd(id,"Trident")||sd(id,"MSIE"),yd=sd(id,"Edge"),md=yd||vd,bd=sd(id,"Gecko")&&!(sd(id.toLowerCase(),"webkit")&&!sd(id,"Edge"))&&!(sd(id,"Trident")||sd(id,"MSIE"))&&!sd(id,"Edge"),wd=sd(id.toLowerCase(),"webkit")&&!sd(id,"Edge");function _d(){var t=qp.document;return t?t.documentMode:void 0}t:{var Id="",Td=(Td=id,bd?/rv:([^\);]+)(\)|;)/.exec(Td):yd?/Edge\/([\d\.]+)/.exec(Td):vd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Td):wd?/WebKit\/(\S+)/.exec(Td):gd?/(?:Version)[ \/]?(\S+)/.exec(Td):void 0);if(Td&&(Id=Td?Td[1]:""),vd){Td=_d();if(null!=Td&&Td>parseFloat(Id)){dd=String(Td);break t}}dd=Id}var Ed={};function Sd(a){return t=a,e=function(){for(var t=0,e=od(String(dd)).split("."),n=od(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++)for(var o=e[i]||"",s=n[i]||"";o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],(0!=o[0].length||0!=s[0].length)&&(t=ad(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||ad(0==o[2].length,0==s[2].length)||ad(o[2],s[2]),o=o[3],s=s[3],0==t););return 0<=t},n=Ed,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}var Cd=qp.document&&vd&&(_d()||parseInt(dd,10))||void 0,Ad=!vd||9<=Number(Cd),Nd=vd&&!Sd("9"),kd=function(){if(!qp.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{qp.addEventListener("test",Vp,e),qp.removeEventListener("test",Vp,e)}catch(t){}return t}();function Rd(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Pd(t,e){if(Rd.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(bd){t:{try{pd(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Dd[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}Rd.prototype.b=function(){this.defaultPrevented=!0},Jp(Pd,Rd);var Dd={2:"touch",3:"pen",4:"mouse"};Pd.prototype.b=function(){Pd.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Nd)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var Od="closure_listenable_"+(1e6*Math.random()|0),xd=0;function Ld(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++xd,this.Y=this.Z=!1}function Md(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Fd(t){this.src=t,this.a={},this.b=0}function Ud(t,e){var n,r,i,o=e.type;o in t.a&&(n=t.a[o],(i=0<=(r=Zp(n,e)))&&Array.prototype.splice.call(n,r,1),i&&(Md(e),0==t.a[o].length&&(delete t.a[o],t.b--)))}function jd(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Fd.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=jd(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Ld(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var qd="closure_lm_"+(1e6*Math.random()|0),Vd={};function Bd(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}r=Xd(r);return e&&e[Od]?e.wa(n,r,Kp(i)?!!i.capture:!!i,o):Kd(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Bd(t,e[o],n,r,i);return null}return n=Xd(n),t&&t[Od]?t.va(e,n,Kp(r)?!!r.capture:!!r,i):Kd(t,e,n,!1,r,i)}function Kd(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Kp(i)?!!i.capture:!!i;if(s&&!Ad)return null;var a,u,c=Qd(t);if(c||(t[qd]=c=new Fd(t)),(n=c.add(e,n,r,s,o)).proxy)return n;if(a=zd,r=u=Ad?function(t){return a.call(u.src,u.listener,t)}:function(t){if(!(t=a.call(u.src,u.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)void 0===(i=!kd?s:i)&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Wd(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Gd(t){var e,n,r;"number"!=typeof t&&t&&!t.Y&&((e=t.src)&&e[Od]?Ud(e.c,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Wd(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Qd(e))?(Ud(n,t),0==n.b&&(n.src=null,e[qd]=null)):Md(t)))}function Wd(t){return t in Vd?Vd[t]:Vd[t]="on"+t}function Hd(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Gd(t),n.call(r,e)}function zd(t,e){if(t.Y)return!0;if(Ad)return Hd(t,new Pd(e,this));if(!e)t:{e=["window","event"];for(var n=qp,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Hd(t,e=new Pd(e,this))}function Qd(t){return(t=t[qd])instanceof Fd?t:null}var Yd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xd(e){return"function"==typeof e?e:(e[Yd]||(e[Yd]=function(t){return e.handleEvent(t)}),e[Yd])}function Jd(){$p.call(this),this.c=new Fd(this),(this.J=this).C=null}function $d(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e?e=new Rd(e,t):e instanceof Rd?e.target=e.target||t:(s=e,fd(e=new Rd(r,t),s)),s=!0,n)for(var i=n.length-1;0<=i;i--)var o=e.a=n[i],s=Zd(o,r,!0,e)&&s;if(s=Zd(o=e.a=t,r,!0,e)&&s,s=Zd(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)s=Zd(o=e.a=n[i],r,!1,e)&&s}function Zd(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,a,u=e[o];u&&!u.Y&&u.capture==n&&(s=u.listener,a=u.ca||u.src,u.Z&&Ud(t.c,u),i=!1!==s.call(a,r)&&i)}return i&&!r.defaultPrevented}Jp(Jd,$p),Jd.prototype[Od]=!0,(z=Jd.prototype).addEventListener=function(t,e,n,r){Bd(this,t,e,n,r)},z.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=Kp(i)?!!i.capture:!!i,r=Xd(r),e&&e[Od]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=jd(s=e.a[n],r,i,o))&&(Md(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):(e=e&&Qd(e))&&(n=e.a[n.toString()],(r=(e=-1)<(e=n?jd(n,r,i,o):e)?n[e]:null)&&Gd(r))}(this,t,e,n,r)},z.G=function(){if(Jd.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Md(n[r]);delete e.a[t],e.b--}}this.C=null},z.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},z.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var tg=qp.JSON.stringify;function eg(){this.b=this.a=null}var ng,rg=(ig.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},new ig(function(){return new og},function(t){t.reset()}));function ig(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function og(){this.next=this.b=this.a=null}function sg(t,e){var n;ng||(n=qp.Promise.resolve(void 0),ng=function(){n.then(cg)}),ag||(ng(),ag=!0),ug.add(t,e)}eg.prototype.add=function(t,e){var n=rg.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},og.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var ag=!(og.prototype.reset=function(){this.next=this.b=this.a=null}),ug=new eg;function cg(){for(var t,e;n=e=void 0,n=null,(e=ug).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){!function(t){qp.setTimeout(function(){throw t},0)}(t)}var n=rg;n.f(t),n.b<100&&(n.b++,t.next=n.a,n.a=t)}ag=!1}function hg(t,e){Jd.call(this),this.b=t||1,this.a=e||qp,this.f=Qp(this.Za,this),this.g=Xp()}function lg(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function fg(t,e,n){if("function"==typeof t)n&&(t=Qp(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Qp(t.handleEvent,t)}return 2147483647<Number(e)?-1:qp.setTimeout(t,e||0)}Jp(hg,Jd),(z=hg.prototype).aa=!1,z.M=null,z.Za=function(){var t;this.aa&&(0<(t=Xp()-this.g)&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),$d(this,"tick"),this.aa&&(lg(this),this.start())))},z.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Xp())},z.G=function(){hg.X.G.call(this),lg(this),delete this.a};var pg,dg,gg,vg=(Fp(dg=mg,gg=pg=$p),dg.prototype=null===gg?Object.create(gg):(yg.prototype=gg.prototype,new yg),mg.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:function t(e){e.a=fg(function(){e.a=null,e.c&&(e.c=!1,t(e))},e.h);var n=e.b;e.b=null,e.g.apply(null,n)}(this)},mg.prototype.G=function(){pg.prototype.G.call(this),this.a&&(qp.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},mg);function yg(){this.constructor=dg}function mg(t,e){var n=pg.call(this)||this;return n.g=t,n.h=e,n.b=null,n.c=!1,n.a=null,n}function bg(t){$p.call(this),this.b=t,this.a={}}Jp(bg,$p);var wg=[];function _g(t,e,n,r){Array.isArray(n)||(n&&(wg[0]=n.toString()),n=wg);for(var i=0;i<n.length;i++){var o=Bd(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Ig(t){cd(t.a,function(t,e){this.a.hasOwnProperty(e)&&Gd(t)},t),t.a={}}function Tg(){this.a=!0}function Eg(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(r.length<2)){var i=r[1];if(Array.isArray(i)&&!(i.length<1)){r=i[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var o=1;o<i.length;o++)i[o]=""}}}return tg(n)}catch(t){return e}}(t,n)+(r?" "+r:"")})}bg.prototype.G=function(){bg.X.G.call(this),Ig(this)},bg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Tg.prototype.info=function(){};var Sg={},Cg=null;function Ag(){return Cg=Cg||new Jd}function Ng(t){Rd.call(this,Sg.Fa,t)}function kg(t){var e=Ag();$d(e,new Ng(e))}function Rg(t,e){Rd.call(this,Sg.STAT_EVENT,t),this.stat=e}function Pg(t){var e=Ag();$d(e,new Rg(e,t))}function Dg(t){Rd.call(this,Sg.Ga,t)}function Og(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return qp.setTimeout(function(){t()},e)}Sg.Fa="serverreachability",Jp(Ng,Rd),Sg.STAT_EVENT="statevent",Jp(Rg,Rd),Sg.Ga="timingevent",Jp(Dg,Rd);H={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Sn={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function xg(){}function Lg(t){var e;return e=!(e=t.a)?t.a={}:e}function Mg(){}xg.prototype.a=null;bu={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Fg(){Rd.call(this,"d")}function Ug(){Rd.call(this,"c")}function jg(){}function qg(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new bg(this),this.P=Bg,t=md?125:void 0,this.R=new hg(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Jp(Fg,Rd),Jp(Ug,Rd),Jp(jg,xg);var Vg=new jg,Bg=45e3,Kg={},Gg={};function Wg(t,e,n){t.H=1,t.i=fv(sv(e)),t.j=n,t.I=!0,Hg(t,null)}function Hg(t,e){t.u=Xp(),Qg(t),t.l=sv(t.i);var s,a,u,c,h,l,n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Sv(n.b,"t",r),t.D=0,t.a=my(t.g,t.g.C?e:null),0<t.O&&(t.F=new vg(Qp(t.Ca,t,t.a),t.O)),_g(t.J,t.a,"readystatechange",t.Xa),e=t.B?hd(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),kg(1),s=t.c,a=t.m,u=t.l,c=t.f,h=t.S,l=t.j,s.info(function(){if(s.a)if(l)for(var t="",e=l.split("&"),n=0;n<e.length;n++){var r,i,o=e[n].split("=");1<o.length&&(r=o[0],o=o[1],t=2<=(i=r.split("_")).length&&"type"==i[1]?t+(r+"=")+o+"&":t+(r+"=redacted&"))}else t=null;else t=l;return"XMLHTTP REQ ("+c+") [attempt "+h+"]: "+a+"\n"+u+"\n"+t})}function zg(t,e,n){for(var r,i,o,s=!0;!t.A&&t.D<n.length;){var a=(a=n,o=i=void 0,i=(r=t).D,-1==(o=a.indexOf("\n",i))?Gg:(i=Number(a.substring(i,o)),isNaN(i)?Kg:(o+=1)+i>a.length?Gg:(a=a.substr(o,i),r.D=o+i,a)));if(a==Gg){4==e&&(t.h=4,Pg(14),s=!1),Eg(t.c,t.f,null,"[Incomplete Response]");break}if(a==Kg){t.h=4,Pg(15),Eg(t.c,t.f,n,"[Invalid Chunk]"),s=!1;break}Eg(t.c,t.f,a,null),Zg(t,a)}4==e&&0==n.length&&(t.h=1,Pg(16),s=!1),t.b=t.b&&s,s?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),hy(e),e.F=!0,Pg(11))):(Eg(t.c,t.f,n,"[Invalid Chunked Response]"),$g(t),Jg(t))}function Qg(t){t.T=Xp()+t.P,Yg(t,t.P)}function Yg(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Og(Qp(t.Va,t),e)}function Xg(t){t.o&&(qp.clearTimeout(t.o),t.o=null)}function Jg(t){0==t.g.v||t.A||py(t.g,t)}function $g(t){Xg(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,lg(t.R),Ig(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Zg(t,e){try{var n,r,i,o,s,a=t.g;if(0!=a.v&&(a.a==t||Dv(a.b,t)))if(a.I=t.N,!t.C&&Dv(a.b,t)&&3==a.v){try{var u=a.ka.a.parse(e)}catch(t){u=null}if(Array.isArray(u)&&3==u.length){var c=u;if(0==c[0]){t:if(!a.j){if(a.a){if(!(a.a.u+3e3<t.u))break t;fy(a),ey(a)}cy(a),Pg(18)}}else a.oa=c[1],0<a.oa-a.P&&c[2]<37500&&a.H&&0==a.o&&!a.m&&(a.m=Og(Qp(a.Sa,a),6e3));if(Pv(a.b)<=1&&a.ea){try{a.ea()}catch(t){}a.ea=void 0}}else gy(a,11)}else if(!t.C&&a.a!=t||fy(a),!rd(e))for(e=u=a.ka.a.parse(e),u=0;u<e.length;u++)c=e[u],a.P=c[0],c=c[1],2==a.v?"c"==c[0]?(a.J=c[1],a.ga=c[2],null!=(r=c[3])&&(a.ha=r,a.c.info("VER="+a.ha)),null!=(o=c[4])&&(a.pa=o,a.c.info("SVER="+a.pa)),null!=(r=c[5])&&"number"==typeof r&&0<r&&(n=1.5*r,a.D=n,a.c.info("backChannelRequestTimeoutMs_="+n)),n=a,(o=t.a)&&(!(r=o.a?o.a.getResponseHeader("X-Client-Wire-Protocol"):null)||!(i=n.b).a&&(sd(r,"spdy")||sd(r,"quic")||sd(r,"h2"))&&(i.f=i.g,i.a=new Set,i.b&&(Ov(i,i.b),i.b=null)),!n.A||(s=o.a?o.a.getResponseHeader("X-HTTP-Session-Id"):null)&&(n.na=s,lv(n.B,n.A,s))),a.v=3,a.f&&a.f.ta(),a.U&&(a.N=Xp()-t.u,a.c.info("Handshake RTT: "+a.N+"ms")),i=t,(n=a).la=yy(n,n.C?n.ga:null,n.fa),i.C?(xv(n.b,i),o=i,(s=n.D)&&o.setTimeout(s),o.o&&(Xg(o),Qg(o)),n.a=i):uy(n),0<a.g.length&&iy(a)):"stop"!=c[0]&&"close"!=c[0]||gy(a,7):3==a.v&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?gy(a,7):ty(a):"noop"!=c[0]&&a.f&&a.f.sa(c),a.o=0);kg(4)}catch(t){}}function tv(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Bp(t)||"string"==typeof t)td(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Bp(t)||"string"==typeof t)for(var n=[],r=t.length,i=0;i<r;i++)n.push(i);else for(i in n=[],r=0,t)n[r++]=i;for(var i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Bp(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function ev(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof ev)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function nv(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];rv(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)rv(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function rv(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(z=qg.prototype).setTimeout=function(t){this.P=t},z.Xa=function(t){t=t.target;var e=this.F;e&&3==Xv(t)?e.f():this.Ca(t)},z.Ca=function(t){try{if(t==this.a)t:{var e=Xv(this.a),n=this.a.ua(),r=this.a.W();if(!(e<3||3==e&&!md&&!this.a.$())){this.A||4!=e||7==n||kg(8==n||r<=0?3:2),Xg(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,r=this.c,u=this.m,c=this.l,h=this.f,l=this.S,f=e,p=i,r.info(function(){return"XMLHTTP RESP ("+h+") [ attempt "+l+"]: "+u+"\n"+c+"\n"+f+" "+p}),this.b){if(this.U&&!this.C){e:{if(this.a){var s=this.a;if((s=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!rd(s)){var a=s;break e}}a=null}if(!a){this.b=!1,this.h=3,Pg(12),$g(this),Jg(this);break t}Eg(this.c,this.f,a,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Zg(this,a)}this.I?(zg(this,e,o),md&&this.b&&3==e&&(_g(this.J,this.R,"tick",this.Wa),this.R.start())):(Eg(this.c,this.f,o,null),Zg(this,o)),4==e&&$g(this),this.b&&!this.A&&(4==e?py(this.g,this):(this.b=!1,Qg(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Pg(12)):(this.h=0,Pg(13)),$g(this),Jg(this)}}}catch(t){}var u,c,h,l,f,p},z.Wa=function(){var t,e;this.a&&(t=Xv(this.a),e=this.a.$(),this.D<e.length&&(Xg(this),zg(this,t,e),this.b&&4!=t&&Qg(this)))},z.cancel=function(){this.A=!0,$g(this)},z.Va=function(){this.o=null;var t,e,n=Xp();0<=n-this.T?(t=this.c,e=this.l,t.info(function(){return"TIMEOUT: "+e}),2!=this.H&&(kg(3),Pg(17)),$g(this),this.h=2,Jg(this)):Yg(this,this.T-n)},(z=ev.prototype).K=function(){nv(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},z.L=function(){return nv(this),this.a.concat()},z.get=function(t,e){return rv(this.b,t)?this.b[t]:e},z.set=function(t,e){rv(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},z.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var iv=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ov(t,e){var n;this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof ov?(this.a=void 0!==e?e:t.a,av(this,t.f),this.j=t.j,uv(this,t.c),cv(this,t.h),this.g=t.g,e=t.b,(n=new _v).c=e.c,e.a&&(n.a=new ev(e.a),n.b=e.b),hv(this,n),this.i=t.i):t&&(n=String(t).match(iv))?(this.a=!!e,av(this,n[1]||"",!0),this.j=pv(n[2]||""),uv(this,n[3]||"",!0),cv(this,n[4]),this.g=pv(n[5]||"",!0),hv(this,n[6]||"",!0),this.i=pv(n[7]||"")):(this.a=!!e,this.b=new _v(null,this.a))}function sv(t){return new ov(t)}function av(t,e,n){t.f=n?pv(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function uv(t,e,n){t.c=n?pv(e,!0):e}function cv(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.h=e}else t.h=null}function hv(t,e,n){var r,i;e instanceof _v?(t.b=e,r=t.b,(i=t.a)&&!r.f&&(Iv(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Tv(this,e),Sv(this,n,t))},r)),r.f=i):(n||(e=dv(e,bv)),t.b=new _v(e,t.a))}function lv(t,e,n){t.b.set(e,n)}function fv(t){return lv(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Xp()).toString(36)),t}function pv(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function dv(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,gv),t=n?t.replace(/%25([0-9a-fA-F]{2})/g,"%$1"):t):null}function gv(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ov.prototype.toString=function(){var t=[],e=this.f;e&&t.push(dv(e,vv,!0),":");var n=this.c;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(dv(e,vv,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(dv(n,"/"==n.charAt(0)?mv:yv,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",dv(n,wv)),t.join("")};var vv=/[#\/\?@]/g,yv=/[#\?:]/g,mv=/[#\?]/g,bv=/[#\?@]/g,wv=/#/g;function _v(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Iv(n){n.a||(n.a=new ev,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function Tv(t,e){Iv(t),e=Cv(t,e),rv(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,rv((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&nv(t)))}function Ev(t,e){return Iv(t),e=Cv(t,e),rv(t.a.b,e)}function Sv(t,e,n){Tv(t,e),0<n.length&&(t.c=null,t.a.set(Cv(t,e),nd(n)),t.b+=n.length)}function Cv(t,e){return e=String(e),e=t.f?e.toLowerCase():e}(z=_v.prototype).add=function(t,e){Iv(this),this.c=null,t=Cv(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},z.forEach=function(n,r){Iv(this),this.a.forEach(function(t,e){td(t,function(t){n.call(r,t,e,this)},this)},this)},z.L=function(){Iv(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},z.K=function(t){Iv(this);var e=[];if("string"==typeof t)Ev(this,t)&&(e=ed(e,this.a.get(Cv(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=ed(e,t[n])}return e},z.set=function(t,e){return Iv(this),this.c=null,Ev(this,t=Cv(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},z.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},z.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.K(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var Av=function(t,e){this.b=t,this.a=e};function Nv(t){this.g=t||kv,t=qp.PerformanceNavigationTiming?0<(t=qp.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(qp.ia&&qp.ia.ya&&qp.ia.ya()&&qp.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var kv=10;function Rv(t){return t.b||t.a&&t.a.size>=t.f}function Pv(t){return t.b?1:t.a?t.a.size:0}function Dv(t,e){return t.b?t.b==e:t.a&&t.a.has(e)}function Ov(t,e){t.a?t.a.add(e):t.b=e}function xv(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Lv(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null==t.a||0===t.a.size)return nd(t.c);var r=t.c;try{for(var i=Up(t.a.values()),o=i.next();!o.done;o=i.next())var s=o.value,r=r.concat(s.s)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Mv(){}function Fv(){this.a=new Mv}function Uv(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}Nv.prototype.cancel=function(){var e,t;if(this.c=Lv(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Up(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.a.clear()}},Mv.prototype.stringify=function(t){return qp.JSON.stringify(t,void 0)},Mv.prototype.parse=function(t){return qp.JSON.parse(t,void 0)};var jv=qp.JSON.parse;function qv(t){Jd.call(this),this.headers=new ev,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Vv,this.D=this.F=!1}Jp(qv,Jd);var Vv="",Bv=/^https?$/i,Kv=["POST","PUT"];function Gv(t){return"content-type"==t.toLowerCase()}function Wv(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Hv(t),Qv(t)}function Hv(t){t.u||(t.u=!0,$d(t,"complete"),$d(t,"error"))}function zv(t){if(t.b&&void 0!==jp&&(!t.s[1]||4!=Xv(t)||2!=t.W()))if(t.l&&4==Xv(t))fg(t.za,0,t);else if($d(t,"readystatechange"),4==Xv(t)){t.b=!1;try{var e,n,r,i,o=t.W();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}(e=s)||((n=0===o)&&(!(i=String(t.B).match(iv)[1]||null)&&qp.self&&qp.self.location&&(i=(r=qp.self.location.protocol).substr(0,r.length-1)),n=!Bv.test(i?i.toLowerCase():"")),e=n);if(e)$d(t,"complete"),$d(t,"success");else{t.h=6;try{var a=2<Xv(t)?t.a.statusText:""}catch(o){a=""}t.f=a+" ["+t.W()+"]",Hv(t)}}finally{Qv(t)}}}function Qv(t,e){if(t.a){Yv(t);var n=t.a,r=t.s[0]?Vp:null;t.a=null,t.s=null,e||$d(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function Yv(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(qp.clearTimeout(t.m),t.m=null)}function Xv(t){return t.a?t.a.readyState:0}function Jv(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}var i;r||(i="",cd(n,function(t,e){i+=e,i+=":",i+=t,i+="\r\n"}),n=i,"string"==typeof t?null!=n&&encodeURIComponent(String(n)):lv(t,e,n))}function $v(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Zv(t){this.pa=0,this.g=[],this.c=new Tg,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=$v("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=$v("baseRetryDelayMs",5e3,t),this.Ra=$v("retryDelaySeedMs",1e4,t),this.Ma=$v("forwardChannelMaxRetries",2,t),this.ma=$v("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Nv(t&&t.concurrentRequestLimit),this.ka=new Fv,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function ty(t){var e,n;ny(t),3==t.v&&(e=t.R++,lv(n=sv(t.B),"SID",t.J),lv(n,"RID",e),lv(n,"TYPE","terminate"),sy(t,n),(e=new qg(t,t.c,e,void 0)).H=2,e.i=fv(sv(n)),n=!1,!(n=qp.navigator&&qp.navigator.sendBeacon?qp.navigator.sendBeacon(e.i.toString(),""):n)&&qp.Image&&((new Image).src=e.i,n=!0),n||(e.a=my(e.g,null),e.a.ba(e.i)),e.u=Xp(),Qg(e)),vy(t)}function ey(t){t.a&&(hy(t),t.a.cancel(),t.a=null)}function ny(t){ey(t),t.j&&(qp.clearTimeout(t.j),t.j=null),fy(t),t.b.cancel(),t.h&&("number"==typeof t.h&&qp.clearTimeout(t.h),t.h=null)}function ry(t,e){t.g.push(new Av(t.Oa++,e)),3==t.v&&iy(t)}function iy(t){Rv(t.b)||t.h||(t.h=!0,sg(t.Ba,t),t.u=0)}function oy(t,e){var n=e?e.f:t.R++,r=sv(t.B);lv(r,"SID",t.J),lv(r,"RID",n),lv(r,"AID",t.P),sy(t,r),t.i&&t.l&&Jv(r,t.i,t.l),n=new qg(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=ay(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Ov(t.b,n),Wg(n,r,e)}function sy(t,n){t.f&&tv({},function(t,e){lv(n,e,t)})}function ay(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Qp(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),a=!1;else try{!function(t,r,e){var i=e||"";try{tv(t,function(t,e){var n=t;Kp(t)&&(n=tg(t)),r.push(i+e+"="+encodeURIComponent(n))})}catch(t){throw r.push(i+"type="+encodeURIComponent("_badmap")),t}}(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function uy(t){t.a||t.j||(t.T=1,sg(t.Aa,t),t.o=0)}function cy(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=Og(Qp(t.Aa,t),dy(t,t.o)),t.o++,1)}function hy(t){null!=t.s&&(qp.clearTimeout(t.s),t.s=null)}function ly(t){t.a=new qg(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=sv(t.la);lv(e,"RID","rpc"),lv(e,"SID",t.J),lv(e,"CI",t.H?"0":"1"),lv(e,"AID",t.P),sy(t,e),lv(e,"TYPE","xmlhttp"),t.i&&t.l&&Jv(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=fv(sv(e)),n.j=null,n.I=!0,Hg(n,t)}function fy(t){null!=t.m&&(qp.clearTimeout(t.m),t.m=null)}function py(t,e){var n,r,i,o=null;if(t.a==e){fy(t),hy(t),t.a=null;var s=2}else{if(!Dv(t.b,e))return;o=e.s,xv(t.b,e),s=1}if(t.I=e.N,0!=t.v)if(e.b)1==s?(o=e.j?e.j.length:0,e=Xp()-e.u,n=t.u,$d(s=Ag(),new Dg(s)),iy(t)):uy(t);else if(3==(n=e.h)||0==n&&0<t.I||(1!=s||(i=e,Pv((r=t).b)>=r.b.f-(r.h?1:0)||(r.h?(r.g=i.s.concat(r.g),0):1==r.v||2==r.v||r.u>=(r.La?0:r.Ma)||(r.h=Og(Qp(r.Ba,r,i),dy(r,r.u)),r.u++,0))))&&(2!=s||!cy(t)))switch(o&&0<o.length&&(e=t.b,e.c=e.c.concat(o)),n){case 1:gy(t,5);break;case 4:gy(t,10);break;case 3:gy(t,6);break;default:gy(t,2)}}function dy(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function gy(t,e){var n,r,i,o;t.c.info("Error code "+e),2==e?(r=null,t.f&&(r=null),o=Qp(t.Ya,t),r||(r=new ov("//www.google.com/images/cleardot.gif"),qp.location&&"http"==qp.location.protocol||av(r,"https"),fv(r)),n=r.toString(),r=o,o=new Tg,qp.Image?((i=new Image).onload=Yp(Uv,o,i,"TestLoadImage: loaded",!0,r),i.onerror=Yp(Uv,o,i,"TestLoadImage: error",!1,r),i.onabort=Yp(Uv,o,i,"TestLoadImage: abort",!1,r),i.ontimeout=Yp(Uv,o,i,"TestLoadImage: timeout",!1,r),qp.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n):r(!1)):Pg(2),t.v=0,t.f&&t.f.ra(e),vy(t),ny(t)}function vy(t){t.v=0,t.I=-1,t.f&&(0==Lv(t.b).length&&0==t.g.length||(t.b.c.length=0,nd(t.g),t.g.length=0),t.f.qa())}function yy(t,e,n){var r,i,o,s,a,u=(s=n)instanceof ov?sv(s):new ov(s,void 0);return""!=u.c?(e&&uv(u,e+"."+u.c),cv(u,u.h)):(a=qp.location,r=a.protocol,i=e?e+"."+a.hostname:a.hostname,o=+a.port,s=n,a=new ov(null,void 0),r&&av(a,r),i&&uv(a,i),o&&cv(a,o),s&&(a.g=s),u=a),t.V&&cd(t.V,function(t,e){lv(u,e,t)}),e=t.A,n=t.na,e&&n&&lv(u,e,n),lv(u,"VER",t.ha),sy(t,u),u}function my(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new qv(t.Na)).F=t.C,e}function by(){}function wy(){if(vd&&!(10<=Number(Cd)))throw Error("Environmental error: no available transport.")}function _y(t,e){Jd.call(this),this.a=new Zv(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!rd(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!rd(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new Ey(this)}function Iy(t){Fg.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Ty(){Ug.call(this),this.status=1}function Ey(t){this.a=t}(z=qv.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?Lg(this.H):Lg(Vg),this.a.onreadystatechange=Qp(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void Wv(this,t)}t=n||"";var i,o=new ev(this.headers);r&&tv(r,function(t,e){o.set(e,t)}),r=function(t){t:{for(var e=Gv,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(o.L()),n=qp.FormData&&t instanceof qp.FormData,0<=Zp(Kv,e)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Yv(this),0<this.o&&((this.D=(i=this.a,vd&&Sd(9)&&"number"==typeof i.timeout&&void 0!==i.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=Qp(this.xa,this)):this.m=fg(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Wv(this,t)}},z.xa=function(){void 0!==jp&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,$d(this,"timeout"),this.abort(8))},z.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,$d(this,"complete"),$d(this,"abort"),Qv(this))},z.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Qv(this,!0)),qv.X.G.call(this)},z.za=function(){this.j||(this.A||this.l||this.g?zv(this):this.Ua())},z.Ua=function(){zv(this)},z.W=function(){try{return 2<Xv(this)?this.a.status:-1}catch(t){return-1}},z.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},z.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),jv(e)}},z.ua=function(){return this.h},z.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(z=Zv.prototype).ha=8,z.v=1,z.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new qg(this,this.c,t,void 0),r=this.l;if(this.O&&(r?fd(r=hd(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if("__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o=o.length:o=void 0,void 0===o)break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=ay(this,n,e),lv(i=sv(this.B),"RID",t),lv(i,"CVER",22),this.A&&lv(i,"X-HTTP-Session-Id",this.A),sy(this,i),this.i&&r&&Jv(i,this.i,r),Ov(this.b,n),this.Ia&&lv(i,"TYPE","init"),this.da?(lv(i,"$req",e),lv(i,"SID","null"),n.U=!0,Wg(n,i,null)):Wg(n,i,e),this.v=2}}else 3==this.v&&(t?oy(this,t):0==this.g.length||Rv(this.b)||oy(this))},z.Aa=function(){var t;this.j=null,ly(this),this.U&&!(this.F||null==this.a||this.N<=0)&&(t=2*this.N,this.c.info("BP detection timer enabled: "+t),this.s=Og(Qp(this.Ta,this),t))},z.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Pg(10),ey(this),ly(this))},z.Sa=function(){null!=this.m&&(this.m=null,ey(this),cy(this),Pg(19))},z.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Pg(2)):(this.c.info("Failed to ping google.com"),Pg(1))},(z=by.prototype).ta=function(){},z.sa=function(){},z.ra=function(){},z.qa=function(){},z.Ja=function(){},wy.prototype.a=function(t,e){return new _y(t,e)},Jp(_y,Jd),_y.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Pg(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=yy(t,null,t.fa),iy(t)},_y.prototype.close=function(){ty(this.a)},_y.prototype.h=function(t){var e;"string"==typeof t?((e={}).__data__=t,ry(this.a,e)):this.l?((e={}).__data__=tg(t),ry(this.a,e)):ry(this.a,t)},_y.prototype.G=function(){this.a.f=null,delete this.f,ty(this.a),delete this.a,_y.X.G.call(this)},Jp(Iy,Fg),Jp(Ty,Ug),Jp(Ey,by),Ey.prototype.ta=function(){$d(this.a,"a")},Ey.prototype.sa=function(t){$d(this.a,new Iy(t))},Ey.prototype.ra=function(t){$d(this.a,new Ty)},Ey.prototype.qa=function(){$d(this.a,"b")},wy.prototype.createWebChannel=wy.prototype.a,_y.prototype.send=_y.prototype.h,_y.prototype.open=_y.prototype.g,H.NO_ERROR=0,H.TIMEOUT=8,H.HTTP_ERROR=6,Sn.COMPLETE="complete",(Mg.EventType=bu).OPEN="a",bu.CLOSE="b",bu.ERROR="c",bu.MESSAGE="d",Jd.prototype.listen=Jd.prototype.va,qv.prototype.listenOnce=qv.prototype.wa,qv.prototype.getLastError=qv.prototype.Qa,qv.prototype.getLastErrorCode=qv.prototype.ua,qv.prototype.getStatus=qv.prototype.W,qv.prototype.getResponseJson=qv.prototype.Pa,qv.prototype.getResponseText=qv.prototype.$,qv.prototype.send=qv.prototype.ba;var Sy=Ag,Cy=H,Ay=Sn,Ny=Sg,ky=10,Ry=11,Py=Mg,Dy=qv,Oy=(xy.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},xy.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},xy);function xy(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}Oy.o=-1;var Ly=new fs("@firebase/firestore");function My(){return Ly.logLevel}function Fy(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Ly.logLevel<=ss.DEBUG&&(e=n.map(qy),Ly.debug.apply(Ly,no(["Firestore (8.3.1): "+t],e)))}function Uy(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Ly.logLevel<=ss.ERROR&&(e=n.map(qy),Ly.error.apply(Ly,no(["Firestore (8.3.1): "+t],e)))}function jy(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Ly.logLevel<=ss.WARN&&(e=n.map(qy),Ly.warn.apply(Ly,no(["Firestore (8.3.1): "+t],e)))}function qy(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function Vy(t){t="FIRESTORE (8.3.1) INTERNAL ASSERTION FAILED: "+(t=void 0===t?"Unexpected state":t);throw Uy(t),new Error(t)}function By(t){t||Vy()}var Ky=(Gy.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=function(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},Gy);function Gy(){}function Wy(t,e){return t<e?-1:e<t?1:0}function Hy(t,n,r){return t.length===n.length&&t.every(function(t,e){return r(t,n[e])})}function zy(t){return t+"\0"}function Qy(t){var e,n=0;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n++;return n}function Yy(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Xy(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Jy(t){return null==t}function $y(t){return 0===t&&1/t==-1/0}function Zy(t){return"number"==typeof t&&Number.isInteger(t)&&!$y(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var tm,em,nm,rm={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},im=(Xi(gm,nm=Error),gm),H=(Object.defineProperty(dm.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),dm.prototype.isEqual=function(t){return 0===dm.comparator(this,t)},dm.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof dm?t.forEach(function(t){e.push(t)}):e.push(t),this.construct(e)},dm.prototype.limit=function(){return this.offset+this.length},dm.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},dm.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},dm.prototype.firstSegment=function(){return this.segments[this.offset]},dm.prototype.lastSegment=function(){return this.get(this.length-1)},dm.prototype.get=function(t){return this.segments[this.offset+t]},dm.prototype.isEmpty=function(){return 0===this.length},dm.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},dm.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},dm.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},dm.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},dm.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},dm),om=(Xi(pm,em=H),pm.prototype.construct=function(t,e,n){return new pm(t,e,n)},pm.prototype.canonicalString=function(){return this.toArray().join("/")},pm.prototype.toString=function(){return this.canonicalString()},pm.fromString=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r];if(0<=o.indexOf("//"))throw new im(rm.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");n.push.apply(n,o.split("/").filter(function(t){return 0<t.length}))}return new pm(n)},pm.emptyPath=function(){return new pm([])},pm),sm=/^[_a-zA-Z][_a-zA-Z0-9]*$/,am=(Xi(fm,tm=H),fm.prototype.construct=function(t,e,n){return new fm(t,e,n)},fm.isValidIdentifier=function(t){return sm.test(t)},fm.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t=!fm.isValidIdentifier(t)?"`"+t+"`":t}).join(".")},fm.prototype.toString=function(){return this.canonicalString()},fm.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},fm.keyField=function(){return new fm(["__name__"])},fm.fromServerFormat=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new im(rm.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var s=t[r];if("\\"===s){if(r+1===t.length)throw new im(rm.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[r+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new im(rm.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=a,r+=2}else"`"===s?o=!o:"."!==s||o?n+=s:i(),r++}if(i(),o)throw new im(rm.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new fm(e)},fm.emptyPath=function(){return new fm([])},fm),um=(lm.fromPath=function(t){return new lm(om.fromString(t))},lm.fromName=function(t){return new lm(om.fromString(t).popFirst(5))},lm.prototype.hasCollectionId=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},lm.prototype.isEqual=function(t){return null!==t&&0===om.comparator(this.path,t.path)},lm.prototype.toString=function(){return this.path.toString()},lm.comparator=function(t,e){return om.comparator(t.path,e.path)},lm.isDocumentKey=function(t){return t.length%2==0},lm.fromSegments=function(t){return new lm(new om(t.slice()))},lm),cm=(hm.fromBase64String=function(t){return new hm(atob(t))},hm.fromUint8Array=function(t){return new hm(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t))},hm.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},hm.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},hm.prototype.approximateByteSize=function(){return 2*this.binaryString.length},hm.prototype.compareTo=function(t){return Wy(this.binaryString,t.binaryString)},hm.prototype.isEqual=function(t){return this.binaryString===t.binaryString},hm);function hm(t){this.binaryString=t}function lm(t){this.path=t}function fm(){return null!==tm&&tm.apply(this,arguments)||this}function pm(){return null!==em&&em.apply(this,arguments)||this}function dm(t,e,n){void 0===e?e=0:e>t.length&&Vy(),void 0===n?n=t.length-e:n>t.length-e&&Vy(),this.segments=t,this.offset=e,this.len=n}function gm(t,e){var n=this;return(n=nm.call(this,e)||this).code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}cm.EMPTY_BYTE_STRING=new cm("");var vm=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ym(t){if(By(!!t),"string"!=typeof t)return{seconds:mm(t.seconds),nanos:mm(t.nanos)};var e=0,n=vm.exec(t);By(!!n),n[1]&&(n=((n=n[1])+"000000000").substr(0,9),e=Number(n));t=new Date(t);return{seconds:Math.floor(t.getTime()/1e3),nanos:e}}function mm(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function bm(t){return"string"==typeof t?cm.fromBase64String(t):cm.fromUint8Array(t)}var wm=(_m.now=function(){return _m.fromMillis(Date.now())},_m.fromDate=function(t){return _m.fromMillis(t.getTime())},_m.fromMillis=function(t){var e=Math.floor(t/1e3);return new _m(e,1e6*(t-1e3*e))},_m.prototype.toDate=function(){return new Date(this.toMillis())},_m.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},_m.prototype._compareTo=function(t){return this.seconds===t.seconds?Wy(this.nanoseconds,t.nanoseconds):Wy(this.seconds,t.seconds)},_m.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},_m.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},_m.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},_m.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},_m);function _m(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new im(rm.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new im(rm.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new im(rm.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new im(rm.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function Im(t){return"server_timestamp"===(null===(t=((null===(t=null==t?void 0:t.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Tm(t){t=ym(t.mapValue.fields.__local_write_time__.timestampValue);return new wm(t.seconds,t.nanos)}function Em(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Im(t)?4:10:Vy()}function Sm(r,i){var t,e,n=Em(r);if(n!==Em(i))return!1;switch(n){case 0:return!0;case 1:return r.booleanValue===i.booleanValue;case 4:return Tm(r).isEqual(Tm(i));case 3:return function(t){if("string"==typeof r.timestampValue&&"string"==typeof t.timestampValue&&r.timestampValue.length===t.timestampValue.length)return r.timestampValue===t.timestampValue;var e=ym(r.timestampValue),t=ym(t.timestampValue);return e.seconds===t.seconds&&e.nanos===t.nanos}(i);case 5:return r.stringValue===i.stringValue;case 6:return e=i,bm(r.bytesValue).isEqual(bm(e.bytesValue));case 7:return r.referenceValue===i.referenceValue;case 8:return t=i,mm((e=r).geoPointValue.latitude)===mm(t.geoPointValue.latitude)&&mm(e.geoPointValue.longitude)===mm(t.geoPointValue.longitude);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return mm(t.integerValue)===mm(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){t=mm(t.doubleValue),e=mm(e.doubleValue);return t===e?$y(t)===$y(e):isNaN(t)&&isNaN(e)}return!1}(r,i);case 9:return Hy(r.arrayValue.values||[],i.arrayValue.values||[],Sm);case 10:return function(){var t,e=r.mapValue.fields||{},n=i.mapValue.fields||{};if(Qy(e)!==Qy(n))return!1;for(t in e)if(e.hasOwnProperty(t)&&(void 0===n[t]||!Sm(e[t],n[t])))return!1;return!0}();default:return Vy()}}function Cm(t,e){return void 0!==(t.values||[]).find(function(t){return Sm(t,e)})}function Am(t,e){var n,r,i,o=Em(t),s=Em(e);if(o!==s)return Wy(o,s);switch(o){case 0:return 0;case 1:return Wy(t.booleanValue,e.booleanValue);case 2:return r=e,i=mm(t.integerValue||t.doubleValue),r=mm(r.integerValue||r.doubleValue),i<r?-1:r<i?1:i===r?0:isNaN(i)?isNaN(r)?0:-1:1;case 3:return Nm(t.timestampValue,e.timestampValue);case 4:return Nm(Tm(t),Tm(e));case 5:return Wy(t.stringValue,e.stringValue);case 6:return function(t,e){t=bm(t),e=bm(e);return t.compareTo(e)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Wy(n[i],r[i]);if(0!==o)return o}return Wy(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return n=t.geoPointValue,i=e.geoPointValue,0!==(r=Wy(mm(n.latitude),mm(i.latitude)))?r:Wy(mm(n.longitude),mm(i.longitude));case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Am(n[i],r[i]);if(o)return o}return Wy(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Wy(r[s],o[s]);if(0!==a)return a;a=Am(n[r[s]],i[o[s]]);if(0!==a)return a}return Wy(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Vy()}}function Nm(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Wy(t,e);var n=ym(t),t=ym(e),e=Wy(n.seconds,t.seconds);return 0!==e?e:Wy(n.nanos,t.nanos)}function km(t){return function s(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var t=ym(t);return"time("+t.seconds+","+t.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?bm(t.bytesValue).toBase64():"referenceValue"in t?(e=t.referenceValue,um.fromName(e).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=s(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+s(t.fields[o])}return e+"}"}(t.mapValue):Vy();var e}(t)}function Rm(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Pm(t){return t&&"integerValue"in t}function Dm(t){return!!t&&"arrayValue"in t}function Om(t){return t&&"nullValue"in t}function xm(t){return t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Lm(t){return t&&"mapValue"in t}var Mm,Fm,Um,Sn=function(t,e){this.key=t,this.version=e},jm=(Xi(Wm,Um=Sn),Wm.prototype.field=function(t){return this.objectValue.field(t)},Wm.prototype.data=function(){return this.objectValue},Wm.prototype.toProto=function(){return this.objectValue.proto},Wm.prototype.isEqual=function(t){return t instanceof Wm&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations&&this.objectValue.isEqual(t.objectValue)},Wm.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.objectValue.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(Wm.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),Wm),qm=(Xi(Gm,Fm=Sn),Gm.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(Gm.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),Gm.prototype.isEqual=function(t){return t instanceof Gm&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Gm),Vm=(Xi(Km,Mm=Sn),Km.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(Km.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),Km.prototype.isEqual=function(t){return t instanceof Km&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Km),Bm=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function Km(){return null!==Mm&&Mm.apply(this,arguments)||this}function Gm(t,e,n){var r=this;return(r=Fm.call(this,t,e)||this).hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}function Wm(t,e,n,r){var i=this;return(i=Um.call(this,t,e)||this).objectValue=n,i.hasLocalMutations=!!r.hasLocalMutations,i.hasCommittedMutations=!!r.hasCommittedMutations,i}function Hm(t,e,n,r,i,o,s){return new Bm(t,e=void 0===e?null:e,n=void 0===n?[]:n,r=void 0===r?[]:r,i=void 0===i?null:i,o=void 0===o?null:o,s=void 0===s?null:s)}function zm(t){var e=t;return null===e.h&&(t=e.path.canonicalString(),null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(function(t){return(t=t).field.canonicalString()+t.op.toString()+km(t.value)}).join(","),t+="|ob:",t+=e.orderBy.map(function(t){return(t=t).field.canonicalString()+t.dir}).join(","),Jy(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=Ib(e.startAt)),e.endAt&&(t+="|ub:",t+=Ib(e.endAt)),e.h=t),e.h}function Qm(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n,r,i=0;i<t.orderBy.length;i++)if(n=t.orderBy[i],r=e.orderBy[i],n.dir!==r.dir||!n.field.isEqual(r.field))return!1;if(t.filters.length!==e.filters.length)return!1;for(var o,s,a=0;a<t.filters.length;a++)if(o=t.filters[a],s=e.filters[a],o.op!==s.op||!o.field.isEqual(s.field)||!Sm(o.value,s.value))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Sb(t.startAt,e.startAt)&&Sb(t.endAt,e.endAt)}function Ym(t){return um.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Xm,Jm=(Xi($m,Xm=function(){}),$m.create=function(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.l(t,e,n):new nb(t,e,n):"array-contains"===e?new pb(t,n):"in"===e?new db(t,n):"not-in"===e?new gb(t,n):"array-contains-any"===e?new vb(t,n):new $m(t,e,n)},$m.l=function(t,e,n){return new("in"===e?rb:ib)(t,n)},$m.prototype.matches=function(t){t=t.field(this.field);return"!="===this.op?null!==t&&this.m(Am(t,this.value)):null!==t&&Em(this.value)===Em(t)&&this.m(Am(t,this.value))},$m.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return 0<t;case">=":return 0<=t;default:return Vy()}},$m.prototype.g=function(){return 0<=["<","<=",">",">=","!=","not-in"].indexOf(this.op)},$m);function $m(t,e,n){var r=this;return(r=Xm.call(this)||this).field=t,r.op=e,r.value=n,r}var Zm,tb,eb,nb=(Xi(ab,eb=Jm),ab.prototype.matches=function(t){t=um.comparator(t.key,this.key);return this.m(t)},ab),rb=(Xi(sb,tb=Jm),sb.prototype.matches=function(e){return this.keys.some(function(t){return t.isEqual(e.key)})},sb),ib=(Xi(ob,Zm=Jm),ob.prototype.matches=function(e){return!this.keys.some(function(t){return t.isEqual(e.key)})},ob);function ob(t,e){var n=this;return(n=Zm.call(this,t,"not-in",e)||this).keys=ub(0,e),n}function sb(t,e){var n=this;return(n=tb.call(this,t,"in",e)||this).keys=ub(0,e),n}function ab(t,e,n){var r=this;return(r=eb.call(this,t,e,n)||this).key=um.fromName(n.referenceValue),r}function ub(t,e){return((null===(e=e.arrayValue)||void 0===e?void 0:e.values)||[]).map(function(t){return um.fromName(t.referenceValue)})}var cb,hb,lb,fb,pb=(Xi(_b,fb=Jm),_b.prototype.matches=function(t){t=t.field(this.field);return Dm(t)&&Cm(t.arrayValue,this.value)},_b),db=(Xi(wb,lb=Jm),wb.prototype.matches=function(t){t=t.field(this.field);return null!==t&&Cm(this.value.arrayValue,t)},wb),gb=(Xi(bb,hb=Jm),bb.prototype.matches=function(t){if(Cm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;t=t.field(this.field);return null!==t&&!Cm(this.value.arrayValue,t)},bb),vb=(Xi(mb,cb=Jm),mb.prototype.matches=function(t){var e=this,t=t.field(this.field);return!(!Dm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(function(t){return Cm(e.value.arrayValue,t)})},mb),yb=function(t,e){this.position=t,this.before=e};function mb(t,e){return cb.call(this,t,"array-contains-any",e)||this}function bb(t,e){return hb.call(this,t,"not-in",e)||this}function wb(t,e){return lb.call(this,t,"in",e)||this}function _b(t,e){return fb.call(this,t,"array-contains",e)||this}function Ib(t){return(t.before?"b":"a")+":"+t.position.map(km).join(",")}var Tb=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Eb(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i],r=o.field.isKeyField()?um.comparator(um.fromName(s.referenceValue),n.key):Am(s,n.field(o.field));if("desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Sb(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Sm(t.position[n],e.position[n]))return!1;return!0}var Cb=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null,this.startAt,this.endAt};function Ab(t,e,n,r,i,o,s,a){return new Cb(t,e,n,r,i,o,s,a)}function Nb(t){return new Cb(t)}function kb(t){return!Jy(t.limit)&&"F"===t.limitType}function Rb(t){return!Jy(t.limit)&&"L"===t.limitType}function Pb(t){return 0<t.explicitOrderBy.length?t.explicitOrderBy[0].field:null}function Db(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Ob(t){return null!==t.collectionGroup}function xb(t){var e=t;if(null===e.p){e.p=[];var n=Db(e),t=Pb(e);if(null!==n&&null===t)n.isKeyField()||e.p.push(new Tb(n)),e.p.push(new Tb(am.keyField(),"asc"));else{for(var r=!1,i=0,o=e.explicitOrderBy;i<o.length;i++){var s=o[i];e.p.push(s),s.field.isKeyField()&&(r=!0)}r||(n=0<e.explicitOrderBy.length?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",e.p.push(new Tb(am.keyField(),n)))}}return e.p}function Lb(t){var e=t;if(!e.T)if("F"===e.limitType)e.T=Hm(e.path,e.collectionGroup,xb(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=xb(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Tb(o.field,s))}var a=e.endAt?new yb(e.endAt.position,!e.endAt.before):null,t=e.startAt?new yb(e.startAt.position,!e.startAt.before):null;e.T=Hm(e.path,e.collectionGroup,n,e.filters,e.limit,a,t)}return e.T}function Mb(t,e,n){return new Cb(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Fb(t,e){return Qm(Lb(t),Lb(e))&&t.limitType===e.limitType}function Ub(t){return zm(Lb(t))+"|lt:"+t.limitType}function jb(t){return"Query(target="+(e=Lb(t),n=e.path.canonicalString(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),0<e.filters.length&&(n+=", filters: ["+e.filters.map(function(t){return(t=t).field.canonicalString()+" "+t.op+" "+km(t.value)}).join(", ")+"]"),Jy(e.limit)||(n+=", limit: "+e.limit),0<e.orderBy.length&&(n+=", orderBy: ["+e.orderBy.map(function(t){return(t=t).field.canonicalString()+" ("+t.dir+")"}).join(", ")+"]"),e.startAt&&(n+=", startAt: "+Ib(e.startAt)),e.endAt&&(n+=", endAt: "+Ib(e.endAt)),"Target("+n+")")+"; limitType="+t.limitType+")";var e,n}function qb(i,t){return e=i,n=t.key.path,(null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):um.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n))&&function(t){for(var e=0,n=i.explicitOrderBy;e<n.length;e++){var r=n[e];if(!r.field.isKeyField()&&null===t.field(r.field))return}return 1}(t)&&function(t){for(var e=0,n=i.filters;e<n.length;e++)if(!n[e].matches(t))return;return 1}(t)&&(n=t,(!(t=i).startAt||Eb(t.startAt,xb(t),n))&&(!t.endAt||!Eb(t.endAt,xb(t),n)));var e,n}function Vb(a){return function(t,e){for(var n=!1,r=0,i=xb(a);r<i.length;r++){var o=i[r],s=function(t,r,e){var n=t.field.isKeyField()?um.comparator(r.key,e.key):function(t,e){var n=r.field(t),t=e.field(t);return null!==n&&null!==t?Am(n,t):Vy()}(t.field,e);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Vy()}}(o,t,e);if(0!==s)return s;n=n||o.field.isKeyField()}return 0}}var Bb=(Yb.fromTimestamp=function(t){return new Yb(t)},Yb.min=function(){return new Yb(new wm(0,0))},Yb.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},Yb.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},Yb.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},Yb.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},Yb.prototype.toTimestamp=function(){return this.timestamp},Yb),Kb=(Qb.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},Qb.prototype.isEqual=function(t){return Hy(this.fields,t.fields,function(t,e){return t.isEqual(e)})},Qb),Gb=(zb.empty=function(){return new zb({mapValue:{}})},zb.prototype.field=function(t){if(t.isEmpty())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Lm(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},zb.prototype.isEqual=function(t){return Sm(this.proto,t.proto)},zb),Wb=(Hb.prototype.set=function(t,e){return this.R(t,e),this},Hb.prototype.delete=function(t){return this.R(t,null),this},Hb.prototype.R=function(t,e){for(var n=this.A,r=0;r<t.length-1;++r)var i=t.get(r),o=n.get(i),n=(o instanceof Map||(o=o&&10===Em(o)?new Map(Object.entries(o.mapValue.fields||{})):new Map,n.set(i,o)),o);n.set(t.lastSegment(),e)},Hb.prototype.v=function(){var t=this.P(am.emptyPath(),this.A);return null!=t?new Gb(t):this.I},Hb.prototype.P=function(r,t){var i=this,o=!1,e=this.I.field(r),s=Lm(e)?Object.assign({},e.mapValue.fields):{};return t.forEach(function(t,e){var n;t instanceof Map?null!=(n=i.P(r.child(e),t))&&(s[e]=n,o=!0):null!==t?(s[e]=t,o=!0):s.hasOwnProperty(e)&&(delete s[e],o=!0)}),o?{mapValue:{fields:s}}:null},Hb);function Hb(t){void 0===t&&(t=Gb.empty()),this.I=t,this.A=new Map}function zb(t){this.proto=t}function Qb(t){(this.fields=t).sort(am.comparator)}function Yb(t){this.timestamp=t}function Xb(t,e){if(t.V){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$y(e)?"-0":e}}function Jb(t){return{integerValue:""+t}}function $b(t,e){return Zy(e)?Jb(e):Xb(t,e)}H=function(){this._=void 0};function Zb(t,e){return t instanceof fw?Pm(t=e)||t&&"doubleValue"in t?e:{integerValue:0}:null}var tw,ew,nw=(Xi(ow,ew=H),ow),rw=(Xi(iw,tw=H),iw);function iw(t){var e=this;return(e=tw.call(this)||this).elements=t,e}function ow(){return null!==ew&&ew.apply(this,arguments)||this}function sw(t,e){for(var n=gw(e),r=0,i=t.elements;r<i.length;r++)!function(e){n.some(function(t){return Sm(t,e)})||n.push(e)}(i[r]);return{arrayValue:{values:n}}}var aw,uw=(Xi(cw,aw=H),cw);function cw(t){var e=this;return(e=aw.call(this)||this).elements=t,e}function hw(t,e){for(var n=gw(e),r=0,i=t.elements;r<i.length;r++)!function(e){n=n.filter(function(t){return!Sm(t,e)})}(i[r]);return{arrayValue:{values:n}}}var lw,fw=(Xi(pw,lw=H),pw);function pw(t,e){var n=this;return(n=lw.call(this)||this).D=t,n.S=e,n}function dw(t){return mm(t.integerValue||t.doubleValue)}function gw(t){return Dm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function vw(t,e){this.version=t,this.transformResults=e}var yw=function(t,e){this.field=t,this.transform=e},mw=(bw.none=function(){return new bw},bw.exists=function(t){return new bw(void 0,t)},bw.updateTime=function(t){return new bw(t)},Object.defineProperty(bw.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),bw.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},bw);function bw(t,e){this.updateTime=t,this.exists=e}function ww(t,e){return void 0!==t.updateTime?e instanceof jm&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof jm}Sn=function(){};function _w(t,e,n){return t instanceof Cw?function(t,e,n){if(!ww(t.precondition,e))return e;var r=t.value,n=Dw(t.fieldTransforms,n,e),r=Ow(t.fieldTransforms,r,n),e=Tw(e);return new jm(t.key,e,r,{hasLocalMutations:!0})}(t,e,n):t instanceof Aw?function(t,e,n){if(!ww(t.precondition,e))return e;var r=Tw(e),e=Rw(t,e,Dw(t.fieldTransforms,n,e));return new jm(t.key,r,e,{hasLocalMutations:!0})}(t,e,n):(e=e,ww((t=t).precondition,e)?new qm(t.key,Bb.min()):e)}function Iw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(n=t.fieldTransforms,r=e.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&Hy(n,r,function(t,e){return e=e,(t=t).field.isEqual(e.field)&&(t=t.transform,e=e.transform,t instanceof rw&&e instanceof rw||t instanceof uw&&e instanceof uw?Hy(t.elements,e.elements,Sm):t instanceof fw&&e instanceof fw?Sm(t.S,e.S):t instanceof nw&&e instanceof nw)})))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,r}function Tw(t){return t instanceof jm?t.version:Bb.min()}var Ew,Sw,Cw=(Xi(kw,Sw=Sn),kw),Aw=(Xi(Nw,Ew=Sn),Nw);function Nw(t,e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=Ew.call(this)||this).key=t,o.data=e,o.fieldMask=n,o.precondition=r,o.fieldTransforms=i,o.type=1,o}function kw(t,e,n,r){void 0===r&&(r=[]);var i=this;return(i=Sw.call(this)||this).key=t,i.value=e,i.precondition=n,i.fieldTransforms=r,i.type=0,i}function Rw(t,e,n){var r,i,o;return i=t,e=r=e instanceof jm?e.data():Gb.empty(),o=new Wb(e),i.fieldMask.fields.forEach(function(t){var e;t.isEmpty()||(null!==(e=i.data.field(t))?o.set(t,e):o.delete(t))}),r=o.v(),Ow(t.fieldTransforms,r,n)}function Pw(t,e,n){var r=[];By(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof jm&&(a=e.field(o.field)),r.push((o=s,s=a,a=n[i],o instanceof rw?sw(o,s):o instanceof uw?hw(o,s):a))}return r}function Dw(t,e,n){for(var r,i=[],o=0,s=t;o<s.length;o++){var a=s[o],u=a.transform,c=null;n instanceof jm&&(c=n.field(a.field)),i.push((r=c,a=e,c=void 0,(u=u)instanceof nw?(c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}},r&&(c.fields.__previous_value__=r),{mapValue:c}):u instanceof rw?sw(u,r):u instanceof uw?hw(u,r):(u=Zb(c=u,r),r=dw(u)+dw(c.S),Pm(u)&&Pm(c.S)?Jb(r):Xb(c.D,r))))}return i}function Ow(t,e,n){for(var r=new Wb(e),i=0;i<t.length;i++){var o=t[i];r.set(o.field,n[i])}return r.v()}function xw(t){this.count=t}var Lw,Mw,Fw,Uw=(Xi(Vw,Fw=Sn),Vw),jw=(Xi(qw,Mw=Sn),qw);function qw(t,e){var n=this;return(n=Mw.call(this)||this).key=t,n.precondition=e,n.type=3,n.fieldTransforms=[],n}function Vw(t,e){var n=this;return(n=Fw.call(this)||this).key=t,n.precondition=e,n.type=2,n.fieldTransforms=[],n}function Bw(t){switch(t){case rm.OK:return Vy(),0;case rm.CANCELLED:case rm.UNKNOWN:case rm.DEADLINE_EXCEEDED:case rm.RESOURCE_EXHAUSTED:case rm.INTERNAL:case rm.UNAVAILABLE:case rm.UNAUTHENTICATED:return;case rm.INVALID_ARGUMENT:case rm.NOT_FOUND:case rm.ALREADY_EXISTS:case rm.PERMISSION_DENIED:case rm.FAILED_PRECONDITION:case rm.ABORTED:case rm.OUT_OF_RANGE:case rm.UNIMPLEMENTED:case rm.DATA_LOSS:return 1;default:return Vy(),0}}function Kw(t){if(void 0===t)return Uy("GRPC error has no .code"),rm.UNKNOWN;switch(t){case Lw.OK:return rm.OK;case Lw.CANCELLED:return rm.CANCELLED;case Lw.UNKNOWN:return rm.UNKNOWN;case Lw.DEADLINE_EXCEEDED:return rm.DEADLINE_EXCEEDED;case Lw.RESOURCE_EXHAUSTED:return rm.RESOURCE_EXHAUSTED;case Lw.INTERNAL:return rm.INTERNAL;case Lw.UNAVAILABLE:return rm.UNAVAILABLE;case Lw.UNAUTHENTICATED:return rm.UNAUTHENTICATED;case Lw.INVALID_ARGUMENT:return rm.INVALID_ARGUMENT;case Lw.NOT_FOUND:return rm.NOT_FOUND;case Lw.ALREADY_EXISTS:return rm.ALREADY_EXISTS;case Lw.PERMISSION_DENIED:return rm.PERMISSION_DENIED;case Lw.FAILED_PRECONDITION:return rm.FAILED_PRECONDITION;case Lw.ABORTED:return rm.ABORTED;case Lw.OUT_OF_RANGE:return rm.OUT_OF_RANGE;case Lw.UNIMPLEMENTED:return rm.UNIMPLEMENTED;case Lw.DATA_LOSS:return rm.DATA_LOSS;default:return Vy()}}(H=Lw=Lw||{})[H.OK=0]="OK",H[H.CANCELLED=1]="CANCELLED",H[H.UNKNOWN=2]="UNKNOWN",H[H.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",H[H.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",H[H.NOT_FOUND=5]="NOT_FOUND",H[H.ALREADY_EXISTS=6]="ALREADY_EXISTS",H[H.PERMISSION_DENIED=7]="PERMISSION_DENIED",H[H.UNAUTHENTICATED=16]="UNAUTHENTICATED",H[H.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",H[H.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",H[H.ABORTED=10]="ABORTED",H[H.OUT_OF_RANGE=11]="OUT_OF_RANGE",H[H.UNIMPLEMENTED=12]="UNIMPLEMENTED",H[H.INTERNAL=13]="INTERNAL",H[H.UNAVAILABLE=14]="UNAVAILABLE",H[H.DATA_LOSS=15]="DATA_LOSS";var Gw=(Yw.prototype.insert=function(t,e){return new Yw(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Hw.BLACK,null,null))},Yw.prototype.remove=function(t){return new Yw(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Hw.BLACK,null,null))},Yw.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},Yw.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},Yw.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(Yw.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),Yw.prototype.minKey=function(){return this.root.minKey()},Yw.prototype.maxKey=function(){return this.root.maxKey()},Yw.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},Yw.prototype.forEach=function(n){this.inorderTraversal(function(t,e){return n(t,e),!1})},Yw.prototype.toString=function(){var n=[];return this.inorderTraversal(function(t,e){return n.push(t+":"+e),!1}),"{"+n.join(", ")+"}"},Yw.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},Yw.prototype.getIterator=function(){return new Ww(this.root,null,this.comparator,!1)},Yw.prototype.getIteratorFrom=function(t){return new Ww(this.root,t,this.comparator,!1)},Yw.prototype.getReverseIterator=function(){return new Ww(this.root,null,this.comparator,!0)},Yw.prototype.getReverseIteratorFrom=function(t){return new Ww(this.root,t,this.comparator,!0)},Yw),Ww=(Qw.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},Qw.prototype.hasNext=function(){return 0<this.nodeStack.length},Qw.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},Qw),Hw=(zw.prototype.copy=function(t,e,n,r,i){return new zw(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},zw.prototype.isEmpty=function(){return!1},zw.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},zw.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},zw.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},zw.prototype.minKey=function(){return this.min().key},zw.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},zw.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},zw.prototype.removeMin=function(){if(this.left.isEmpty())return zw.EMPTY;var t=this;return(t=(t=!t.left.isRed()&&!t.left.left.isRed()?t.moveRedLeft():t).copy(null,null,null,t.left.removeMin(),null)).fixUp()},zw.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r=(r=!(r.left.isEmpty()||r.left.isRed()||r.left.left.isRed())?r.moveRedLeft():r).copy(null,null,null,r.left.remove(t,e),null);else{if(0===e(t,(r=!((r=r.left.isRed()?r.rotateRight():r).right.isEmpty()||r.right.isRed()||r.right.left.isRed())?r.moveRedRight():r).key)){if(r.right.isEmpty())return zw.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()},zw.prototype.isRed=function(){return this.color},zw.prototype.fixUp=function(){var t=this;return t=(t=(t=t.right.isRed()&&!t.left.isRed()?t.rotateLeft():t).left.isRed()&&t.left.left.isRed()?t.rotateRight():t).left.isRed()&&t.right.isRed()?t.colorFlip():t},zw.prototype.moveRedLeft=function(){var t=this.colorFlip();return t=t.right.left.isRed()?(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip():t},zw.prototype.moveRedRight=function(){var t=this.colorFlip();return t=t.left.left.isRed()?(t=t.rotateRight()).colorFlip():t},zw.prototype.rotateLeft=function(){var t=this.copy(null,null,zw.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},zw.prototype.rotateRight=function(){var t=this.copy(null,null,zw.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},zw.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},zw.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},zw.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Vy();if(this.right.isRed())throw Vy();var t=this.left.check();if(t!==this.right.check())throw Vy();return t+(this.isRed()?0:1)},zw);function zw(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:zw.RED,this.left=null!=r?r:zw.EMPTY,this.right=null!=i?i:zw.EMPTY,this.size=this.left.size+1+this.right.size}function Qw(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}function Yw(t,e){this.comparator=t,this.root=e||Hw.EMPTY}function Xw(){this.size=0}Hw.EMPTY=null,Hw.RED=!0,Hw.BLACK=!1,Hw.EMPTY=(Object.defineProperty(Xw.prototype,"key",{get:function(){throw Vy()},enumerable:!1,configurable:!0}),Object.defineProperty(Xw.prototype,"value",{get:function(){throw Vy()},enumerable:!1,configurable:!0}),Object.defineProperty(Xw.prototype,"color",{get:function(){throw Vy()},enumerable:!1,configurable:!0}),Object.defineProperty(Xw.prototype,"left",{get:function(){throw Vy()},enumerable:!1,configurable:!0}),Object.defineProperty(Xw.prototype,"right",{get:function(){throw Vy()},enumerable:!1,configurable:!0}),Xw.prototype.copy=function(t,e,n,r,i){return this},Xw.prototype.insert=function(t,e,n){return new Hw(t,e)},Xw.prototype.remove=function(t,e){return this},Xw.prototype.isEmpty=function(){return!0},Xw.prototype.inorderTraversal=function(t){return!1},Xw.prototype.reverseTraversal=function(t){return!1},Xw.prototype.minKey=function(){return null},Xw.prototype.maxKey=function(){return null},Xw.prototype.isRed=function(){return!1},Xw.prototype.checkMaxDepth=function(){return!0},Xw.prototype.check=function(){return 0},new Xw);var Jw=(e_.prototype.has=function(t){return null!==this.data.get(t)},e_.prototype.first=function(){return this.data.minKey()},e_.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e_.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),e_.prototype.indexOf=function(t){return this.data.indexOf(t)},e_.prototype.forEach=function(n){this.data.inorderTraversal(function(t,e){return n(t),!1})},e_.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(0<=this.comparator(r.key,t[1]))return;e(r.key)}},e_.prototype.forEachWhile=function(t,e){for(var n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},e_.prototype.firstAfterOrEqual=function(t){t=this.data.getIteratorFrom(t);return t.hasNext()?t.getNext().key:null},e_.prototype.getIterator=function(){return new $w(this.data.getIterator())},e_.prototype.getIteratorFrom=function(t){return new $w(this.data.getIteratorFrom(t))},e_.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},e_.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},e_.prototype.isEmpty=function(){return this.data.isEmpty()},e_.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},e_.prototype.isEqual=function(t){if(!(t instanceof e_))return!1;if(this.size!==t.size)return!1;for(var e=this.data.getIterator(),n=t.data.getIterator();e.hasNext();){var r=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(r,i))return!1}return!0},e_.prototype.toArray=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},e_.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},e_.prototype.copy=function(t){var e=new e_(this.comparator);return e.data=t,e},e_),$w=(t_.prototype.getNext=function(){return this.iter.getNext().key},t_.prototype.hasNext=function(){return this.iter.hasNext()},t_),Zw=new Gw(um.comparator);function t_(t){this.iter=t}function e_(t){this.comparator=t,this.data=new Gw(this.comparator)}var n_=new Gw(um.comparator);var r_=new Gw(um.comparator);var i_=new Jw(um.comparator);function o_(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=i_,r=0,i=t;r<i.length;r++)var o=i[r],n=n.add(o);return n}var s_=new Jw(Wy);var a_=(y_.createSynthesizedRemoteEventForCurrentChange=function(t,e){var n=new Map;return n.set(t,u_.createSynthesizedTargetChangeForCurrentChange(t,e)),new y_(Bb.min(),n,s_,Zw,o_())},y_),u_=(v_.createSynthesizedTargetChangeForCurrentChange=function(t,e){return new v_(cm.EMPTY_BYTE_STRING,e,o_(),o_(),o_())},v_),c_=function(t,e,n,r){this.C=t,this.removedTargetIds=e,this.key=n,this.N=r},h_=function(t,e){this.targetId=t,this.$=e},l_=function(t,e,n,r){void 0===n&&(n=cm.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},f_=(Object.defineProperty(g_.prototype,"current",{get:function(){return this.M},enumerable:!1,configurable:!0}),Object.defineProperty(g_.prototype,"resumeToken",{get:function(){return this.k},enumerable:!1,configurable:!0}),Object.defineProperty(g_.prototype,"B",{get:function(){return 0!==this.F},enumerable:!1,configurable:!0}),Object.defineProperty(g_.prototype,"q",{get:function(){return this.L},enumerable:!1,configurable:!0}),g_.prototype.U=function(t){0<t.approximateByteSize()&&(this.L=!0,this.k=t)},g_.prototype.K=function(){var n=o_(),r=o_(),i=o_();return this.O.forEach(function(t,e){switch(e){case 0:n=n.add(t);break;case 2:r=r.add(t);break;case 1:i=i.add(t);break;default:Vy()}}),new u_(this.k,this.M,n,r,i)},g_.prototype.W=function(){this.L=!1,this.O=b_()},g_.prototype.j=function(t,e){this.L=!0,this.O=this.O.insert(t,e)},g_.prototype.G=function(t){this.L=!0,this.O=this.O.remove(t)},g_.prototype.H=function(){this.F+=1},g_.prototype.J=function(){--this.F},g_.prototype.Y=function(){this.L=!0,this.M=!0},g_),p_=(d_.prototype.st=function(t){for(var e=0,n=t.C;e<n.length;e++){var r=n[e];t.N instanceof jm?this.it(r,t.N):t.N instanceof qm&&this.rt(r,t.key,t.N)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.rt(r,t.key,t.N)},d_.prototype.ot=function(n){var r=this;this.forEachTarget(n,function(t){var e=r.ct(t);switch(n.state){case 0:r.at(t)&&e.U(n.resumeToken);break;case 1:e.J(),e.B||e.W(),e.U(n.resumeToken);break;case 2:e.J(),e.B||r.removeTarget(t);break;case 3:r.at(t)&&(e.Y(),e.U(n.resumeToken));break;case 4:r.at(t)&&(r.ut(t),e.U(n.resumeToken));break;default:Vy()}})},d_.prototype.forEachTarget=function(t,n){var r=this;0<t.targetIds.length?t.targetIds.forEach(n):this.Z.forEach(function(t,e){r.at(e)&&n(e)})},d_.prototype.ht=function(t){var e=t.targetId,n=t.$.count,t=this.lt(e);t&&(Ym(t=t.target)?0===n?(t=new um(t.path),this.rt(e,t,new qm(t,Bb.min()))):By(1===n):this.ft(e)!==n&&(this.ut(e),this.nt=this.nt.add(e)))},d_.prototype.dt=function(r){var i=this,o=new Map;this.Z.forEach(function(t,e){var n=i.lt(e);n&&(t.current&&Ym(n.target)&&(n=new um(n.target.path),null!==i.tt.get(n)||i.wt(e,n)||i.rt(e,n,new qm(n,r))),t.q&&(o.set(e,t.K()),t.W()))});var s=o_();this.et.forEach(function(t,e){var n=!0;e.forEachWhile(function(t){t=i.lt(t);return!t||2===t.purpose||(n=!1)}),n&&(s=s.add(t))});var t=new a_(r,o,this.nt,this.tt,s);return this.tt=Zw,this.et=m_(),this.nt=new Jw(Wy),t},d_.prototype.it=function(t,e){var n;this.at(t)&&(n=this.wt(t,e.key)?2:0,this.ct(t).j(e.key,n),this.tt=this.tt.insert(e.key,e),this.et=this.et.insert(e.key,this._t(e.key).add(t)))},d_.prototype.rt=function(t,e,n){var r;this.at(t)&&(r=this.ct(t),this.wt(t,e)?r.j(e,1):r.G(e),this.et=this.et.insert(e,this._t(e).delete(t)),n&&(this.tt=this.tt.insert(e,n)))},d_.prototype.removeTarget=function(t){this.Z.delete(t)},d_.prototype.ft=function(t){var e=this.ct(t).K();return this.X.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},d_.prototype.H=function(t){this.ct(t).H()},d_.prototype.ct=function(t){var e=this.Z.get(t);return e||(e=new f_,this.Z.set(t,e)),e},d_.prototype._t=function(t){var e=this.et.get(t);return e||(e=new Jw(Wy),this.et=this.et.insert(t,e)),e},d_.prototype.at=function(t){var e=null!==this.lt(t);return e||Fy("WatchChangeAggregator","Detected inactive target",t),e},d_.prototype.lt=function(t){var e=this.Z.get(t);return e&&e.B?null:this.X.yt(t)},d_.prototype.ut=function(e){var n=this;this.Z.set(e,new f_),this.X.getRemoteKeysForTarget(e).forEach(function(t){n.rt(e,t,null)})},d_.prototype.wt=function(t,e){return this.X.getRemoteKeysForTarget(t).has(e)},d_);function d_(t){this.X=t,this.Z=new Map,this.tt=Zw,this.et=m_(),this.nt=new Jw(Wy)}function g_(){this.F=0,this.O=b_(),this.k=cm.EMPTY_BYTE_STRING,this.M=!1,this.L=!0}function v_(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}function y_(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}function m_(){return new Gw(um.comparator)}function b_(){return new Gw(um.comparator)}var w_={asc:"ASCENDING",desc:"DESCENDING"},__={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},I_=function(t,e){this.databaseId=t,this.V=e};function T_(t,e){return t.V?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function E_(t,e){return t.V?e.toBase64():e.toUint8Array()}function S_(t){return By(!!t),Bb.fromTimestamp((t=ym(t),new wm(t.seconds,t.nanos)))}function C_(t,e){return new om(["projects",t.projectId,"databases",t.database]).child("documents").child(e).canonicalString()}function A_(t){t=om.fromString(t);return By(z_(t)),t}function N_(t,e){return C_(t.databaseId,e.path)}function k_(t,e){e=A_(e);if(e.get(1)!==t.databaseId.projectId)throw new im(rm.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+t.databaseId.projectId);if(e.get(3)!==t.databaseId.database)throw new im(rm.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+t.databaseId.database);return new um(O_(e))}function R_(t,e){return C_(t.databaseId,e)}function P_(t){t=A_(t);return 4===t.length?om.emptyPath():O_(t)}function D_(t){return new om(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function O_(t){return By(4<t.length&&"documents"===t.get(4)),t.popFirst(5)}function x_(t,e,n){return{name:N_(t,e),fields:n.proto.mapValue.fields}}function L_(t,e,n){var r=k_(t,e.name),t=S_(e.updateTime),e=new Gb({mapValue:{fields:e.fields}});return new jm(r,t,e,{hasCommittedMutations:!!n})}function M_(t,e){var n,r,i;if(e instanceof Cw)n={update:x_(t,e.key,e.value)};else if(e instanceof Uw)n={delete:N_(t,e.key)};else if(e instanceof Aw)n={update:x_(t,e.key,e.data),updateMask:(i=e.fieldMask,r=[],i.fields.forEach(function(t){return r.push(t.canonicalString())}),{fieldPaths:r})};else{if(!(e instanceof jw))return Vy();n={verify:N_(t,e.key)}}return 0<e.fieldTransforms.length&&(n.updateTransforms=e.fieldTransforms.map(function(t){var e=t.transform;if(e instanceof nw)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(e instanceof rw)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:e.elements}};if(e instanceof uw)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:e.elements}};if(e instanceof fw)return{fieldPath:t.field.canonicalString(),increment:e.S};throw Vy()})),e.precondition.isNone||(n.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:(e=t,t=i.updateTime,T_(e,t.toTimestamp()))}:void 0!==i.exists?{exists:i.exists}:Vy()),n}function F_(e,t){var n=t.currentDocument?void 0!==(s=t.currentDocument).updateTime?mw.updateTime(S_(s.updateTime)):void 0!==s.exists?mw.exists(s.exists):mw.none():mw.none(),r=t.updateTransforms?t.updateTransforms.map(function(t){return function(t,e){var n,r=null;"setToServerValue"in e?(By("REQUEST_TIME"===e.setToServerValue),r=new nw):"appendMissingElements"in e?(n=e.appendMissingElements.values||[],r=new rw(n)):"removeAllFromArray"in e?(n=e.removeAllFromArray.values||[],r=new uw(n)):"increment"in e?r=new fw(t,e.increment):Vy();e=am.fromServerFormat(e.fieldPath);return new yw(e,r)}(e,t)}):[];if(t.update){t.update.name;var i=k_(e,t.update.name),o=new Gb({mapValue:{fields:t.update.fields}});if(t.updateMask){var s=(s=t.updateMask.fieldPaths||[],new Kb(s.map(function(t){return am.fromServerFormat(t)})));return new Aw(i,o,s,n,r)}return new Cw(i,o,n,r)}if(t.delete){r=k_(e,t.delete);return new Uw(r,n)}if(t.verify){t=k_(e,t.verify);return new jw(t,n)}return Vy()}function U_(t,e){return{documents:[R_(t,e.path)]}}function j_(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=R_(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=R_(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);r=function(t){if(0!==t.length){t=t.map(function(t){if("=="===t.op){if(xm(t.value))return{unaryFilter:{field:K_(t.field),op:"IS_NAN"}};if(Om(t.value))return{unaryFilter:{field:K_(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(xm(t.value))return{unaryFilter:{field:K_(t.field),op:"IS_NOT_NAN"}};if(Om(t.value))return{unaryFilter:{field:K_(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:K_(t.field),op:(e=t.op,__[e]),value:t.value}};var e});return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(e.filters);r&&(n.structuredQuery.where=r);r=function(t){if(0!==t.length)return t.map(function(t){return{field:K_((t=t).field),direction:(t=t.dir,w_[t])}})}(e.orderBy);r&&(n.structuredQuery.orderBy=r);r=e.limit,r=t.V||Jy(r)?r:{value:r};return null!==r&&(n.structuredQuery.limit=r),e.startAt&&(n.structuredQuery.startAt=V_(e.startAt)),e.endAt&&(n.structuredQuery.endAt=V_(e.endAt)),n}function q_(t){var e=P_(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;0<r&&(By(1===r),(a=n.from[0]).allDescendants?i=a.collectionId:e=e.child(a.collectionId));var o=[];n.where&&(o=function e(t){return t?void 0!==t.unaryFilter?[H_(t)]:void 0!==t.fieldFilter?[W_(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e(t)}).reduce(function(t,e){return t.concat(e)}):Vy():[]}(n.where));var s=[],t=null,r=null,a=null;return Ab(e,i,s=n.orderBy?n.orderBy.map(function(t){return new Tb(G_((e=t).field),function(){switch(e.direction){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}());var e}):s,o,t=n.limit?Jy(o="object"==typeof(o=n.limit)?o.value:o)?null:o:t,"F",r=n.startAt?B_(n.startAt):r,a=n.endAt?B_(n.endAt):a)}function V_(t){return{before:t.before,values:t.position}}function B_(t){var e=!!t.before,t=t.values||[];return new yb(t,e)}function K_(t){return{fieldPath:t.canonicalString()}}function G_(t){return am.fromServerFormat(t.fieldPath)}function W_(t){return Jm.create(G_(t.fieldFilter.field),function(){switch(t.fieldFilter.op){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Vy()}}(),t.fieldFilter.value)}function H_(t){switch(t.unaryFilter.op){case"IS_NAN":var e=G_(t.unaryFilter.field);return Jm.create(e,"==",{doubleValue:NaN});case"IS_NULL":e=G_(t.unaryFilter.field);return Jm.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var n=G_(t.unaryFilter.field);return Jm.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":n=G_(t.unaryFilter.field);return Jm.create(n,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Vy()}}function z_(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)}function Q_(t){for(var e="",n=0;n<t.length;n++)0<e.length&&(e=Y_(e)),e=function(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}(t.get(n),e);return Y_(e)}function Y_(t){return t+""}function X_(t){var e=t.length;if(By(2<=e),2===e)return By(""===t.charAt(0)&&""===t.charAt(1)),om.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||n<s)&&Vy(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Vy()}o=s+2}return new om(r)}function J_(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}var $_=function(t,e){this.seconds=t,this.nanoseconds=e};J_.store="owner",J_.key="owner";function Z_(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}Z_.store="mutationQueues",Z_.keyPath="userId";function tI(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}tI.store="mutations",tI.keyPath="batchId",tI.userMutationsIndex="userMutationsIndex",tI.userMutationsKeyPath=["userId","batchId"];var eI=(nI.prefixForUser=function(t){return[t]},nI.prefixForPath=function(t,e){return[t,Q_(e)]},nI.key=function(t,e,n){return[t,Q_(e),n]},nI);function nI(){}eI.store="documentMutations",eI.PLACEHOLDER=new eI;function rI(t,e){this.path=t,this.readTime=e}function iI(t,e){this.path=t,this.version=e}var oI=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};oI.store="remoteDocuments",oI.readTimeIndex="readTimeIndex",oI.readTimeIndexPath="readTime",oI.collectionReadTimeIndex="collectionReadTimeIndex",oI.collectionReadTimeIndexPath=["parentPath","readTime"];function sI(t){this.byteSize=t}sI.store="remoteDocumentGlobal",sI.key="remoteDocumentGlobalKey";function aI(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s}aI.store="targets",aI.keyPath="targetId",aI.queryTargetsIndexName="queryTargetsIndex",aI.queryTargetsKeyPath=["canonicalId","targetId"];var uI=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};uI.store="targetDocuments",uI.keyPath=["targetId","path"],uI.documentTargetsIndex="documentTargetsIndex",uI.documentTargetsKeyPath=["path","targetId"];function cI(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}cI.key="targetGlobalKey",cI.store="targetGlobal";function hI(t,e){this.collectionId=t,this.parent=e}hI.store="collectionParents",hI.keyPath=["collectionId","parent"];function lI(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r}lI.store="clientMetadata",lI.keyPath="clientId";function fI(t,e,n){this.bundleId=t,this.createTime=e,this.version=n}fI.store="bundles",fI.keyPath="bundleId";function pI(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n}pI.store="namedQueries",pI.keyPath="name";var dI,gI=no(no([],no(no([],no(no([],no(no([],[Z_.store,tI.store,eI.store,oI.store,aI.store,J_.store,cI.store,uI.store]),[lI.store])),[sI.store])),[hI.store])),[fI.store,pI.store]),vI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Sn=(NI.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},NI.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},NI),yI=function(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})},mI=(AI.prototype.catch=function(t){return this.next(void 0,t)},AI.prototype.next=function(r,i){var o=this;return this.callbackAttached&&Vy(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(r,this.result):new AI(function(e,n){o.nextCallback=function(t){o.wrapSuccess(r,t).next(e,n)},o.catchCallback=function(t){o.wrapFailure(i,t).next(e,n)}})},AI.prototype.toPromise=function(){var n=this;return new Promise(function(t,e){n.next(t,e)})},AI.prototype.wrapUserFunction=function(t){try{var e=t();return e instanceof AI?e:AI.resolve(e)}catch(t){return AI.reject(t)}},AI.prototype.wrapSuccess=function(t,e){return t?this.wrapUserFunction(function(){return t(e)}):AI.resolve(e)},AI.prototype.wrapFailure=function(t,e){return t?this.wrapUserFunction(function(){return t(e)}):AI.reject(e)},AI.resolve=function(n){return new AI(function(t,e){t(n)})},AI.reject=function(n){return new AI(function(t,e){e(n)})},AI.waitFor=function(t){return new AI(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(t){return n(t)})}),o=!0,i===r&&e()})},AI.or=function(t){for(var n=AI.resolve(!1),e=0,r=t;e<r.length;e++)!function(e){n=n.next(function(t){return t?AI.resolve(t):e()})}(r[e]);return n},AI.forEach=function(t,n){var r=this,i=[];return t.forEach(function(t,e){i.push(n.call(r,t,e))}),this.waitFor(i)},AI),bI=(CI.open=function(t,e,n,r){try{return new CI(e,t.transaction(r,n))}catch(t){throw new II(e,t)}},Object.defineProperty(CI.prototype,"Et",{get:function(){return this.gt.promise},enumerable:!1,configurable:!0}),CI.prototype.abort=function(t){t&&this.gt.reject(t),this.aborted||(Fy("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},CI.prototype.store=function(t){t=this.transaction.objectStore(t);return new RI(t)},CI),wI=(SI.delete=function(t){return Fy("SimpleDb","Removing database:",t),DI(window.indexedDB.deleteDatabase(t)).toPromise()},SI.At=function(){if("undefined"==typeof indexedDB)return!1;if(SI.Rt())return!0;var t=po(),e=SI.It(t),n=0<e&&e<10,e=SI.bt(t),e=0<e&&e<4.5;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||n||e)},SI.Rt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.vt)},SI.Pt=function(t,e){return t.store(e)},SI.It=function(t){t=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),t=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(t)},SI.bt=function(t){t=t.match(/Android ([\d.]+)/i),t=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(t)},SI.prototype.Vt=function(o){return $i(this,void 0,void 0,function(){var e,i=this;return Zi(this,function(t){switch(t.label){case 0:return this.db?[3,2]:(Fy("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,n){var r=indexedDB.open(i.name,i.version);r.onsuccess=function(t){t=t.target.result;e(t)},r.onblocked=function(){n(new II(o,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=function(t){t=t.target.error;"VersionError"===t.name?n(new im(rm.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):n(new II(o,t))},r.onupgradeneeded=function(t){Fy("SimpleDb",'Database "'+i.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;i.Tt.St(e,r.transaction,t.oldVersion,i.version).next(function(){Fy("SimpleDb","Database upgrade to version "+i.version+" complete")})}})]);case 1:e.db=t.sent(),t.label=2;case 2:return[2,(this.Dt&&(this.db.onversionchange=function(t){return i.Dt(t)}),this.db)]}})})},SI.prototype.Ct=function(e){this.Dt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},SI.prototype.runTransaction=function(a,n,u,c){return $i(this,void 0,void 0,function(){var i,o,s,e;return Zi(this,function(t){switch(t.label){case 0:i="readonly"===n,o=0,e=function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:++o,t.label=1;case 1:return t.trys.push([1,4,,5]),[4,s.Vt(a)];case 2:return s.db=t.sent(),e=bI.open(s.db,a,i?"readonly":"readwrite",u),n=c(e).catch(function(t){return e.abort(t),mI.reject(t)}).toPromise(),r={},n.catch(function(){}),[4,e.Et];case 3:return[2,(r.value=(t.sent(),n),r)];case 4:return n=t.sent(),r="FirebaseError"!==n.name&&o<3,Fy("SimpleDb","Transaction failed with error:",n.message,"Retrying:",r),s.close(),r?[3,5]:[2,{value:Promise.reject(n)}];case 5:return[2]}})},s=this,t.label=1;case 1:return[5,e()];case 2:if("object"==typeof(e=t.sent()))return[2,e.value];t.label=3;case 3:return[3,1];case 4:return[2]}})})},SI.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},SI),_I=(Object.defineProperty(EI.prototype,"isDone",{get:function(){return this.Nt},enumerable:!1,configurable:!0}),Object.defineProperty(EI.prototype,"Ft",{get:function(){return this.$t},enumerable:!1,configurable:!0}),Object.defineProperty(EI.prototype,"cursor",{set:function(t){this.xt=t},enumerable:!1,configurable:!0}),EI.prototype.done=function(){this.Nt=!0},EI.prototype.Ot=function(t){this.$t=t},EI.prototype.delete=function(){return DI(this.xt.delete())},EI),II=(Xi(TI,dI=im),TI);function TI(t,e){var n=this;return(n=dI.call(this,rm.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+e)||this).name="IndexedDbTransactionError",n}function EI(t){this.xt=t,this.Nt=!1,this.$t=null}function SI(t,e,n){this.name=t,this.version=e,this.Tt=n,12.2===SI.It(po())&&Uy("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}function CI(e,t){var n=this;this.action=e,this.transaction=t,this.aborted=!1,this.gt=new yI,this.transaction.oncomplete=function(){n.gt.resolve()},this.transaction.onabort=function(){t.error?n.gt.reject(new II(e,t.error)):n.gt.resolve()},this.transaction.onerror=function(t){t=xI(t.target.error);n.gt.reject(new II(e,t))}}function AI(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}function NI(){this.onCommittedListeners=[]}function kI(t){return"IndexedDbTransactionError"===t.name}var RI=(PI.prototype.put=function(t,e){t=void 0!==e?(Fy("SimpleDb","PUT",this.store.name,t,e),this.store.put(e,t)):(Fy("SimpleDb","PUT",this.store.name,"<auto-key>",t),this.store.put(t));return DI(t)},PI.prototype.add=function(t){return Fy("SimpleDb","ADD",this.store.name,t,t),DI(this.store.add(t))},PI.prototype.get=function(e){var n=this;return DI(this.store.get(e)).next(function(t){return void 0===t&&(t=null),Fy("SimpleDb","GET",n.store.name,e,t),t})},PI.prototype.delete=function(t){return Fy("SimpleDb","DELETE",this.store.name,t),DI(this.store.delete(t))},PI.prototype.count=function(){return Fy("SimpleDb","COUNT",this.store.name),DI(this.store.count())},PI.prototype.kt=function(t,e){var e=this.cursor(this.options(t,e)),n=[];return this.Mt(e,function(t,e){n.push(e)}).next(function(){return n})},PI.prototype.Lt=function(t,e){Fy("SimpleDb","DELETE ALL",this.store.name);e=this.options(t,e);e.Bt=!1;e=this.cursor(e);return this.Mt(e,function(t,e,n){return n.delete()})},PI.prototype.qt=function(t,e){e?n=t:(n={},e=t);var n=this.cursor(n);return this.Mt(n,e)},PI.prototype.Ut=function(r){var t=this.cursor({});return new mI(function(n,e){t.onerror=function(t){t=xI(t.target.error);e(t)},t.onsuccess=function(t){var e=t.target.result;e?r(e.primaryKey,e.value).next(function(t){t?e.continue():n()}):n()}})},PI.prototype.Mt=function(t,i){var o=[];return new mI(function(r,e){t.onerror=function(t){e(t.target.error)},t.onsuccess=function(t){var e,n=t.target.result;n?(e=new _I(n),(t=i(n.primaryKey,n.value,e))instanceof mI&&(t=t.catch(function(t){return e.done(),mI.reject(t)}),o.push(t)),e.isDone?r():null===e.Ft?n.continue():n.continue(e.Ft)):r()}}).next(function(){return mI.waitFor(o)})},PI.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},PI.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Bt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},PI);function PI(t){this.store=t}function DI(t){return new mI(function(e,n){t.onsuccess=function(t){t=t.target.result;e(t)},t.onerror=function(t){t=xI(t.target.error);n(t)}})}var OI=!1;function xI(t){var e=wI.It(po());if(12.2<=e&&e<13){e="An internal error was encountered in the Indexed Database server";if(0<=t.message.indexOf(e)){var n=new im("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+e+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return OI||(OI=!0,setTimeout(function(){throw n},0)),n}}return t}var LI,MI=(Xi(FI,LI=Sn),FI);function FI(t,e){var n=this;return(n=LI.call(this)||this).Qt=t,n.currentSequenceNumber=e,n}function UI(t,e){return wI.Pt(t.Qt,e)}var jI=(WI.prototype.applyToRemoteDocument=function(t,e,n){for(var r,i,o,s,a,u,c=n.mutationResults,h=0;h<this.mutations.length;h++){var l=this.mutations[h];l.key.isEqual(t)&&(r=l,i=e,o=c[h],l=u=a=s=void 0,e=r instanceof Cw?(a=o,u=(s=r).value,l=Pw(s.fieldTransforms,i,a.transformResults),u=Ow(s.fieldTransforms,u,l),new jm(s.key,a.version,u,{hasCommittedMutations:!0})):r instanceof Aw?function(t,e,n){if(!ww(t.precondition,e))return new Vm(t.key,n.version);e=Rw(t,e,Pw(t.fieldTransforms,e,n.transformResults));return new jm(t.key,n.version,e,{hasCommittedMutations:!0})}(r,i,o):new qm(r.key,o.version,{hasCommittedMutations:!0}))}return e},WI.prototype.applyToLocalView=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(i=r[n]).key.isEqual(t)&&(e=_w(i,e,this.localWriteTime));for(var i,o=0,s=this.mutations;o<s.length;o++)(i=s[o]).key.isEqual(t)&&(e=_w(i,e,this.localWriteTime));return e},WI.prototype.applyToLocalDocumentSet=function(n){var r=this,i=n;return this.mutations.forEach(function(t){var e=r.applyToLocalView(t.key,n.get(t.key));e&&(i=i.insert(t.key,e))}),i},WI.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},o_())},WI.prototype.isEqual=function(t){return this.batchId===t.batchId&&Hy(this.mutations,t.mutations,Iw)&&Hy(this.baseMutations,t.baseMutations,Iw)},WI),qI=(GI.from=function(t,e,n){By(t.mutations.length===n.length);for(var r=r_,i=t.mutations,o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new GI(t,e,n,r)},GI),VI=(KI.prototype.withSequenceNumber=function(t){return new KI(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},KI.prototype.withResumeToken=function(t,e){return new KI(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},KI.prototype.withLastLimboFreeSnapshotVersion=function(t){return new KI(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},KI),BI=function(t){this.Kt=t};function KI(t,e,n,r,i,o,s){void 0===i&&(i=Bb.min()),void 0===o&&(o=Bb.min()),void 0===s&&(s=cm.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}function GI(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}function WI(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}function HI(t,e){if(e.document)return L_(t.Kt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=um.fromSegments(e.noDocument.path),r=JI(e.noDocument.readTime);return new qm(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){n=um.fromSegments(e.unknownDocument.path),r=JI(e.unknownDocument.version);return new Vm(n,r)}return Vy()}function zI(t,e,n){var r=QI(n),n=e.key.path.popLast().toArray();if(e instanceof jm){var i={name:N_(o=t.Kt,(s=e).key),fields:s.toProto().mapValue.fields,updateTime:T_(o,s.version.toTimestamp())},o=e.hasCommittedMutations;return new oI(null,null,i,o,r,n)}if(e instanceof qm){var s=e.key.path.toArray(),i=XI(e.version),o=e.hasCommittedMutations;return new oI(null,new rI(s,i),null,o,r,n)}if(e instanceof Vm){o=e.key.path.toArray(),e=XI(e.version);return new oI(new iI(o,e),null,null,!0,r,n)}return Vy()}function QI(t){t=t.toTimestamp();return[t.seconds,t.nanoseconds]}function YI(t){t=new wm(t[0],t[1]);return Bb.fromTimestamp(t)}function XI(t){t=t.toTimestamp();return new $_(t.seconds,t.nanoseconds)}function JI(t){t=new wm(t.seconds,t.nanoseconds);return Bb.fromTimestamp(t)}function $I(e,t){for(var n=(t.baseMutations||[]).map(function(t){return F_(e.Kt,t)}),r=0;r<t.mutations.length-1;++r){var i,o=t.mutations[r];r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform&&(i=t.mutations[r+1],o.updateTransforms=i.transform.fieldTransforms,t.mutations.splice(r+1,1),++r)}var s=t.mutations.map(function(t){return F_(e.Kt,t)}),a=wm.fromMillis(t.localWriteTimeMs);return new jI(t.batchId,a,n,s)}function ZI(t){var e=JI(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?JI(t.lastLimboFreeSnapshotVersion):Bb.min(),r=void 0!==t.query.documents?(By(1===(r=t.query).documents.length),Lb(Nb(P_(r.documents[0])))):Lb(q_(t.query));return new VI(r,t.targetId,0,t.lastListenSequenceNumber,e,n,cm.fromBase64String(t.resumeToken))}function tT(t,e){var n=XI(e.snapshotVersion),r=XI(e.lastLimboFreeSnapshotVersion),i=(Ym(e.target)?U_:j_)(t.Kt,e.target),t=e.resumeToken.toBase64();return new aI(e.targetId,zm(e.target),n,t,e.sequenceNumber,r,i)}function eT(t){var e=q_({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Mb(e,e.limit,"L"):e}var nT=(rT.prototype.getBundleMetadata=function(t,e){return iT(t).get(e).next(function(t){if(t)return{id:(t=t).bundleId,createTime:JI(t.createTime),version:t.version}})},rT.prototype.saveBundleMetadata=function(t,e){return iT(t).put({bundleId:(e=e).id,createTime:XI(S_(e.createTime)),version:e.version})},rT.prototype.getNamedQuery=function(t,e){return oT(t).get(e).next(function(t){if(t)return{name:(t=t).name,query:eT(t.bundledQuery),readTime:JI(t.readTime)}})},rT.prototype.saveNamedQuery=function(t,e){return oT(t).put({name:(e=e).name,readTime:XI(S_(e.readTime)),bundledQuery:e.bundledQuery})},rT);function rT(){}function iT(t){return UI(t,fI.store)}function oT(t){return UI(t,pI.store)}var sT=(lT.prototype.addToCollectionParentIndex=function(t,e){return this.Wt.add(e),mI.resolve()},lT.prototype.getCollectionParents=function(t,e){return mI.resolve(this.Wt.getEntries(e))},lT),aT=(hT.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Jw(om.comparator),t=!r.has(n);return this.index[e]=r.add(n),t},hT.prototype.has=function(t){var e=t.lastSegment(),t=t.popLast(),e=this.index[e];return e&&e.has(t)},hT.prototype.getEntries=function(t){return(this.index[t]||new Jw(om.comparator)).toArray()},hT),uT=(cT.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(this.jt.has(e))return mI.resolve();var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.jt.add(e)});i={collectionId:r,parent:Q_(i)};return fT(t).put(i)},cT.prototype.getCollectionParents=function(t,i){var o=[],e=IDBKeyRange.bound([i,""],[zy(i),""],!1,!0);return fT(t).kt(e).next(function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if(r.collectionId!==i)break;o.push(X_(r.parent))}return o})},cT);function cT(){this.jt=new aT}function hT(){this.index={}}function lT(){this.Wt=new aT}function fT(t){return UI(t,hI.store)}var pT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dT=(gT.withCacheSize=function(t){return new gT(t,gT.DEFAULT_COLLECTION_PERCENTILE,gT.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},gT);function gT(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}function vT(t,e,n){var r=t.store(tI.store),i=t.store(eI.store),o=[],t=IDBKeyRange.only(n.batchId),s=0,t=r.qt({range:t},function(t,e,n){return s++,n.delete()});o.push(t.next(function(){By(1===s)}));for(var a=[],u=0,c=n.mutations;u<c.length;u++){var h=c[u],l=eI.key(e,h.key.path,n.batchId);o.push(i.delete(l)),a.push(h.key)}return mI.waitFor(o).next(function(){return a})}function yT(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Vy();e=t.noDocument}return JSON.stringify(e).length}dT.DEFAULT_COLLECTION_PERCENTILE=10,dT.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dT.DEFAULT=new dT(41943040,dT.DEFAULT_COLLECTION_PERCENTILE,dT.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dT.DISABLED=new dT(-1,0,0);var mT=(bT.Ht=function(t,e,n,r){return By(""!==t.uid),new bT(t.isAuthenticated()?t.uid:"",e,n,r)},bT.prototype.checkEmpty=function(t){var r=!0,e=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _T(t).qt({index:tI.userMutationsIndex,range:e},function(t,e,n){r=!1,n.done()}).next(function(){return r})},bT.prototype.addMutationBatch=function(d,g,v,y){var m=this,b=IT(d),w=_T(d);return w.add({}).next(function(t){By("number"==typeof t);for(var e,n,r,i,o,s=new jI(t,g,v,y),a=(e=m.D,n=m.userId,i=(r=s).baseMutations.map(function(t){return M_(e.Kt,t)}),o=r.mutations.map(function(t){return M_(e.Kt,t)}),new tI(n,r.batchId,r.localWriteTime.toMillis(),i,o)),u=[],c=new Jw(function(t,e){return Wy(t.canonicalString(),e.canonicalString())}),h=0,l=y;h<l.length;h++){var f=l[h],p=eI.key(m.userId,f.key.path,t),c=c.add(f.key.path.popLast());u.push(w.put(a)),u.push(b.put(p,eI.PLACEHOLDER))}return c.forEach(function(t){u.push(m.Gt.addToCollectionParentIndex(d,t))}),d.addOnCommittedListener(function(){m.zt[t]=s.keys()}),mI.waitFor(u).next(function(){return s})})},bT.prototype.lookupMutationBatch=function(t,e){var n=this;return _T(t).get(e).next(function(t){return t?(By(t.userId===n.userId),$I(n.D,t)):null})},bT.prototype.Jt=function(t,e){var n=this;return this.zt[e]?mI.resolve(this.zt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){t=t.keys();return n.zt[e]=t}return null})},bT.prototype.getNextMutationBatchAfterBatchId=function(t,e){var r=this,i=e+1,e=IDBKeyRange.lowerBound([this.userId,i]),o=null;return _T(t).qt({index:tI.userMutationsIndex,range:e},function(t,e,n){e.userId===r.userId&&(By(e.batchId>=i),o=$I(r.D,e)),n.done()}).next(function(){return o})},bT.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return _T(t).qt({index:tI.userMutationsIndex,range:e,reverse:!0},function(t,e,n){r=e.batchId,n.done()}).next(function(){return r})},bT.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _T(t).kt(tI.userMutationsIndex,n).next(function(t){return t.map(function(t){return $I(e.D,t)})})},bT.prototype.getAllMutationBatchesAffectingDocumentKey=function(o,s){var a=this,t=eI.prefixForPath(this.userId,s.path),t=IDBKeyRange.lowerBound(t),u=[];return IT(o).qt({range:t},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=X_(i);if(r===a.userId&&s.path.isEqual(i))return _T(o).get(t).next(function(t){if(!t)throw Vy();By(t.userId===a.userId),u.push($I(a.D,t))});n.done()}).next(function(){return u})},bT.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var s=this,a=new Jw(Wy),n=[];return t.forEach(function(o){var t=eI.prefixForPath(s.userId,o.path),t=IDBKeyRange.lowerBound(t),t=IT(e).qt({range:t},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=X_(i);r===s.userId&&o.path.isEqual(i)?a=a.add(t):n.done()});n.push(t)}),mI.waitFor(n).next(function(){return s.Yt(e,a)})},bT.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var o=this,s=e.path,a=s.length+1,e=eI.prefixForPath(this.userId,s),e=IDBKeyRange.lowerBound(e),u=new Jw(Wy);return IT(t).qt({range:e},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=X_(i);r===o.userId&&s.isPrefixOf(i)?i.length===a&&(u=u.add(t)):n.done()}).next(function(){return o.Yt(t,u)})},bT.prototype.Yt=function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(_T(e).get(t).next(function(t){if(null===t)throw Vy();By(t.userId===n.userId),r.push($I(n.D,t))}))}),mI.waitFor(i).next(function(){return r})},bT.prototype.removeMutationBatch=function(e,n){var r=this;return vT(e.Qt,this.userId,n).next(function(t){return e.addOnCommittedListener(function(){r.Xt(n.batchId)}),mI.forEach(t,function(t){return r.referenceDelegate.markPotentiallyOrphaned(e,t)})})},bT.prototype.Xt=function(t){delete this.zt[t]},bT.prototype.performConsistencyCheck=function(e){var i=this;return this.checkEmpty(e).next(function(t){if(!t)return mI.resolve();var t=IDBKeyRange.lowerBound(eI.prefixForUser(i.userId)),r=[];return IT(e).qt({range:t},function(t,e,n){t[0]===i.userId?(t=X_(t[1]),r.push(t)):n.done()}).next(function(){By(0===r.length)})})},bT.prototype.containsKey=function(t,e){return wT(t,this.userId,e)},bT.prototype.Zt=function(t){var e=this;return TT(t).get(this.userId).next(function(t){return t||new Z_(e.userId,-1,"")})},bT);function bT(t,e,n,r){this.userId=t,this.D=e,this.Gt=n,this.referenceDelegate=r,this.zt={}}function wT(t,o,e){var e=eI.prefixForPath(o,e.path),s=e[1],e=IDBKeyRange.lowerBound(e),a=!1;return IT(t).qt({range:e,Bt:!0},function(t,e,n){var r=t[0],i=t[1];t[2],r===o&&i===s&&(a=!0),n.done()}).next(function(){return a})}function _T(t){return UI(t,tI.store)}function IT(t){return UI(t,eI.store)}function TT(t){return UI(t,Z_.store)}var ET=(AT.prototype.next=function(){return this.te+=2,this.te},AT.ee=function(){return new AT(0)},AT.ne=function(){return new AT(-1)},AT),ST=(CT.prototype.allocateTargetId=function(n){var r=this;return this.se(n).next(function(t){var e=new ET(t.highestTargetId);return t.highestTargetId=e.next(),r.ie(n,t).next(function(){return t.highestTargetId})})},CT.prototype.getLastRemoteSnapshotVersion=function(t){return this.se(t).next(function(t){return Bb.fromTimestamp(new wm(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},CT.prototype.getHighestSequenceNumber=function(t){return this.se(t).next(function(t){return t.highestListenSequenceNumber})},CT.prototype.setTargetsMetadata=function(e,n,r){var i=this;return this.se(e).next(function(t){return t.highestListenSequenceNumber=n,r&&(t.lastRemoteSnapshotVersion=r.toTimestamp()),n>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=n),i.ie(e,t)})},CT.prototype.addTargetData=function(e,n){var r=this;return this.re(e,n).next(function(){return r.se(e).next(function(t){return t.targetCount+=1,r.oe(n,t),r.ie(e,t)})})},CT.prototype.updateTargetData=function(t,e){return this.re(t,e)},CT.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return NT(e).delete(t.targetId)}).next(function(){return n.se(e)}).next(function(t){return By(0<t.targetCount),--t.targetCount,n.ie(e,t)})},CT.prototype.removeTargets=function(n,r,i){var o=this,s=0,a=[];return NT(n).qt(function(t,e){e=ZI(e);e.sequenceNumber<=r&&null===i.get(e.targetId)&&(s++,a.push(o.removeTargetData(n,e)))}).next(function(){return mI.waitFor(a)}).next(function(){return s})},CT.prototype.forEachTarget=function(t,n){return NT(t).qt(function(t,e){e=ZI(e);n(e)})},CT.prototype.se=function(t){return kT(t).get(cI.key).next(function(t){return By(null!==t),t})},CT.prototype.ie=function(t,e){return kT(t).put(cI.key,e)},CT.prototype.re=function(t,e){return NT(t).put(tT(this.D,e))},CT.prototype.oe=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},CT.prototype.getTargetCount=function(t){return this.se(t).next(function(t){return t.targetCount})},CT.prototype.getTargetData=function(t,r){var e=zm(r),e=IDBKeyRange.bound([e,Number.NEGATIVE_INFINITY],[e,Number.POSITIVE_INFINITY]),i=null;return NT(t).qt({range:e,index:aI.queryTargetsIndexName},function(t,e,n){e=ZI(e);Qm(r,e.target)&&(i=e,n.done())}).next(function(){return i})},CT.prototype.addMatchingKeys=function(n,t,r){var i=this,o=[],s=RT(n);return t.forEach(function(t){var e=Q_(t.path);o.push(s.put(new uI(r,e))),o.push(i.referenceDelegate.addReference(n,r,t))}),mI.waitFor(o)},CT.prototype.removeMatchingKeys=function(n,t,r){var i=this,o=RT(n);return mI.forEach(t,function(t){var e=Q_(t.path);return mI.waitFor([o.delete([r,e]),i.referenceDelegate.removeReference(n,r,t)])})},CT.prototype.removeMatchingKeysForTargetId=function(t,e){t=RT(t),e=IDBKeyRange.bound([e],[e+1],!1,!0);return t.delete(e)},CT.prototype.getMatchingKeysForTargetId=function(t,e){var e=IDBKeyRange.bound([e],[e+1],!1,!0),t=RT(t),r=o_();return t.qt({range:e,Bt:!0},function(t,e,n){t=X_(t[1]),t=new um(t);r=r.add(t)}).next(function(){return r})},CT.prototype.containsKey=function(t,e){var e=Q_(e.path),e=IDBKeyRange.bound([e],[zy(e)],!1,!0),i=0;return RT(t).qt({index:uI.documentTargetsIndex,Bt:!0,range:e},function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())}).next(function(){return 0<i})},CT.prototype.yt=function(t,e){return NT(t).get(e).next(function(t){return t?ZI(t):null})},CT);function CT(t,e){this.referenceDelegate=t,this.D=e}function AT(t){this.te=t}function NT(t){return UI(t,aI.store)}function kT(t){return UI(t,cI.store)}function RT(t){return UI(t,uI.store)}function PT(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){if(e.code!==rm.FAILED_PRECONDITION||e.message!==vI)throw e;return Fy("LocalStore","Unexpectedly lost primary lease"),[2]})})}function DT(t,e){var n=t[0],r=t[1],t=e[0],e=e[1],t=Wy(n,t);return 0===t?Wy(r,e):t}var OT=(qT.prototype.ue=function(){return++this.ae},qT.prototype.he=function(t){var e=[t,this.ue()];this.buffer.size<this.ce?this.buffer=this.buffer.add(e):DT(e,t=this.buffer.last())<0&&(this.buffer=this.buffer.delete(t).add(e))},Object.defineProperty(qT.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),qT),xT=(jT.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.de(t)},jT.prototype.stop=function(){this.fe&&(this.fe.cancel(),this.fe=null)},Object.defineProperty(jT.prototype,"started",{get:function(){return null!==this.fe},enumerable:!1,configurable:!0}),jT.prototype.de=function(n){var t=this,e=this.le?3e5:6e4;Fy("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.fe=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:this.fe=null,this.le=!0,t.label=1;case 1:return t.trys.push([1,3,,7]),[4,n.collectGarbage(this.garbageCollector)];case 2:return t.sent(),[3,7];case 3:return kI(e=t.sent())?(Fy("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,PT(e)];case 5:t.sent(),t.label=6;case 6:return[3,7];case 7:return[4,this.de(n)];case 8:return t.sent(),[2]}})})})},jT),LT=(UT.prototype.calculateTargetCount=function(t,e){return this.we._e(t).next(function(t){return Math.floor(e/100*t)})},UT.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return mI.resolve(Oy.o);var r=new OT(e);return this.we.forEachTarget(t,function(t){return r.he(t.sequenceNumber)}).next(function(){return n.we.me(t,function(t){return r.he(t)})}).next(function(){return r.maxValue})},UT.prototype.removeTargets=function(t,e,n){return this.we.removeTargets(t,e,n)},UT.prototype.removeOrphanedDocuments=function(t,e){return this.we.removeOrphanedDocuments(t,e)},UT.prototype.collect=function(e,n){var r=this;return-1===this.params.cacheSizeCollectionThreshold?(Fy("LruGarbageCollector","Garbage collection skipped; disabled"),mI.resolve(pT)):this.getCacheSize(e).next(function(t){return t<r.params.cacheSizeCollectionThreshold?(Fy("LruGarbageCollector","Garbage collection skipped; Cache size "+t+" is lower than threshold "+r.params.cacheSizeCollectionThreshold),pT):r.ye(e,n)})},UT.prototype.getCacheSize=function(t){return this.we.getCacheSize(t)},UT.prototype.ye=function(e,n){var r,i,o,s,a,u,c,h=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(t){return i=t>h.params.maximumSequenceNumbersToCollect?(Fy("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.maximumSequenceNumbersToCollect+" from "+t),h.params.maximumSequenceNumbersToCollect):t,s=Date.now(),h.nthSequenceNumber(e,i)}).next(function(t){return r=t,a=Date.now(),h.removeTargets(e,r,n)}).next(function(t){return o=t,u=Date.now(),h.removeOrphanedDocuments(e,r)}).next(function(t){return c=Date.now(),My()<=ss.DEBUG&&Fy("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-l)+"ms\n\tDetermined least recently used "+i+" in "+(a-s)+"ms\n\tRemoved "+o+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-l)+"ms"),mI.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:t})})},UT),MT=(FT.prototype._e=function(t){var n=this.ge(t);return this.db.getTargetCache().getTargetCount(t).next(function(e){return n.next(function(t){return e+t})})},FT.prototype.ge=function(t){var e=0;return this.me(t,function(t){e++}).next(function(){return e})},FT.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},FT.prototype.me=function(t,n){return this.pe(t,function(t,e){return n(e)})},FT.prototype.addReference=function(t,e,n){return VT(t,n)},FT.prototype.removeReference=function(t,e,n){return VT(t,n)},FT.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},FT.prototype.markPotentiallyOrphaned=VT,FT.prototype.Ee=function(t,e){return r=e,i=!1,TT(n=t).Ut(function(t){return wT(n,t,r).next(function(t){return t&&(i=!0),mI.resolve(!t)})}).next(function(){return i});var n,r,i},FT.prototype.removeOrphanedDocuments=function(n,r){var i=this,o=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[],a=0;return this.pe(n,function(e,t){t<=r&&(t=i.Ee(n,e).next(function(t){if(!t)return a++,o.getEntry(n,e).next(function(){return o.removeEntry(e),RT(n).delete([0,Q_(e.path)])})}),s.push(t))}).next(function(){return mI.waitFor(s)}).next(function(){return o.apply(n)}).next(function(){return a})},FT.prototype.removeTarget=function(t,e){e=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,e)},FT.prototype.updateLimboDocument=VT,FT.prototype.pe=function(t,r){var i,t=RT(t),o=Oy.o;return t.qt({index:uI.documentTargetsIndex},function(t,e){var n=t[0],t=(t[1],e.path),e=e.sequenceNumber;0===n?(o!==Oy.o&&r(new um(X_(i)),o),o=e,i=t):o=Oy.o}).next(function(){o!==Oy.o&&r(new um(X_(i)),o)})},FT.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},FT);function FT(t,e){this.db=t,this.garbageCollector=new LT(this,e)}function UT(t,e){this.we=t,this.params=e}function jT(t,e){this.garbageCollector=t,this.asyncQueue=e,this.le=!1,this.fe=null}function qT(t){this.ce=t,this.buffer=new Jw(DT),this.ae=0}function VT(t,e){return RT(t).put((t=t.currentSequenceNumber,new uI(0,Q_(e.path),t)))}var BT,KT=(YT.prototype.get=function(t){var e=this.mapKeyFn(t),e=this.inner[e];if(void 0!==e)for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],i=i[1];if(this.equalsFn(o,t))return i}},YT.prototype.has=function(t){return void 0!==this.get(t)},YT.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},YT.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},YT.prototype.forEach=function(s){Yy(this.inner,function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],i=i[1];s(o,i)}})},YT.prototype.isEmpty=function(){return Xy(this.inner)},YT),H=(QT.prototype.getReadTime=function(t){t=this.changes.get(t);return t?t.readTime:Bb.min()},QT.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{maybeDocument:t,readTime:e})},QT.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{maybeDocument:null,readTime:e})},QT.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?mI.resolve(n.maybeDocument):this.getFromCache(t,e)},QT.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},QT.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},QT.prototype.assertNotApplied=function(){},QT),GT=(zT.prototype.addEntry=function(t,e,n){return JT(t).put($T(e),n)},zT.prototype.removeEntry=function(t,e){t=JT(t),e=$T(e);return t.delete(e)},zT.prototype.updateMetadata=function(e,n){var r=this;return this.getMetadata(e).next(function(t){return t.byteSize+=n,r.Te(e,t)})},zT.prototype.getEntry=function(t,e){var n=this;return JT(t).get($T(e)).next(function(t){return n.Ie(t)})},zT.prototype.Ae=function(t,e){var n=this;return JT(t).get($T(e)).next(function(t){var e=n.Ie(t);return e?{maybeDocument:e,size:yT(t)}:null})},zT.prototype.getEntries=function(t,e){var n=this,r=Zw;return this.Re(t,e,function(t,e){e=n.Ie(e);r=r.insert(t,e)}).next(function(){return r})},zT.prototype.be=function(t,e){var r=this,i=Zw,o=new Gw(um.comparator);return this.Re(t,e,function(t,e){var n=r.Ie(e);o=n?(i=i.insert(t,n),o.insert(t,yT(e))):(i=i.insert(t,null),o.insert(t,0))}).next(function(){return{ve:i,Pe:o}})},zT.prototype.Re=function(t,e,i){if(e.isEmpty())return mI.resolve();var n=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),o=e.getIterator(),s=o.getNext();return JT(t).qt({range:n},function(t,e,n){for(var r=um.fromSegments(t);s&&um.comparator(s,r)<0;)i(s,null),s=o.getNext();s&&s.isEqual(r)&&(i(s,e),s=o.hasNext()?o.getNext():null),s?n.Ot(s.path.toArray()):n.done()}).next(function(){for(;s;)i(s,null),s=o.hasNext()?o.getNext():null})},zT.prototype.getDocumentsMatchingQuery=function(t,r,e){var n,i=this,o=n_,s=r.path.length+1,a={};return e.isEqual(Bb.min())?(n=r.path.toArray(),a.range=IDBKeyRange.lowerBound(n)):(n=r.path.toArray(),e=QI(e),a.range=IDBKeyRange.lowerBound([n,e],!0),a.index=oI.collectionReadTimeIndex),JT(t).qt(a,function(t,e,n){t.length===s&&(e=HI(i.D,e),r.path.isPrefixOf(e.key.path)?e instanceof jm&&qb(r,e)&&(o=o.insert(e.key,e)):n.done())}).next(function(){return o})},zT.prototype.newChangeBuffer=function(t){return new WT(this,!!t&&t.trackRemovals)},zT.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},zT.prototype.getMetadata=function(t){return XT(t).get(sI.key).next(function(t){return By(!!t),t})},zT.prototype.Te=function(t,e){return XT(t).put(sI.key,e)},zT.prototype.Ie=function(t){if(t){t=HI(this.D,t);return t instanceof qm&&t.version.isEqual(Bb.min())?null:t}return null},zT),WT=(Xi(HT,BT=H),HT.prototype.applyChanges=function(i){var o=this,s=[],a=0,u=new Jw(function(t,e){return Wy(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(t,e){var n,r=o.Se.get(t);e.maybeDocument?(n=zI(o.Ve.D,e.maybeDocument,o.getReadTime(t)),u=u.add(t.path.popLast()),e=yT(n),a+=e-r,s.push(o.Ve.addEntry(i,t,n))):(a-=r,o.trackRemovals?(r=zI(o.Ve.D,new qm(t,Bb.min()),o.getReadTime(t)),s.push(o.Ve.addEntry(i,t,r))):s.push(o.Ve.removeEntry(i,t)))}),u.forEach(function(t){s.push(o.Ve.Gt.addToCollectionParentIndex(i,t))}),s.push(this.Ve.updateMetadata(i,a)),mI.waitFor(s)},HT.prototype.getFromCache=function(t,e){var n=this;return this.Ve.Ae(t,e).next(function(t){return null===t?(n.Se.set(e,0),null):(n.Se.set(e,t.size),t.maybeDocument)})},HT.prototype.getAllFromCache=function(t,e){var n=this;return this.Ve.be(t,e).next(function(t){var e=t.ve;return t.Pe.forEach(function(t,e){n.Se.set(t,e)}),e})},HT);function HT(t,e){var n=this;return(n=BT.call(this)||this).Ve=t,n.trackRemovals=e,n.Se=new KT(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),n}function zT(t,e){this.D=t,this.Gt=e}function QT(){this.changes=new KT(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}function YT(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}function XT(t){return UI(t,sI.store)}function JT(t){return UI(t,oI.store)}function $T(t){return t.path.toArray()}var ZT=(tE.prototype.St=function(e,n,t,r){var i=this;By(t<r&&0<=t&&r<=11);var o=new bI("createOrUpgrade",n);t<1&&1<=r&&(e.createObjectStore(J_.store),(s=e).createObjectStore(Z_.store,{keyPath:Z_.keyPath}),s.createObjectStore(tI.store,{keyPath:tI.keyPath,autoIncrement:!0}).createIndex(tI.userMutationsIndex,tI.userMutationsKeyPath,{unique:!0}),s.createObjectStore(eI.store),eE(e),e.createObjectStore(oI.store));var s,a=mI.resolve();return t<3&&3<=r&&(0!==t&&((s=e).deleteObjectStore(uI.store),s.deleteObjectStore(aI.store),s.deleteObjectStore(cI.store),eE(e)),a=a.next(function(){return t=o.store(cI.store),e=new cI(0,0,Bb.min().toTimestamp(),0),t.put(cI.key,e);var t,e})),t<4&&4<=r&&(a=(a=0!==t?a.next(function(){return n=e,(r=o).store(tI.store).kt().next(function(t){n.deleteObjectStore(tI.store),n.createObjectStore(tI.store,{keyPath:tI.keyPath,autoIncrement:!0}).createIndex(tI.userMutationsIndex,tI.userMutationsKeyPath,{unique:!0});var e=r.store(tI.store),t=t.map(function(t){return e.put(t)});return mI.waitFor(t)});var n,r}):a).next(function(){e.createObjectStore(lI.store,{keyPath:lI.keyPath})})),t<5&&5<=r&&(a=a.next(function(){return i.De(o)})),t<6&&6<=r&&(a=a.next(function(){return e.createObjectStore(sI.store),i.Ce(o)})),t<7&&7<=r&&(a=a.next(function(){return i.xe(o)})),t<8&&8<=r&&(a=a.next(function(){return i.Ne(e,o)})),t<9&&9<=r&&(a=a.next(function(){var t;(t=e).objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges"),(t=n.objectStore(oI.store)).createIndex(oI.readTimeIndex,oI.readTimeIndexPath,{unique:!1}),t.createIndex(oI.collectionReadTimeIndex,oI.collectionReadTimeIndexPath,{unique:!1})})),t<10&&10<=r&&(a=a.next(function(){return i.$e(o)})),a=t<11&&11<=r?a.next(function(){e.createObjectStore(fI.store,{keyPath:fI.keyPath}),e.createObjectStore(pI.store,{keyPath:pI.keyPath})}):a},tE.prototype.Ce=function(e){var n=0;return e.store(oI.store).qt(function(t,e){n+=yT(e)}).next(function(){var t=new sI(n);return e.store(sI.store).put(sI.key,t)})},tE.prototype.De=function(n){var r=this,t=n.store(Z_.store),i=n.store(tI.store);return t.kt().next(function(t){return mI.forEach(t,function(e){var t=IDBKeyRange.bound([e.userId,-1],[e.userId,e.lastAcknowledgedBatchId]);return i.kt(tI.userMutationsIndex,t).next(function(t){return mI.forEach(t,function(t){By(t.userId===e.userId);t=$I(r.D,t);return vT(n,e.userId,t).next(function(){})})})})})},tE.prototype.xe=function(t){var o=t.store(uI.store),e=t.store(oI.store);return t.store(cI.store).get(cI.key).next(function(r){var i=[];return e.qt(function(t,e){var n=new om(t),t=[0,Q_(n)];i.push(o.get(t).next(function(t){return t?mI.resolve():o.put(new uI(0,Q_(n),r.highestListenSequenceNumber))}))}).next(function(){return mI.waitFor(i)})})},tE.prototype.Ne=function(t,e){t.createObjectStore(hI.store,{keyPath:hI.keyPath});function r(t){if(i.add(t)){var e=t.lastSegment(),t=t.popLast();return n.put({collectionId:e,parent:Q_(t)})}}var n=e.store(hI.store),i=new aT;return e.store(oI.store).qt({Bt:!0},function(t,e){t=new om(t);return r(t.popLast())}).next(function(){return e.store(eI.store).qt({Bt:!0},function(t,e){t[0];var n=t[1],n=(t[2],X_(n));return r(n.popLast())})})},tE.prototype.$e=function(t){var n=this,r=t.store(aI.store);return r.qt(function(t,e){e=ZI(e),e=tT(n.D,e);return r.put(e)})},tE);function tE(t){this.D=t}function eE(t){t.createObjectStore(uI.store,{keyPath:uI.keyPath}).createIndex(uI.documentTargetsIndex,uI.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(aI.store,{keyPath:aI.keyPath}).createIndex(aI.queryTargetsIndexName,aI.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(cI.store)}var nE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",rE=(iE.prototype.start=function(){var e=this;return this.Ye().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new im(rm.FAILED_PRECONDITION,nE);return e.Xe(),e.Ze(),e.tn(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e.Ge.getHighestSequenceNumber(t)})}).then(function(t){e.Me=new Oy(t,e.Oe)}).then(function(){e.Le=!0}).catch(function(t){return e.je&&e.je.close(),Promise.reject(t)})},iE.prototype.en=function(n){var t=this;return this.Ke=function(e){return $i(t,void 0,void 0,function(){return Zi(this,function(t){return this.started?[2,n(e)]:[2]})})},n(this.isPrimary)},iE.prototype.setDatabaseDeletedListener=function(n){var t=this;this.je.Ct(function(e){return $i(t,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return null===e.newVersion?[4,n()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},iE.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Fe.enqueueAndForget(function(){return $i(e,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return this.started?[4,this.Ye()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},iE.prototype.Ye=function(){var n=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return sE(e).put(new lI(n.clientId,Date.now(),n.networkEnabled,n.inForeground)).next(function(){if(n.isPrimary)return n.nn(e).next(function(t){t||(n.isPrimary=!1,n.Fe.enqueueRetryable(function(){return n.Ke(!1)}))})}).next(function(){return n.sn(e)}).next(function(t){return n.isPrimary&&!t?n.rn(e).next(function(){return!1}):!!t&&n.on(e).next(function(){return!0})})}).catch(function(t){if(kI(t))return Fy("IndexedDbPersistence","Failed to extend owner lease: ",t),n.isPrimary;if(!n.allowTabSynchronization)throw t;return Fy("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){n.isPrimary!==t&&n.Fe.enqueueRetryable(function(){return n.Ke(t)}),n.isPrimary=t})},iE.prototype.nn=function(t){var e=this;return oE(t).get(J_.key).next(function(t){return mI.resolve(e.cn(t))})},iE.prototype.an=function(t){return sE(t).delete(this.clientId)},iE.prototype.un=function(){return $i(this,void 0,void 0,function(){var e,n,r,i,o=this;return Zi(this,function(t){switch(t.label){case 0:return!this.isPrimary||this.hn(this.Qe,18e5)?[3,2]:(this.Qe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var r=UI(t,lI.store);return r.kt().next(function(t){var e=o.ln(t,18e5),n=t.filter(function(t){return-1===e.indexOf(t)});return mI.forEach(n,function(t){return r.delete(t.clientId)}).next(function(){return n})})}).catch(function(){return[]})]);case 1:if(e=t.sent(),this.Je)for(n=0,r=e;n<r.length;n++)i=r[n],this.Je.removeItem(this.fn(i.clientId));t.label=2;case 2:return[2]}})})},iE.prototype.tn=function(){var t=this;this.Ue=this.Fe.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.Ye().then(function(){return t.un()}).then(function(){return t.tn()})})},iE.prototype.cn=function(t){return!!t&&t.ownerId===this.clientId},iE.prototype.sn=function(e){var r=this;return this.ke?mI.resolve(!0):oE(e).get(J_.key).next(function(t){if(null!==t&&r.hn(t.leaseTimestampMs,5e3)&&!r.dn(t.ownerId)){if(r.cn(t)&&r.networkEnabled)return!0;if(!r.cn(t)){if(!t.allowTabSynchronization)throw new im(rm.FAILED_PRECONDITION,nE);return!1}}return!(!r.networkEnabled||!r.inForeground)||sE(e).kt().next(function(t){return void 0===r.ln(t,5e3).find(function(t){if(r.clientId!==t.clientId){var e=!r.networkEnabled&&t.networkEnabled,n=!r.inForeground&&t.inForeground,t=r.networkEnabled===t.networkEnabled;if(e||n&&t)return!0}return!1})})}).next(function(t){return r.isPrimary!==t&&Fy("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},iE.prototype.shutdown=function(){return $i(this,void 0,void 0,function(){var n=this;return Zi(this,function(t){switch(t.label){case 0:return this.Le=!1,this.wn(),this.Ue&&(this.Ue.cancel(),this.Ue=null),this._n(),this.mn(),[4,this.je.runTransaction("shutdown","readwrite",[J_.store,lI.store],function(t){var e=new MI(t,Oy.o);return n.rn(e).next(function(){return n.an(e)})})];case 1:return t.sent(),this.je.close(),this.yn(),[2]}})})},iE.prototype.ln=function(t,e){var n=this;return t.filter(function(t){return n.hn(t.updateTimeMs,e)&&!n.dn(t.clientId)})},iE.prototype.gn=function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return sE(t).kt().next(function(t){return e.ln(t,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(iE.prototype,"started",{get:function(){return this.Le},enumerable:!1,configurable:!0}),iE.prototype.getMutationQueue=function(t){return mT.Ht(t,this.D,this.Gt,this.referenceDelegate)},iE.prototype.getTargetCache=function(){return this.Ge},iE.prototype.getRemoteDocumentCache=function(){return this.ze},iE.prototype.getIndexManager=function(){return this.Gt},iE.prototype.getBundleCache=function(){return this.He},iE.prototype.runTransaction=function(e,n,r){var i=this;Fy("IndexedDbPersistence","Starting transaction:",e);var o,t="readonly"===n?"readonly":"readwrite";return this.je.runTransaction(e,t,gI,function(t){return o=new MI(t,i.Me?i.Me.next():Oy.o),"readwrite-primary"===n?i.nn(o).next(function(t){return!!t||i.sn(o)}).next(function(t){if(!t)throw Uy("Failed to obtain primary lease for action '"+e+"'."),i.isPrimary=!1,i.Fe.enqueueRetryable(function(){return i.Ke(!1)}),new im(rm.FAILED_PRECONDITION,vI);return r(o)}).next(function(t){return i.on(o).next(function(){return t})}):i.pn(o).next(function(){return r(o)})}).then(function(t){return o.raiseOnCommittedEvent(),t})},iE.prototype.pn=function(t){var e=this;return oE(t).get(J_.key).next(function(t){if(null!==t&&e.hn(t.leaseTimestampMs,5e3)&&!e.dn(t.ownerId)&&!e.cn(t)&&!(e.ke||e.allowTabSynchronization&&t.allowTabSynchronization))throw new im(rm.FAILED_PRECONDITION,nE)})},iE.prototype.on=function(t){var e=new J_(this.clientId,this.allowTabSynchronization,Date.now());return oE(t).put(J_.key,e)},iE.At=function(){return wI.At()},iE.prototype.rn=function(t){var e=this,n=oE(t);return n.get(J_.key).next(function(t){return e.cn(t)?(Fy("IndexedDbPersistence","Releasing primary lease."),n.delete(J_.key)):mI.resolve()})},iE.prototype.hn=function(t,e){var n=Date.now();return!(t<n-e||n<t&&(Uy("Detected an update time that is in the future: "+t+" > "+n),1))},iE.prototype.Xe=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=function(){t.Fe.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.Ye()})},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)},iE.prototype._n=function(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)},iE.prototype.Ze=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Be=function(){e.wn(),e.Fe.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Be))},iE.prototype.mn=function(){this.Be&&(this.window.removeEventListener("unload",this.Be),this.Be=null)},iE.prototype.dn=function(t){try{var e=null!==(null===(e=this.Je)||void 0===e?void 0:e.getItem(this.fn(t)));return Fy("IndexedDbPersistence","Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return Uy("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},iE.prototype.wn=function(){if(this.Je)try{this.Je.setItem(this.fn(this.clientId),String(Date.now()))}catch(t){Uy("Failed to set zombie client id.",t)}},iE.prototype.yn=function(){if(this.Je)try{this.Je.removeItem(this.fn(this.clientId))}catch(t){}},iE.prototype.fn=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},iE);function iE(t,e,n,r,i,o,s,a,u,c){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.Fe=i,this.window=o,this.document=s,this.Oe=u,this.ke=c,this.Me=null,this.Le=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Be=null,this.inForeground=!1,this.qe=null,this.Ue=null,this.Qe=Number.NEGATIVE_INFINITY,this.Ke=function(t){return Promise.resolve()},!iE.At())throw new im(rm.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new MT(this,r),this.We=e+"main",this.D=new BI(a),this.je=new wI(this.We,11,new ZT(this.D)),this.Ge=new ST(this.referenceDelegate,this.D),this.Gt=new uT,this.ze=(e=this.D,a=this.Gt,new GT(e,a)),this.He=new nT,this.window&&this.window.localStorage?this.Je=this.window.localStorage:(this.Je=null,!1===c&&Uy("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}function oE(t){return UI(t,J_.store)}function sE(t){return UI(t,lI.store)}function aE(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}function uE(t,e){this.progress=t,this.En=e}var cE=(vE.prototype.In=function(e,n){var r=this;return this.Tn.getAllMutationBatchesAffectingDocumentKey(e,n).next(function(t){return r.An(e,n,t)})},vE.prototype.An=function(t,r,i){return this.ze.getEntry(t,r).next(function(t){for(var e=0,n=i;e<n.length;e++)t=n[e].applyToLocalView(r,t);return t})},vE.prototype.Rn=function(t,e,i){var o=Zw;return e.forEach(function(t,e){for(var n=0,r=i;n<r.length;n++)e=r[n].applyToLocalView(t,e);o=o.insert(t,e)}),o},vE.prototype.bn=function(e,t){var n=this;return this.ze.getEntries(e,t).next(function(t){return n.vn(e,t)})},vE.prototype.vn=function(e,r){var i=this;return this.Tn.getAllMutationBatchesAffectingDocumentKeys(e,r).next(function(t){var t=i.Rn(e,r,t),n=Zw;return t.forEach(function(t,e){e=e||new qm(t,Bb.min()),n=n.insert(t,e)}),n})},vE.prototype.getDocumentsMatchingQuery=function(t,e,n){return r=e,um.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.Pn(t,e.path):Ob(e)?this.Vn(t,e,n):this.Sn(t,e,n);var r},vE.prototype.Pn=function(t,e){return this.In(t,new um(e)).next(function(t){var e=n_;return e=t instanceof jm?e.insert(t.key,t):e})},vE.prototype.Vn=function(n,r,i){var o=this,s=r.collectionGroup,a=n_;return this.Gt.getCollectionParents(n,s).next(function(t){return mI.forEach(t,function(t){var e,e=(e=r,t=t.child(s),new Cb(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt));return o.Sn(n,e,i).next(function(t){t.forEach(function(t,e){a=a.insert(t,e)})})}).next(function(){return a})})},vE.prototype.Sn=function(e,n,t){var u,c,r=this;return this.ze.getDocumentsMatchingQuery(e,n,t).next(function(t){return u=t,r.Tn.getAllMutationBatchesAffectingQuery(e,n)}).next(function(t){return c=t,r.Dn(e,c,u).next(function(t){u=t;for(var e=0,n=c;e<n.length;e++)for(var r=n[e],i=0,o=r.mutations;i<o.length;i++){var s=o[i],a=s.key,s=_w(s,u.get(a),r.localWriteTime);u=s instanceof jm?u.insert(a,s):u.remove(a)}})}).next(function(){return u.forEach(function(t,e){qb(n,e)||(u=u.remove(t))}),u})},vE.prototype.Dn=function(t,e,n){for(var r=o_(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Aw&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.ze.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof jm&&(c=c.insert(t,e))}),c})},vE),hE=(gE.Nn=function(t,e){for(var n=o_(),r=o_(),i=0,o=e.docChanges;i<o.length;i++){var s=o[i];switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}}return new gE(t,e.fromCache,n,r)},gE),lE=(dE.prototype.$n=function(t){this.Fn=t},dE.prototype.getDocumentsMatchingQuery=function(e,r,i,o){var s=this;return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.explicitOrderBy.length||1===r.explicitOrderBy.length&&r.explicitOrderBy[0].field.isKeyField())||i.isEqual(Bb.min())?this.On(e,r):this.Fn.bn(e,o).next(function(t){var n=s.kn(r,t);return(kb(r)||Rb(r))&&s.Mn(r.limitType,n,o,i)?s.On(e,r):(My()<=ss.DEBUG&&Fy("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),jb(r)),s.Fn.getDocumentsMatchingQuery(e,r,i).next(function(e){return n.forEach(function(t){e=e.insert(t.key,t)}),e}))})},dE.prototype.kn=function(n,t){var r=new Jw(Vb(n));return t.forEach(function(t,e){e instanceof jm&&qb(n,e)&&(r=r.add(e))}),r},dE.prototype.Mn=function(t,e,n,r){if(n.size!==e.size)return!0;e="F"===t?e.last():e.first();return!!e&&(e.hasPendingWrites||0<e.version.compareTo(r))},dE.prototype.On=function(t,e){return My()<=ss.DEBUG&&Fy("QueryEngine","Using full collection scan to execute query:",jb(e)),this.Fn.getDocumentsMatchingQuery(t,e,Bb.min())},dE),fE=(pE.prototype.collectGarbage=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(t){return e.collect(t,n.Bn)})},pE);function pE(t,e,n,r){this.persistence=t,this.Ln=e,this.D=r,this.Bn=new Gw(Wy),this.qn=new KT(zm,Qm),this.Un=Bb.min(),this.Tn=t.getMutationQueue(n),this.Qn=t.getRemoteDocumentCache(),this.Ge=t.getTargetCache(),this.Kn=new cE(this.Qn,this.Tn,this.persistence.getIndexManager()),this.He=t.getBundleCache(),this.Ln.$n(this.Kn)}function dE(){}function gE(t,e,n,r){this.targetId=t,this.fromCache=e,this.Cn=n,this.xn=r}function vE(t,e,n){this.ze=t,this.Tn=e,this.Gt=n}function yE(t,e,n,r){return new fE(t,e,n,r)}function mE(i,o){return $i(this,void 0,void 0,function(){var e,n,m,r;return Zi(this,function(t){switch(t.label){case 0:return n=(e=i).Tn,m=e.Kn,[4,e.persistence.runTransaction("Handle user change","readonly",function(v){var y;return e.Tn.getAllMutationBatches(v).next(function(t){return y=t,n=e.persistence.getMutationQueue(o),m=new cE(e.Qn,n,e.persistence.getIndexManager()),n.getAllMutationBatches(v)}).next(function(t){for(var e=[],n=[],r=o_(),i=0,o=y;i<o.length;i++){var s=o[i];e.push(s.batchId);for(var a=0,u=s.mutations;a<u.length;a++)var c=u[a],r=r.add(c.key)}for(var h=0,l=t;h<l.length;h++){var f=l[h];n.push(f.batchId);for(var p=0,d=f.mutations;p<d.length;p++){var g=d[p];r=r.add(g.key)}}return m.bn(v,r).next(function(t){return{Wn:t,removedBatchIds:e,addedBatchIds:n}})})})];case 1:return r=t.sent(),[2,(e.Tn=n,e.Kn=m,e.Ln.$n(e.Kn),r)]}})})}function bE(t,h){var l=t;return l.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var e,r,i,o,s,n,a,u=h.batch.keys(),c=l.Qn.newChangeBuffer({trackRemovals:!0});return e=l,r=t,o=c,s=(i=h).batch,n=s.keys(),a=mI.resolve(),n.forEach(function(n){a=a.next(function(){return o.getEntry(r,n)}).next(function(t){var e=t,t=i.docVersions.get(n);By(null!==t),(!e||e.version.compareTo(t)<0)&&(e=s.applyToRemoteDocument(n,e,i))&&o.addEntry(e,i.commitVersion)})}),a.next(function(){return e.Tn.removeMutationBatch(r,s)}).next(function(){return c.apply(t)}).next(function(){return l.Tn.performConsistencyCheck(t)}).next(function(){return l.Kn.bn(t,u)})})}function wE(t){var e=t;return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.Ge.getLastRemoteSnapshotVersion(t)})}function _E(t,r){var u=t,c=r.snapshotVersion,h=u.Bn;return u.persistence.runTransaction("Apply remote event","readwrite-primary",function(s){var t=u.Qn.newChangeBuffer({trackRemovals:!0});h=u.Bn;var a=[];r.targetChanges.forEach(function(t,e){var n,r,i,o=h.get(e);o&&(a.push(u.Ge.removeMatchingKeys(s,t.removedDocuments,e).next(function(){return u.Ge.addMatchingKeys(s,t.addedDocuments,e)})),0<(i=t.resumeToken).approximateByteSize()&&(n=o.withResumeToken(i,c).withSequenceNumber(s.currentSequenceNumber),h=h.insert(e,n),r=o,i=t,By(0<(o=n).resumeToken.approximateByteSize()),(0===r.resumeToken.approximateByteSize()||3e8<=o.snapshotVersion.toMicroseconds()-r.snapshotVersion.toMicroseconds()||0<i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size)&&a.push(u.Ge.updateTargetData(s,n))))});var e,n=Zw;return r.documentUpdates.forEach(function(t,e){r.resolvedLimboDocuments.has(t)&&a.push(u.persistence.referenceDelegate.updateLimboDocument(s,t))}),a.push(IE(s,t,r.documentUpdates,c,void 0).next(function(t){n=t})),c.isEqual(Bb.min())||(e=u.Ge.getLastRemoteSnapshotVersion(s).next(function(t){return u.Ge.setTargetsMetadata(s,s.currentSequenceNumber,c)}),a.push(e)),mI.waitFor(a).next(function(){return t.apply(s)}).next(function(){return u.Kn.vn(s,n)})}).then(function(t){return u.Bn=h,t})}function IE(t,s,e,a,u){var n=o_();return e.forEach(function(t){return n=n.add(t)}),s.getEntries(t,n).next(function(i){var o=Zw;return e.forEach(function(t,e){var n=i.get(t),r=(null==u?void 0:u.get(t))||a;e instanceof qm&&e.version.isEqual(Bb.min())?(s.removeEntry(t,r),o=o.insert(t,e)):null==n||0<e.version.compareTo(n.version)||0===e.version.compareTo(n.version)&&n.hasPendingWrites?(s.addEntry(e,r),o=o.insert(t,e)):Fy("LocalStore","Ignoring outdated watch update for ",t,". Current version:",n.version," Watch version:",e.version)}),o})}function TE(t,r){var i=t;return i.persistence.runTransaction("Allocate target","readwrite",function(e){var n;return i.Ge.getTargetData(e,r).next(function(t){return t?(n=t,mI.resolve(n)):i.Ge.allocateTargetId(e).next(function(t){return n=new VI(r,t,0,e.currentSequenceNumber),i.Ge.addTargetData(e,n).next(function(){return n})})})}).then(function(t){var e=i.Bn.get(t.targetId);return(null===e||0<t.snapshotVersion.compareTo(e.snapshotVersion))&&(i.Bn=i.Bn.insert(t.targetId,t),i.qn.set(r,t.targetId)),t})}function EE(i,o,s){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:n=(e=i).Bn.get(o),r=s?"readwrite":"readwrite-primary",t.label=1;case 1:return t.trys.push([1,4,,5]),s?[3,3]:[4,e.persistence.runTransaction("Release target",r,function(t){return e.persistence.referenceDelegate.removeTarget(t,n)})];case 2:t.sent(),t.label=3;case 3:return[3,5];case 4:if(!kI(r=t.sent()))throw r;return Fy("LocalStore","Failed to update sequence numbers for target "+o+": "+r),[3,5];case 5:return e.Bn=e.Bn.remove(o),e.qn.delete(n.target),[2]}})})}function SE(t,o,s){var a=t,u=Bb.min(),c=o_();return a.persistence.runTransaction("Execute query","readonly",function(e){return t=a,n=e,r=Lb(o),(void 0!==(t=(i=t).qn.get(r))?mI.resolve(i.Bn.get(t)):i.Ge.getTargetData(n,r)).next(function(t){if(t)return u=t.lastLimboFreeSnapshotVersion,a.Ge.getMatchingKeysForTargetId(e,t.targetId).next(function(t){c=t})}).next(function(){return a.Ln.getDocumentsMatchingQuery(e,o,s?u:Bb.min(),s?c:o_())}).next(function(t){return{documents:t,jn:c}});var t,n,r,i})}function CE(t,e){var n=t,r=n.Ge,t=n.Bn.get(e);return t?Promise.resolve(t.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.yt(t,e).next(function(t){return t?t.target:null})})}function AE(t){var s=t;return s.persistence.runTransaction("Get new document changes","readonly",function(t){return e=s.Qn,n=t,t=s.Un,r=e,i=Zw,o=QI(t),t=JT(n),n=IDBKeyRange.lowerBound(o,!0),t.qt({index:oI.readTimeIndex,range:n},function(t,e){var n=HI(r.D,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{En:i,readTime:YI(o)}});var e,n,r,i,o}).then(function(t){var e=t.En,t=t.readTime;return s.Un=t,e})}function NE(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){return[2,(e=n).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return t=JT(t),r=Bb.min(),t.qt({index:oI.readTimeIndex,reverse:!0},function(t,e,n){e.readTime&&(r=YI(e.readTime)),n.done()}).next(function(){return r});var r}).then(function(t){e.Un=t})]})})}var kE,RE,PE=($E.prototype.getBundleMetadata=function(t,e){return mI.resolve(this.Jn.get(e))},$E.prototype.saveBundleMetadata=function(t,e){return this.Jn.set(e.id,{id:e.id,version:e.version,createTime:S_(e.createTime)}),mI.resolve()},$E.prototype.getNamedQuery=function(t,e){return mI.resolve(this.Yn.get(e))},$E.prototype.saveNamedQuery=function(t,e){return this.Yn.set(e.name,{name:(e=e).name,query:eT(e.bundledQuery),readTime:S_(e.readTime)}),mI.resolve()},$E),DE=(JE.prototype.isEmpty=function(){return this.Xn.isEmpty()},JE.prototype.addReference=function(t,e){e=new OE(t,e);this.Xn=this.Xn.add(e),this.ts=this.ts.add(e)},JE.prototype.ns=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},JE.prototype.removeReference=function(t,e){this.ss(new OE(t,e))},JE.prototype.rs=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},JE.prototype.os=function(t){var e=this,n=new um(new om([])),r=new OE(n,t),t=new OE(n,t+1),i=[];return this.ts.forEachInRange([r,t],function(t){e.ss(t),i.push(t.key)}),i},JE.prototype.cs=function(){var e=this;this.Xn.forEach(function(t){return e.ss(t)})},JE.prototype.ss=function(t){this.Xn=this.Xn.delete(t),this.ts=this.ts.delete(t)},JE.prototype.us=function(t){var e=new um(new om([])),n=new OE(e,t),t=new OE(e,t+1),r=o_();return this.ts.forEachInRange([n,t],function(t){r=r.add(t.key)}),r},JE.prototype.containsKey=function(t){var e=new OE(t,0),e=this.Xn.firstAfterOrEqual(e);return null!==e&&t.isEqual(e.key)},JE),OE=(XE.Zn=function(t,e){return um.comparator(t.key,e.key)||Wy(t.hs,e.hs)},XE.es=function(t,e){return Wy(t.hs,e.hs)||um.comparator(t.key,e.key)},XE),xE=(YE.prototype.checkEmpty=function(t){return mI.resolve(0===this.Tn.length)},YE.prototype.addMutationBatch=function(t,e,n,r){var i=this.ls;this.ls++,0<this.Tn.length&&this.Tn[this.Tn.length-1];n=new jI(i,e,n,r);this.Tn.push(n);for(var o=0,s=r;o<s.length;o++){var a=s[o];this.fs=this.fs.add(new OE(a.key,i)),this.Gt.addToCollectionParentIndex(t,a.key.path.popLast())}return mI.resolve(n)},YE.prototype.lookupMutationBatch=function(t,e){return mI.resolve(this.ds(e))},YE.prototype.getNextMutationBatchAfterBatchId=function(t,e){e+=1,e=this.ws(e),e=e<0?0:e;return mI.resolve(this.Tn.length>e?this.Tn[e]:null)},YE.prototype.getHighestUnacknowledgedBatchId=function(){return mI.resolve(0===this.Tn.length?-1:this.ls-1)},YE.prototype.getAllMutationBatches=function(t){return mI.resolve(this.Tn.slice())},YE.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new OE(e,0),e=new OE(e,Number.POSITIVE_INFINITY),i=[];return this.fs.forEachInRange([r,e],function(t){t=n.ds(t.hs);i.push(t)}),mI.resolve(i)},YE.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Jw(Wy);return e.forEach(function(t){var e=new OE(t,0),t=new OE(t,Number.POSITIVE_INFINITY);n.fs.forEachInRange([e,t],function(t){r=r.add(t.hs)})}),mI.resolve(this._s(r))},YE.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,e=n;um.isDocumentKey(e)||(e=e.child(""));var e=new OE(new um(e),0),i=new Jw(Wy);return this.fs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(i=i.add(t.hs)),!0)},e),mI.resolve(this._s(i))},YE.prototype._s=function(t){var e=this,n=[];return t.forEach(function(t){t=e.ds(t);null!==t&&n.push(t)}),n},YE.prototype.removeMutationBatch=function(n,r){var i=this;By(0===this.ys(r.batchId,"removed")),this.Tn.shift();var o=this.fs;return mI.forEach(r.mutations,function(t){var e=new OE(t.key,r.batchId);return o=o.delete(e),i.referenceDelegate.markPotentiallyOrphaned(n,t.key)}).next(function(){i.fs=o})},YE.prototype.Xt=function(t){},YE.prototype.containsKey=function(t,e){var n=new OE(e,0),n=this.fs.firstAfterOrEqual(n);return mI.resolve(e.isEqual(n&&n.key))},YE.prototype.performConsistencyCheck=function(t){return this.Tn.length,mI.resolve()},YE.prototype.ys=function(t,e){return this.ws(t)},YE.prototype.ws=function(t){return 0===this.Tn.length?0:t-this.Tn[0].batchId},YE.prototype.ds=function(t){t=this.ws(t);return t<0||t>=this.Tn.length?null:this.Tn[t]},YE),LE=(QE.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,i=this.gs(e);return this.docs=this.docs.insert(r,{maybeDocument:e,size:i,readTime:n}),this.size+=i-o,this.Gt.addToCollectionParentIndex(t,r.path.popLast())},QE.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},QE.prototype.getEntry=function(t,e){e=this.docs.get(e);return mI.resolve(e?e.maybeDocument:null)},QE.prototype.getEntries=function(t,e){var n=this,r=Zw;return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null)}),mI.resolve(r)},QE.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=n_,i=new um(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.key,u=s.value,s=u.maybeDocument,u=u.readTime;if(!e.path.isPrefixOf(a.path))break;u.compareTo(n)<=0||s instanceof jm&&qb(e,s)&&(r=r.insert(s.key,s))}return mI.resolve(r)},QE.prototype.ps=function(t,e){return mI.forEach(this.docs,function(t){return e(t)})},QE.prototype.newChangeBuffer=function(t){return new ME(this)},QE.prototype.getSize=function(t){return mI.resolve(this.size)},QE),ME=(Xi(zE,RE=H),zE.prototype.applyChanges=function(n){var r=this,i=[];return this.changes.forEach(function(t,e){e&&e.maybeDocument?i.push(r.Ve.addEntry(n,e.maybeDocument,r.getReadTime(t))):r.Ve.removeEntry(t)}),mI.waitFor(i)},zE.prototype.getFromCache=function(t,e){return this.Ve.getEntry(t,e)},zE.prototype.getAllFromCache=function(t,e){return this.Ve.getEntries(t,e)},zE),FE=(HE.prototype.forEachTarget=function(t,n){return this.Es.forEach(function(t,e){return n(e)}),mI.resolve()},HE.prototype.getLastRemoteSnapshotVersion=function(t){return mI.resolve(this.lastRemoteSnapshotVersion)},HE.prototype.getHighestSequenceNumber=function(t){return mI.resolve(this.Ts)},HE.prototype.allocateTargetId=function(t){return this.highestTargetId=this.As.next(),mI.resolve(this.highestTargetId)},HE.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Ts&&(this.Ts=e),mI.resolve()},HE.prototype.re=function(t){this.Es.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.As=new ET(e),this.highestTargetId=e),t.sequenceNumber>this.Ts&&(this.Ts=t.sequenceNumber)},HE.prototype.addTargetData=function(t,e){return this.re(e),this.targetCount+=1,mI.resolve()},HE.prototype.updateTargetData=function(t,e){return this.re(e),mI.resolve()},HE.prototype.removeTargetData=function(t,e){return this.Es.delete(e.target),this.Is.os(e.targetId),--this.targetCount,mI.resolve()},HE.prototype.removeTargets=function(n,r,i){var o=this,s=0,a=[];return this.Es.forEach(function(t,e){e.sequenceNumber<=r&&null===i.get(e.targetId)&&(o.Es.delete(t),a.push(o.removeMatchingKeysForTargetId(n,e.targetId)),s++)}),mI.waitFor(a).next(function(){return s})},HE.prototype.getTargetCount=function(t){return mI.resolve(this.targetCount)},HE.prototype.getTargetData=function(t,e){e=this.Es.get(e)||null;return mI.resolve(e)},HE.prototype.addMatchingKeys=function(t,e,n){return this.Is.ns(e,n),mI.resolve()},HE.prototype.removeMatchingKeys=function(e,t,n){this.Is.rs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.markPotentiallyOrphaned(e,t))}),mI.waitFor(i)},HE.prototype.removeMatchingKeysForTargetId=function(t,e){return this.Is.os(e),mI.resolve()},HE.prototype.getMatchingKeysForTargetId=function(t,e){e=this.Is.us(e);return mI.resolve(e)},HE.prototype.containsKey=function(t,e){return mI.resolve(this.Is.containsKey(e))},HE),UE=(WE.prototype.start=function(){return Promise.resolve()},WE.prototype.shutdown=function(){return this.Le=!1,Promise.resolve()},Object.defineProperty(WE.prototype,"started",{get:function(){return this.Le},enumerable:!1,configurable:!0}),WE.prototype.setDatabaseDeletedListener=function(){},WE.prototype.setNetworkEnabled=function(){},WE.prototype.getIndexManager=function(){return this.Gt},WE.prototype.getMutationQueue=function(t){var e=this.Rs[t.toKey()];return e||(e=new xE(this.Gt,this.referenceDelegate),this.Rs[t.toKey()]=e),e},WE.prototype.getTargetCache=function(){return this.Ge},WE.prototype.getRemoteDocumentCache=function(){return this.ze},WE.prototype.getBundleCache=function(){return this.He},WE.prototype.runTransaction=function(t,e,n){var r=this;Fy("MemoryPersistence","Starting transaction:",t);var i=new jE(this.Me.next());return this.referenceDelegate.vs(),n(i).next(function(t){return r.referenceDelegate.Ps(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},WE.prototype.Vs=function(e,n){return mI.or(Object.values(this.Rs).map(function(t){return function(){return t.containsKey(e,n)}}))},WE),jE=(Xi(GE,kE=Sn),GE),qE=(KE.Cs=function(t){return new KE(t)},Object.defineProperty(KE.prototype,"xs",{get:function(){if(this.Ds)return this.Ds;throw Vy()},enumerable:!1,configurable:!0}),KE.prototype.addReference=function(t,e,n){return this.Ss.addReference(n,e),this.xs.delete(n.toString()),mI.resolve()},KE.prototype.removeReference=function(t,e,n){return this.Ss.removeReference(n,e),this.xs.add(n.toString()),mI.resolve()},KE.prototype.markPotentiallyOrphaned=function(t,e){return this.xs.add(e.toString()),mI.resolve()},KE.prototype.removeTarget=function(t,e){var n=this;this.Ss.os(e.targetId).forEach(function(t){return n.xs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.xs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},KE.prototype.vs=function(){this.Ds=new Set},KE.prototype.Ps=function(n){var r=this,i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return mI.forEach(this.xs,function(t){var e=um.fromPath(t);return r.Ns(n,e).next(function(t){t||i.removeEntry(e)})}).next(function(){return r.Ds=null,i.apply(n)})},KE.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ns(t,e).next(function(t){t?n.xs.delete(e.toString()):n.xs.add(e.toString())})},KE.prototype.bs=function(t){return 0},KE.prototype.Ns=function(t,e){var n=this;return mI.or([function(){return mI.resolve(n.Ss.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Vs(t,e)}])},KE),VE=(BE.prototype.isAuthenticated=function(){return null!=this.uid},BE.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},BE.prototype.isEqual=function(t){return t.uid===this.uid},BE);function BE(t){this.uid=t}function KE(t){this.persistence=t,this.Ss=new DE,this.Ds=null}function GE(t){var e=this;return(e=kE.call(this)||this).currentSequenceNumber=t,e}function WE(t,e){var n=this;this.Rs={},this.Me=new Oy(0),this.Le=!1,this.Le=!0,this.referenceDelegate=t(this),this.Ge=new FE(this),this.Gt=new sT,this.ze=(t=this.Gt,new LE(t,function(t){return n.referenceDelegate.bs(t)})),this.D=new BI(e),this.He=new PE(this.D)}function HE(t){this.persistence=t,this.Es=new KT(zm,Qm),this.lastRemoteSnapshotVersion=Bb.min(),this.highestTargetId=0,this.Ts=0,this.Is=new DE,this.targetCount=0,this.As=ET.ee()}function zE(t){var e=this;return(e=RE.call(this)||this).Ve=t,e}function QE(t,e){this.Gt=t,this.gs=e,this.docs=new Gw(um.comparator),this.size=0}function YE(t,e){this.Gt=t,this.referenceDelegate=e,this.Tn=[],this.ls=1,this.fs=new Jw(OE.Zn)}function XE(t,e){this.key=t,this.hs=e}function JE(){this.Xn=new Jw(OE.Zn),this.ts=new Jw(OE.es)}function $E(t){this.D=t,this.Jn=new Map,this.Yn=new Map}function ZE(t,e){return"firestore_clients_"+t+"_"+e}function tS(t,e,n){n="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(n+="_"+e.uid),n}function eS(t,e){return"firestore_targets_"+t+"_"+e}VE.UNAUTHENTICATED=new VE(null),VE.GOOGLE_CREDENTIALS=new VE("google-credentials-uid"),VE.FIRST_PARTY=new VE("first-party-uid");var nS,rS=(CS.$s=function(t,e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new im(i.error.code,i.error.message)),o?new CS(t,e,i.state,r):(Uy("SharedClientState","Failed to parse mutation state for ID '"+e+"': "+n),null)},CS.prototype.Fs=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},CS),iS=(SS.$s=function(t,e){var n,r=JSON.parse(e),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(n=new im(r.error.code,r.error.message)),i?new SS(t,r.state,n):(Uy("SharedClientState","Failed to parse target state for ID '"+t+"': "+e),null)},SS.prototype.Fs=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},SS),oS=(ES.$s=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=s_,o=0;r&&o<n.activeTargetIds.length;++o)r=Zy(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new ES(t,i):(Uy("SharedClientState","Failed to parse client data for instance '"+t+"': "+e),null)},ES),sS=(TS.$s=function(t){var e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new TS(e.clientId,e.onlineState):(Uy("SharedClientState","Failed to parse online state: "+t),null)},TS),aS=(IS.prototype.Os=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},IS.prototype.ks=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},IS.prototype.Fs=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},IS),uS=(_S.At=function(t){return!(!t||!t.localStorage)},_S.prototype.start=function(){return $i(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l=this;return Zi(this,function(t){switch(t.label){case 0:return[4,this.syncEngine.gn()];case 1:for(s=t.sent(),e=0,n=s;e<n.length;e++)(r=n[e])!==this.Ms&&(i=this.getItem(ZE(this.persistenceKey,r)))&&(o=oS.$s(r,i))&&(this.qs=this.qs.insert(o.clientId,o));for(this.Js(),(s=this.storage.getItem(this.zs))&&(a=this.Ys(s))&&this.Xs(a),u=0,c=this.Us;u<c.length;u++)h=c[u],this.Bs(h);return this.Us=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},_S.prototype.writeSequenceNumber=function(t){this.setItem(this.Ks,JSON.stringify(t))},_S.prototype.getAllActiveQueryTargets=function(){return this.Zs(this.qs)},_S.prototype.isActiveQueryTarget=function(n){var r=!1;return this.qs.forEach(function(t,e){e.activeTargetIds.has(n)&&(r=!0)}),r},_S.prototype.addPendingMutation=function(t){this.ti(t,"pending")},_S.prototype.updateMutationState=function(t,e,n){this.ti(t,e,n),this.ei(t)},_S.prototype.addLocalQueryTarget=function(t){var e,n="not-current";return this.isActiveQueryTarget(t)&&(!(e=this.storage.getItem(eS(this.persistenceKey,t)))||(e=iS.$s(t,e))&&(n=e.state)),this.ni.Os(t),this.Js(),n},_S.prototype.removeLocalQueryTarget=function(t){this.ni.ks(t),this.Js()},_S.prototype.isLocalQueryTarget=function(t){return this.ni.activeTargetIds.has(t)},_S.prototype.clearQueryState=function(t){this.removeItem(eS(this.persistenceKey,t))},_S.prototype.updateQueryState=function(t,e,n){this.si(t,e,n)},_S.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.ei(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},_S.prototype.setOnlineState=function(t){this.ii(t)},_S.prototype.notifyBundleLoaded=function(){this.ri()},_S.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.Ls),this.removeItem(this.Qs),this.started=!1)},_S.prototype.getItem=function(t){var e=this.storage.getItem(t);return Fy("SharedClientState","READ",t,e),e},_S.prototype.setItem=function(t,e){Fy("SharedClientState","SET",t,e),this.storage.setItem(t,e)},_S.prototype.removeItem=function(t){Fy("SharedClientState","REMOVE",t),this.storage.removeItem(t)},_S.prototype.Bs=function(t){var e=this,o=t;o.storageArea===this.storage&&(Fy("SharedClientState","EVENT",o.key,o.newValue),o.key!==this.Qs?this.Fe.enqueueRetryable(function(){return $i(e,void 0,void 0,function(){var e,n,r,i;return Zi(this,function(t){if(this.started){if(null!==o.key)if(this.Ws.test(o.key)){if(null==o.newValue)return e=this.oi(o.key),[2,this.ci(e,null)];if(e=this.ai(o.key,o.newValue))return[2,this.ci(e.clientId,e)]}else if(this.js.test(o.key)){if(null!==o.newValue&&(n=this.ui(o.key,o.newValue)))return[2,this.hi(n)]}else if(this.Gs.test(o.key)){if(null!==o.newValue&&(r=this.li(o.key,o.newValue)))return[2,this.fi(r)]}else if(o.key===this.zs){if(null!==o.newValue&&(i=this.Ys(o.newValue)))return[2,this.Xs(i)]}else if(o.key===this.Ks)(i=function(t){var e=Oy.o;if(null!=t)try{var n=JSON.parse(t);By("number"==typeof n),e=n}catch(t){Uy("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(o.newValue))!==Oy.o&&this.sequenceNumberHandler(i);else if(o.key===this.Hs)return[2,this.syncEngine.di()]}else this.Us.push(o);return[2]})})}):Uy("Received WebStorage notification for local change. Another client might have garbage-collected our state"))},Object.defineProperty(_S.prototype,"ni",{get:function(){return this.qs.get(this.Ms)},enumerable:!1,configurable:!0}),_S.prototype.Js=function(){this.setItem(this.Qs,this.ni.Fs())},_S.prototype.ti=function(t,e,n){n=new rS(this.currentUser,t,e,n),t=tS(this.persistenceKey,this.currentUser,t);this.setItem(t,n.Fs())},_S.prototype.ei=function(t){t=tS(this.persistenceKey,this.currentUser,t);this.removeItem(t)},_S.prototype.ii=function(t){t={clientId:this.Ms,onlineState:t};this.storage.setItem(this.zs,JSON.stringify(t))},_S.prototype.si=function(t,e,n){var r=eS(this.persistenceKey,t),n=new iS(t,e,n);this.setItem(r,n.Fs())},_S.prototype.ri=function(){this.setItem(this.Hs,"value-not-used")},_S.prototype.oi=function(t){t=this.Ws.exec(t);return t?t[1]:null},_S.prototype.ai=function(t,e){t=this.oi(t);return oS.$s(t,e)},_S.prototype.ui=function(t,e){var n=this.js.exec(t),t=Number(n[1]),n=void 0!==n[2]?n[2]:null;return rS.$s(new VE(n),t,e)},_S.prototype.li=function(t,e){t=this.Gs.exec(t),t=Number(t[1]);return iS.$s(t,e)},_S.prototype.Ys=function(t){return sS.$s(t)},_S.prototype.hi=function(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){return e.user.uid===this.currentUser.uid?[2,this.syncEngine.wi(e.batchId,e.state,e.error)]:(Fy("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},_S.prototype.fi=function(t){return this.syncEngine._i(t.targetId,t.state,t.error)},_S.prototype.ci=function(t,e){var n=this,r=e?this.qs.insert(t,e):this.qs.remove(t),i=this.Zs(this.qs),o=this.Zs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.mi(s,a).then(function(){n.qs=r})},_S.prototype.Xs=function(t){this.qs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},_S.prototype.Zs=function(t){var n=s_;return t.forEach(function(t,e){n=n.unionWith(e.activeTargetIds)}),n},_S),cS=(wS.prototype.addPendingMutation=function(t){},wS.prototype.updateMutationState=function(t,e,n){},wS.prototype.addLocalQueryTarget=function(t){return this.yi.Os(t),this.gi[t]||"not-current"},wS.prototype.updateQueryState=function(t,e,n){this.gi[t]=e},wS.prototype.removeLocalQueryTarget=function(t){this.yi.ks(t)},wS.prototype.isLocalQueryTarget=function(t){return this.yi.activeTargetIds.has(t)},wS.prototype.clearQueryState=function(t){delete this.gi[t]},wS.prototype.getAllActiveQueryTargets=function(){return this.yi.activeTargetIds},wS.prototype.isActiveQueryTarget=function(t){return this.yi.activeTargetIds.has(t)},wS.prototype.start=function(){return this.yi=new aS,Promise.resolve()},wS.prototype.handleUserChange=function(t,e,n){},wS.prototype.setOnlineState=function(t){},wS.prototype.shutdown=function(){},wS.prototype.writeSequenceNumber=function(t){},wS.prototype.notifyBundleLoaded=function(){},wS),hS=(bS.prototype.pi=function(t){},bS.prototype.shutdown=function(){},bS),lS=(mS.prototype.pi=function(t){this.Ri.push(t)},mS.prototype.shutdown=function(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ii)},mS.prototype.bi=function(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ii)},mS.prototype.Ti=function(){Fy("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Ri;t<e.length;t++)(0,e[t])(0)},mS.prototype.Ai=function(){Fy("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Ri;t<e.length;t++)(0,e[t])(1)},mS.At=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},mS),fS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},pS=(yS.prototype.Vi=function(t){this.Si=t},yS.prototype.Di=function(t){this.Ci=t},yS.prototype.onMessage=function(t){this.xi=t},yS.prototype.close=function(){this.Pi()},yS.prototype.send=function(t){this.vi(t)},yS.prototype.Ni=function(){this.Si()},yS.prototype.$i=function(t){this.Ci(t)},yS.prototype.Fi=function(t){this.xi(t)},yS),dS=(vS.prototype.Mi=function(e,t,n,r){var i=this.Li(e,t);Fy("RestConnection","Sending: ",i,n);t={};return this.Bi(t,r),this.qi(e,i,t,n).then(function(t){return Fy("RestConnection","Received: ",t),t},function(t){throw jy("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t})},vS.prototype.Ui=function(t,e,n,r){return this.Mi(t,e,n,r)},vS.prototype.Bi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.3.1",t["Content-Type"]="text/plain",e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},vS.prototype.Li=function(t,e){t=fS[t];return this.Oi+"/v1/"+e+":"+t},Xi(gS,nS=vS),gS.prototype.qi=function(o,e,s,a){return new Promise(function(n,r){var i=new Dy;i.listenOnce(Ay.COMPLETE,function(){try{switch(i.getLastErrorCode()){case Cy.NO_ERROR:var t=i.getResponseJson();Fy("Connection","XHR received:",JSON.stringify(t)),n(t);break;case Cy.TIMEOUT:Fy("Connection",'RPC "'+o+'" timed out'),r(new im(rm.DEADLINE_EXCEEDED,"Request time out"));break;case Cy.HTTP_ERROR:var e=i.getStatus();Fy("Connection",'RPC "'+o+'" failed with status:',e,"response text:",i.getResponseText()),0<e?(t=i.getResponseJson().error)&&t.status&&t.message?(e=t.status.toLowerCase().replace(/_/g,"-"),e=0<=Object.values(rm).indexOf(e)?e:rm.UNKNOWN,r(new im(e,t.message))):r(new im(rm.UNKNOWN,"Server responded with status "+i.getStatus())):r(new im(rm.UNAVAILABLE,"Connection failed."));break;default:Vy()}}finally{Fy("Connection",'RPC "'+o+'" completed.')}});var t=JSON.stringify(a);i.send(e,"POST",t,s,15)})},gS.prototype.Qi=function(t,e){var n=[this.Oi,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new wy,i=Sy(),t={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Bi(t.initMessageHeaders,e),go()||yo()||0<=po().indexOf("Electron/")||(0<=(e=po()).indexOf("MSIE ")||0<=e.indexOf("Trident/"))||0<=po().indexOf("MSAppHost/")||vo()||(t.httpHeadersOverwriteParam="$httpHeaders");n=n.join("");Fy("Connection","Creating WebChannel: "+n,t);var o=r.createWebChannel(n,t),s=!1,a=!1,u=new pS({vi:function(t){a?Fy("Connection","Not sending because WebChannel is closed:",t):(s||(Fy("Connection","Opening WebChannel transport."),o.open(),s=!0),Fy("Connection","WebChannel sending:",t),o.send(t))},Pi:function(){return o.close()}}),t=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return t(o,Py.EventType.OPEN,function(){a||Fy("Connection","WebChannel transport opened.")}),t(o,Py.EventType.CLOSE,function(){a||(a=!0,Fy("Connection","WebChannel transport closed"),u.$i())}),t(o,Py.EventType.ERROR,function(t){a||(a=!0,jy("Connection","WebChannel transport errored:",t),u.$i(new im(rm.UNAVAILABLE,"The operation could not be completed")))}),t(o,Py.EventType.MESSAGE,function(t){var e,n,r,i;a||(By(!!(e=t.data[0])),(n=e.error||(null===(i=e[0])||void 0===i?void 0:i.error))?(Fy("Connection","WebChannel received error:",n),r=n.status,t=function(){var t=Lw[r];if(void 0!==t)return Kw(t)}(),i=n.message,void 0===t&&(t=rm.INTERNAL,i="Unknown error status: "+r+" with message "+n.message),a=!0,u.$i(new im(t,i)),o.close()):(Fy("Connection","WebChannel received:",e),u.Fi(e)))}),t(i,Ny.STAT_EVENT,function(t){t.stat===ky?Fy("Connection","Detected buffering proxy"):t.stat===Ry&&Fy("Connection","Detected no buffering proxy")}),setTimeout(function(){u.Ni()},0),u},gS);function gS(t){var e=this;return(e=nS.call(this,t)||this).forceLongPolling=t.forceLongPolling,e.autoDetectLongPolling=t.autoDetectLongPolling,e}function vS(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Oi=e+"://"+t.host,this.ki="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}function yS(t){this.vi=t.vi,this.Pi=t.Pi}function mS(){var t=this;this.Ei=function(){return t.Ti()},this.Ii=function(){return t.Ai()},this.Ri=[],this.bi()}function bS(){}function wS(){this.yi=new aS,this.gi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}function _S(t,e,n,r,i){this.window=t,this.Fe=e,this.persistenceKey=n,this.Ms=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ls=this.Bs.bind(this),this.qs=new Gw(Wy),this.started=!1,this.Us=[];n=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Qs=ZE(this.persistenceKey,this.Ms),this.Ks="firestore_sequence_number_"+this.persistenceKey,this.qs=this.qs.insert(this.Ms,new aS),this.Ws=new RegExp("^firestore_clients_"+n+"_([^_]*)$"),this.js=new RegExp("^firestore_mutations_"+n+"_(\\d+)(?:_(.*))?$"),this.Gs=new RegExp("^firestore_targets_"+n+"_(\\d+)$"),this.zs="firestore_online_state_"+this.persistenceKey,this.Hs="firestore_bundle_loaded_"+this.persistenceKey,this.window.addEventListener("storage",this.Ls)}function IS(){this.activeTargetIds=s_}function TS(t,e){this.clientId=t,this.onlineState=e}function ES(t,e){this.clientId=t,this.activeTargetIds=e}function SS(t,e,n){this.targetId=t,this.state=e,this.error=n}function CS(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}function AS(){return"undefined"!=typeof window?window:null}function NS(){return"undefined"!=typeof document?document:null}function kS(t){return new I_(t,!0)}function RS(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.qr=[],this.Ur=new Map,this.Qr=new Set,this.Kr=[],this.Wr=i,this.Wr.pi(function(t){n.enqueueAndForget(function(){return $i(o,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return ZS(this)?(Fy("RemoteStore","Restarting streams for network reachability change."),[4,function(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return(e=n).Qr.add(4),[4,HS(e)];case 1:return t.sent(),e.jr.set("Unknown"),e.Qr.delete(4),[4,WS(e)];case 2:return t.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.jr=new US(n,r)}var PS,DS,OS,xS=(GS.prototype.reset=function(){this.Gi=0},GS.prototype.Ji=function(){this.Gi=this.ji},GS.prototype.Yi=function(t){var e=this;this.cancel();var n=Math.floor(this.Gi+this.Xi()),r=Math.max(0,Date.now()-this.Hi),i=Math.max(0,n-r);0<i&&Fy("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Gi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.zi=this.Fe.enqueueAfterDelay(this.timerId,i,function(){return e.Hi=Date.now(),t()}),this.Gi*=this.Wi,this.Gi<this.Ki&&(this.Gi=this.Ki),this.Gi>this.ji&&(this.Gi=this.ji)},GS.prototype.Zi=function(){null!==this.zi&&(this.zi.skipDelay(),this.zi=null)},GS.prototype.cancel=function(){null!==this.zi&&(this.zi.cancel(),this.zi=null)},GS.prototype.Xi=function(){return(Math.random()-.5)*this.Gi},GS),H=(KS.prototype.cr=function(){return 1===this.state||2===this.state||4===this.state},KS.prototype.ar=function(){return 2===this.state},KS.prototype.start=function(){3!==this.state?this.auth():this.ur()},KS.prototype.stop=function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return this.cr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},KS.prototype.hr=function(){this.state=0,this.rr.reset()},KS.prototype.lr=function(){var t=this;this.ar()&&null===this.ir&&(this.ir=this.Fe.enqueueAfterDelay(this.tr,6e4,function(){return t.dr()}))},KS.prototype.wr=function(t){this._r(),this.stream.send(t)},KS.prototype.dr=function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){return this.ar()?[2,this.close(0)]:[2]})})},KS.prototype._r=function(){this.ir&&(this.ir.cancel(),this.ir=null)},KS.prototype.close=function(e,n){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return this._r(),this.rr.cancel(),this.sr++,3!==e?this.rr.reset():n&&n.code===rm.RESOURCE_EXHAUSTED?(Uy(n.toString()),Uy("Using maximum backoff delay to prevent overloading the backend."),this.rr.Ji()):n&&n.code===rm.UNAUTHENTICATED&&this.nr.invalidateToken(),null!==this.stream&&(this.mr(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Di(n)];case 1:return t.sent(),[2]}})})},KS.prototype.mr=function(){},KS.prototype.auth=function(){var n=this;this.state=1;var t=this.yr(this.sr),e=this.sr;this.nr.getToken().then(function(t){n.sr===e&&n.gr(t)},function(e){t(function(){var t=new im(rm.UNKNOWN,"Fetching auth token failed: "+e.message);return n.pr(t)})})},KS.prototype.gr=function(t){var e=this,n=this.yr(this.sr);this.stream=this.Er(t),this.stream.Vi(function(){n(function(){return e.state=2,e.listener.Vi()})}),this.stream.Di(function(t){n(function(){return e.pr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},KS.prototype.ur=function(){var t=this;this.state=4,this.rr.Yi(function(){return $i(t,void 0,void 0,function(){return Zi(this,function(t){return this.state=0,this.start(),[2]})})})},KS.prototype.pr=function(t){return Fy("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},KS.prototype.yr=function(e){var n=this;return function(t){n.Fe.enqueueAndForget(function(){return n.sr===e?t():(Fy("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},KS),LS=(Xi(BS,OS=H),BS.prototype.Er=function(t){return this.er.Qi("Listen",t)},BS.prototype.onMessage=function(t){this.rr.reset();var e=function(t,e){if("targetChange"in e){e.targetChange;var n="NO_CHANGE"===(o=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===o?1:"REMOVE"===o?2:"CURRENT"===o?3:"RESET"===o?4:Vy(),r=e.targetChange.targetIds||[],i=(s=e.targetChange.resumeToken,t.V?(By(void 0===s||"string"==typeof s),cm.fromBase64String(s||"")):(By(void 0===s||s instanceof Uint8Array),cm.fromUint8Array(s||new Uint8Array))),o=(a=e.targetChange.cause)&&(u=void 0===(c=a).code?rm.UNKNOWN:Kw(c.code),new im(u,c.message||"")),s=new l_(n,r,i,o||null)}else if("documentChange"in e){e.documentChange,(n=e.documentChange).document,n.document.name,n.document.updateTime;var r=k_(t,n.document.name),i=S_(n.document.updateTime),a=new Gb({mapValue:{fields:n.document.fields}}),u=(o=new jm(r,i,a,{}),n.targetIds||[]),c=n.removedTargetIds||[];s=new c_(u,c,o.key,o)}else if("documentDelete"in e)e.documentDelete,(n=e.documentDelete).document,r=k_(t,n.document),i=n.readTime?S_(n.readTime):Bb.min(),a=new qm(r,i),o=n.removedTargetIds||[],s=new c_([],o,a.key,a);else if("documentRemove"in e)e.documentRemove,(n=e.documentRemove).document,r=k_(t,n.document),i=n.removedTargetIds||[],s=new c_([],i,r,null);else{if(!("filter"in e))return Vy();e.filter;e=e.filter;e.targetId,n=e.count||0,r=new xw(n),i=e.targetId,s=new h_(i,r)}return s}(this.D,t),t=function(t){if(!("targetChange"in t))return Bb.min();t=t.targetChange;return(!t.targetIds||!t.targetIds.length)&&t.readTime?S_(t.readTime):Bb.min()}(t);return this.listener.Tr(e,t)},BS.prototype.Ir=function(t){var e,n,r,i={};i.database=D_(this.D),i.addTarget=(e=this.D,(r=Ym(r=(n=t).target)?{documents:U_(e,r)}:{query:j_(e,r)}).targetId=n.targetId,0<n.resumeToken.approximateByteSize()?r.resumeToken=E_(e,n.resumeToken):0<n.snapshotVersion.compareTo(Bb.min())&&(r.readTime=T_(e,n.snapshotVersion.toTimestamp())),r);var o,t=(this.D,o=t,null==(t=function(){switch(o.purpose){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Vy()}}())?null:{"goog-listen-tags":t});t&&(i.labels=t),this.wr(i)},BS.prototype.Ar=function(t){var e={};e.database=D_(this.D),e.removeTarget=t,this.wr(e)},BS),MS=(Xi(VS,DS=H),Object.defineProperty(VS.prototype,"br",{get:function(){return this.Rr},enumerable:!1,configurable:!0}),VS.prototype.start=function(){this.Rr=!1,this.lastStreamToken=void 0,DS.prototype.start.call(this)},VS.prototype.mr=function(){this.Rr&&this.vr([])},VS.prototype.Er=function(t){return this.er.Qi("Write",t)},VS.prototype.onMessage=function(t){if(By(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Rr){this.rr.reset();var e=(n=t.writeResults,r=t.commitTime,n&&0<n.length?(By(void 0!==r),n.map(function(t){return n=r,(t=(e=t).updateTime?S_(e.updateTime):S_(n)).isEqual(Bb.min())&&(t=S_(n)),new vw(t,e.transformResults||[]);var e,n})):[]),n=S_(t.commitTime);return this.listener.Pr(n,e)}var n,r;return By(!t.writeResults||0===t.writeResults.length),this.Rr=!0,this.listener.Vr()},VS.prototype.Sr=function(){var t={};t.database=D_(this.D),this.wr(t)},VS.prototype.vr=function(t){var e=this,t={streamToken:this.lastStreamToken,writes:t.map(function(t){return M_(e.D,t)})};this.wr(t)},VS),FS=(Xi(qS,PS=function(){}),qS.prototype.Cr=function(){if(this.Dr)throw new im(rm.FAILED_PRECONDITION,"The client has already been terminated.")},qS.prototype.Mi=function(e,n,r){var i=this;return this.Cr(),this.credentials.getToken().then(function(t){return i.er.Mi(e,n,r,t)}).catch(function(t){throw t.code===rm.UNAUTHENTICATED&&i.credentials.invalidateToken(),t})},qS.prototype.Ui=function(e,n,r){var i=this;return this.Cr(),this.credentials.getToken().then(function(t){return i.er.Ui(e,n,r,t)}).catch(function(t){throw t.code===rm.UNAUTHENTICATED&&i.credentials.invalidateToken(),t})},qS.prototype.terminate=function(){this.Dr=!1},qS),US=(jS.prototype.Or=function(){var t=this;0===this.Nr&&(this.kr("Unknown"),this.$r=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.$r=null,t.Mr("Backend didn't respond within 10 seconds."),t.kr("Offline"),Promise.resolve()}))},jS.prototype.Lr=function(t){"Online"===this.state?this.kr("Unknown"):(this.Nr++,1<=this.Nr&&(this.Br(),this.Mr("Connection failed 1 times. Most recent error: "+t.toString()),this.kr("Offline")))},jS.prototype.set=function(t){this.Br(),this.Nr=0,"Online"===t&&(this.Fr=!1),this.kr(t)},jS.prototype.kr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},jS.prototype.Mr=function(t){t="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Fr?(Uy(t),this.Fr=!1):Fy("OnlineStateTracker",t)},jS.prototype.Br=function(){null!==this.$r&&(this.$r.cancel(),this.$r=null)},jS);function jS(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.Nr=0,this.$r=null,this.Fr=!0}function qS(t,e,n){var r=this;return(r=PS.call(this)||this).credentials=t,r.er=e,r.D=n,r.Dr=!1,r}function VS(t,e,n,r,i){var o=this;return(o=DS.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,i)||this).D=r,o.Rr=!1,o}function BS(t,e,n,r,i){var o=this;return(o=OS.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i)||this).D=r,o}function KS(t,e,n,r,i,o){this.Fe=t,this.tr=n,this.er=r,this.nr=i,this.listener=o,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new xS(t,e)}function GS(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Fe=t,this.timerId=e,this.Ki=n,this.Wi=r,this.ji=i,this.Gi=0,this.zi=null,this.Hi=Date.now(),this.reset()}function WS(r){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:if(!ZS(r))return[3,4];e=0,n=r.Kr,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function HS(r){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:e=0,n=r.Kr,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function zS(t,e){t.Ur.has(e.targetId)||(t.Ur.set(e.targetId,e),$S(t)?JS(t):uC(t).ar()&&YS(t,e))}function QS(t,e){var n=t,t=uC(n);n.Ur.delete(e),t.ar()&&XS(n,e),0===n.Ur.size&&(t.ar()?t.lr():ZS(n)&&n.jr.set("Unknown"))}function YS(t,e){t.Gr.H(e.targetId),uC(t).Ir(e)}function XS(t,e){t.Gr.H(e),uC(t).Ar(e)}function JS(e){e.Gr=new p_({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},yt:function(t){return e.Ur.get(t)||null}}),uC(e).start(),e.jr.Or()}function $S(t){return ZS(t)&&!uC(t).cr()&&0<t.Ur.size}function ZS(t){return 0===t.Qr.size}function tC(t){t.Gr=void 0}function eC(s,a,u){return $i(this,void 0,void 0,function(){var n,o;return Zi(this,function(t){switch(t.label){case 0:if(s.jr.set("Online"),!(a instanceof l_&&2===a.state&&a.cause))return[3,6];t.label=1;case 1:return t.trys.push([1,3,,5]),[4,function(o,s){return $i(this,void 0,void 0,function(){var e,n,r,i;return Zi(this,function(t){switch(t.label){case 0:e=s.cause,n=0,r=s.targetIds,t.label=1;case 1:return n<r.length?(i=r[n],o.Ur.has(i)?[4,o.remoteSyncer.rejectListen(i,e)]:[3,3]):[3,5];case 2:t.sent(),o.Ur.delete(i),o.Gr.removeTarget(i),t.label=3;case 3:t.label=4;case 4:return n++,[3,1];case 5:return[2]}})})}(s,a)];case 2:return t.sent(),[3,5];case 3:return n=t.sent(),Fy("RemoteStore","Failed to remove targets %s: %s ",a.targetIds.join(","),n),[4,nC(s,n)];case 4:return t.sent(),[3,5];case 5:return[3,13];case 6:if(a instanceof c_?s.Gr.st(a):a instanceof h_?s.Gr.ht(a):s.Gr.ot(a),u.isEqual(Bb.min()))return[3,13];t.label=7;case 7:return t.trys.push([7,11,,13]),[4,wE(s.localStore)];case 8:return o=t.sent(),0<=u.compareTo(o)?[4,(i=u,(e=(r=s).Gr.dt(i)).targetChanges.forEach(function(t,e){var n;0<t.resumeToken.approximateByteSize()&&((n=r.Ur.get(e))&&r.Ur.set(e,n.withResumeToken(t.resumeToken,i)))}),e.targetMismatches.forEach(function(t){var e=r.Ur.get(t);e&&(r.Ur.set(t,e.withResumeToken(cm.EMPTY_BYTE_STRING,e.snapshotVersion)),XS(r,t),e=new VI(e.target,t,1,e.sequenceNumber),YS(r,e))}),r.remoteSyncer.applyRemoteEvent(e))]:[3,10];case 9:t.sent(),t.label=10;case 10:return[3,13];case 11:return Fy("RemoteStore","Failed to raise snapshot:",o=t.sent()),[4,nC(s,o)];case 12:return t.sent(),[3,13];case 13:return[2]}var r,i,e})})}function nC(n,r,i){return $i(this,void 0,void 0,function(){var e=this;return Zi(this,function(t){switch(t.label){case 0:if(!kI(r))throw r;return n.Qr.add(1),[4,HS(n)];case 1:return t.sent(),n.jr.set("Offline"),i=i||function(){return wE(n.localStore)},n.asyncQueue.enqueueRetryable(function(){return $i(e,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return Fy("RemoteStore","Retrying IndexedDB access"),[4,i()];case 1:return t.sent(),n.Qr.delete(1),[4,WS(n)];case 2:return t.sent(),[2]}})})}),[2]}})})}function rC(e,n){return n().catch(function(t){return nC(e,t,n)})}function iC(u){return $i(this,void 0,void 0,function(){var i,o,s,a;return Zi(this,function(t){switch(t.label){case 0:o=cC(i=u),s=0<i.qr.length?i.qr[i.qr.length-1].batchId:-1,t.label=1;case 1:if(!(ZS(i)&&i.qr.length<10))return[3,7];t.label=2;case 2:return t.trys.push([2,4,,6]),[4,(e=i.localStore,n=s,(r=e).persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===n&&(n=-1),r.Tn.getNextMutationBatchAfterBatchId(t,n)}))];case 3:return null===(a=t.sent())?(0===i.qr.length&&o.lr(),[3,7]):(s=a.batchId,function(t,e){t.qr.push(e);t=cC(t);t.ar()&&t.br&&t.vr(e.mutations)}(i,a),[3,6]);case 4:return a=t.sent(),[4,nC(i,a)];case 5:return t.sent(),[3,6];case 6:return[3,1];case 7:return oC(i)&&sC(i),[2]}var e,n,r})})}function oC(t){return ZS(t)&&!cC(t).cr()&&0<t.qr.length}function sC(t){cC(t).start()}function aC(n,r){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=n,r?(e.Qr.delete(2),[4,WS(e)]):[3,2];case 1:return t.sent(),[3,5];case 2:return r?[3,4]:(e.Qr.add(2),[4,HS(e)]);case 3:t.sent(),e.jr.set("Unknown"),t.label=4;case 4:t.label=5;case 5:return[2]}})})}function uC(n){var t,e,r,i=this;return n.zr||(n.zr=(t=n.datastore,e=n.asyncQueue,r={Vi:function(n){return $i(this,void 0,void 0,function(){return Zi(this,function(t){return n.Ur.forEach(function(t,e){YS(n,t)}),[2]})})}.bind(null,n),Di:function(e,n){return $i(this,void 0,void 0,function(){return Zi(this,function(t){return tC(e),$S(e)?(e.jr.Lr(n),JS(e)):e.jr.set("Unknown"),[2]})})}.bind(null,n),Tr:eC.bind(null,n)},t.Cr(),new LS(e,t.er,t.credentials,t.D,r)),n.Kr.push(function(e){return $i(i,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return e?(n.zr.hr(),$S(n)?JS(n):n.jr.set("Unknown"),[3,3]):[3,1];case 1:return[4,n.zr.stop()];case 2:t.sent(),tC(n),t.label=3;case 3:return[2]}})})})),n.zr}function cC(n){var t,e,r,i=this;return n.Hr||(n.Hr=(t=n.datastore,e=n.asyncQueue,r={Vi:function(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){return cC(e).Sr(),[2]})})}.bind(null,n),Di:function(e,n){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return n&&cC(e).br?[4,function(r,i){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return Bw(n=i.code)&&n!==rm.ABORTED?(e=r.qr.shift(),cC(r).hr(),[4,rC(r,function(){return r.remoteSyncer.rejectFailedWrite(e.batchId,i)})]):[3,3];case 1:return t.sent(),[4,iC(r)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e,n)]:[3,2];case 1:t.sent(),t.label=2;case 2:return oC(e)&&sC(e),[2]}})})}.bind(null,n),Vr:function(o){return $i(this,void 0,void 0,function(){var e,n,r,i;return Zi(this,function(t){for(e=cC(o),n=0,r=o.qr;n<r.length;n++)i=r[n],e.vr(i.mutations);return[2]})})}.bind(null,n),Pr:function(r,i,o){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return e=r.qr.shift(),n=qI.from(e,i,o),[4,rC(r,function(){return r.remoteSyncer.applySuccessfulWrite(n)})];case 1:return t.sent(),[4,iC(r)];case 2:return t.sent(),[2]}})})}.bind(null,n)},t.Cr(),new MS(e,t.er,t.credentials,t.D,r)),n.Kr.push(function(e){return $i(i,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return e?(n.Hr.hr(),[4,iC(n)]):[3,2];case 1:return t.sent(),[3,4];case 2:return[4,n.Hr.stop()];case 3:t.sent(),0<n.qr.length&&(Fy("RemoteStore","Stopping write stream with "+n.qr.length+" pending writes"),n.qr=[]),t.label=4;case 4:return[2]}})})})),n.Hr}var hC=(lC.createAndSchedule=function(t,e,n,r,i){i=new lC(t,e,Date.now()+n,r,i);return i.start(n),i},lC.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},lC.prototype.skipDelay=function(){return this.handleDelayElapsed()},lC.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new im(rm.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},lC.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})},lC.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},lC);function lC(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new yI,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}function fC(t,e){if(Uy("AsyncQueue",e+": "+t),kI(t))return new im(rm.UNAVAILABLE,e+": "+t);throw t}function pC(){this.queries=new KT(Ub,Fb),this.onlineState="Unknown",this.Zr=new Set}var dC=(wC.emptySet=function(t){return new wC(t.comparator)},wC.prototype.has=function(t){return null!=this.keyedMap.get(t)},wC.prototype.get=function(t){return this.keyedMap.get(t)},wC.prototype.first=function(){return this.sortedSet.minKey()},wC.prototype.last=function(){return this.sortedSet.maxKey()},wC.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},wC.prototype.indexOf=function(t){t=this.keyedMap.get(t);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(wC.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),wC.prototype.forEach=function(n){this.sortedSet.inorderTraversal(function(t,e){return n(t),!1})},wC.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},wC.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},wC.prototype.isEqual=function(t){if(!(t instanceof wC))return!1;if(this.size!==t.size)return!1;for(var e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();e.hasNext();){var r=e.getNext().key,i=n.getNext().key;if(!r.isEqual(i))return!1}return!0},wC.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},wC.prototype.copy=function(t,e){var n=new wC;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n},wC),gC=(bC.prototype.track=function(t){var e=t.doc.key,n=this.Jr.get(e);!n||0!==t.type&&3===n.type?this.Jr=this.Jr.insert(e,t):3===t.type&&1!==n.type?this.Jr=this.Jr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Jr=this.Jr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Jr=this.Jr.remove(e):1===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):Vy()},bC.prototype.Yr=function(){var n=[];return this.Jr.inorderTraversal(function(t,e){n.push(e)}),n},bC),vC=(mC.fromInitialDocuments=function(t,e,n,r){var i=[];return e.forEach(function(t){i.push({type:0,doc:t})}),new mC(t,e,dC.emptySet(e),i,n,r,!0,!1)},Object.defineProperty(mC.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),mC.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Fb(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},mC),yC=function(){this.Xr=void 0,this.listeners=[]};function mC(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}function bC(){this.Jr=new Gw(um.comparator)}function wC(n){this.comparator=n?function(t,e){return n(t,e)||um.comparator(t.key,e.key)}:function(t,e){return um.comparator(t.key,e.key)},this.keyedMap=n_,this.sortedSet=new Gw(this.comparator)}function _C(s,a){return $i(this,void 0,void 0,function(){var e,n,r,i,o;return Zi(this,function(t){switch(t.label){case 0:if(e=s,n=a.query,r=!1,(i=e.queries.get(n))||(r=!0,i=new yC),!r)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),o=i,[4,e.onListen(n)];case 2:return o.Xr=t.sent(),[3,4];case 3:return o=t.sent(),o=fC(o,"Initialization of query '"+jb(a.query)+"' failed"),[2,void a.onError(o)];case 4:return e.queries.set(n,i),i.listeners.push(a),a.eo(e.onlineState),i.Xr&&a.no(i.Xr)&&TC(e),[2]}})})}function IC(s,a){return $i(this,void 0,void 0,function(){var e,n,r,i,o;return Zi(this,function(t){return e=s,n=a.query,r=!1,(i=e.queries.get(n))&&0<=(o=i.listeners.indexOf(a))&&(i.listeners.splice(o,1),r=0===i.listeners.length),r?[2,(e.queries.delete(n),e.onUnlisten(n))]:[2]})})}function TC(t){t.Zr.forEach(function(t){t.next()})}var EC=(PC.prototype.no=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new vC(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.io?this.oo(t)&&(this.so.next(t),o=!0):this.co(t,this.onlineState)&&(this.ao(t),o=!0),this.ro=t,o},PC.prototype.onError=function(t){this.so.error(t)},PC.prototype.eo=function(t){this.onlineState=t;var e=!1;return this.ro&&!this.io&&this.co(this.ro,t)&&(this.ao(this.ro),e=!0),e},PC.prototype.co=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.uo&&n||t.docs.isEmpty()&&"Offline"!==e)},PC.prototype.oo=function(t){if(0<t.docChanges.length)return!0;var e=this.ro&&this.ro.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},PC.prototype.ao=function(t){t=vC.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.io=!0,this.so.next(t)},PC),SC=(RC.prototype.ho=function(){return"metadata"in this.payload},RC),CC=(kC.prototype.Gn=function(t){return k_(this.D,t)},kC.prototype.zn=function(t){return t.metadata.exists?L_(this.D,t.document,!1):new qm(this.Gn(t.metadata.name),this.Hn(t.metadata.readTime))},kC.prototype.Hn=S_,kC),AC=(NC.prototype.fo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},NC.prototype.wo=function(t){for(var e=new Map,n=new CC(this.D),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.Gn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],h=(e.get(c)||o_()).add(s);e.set(c,h)}}return e},NC.prototype.complete=function(){return $i(this,void 0,void 0,function(){var e,n,r,i;return Zi(this,function(t){switch(t.label){case 0:return[4,function(l,f,p,d){return $i(this,void 0,void 0,function(){var n,r,i,o,e,s,a,u,c,h;return Zi(this,function(t){switch(t.label){case 0:for(n=l,r=o_(),i=Zw,o=r_,e=0,s=p;e<s.length;e++)a=s[e],u=f.Gn(a.metadata.name),a.document&&(r=r.add(u)),i=i.insert(u,f.zn(a)),o=o.insert(u,f.Hn(a.metadata.readTime));return c=n.Qn.newChangeBuffer({trackRemovals:!0}),[4,TE(n,Lb(Nb(om.fromString("__bundle__/docs/"+d))))];case 1:return h=t.sent(),[2,n.persistence.runTransaction("Apply bundle documents","readwrite",function(e){return IE(e,c,i,Bb.min(),o).next(function(t){return c.apply(e),t}).next(function(t){return n.Ge.removeMatchingKeysForTargetId(e,h.targetId).next(function(){return n.Ge.addMatchingKeys(e,r,h.targetId)}).next(function(){return n.Kn.vn(e,t)})})})]}})})}(this.localStore,new CC(this.D),this.documents,this.lo.id)];case 1:e=t.sent(),n=this.wo(this.documents),r=0,i=this.queries,t.label=2;case 2:return r<i.length?(i=i[r],[4,function(e,i,o){return void 0===o&&(o=o_()),$i(this,void 0,void 0,function(){var n,r;return Zi(this,function(t){switch(t.label){case 0:return[4,TE(e,Lb(eT(i.bundledQuery)))];case 1:return n=t.sent(),[2,(r=e).persistence.runTransaction("Save named query","readwrite",function(t){var e=S_(i.readTime);if(0<=n.snapshotVersion.compareTo(e))return r.He.saveNamedQuery(t,i);e=n.withResumeToken(cm.EMPTY_BYTE_STRING,e);return r.Bn=r.Bn.insert(e.targetId,e),r.Ge.updateTargetData(t,e).next(function(){return r.Ge.removeMatchingKeysForTargetId(t,n.targetId)}).next(function(){return r.Ge.addMatchingKeys(t,o,n.targetId)}).next(function(){return r.He.saveNamedQuery(t,i)})})]}})})}(this.localStore,i,n.get(i.name))]):[3,5];case 3:t.sent(),t.label=4;case 4:return r++,[3,2];case 5:return[2,(this.progress.taskState="Success",new uE(Object.assign({},this.progress),e))]}})})},NC);function NC(t,e,n){this.lo=t,this.localStore=e,this.D=n,this.queries=[],this.documents=[],this.progress=DC(t)}function kC(t){this.D=t}function RC(t,e){this.payload=t,this.byteLength=e}function PC(t,e,n){this.query=t,this.so=e,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=n||{}}function DC(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var OC=function(t){this.key=t},xC=function(t){this.key=t},LC=(Object.defineProperty(qC.prototype,"To",{get:function(){return this._o},enumerable:!1,configurable:!0}),qC.prototype.Io=function(t,e){var s=this,a=e?e.Ao:new gC,u=(e||this).Eo,c=(e||this).mutatedKeys,h=u,l=!1,f=kb(this.query)&&u.size===this.query.limit?u.last():null,p=Rb(this.query)&&u.size===this.query.limit?u.first():null;if(t.inorderTraversal(function(t,e){var n=u.get(t),r=(r=e instanceof jm?e:null)&&(qb(s.query,r)?r:null),i=!!n&&s.mutatedKeys.has(n.key),o=!!r&&(r.hasLocalMutations||s.mutatedKeys.has(r.key)&&r.hasCommittedMutations),e=!1;n&&r?n.data().isEqual(r.data())?i!==o&&(a.track({type:3,doc:r}),e=!0):s.Ro(n,r)||(a.track({type:2,doc:r}),e=!0,(f&&0<s.po(r,f)||p&&s.po(r,p)<0)&&(l=!0)):!n&&r?(a.track({type:0,doc:r}),e=!0):n&&!r&&(a.track({type:1,doc:n}),e=!0,(f||p)&&(l=!0)),e&&(c=r?(h=h.add(r),o?c.add(t):c.delete(t)):(h=h.delete(t),c.delete(t)))}),kb(this.query)||Rb(this.query))for(;h.size>this.query.limit;){var n=kb(this.query)?h.last():h.first(),h=h.delete(n.key),c=c.delete(n.key);a.track({type:1,doc:n})}return{Eo:h,Ao:a,Mn:l,mutatedKeys:c}},qC.prototype.Ro=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},qC.prototype.applyChanges=function(t,e,n){var o=this,r=this.Eo;this.Eo=t.Eo,this.mutatedKeys=t.mutatedKeys;var i=t.Ao.Yr();i.sort(function(t,e){return r=t.type,i=e.type,n(r)-n(i)||o.po(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Vy()}}var r,i}),this.bo(n);var s=e?this.vo():[],n=0===this.yo.size&&this.current?1:0,e=n!==this.mo;return this.mo=n,0!==i.length||e?{snapshot:new vC(this.query,t.Eo,r,i,t.mutatedKeys,0==n,e,!1),Po:s}:{Po:s}},qC.prototype.eo=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new gC,mutatedKeys:this.mutatedKeys,Mn:!1},!1)):{Po:[]}},qC.prototype.Vo=function(t){return!this._o.has(t)&&!!this.Eo.has(t)&&!this.Eo.get(t).hasLocalMutations},qC.prototype.bo=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e._o=e._o.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e._o=e._o.delete(t)}),this.current=t.current)},qC.prototype.vo=function(){var e=this;if(!this.current)return[];var n=this.yo;this.yo=o_(),this.Eo.forEach(function(t){e.Vo(t.key)&&(e.yo=e.yo.add(t.key))});var r=[];return n.forEach(function(t){e.yo.has(t)||r.push(new xC(t))}),this.yo.forEach(function(t){n.has(t)||r.push(new OC(t))}),r},qC.prototype.So=function(t){this._o=t.jn,this.yo=o_();t=this.Io(t.documents);return this.applyChanges(t,!0)},qC.prototype.Do=function(){return vC.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)},qC),MC=function(t,e,n){this.query=t,this.targetId=e,this.view=n},FC=function(t){this.key=t,this.Co=!1},UC=(Object.defineProperty(jC.prototype,"isPrimaryClient",{get:function(){return!0===this.Uo},enumerable:!1,configurable:!0}),jC);function jC(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.xo={},this.No=new KT(Ub,Fb),this.$o=new Map,this.Fo=new Set,this.Oo=new Gw(um.comparator),this.ko=new Map,this.Mo=new DE,this.Lo={},this.Bo=new Map,this.qo=ET.ne(),this.onlineState="Unknown",this.Uo=void 0}function qC(t,e){this.query=t,this._o=e,this.mo=null,this.current=!1,this.yo=o_(),this.mutatedKeys=o_(),this.po=Vb(t),this.Eo=new dC(this.po)}function VC(i,o,s,a){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return i.Qo=function(t,e,n){return function(r,i,o,s){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return(e=i.view.Io(o)).Mn?[4,SE(r.localStore,i.query,!1).then(function(t){t=t.documents;return i.view.Io(t,e)})]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return n=s&&s.targetChanges.get(i.targetId),n=i.view.applyChanges(e,r.isPrimaryClient,n),[2,(JC(r,i.targetId,n.Po),n.snapshot)]}})})}(i,t,e,n)},[4,SE(i.localStore,o,!0)];case 1:return n=t.sent(),r=new LC(o,n.jn),e=r.Io(n.documents),n=u_.createSynthesizedTargetChangeForCurrentChange(s,a&&"Offline"!==i.onlineState),n=r.applyChanges(e,i.isPrimaryClient,n),JC(i,s,n.Po),r=new MC(o,s,r),[2,(i.No.set(o,r),i.$o.has(s)?i.$o.get(s).push(o):i.$o.set(s,[o]),n.snapshot)]}})})}function BC(f,p,d){return $i(this,void 0,void 0,function(){var s,a;return Zi(this,function(t){switch(t.label){case 0:a=sA(f),t.label=1;case 1:return t.trys.push([1,5,,6]),[4,(i=a.localStore,u=p,h=i,l=wm.now(),o=u.reduce(function(t,e){return t.add(e.key)},o_()),h.persistence.runTransaction("Locally write mutations","readwrite",function(a){return h.Kn.bn(a,o).next(function(t){c=t;for(var e,n=[],r=0,i=u;r<i.length;r++){var o=i[r],s=(e=o,s=c.get(o.key),function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof jm?e.field(o.field):void 0,s=Zb(o.transform,s||null);null!=s&&(n=(null==n?new Wb:n).set(o.field,s))}return n?n.v():null}(e.fieldTransforms,s));null!=s&&n.push(new Aw(o.key,s,function s(t){var a=[];return Yy(t.fields||{},function(t,e){var n=new am([t]);if(Lm(e))if(0===(e=s(e.mapValue).fields).length)a.push(n);else for(var r=0,i=e;r<i.length;r++){var o=i[r];a.push(n.child(o))}else a.push(n)}),new Kb(a)}(s.proto.mapValue),mw.exists(!0)))}return h.Tn.addMutationBatch(a,l,n,u)})}).then(function(t){var e=t.applyToLocalDocumentSet(c);return{batchId:t.batchId,changes:e}}))];case 2:return s=t.sent(),a.sharedClientState.addPendingMutation(s.batchId),e=a,n=s.batchId,r=d,i=(i=(i=e.Lo[e.currentUser.toKey()])||new Gw(Wy)).insert(n,r),e.Lo[e.currentUser.toKey()]=i,[4,ZC(a,s.changes)];case 3:return t.sent(),[4,iC(a.remoteStore)];case 4:return t.sent(),[3,6];case 5:return a=t.sent(),a=fC(a,"Failed to persist write"),d.reject(a),[3,6];case 6:return[2]}var e,n,r,i,u,c,h,l,o})})}function KC(r,i){return $i(this,void 0,void 0,function(){var n,e;return Zi(this,function(t){switch(t.label){case 0:n=r,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,_E(n.localStore,i)];case 2:return e=t.sent(),i.targetChanges.forEach(function(t,e){e=n.ko.get(e);e&&(By(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),0<t.addedDocuments.size?e.Co=!0:0<t.modifiedDocuments.size?By(e.Co):0<t.removedDocuments.size&&(By(e.Co),e.Co=!1))}),[4,ZC(n,e,i)];case 3:return t.sent(),[3,6];case 4:return[4,PT(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})}function GC(t,n,e){var r,t=t;(t.isPrimaryClient&&0===e||!t.isPrimaryClient&&1===e)&&(r=[],t.No.forEach(function(t,e){e=e.view.eo(n);e.snapshot&&r.push(e.snapshot)}),function(t,i){t.onlineState=i;var o=!1;t.queries.forEach(function(t,e){for(var n=0,r=e.listeners;n<r.length;n++)r[n].eo(i)&&(o=!0)}),o&&TC(t)}(t.eventManager,n),r.length&&t.xo.Tr(r),t.onlineState=n,t.isPrimaryClient&&t.sharedClientState.setOnlineState(n))}function WC(s,a,u){return $i(this,void 0,void 0,function(){var n,o;return Zi(this,function(t){switch(t.label){case 0:n=s,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,(e=n.localStore,r=a,(i=e).persistence.runTransaction("Reject batch","readwrite-primary",function(e){var n;return i.Tn.lookupMutationBatch(e,r).next(function(t){return By(null!==t),n=t.keys(),i.Tn.removeMutationBatch(e,t)}).next(function(){return i.Tn.performConsistencyCheck(e)}).next(function(){return i.Kn.bn(e,n)})}))];case 2:return o=t.sent(),QC(n,a,u),zC(n,a),n.sharedClientState.updateMutationState(a,"rejected",u),[4,ZC(n,o)];case 3:return t.sent(),[3,6];case 4:return[4,PT(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}var e,r,i})})}function HC(o,s){return $i(this,void 0,void 0,function(){var n,r,i;return Zi(this,function(t){switch(t.label){case 0:ZS((n=o).remoteStore)||Fy("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(e=n.localStore).persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.Tn.getHighestUnacknowledgedBatchId(t)})];case 2:return-1===(r=t.sent())?[2,void s.resolve()]:((i=n.Bo.get(r)||[]).push(s),n.Bo.set(r,i),[3,4]);case 3:return i=t.sent(),i=fC(i,"Initialization of waitForPendingWrites() operation failed"),s.reject(i),[3,4];case 4:return[2]}var e})})}function zC(t,e){(t.Bo.get(e)||[]).forEach(function(t){t.resolve()}),t.Bo.delete(e)}function QC(t,e,n){var r=t,i=r.Lo[r.currentUser.toKey()];i&&((t=i.get(e))&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.Lo[r.currentUser.toKey()]=i)}function YC(e,t,n){void 0===n&&(n=null),e.sharedClientState.removeLocalQueryTarget(t);for(var r=0,i=e.$o.get(t);r<i.length;r++){var o=i[r];e.No.delete(o),n&&e.xo.Ko(o,n)}e.$o.delete(t),e.isPrimaryClient&&e.Mo.os(t).forEach(function(t){e.Mo.containsKey(t)||XC(e,t)})}function XC(t,e){t.Fo.delete(e.path.canonicalString());var n=t.Oo.get(e);null!==n&&(QS(t.remoteStore,n),t.Oo=t.Oo.remove(e),t.ko.delete(n),$C(t))}function JC(t,e,n){for(var r,i,o,s=0,a=n;s<a.length;s++){var u=a[s];u instanceof OC?(t.Mo.addReference(u.key,e),r=t,o=void 0,i=(o=(i=u).key).path.canonicalString(),r.Oo.get(o)||r.Fo.has(i)||(Fy("SyncEngine","New document in limbo: "+o),r.Fo.add(i),$C(r))):u instanceof xC?(Fy("SyncEngine","Document no longer in limbo: "+u.key),t.Mo.removeReference(u.key,e),t.Mo.containsKey(u.key)||XC(t,u.key)):Vy()}}function $C(t){for(;0<t.Fo.size&&t.Oo.size<t.maxConcurrentLimboResolutions;){var e=t.Fo.values().next().value;t.Fo.delete(e);var n=new um(om.fromString(e)),e=t.qo.next();t.ko.set(e,new FC(n)),t.Oo=t.Oo.insert(n,e),zS(t.remoteStore,new VI(Lb(Nb(n.path)),e,2,Oy.o))}}function ZC(e,s,a){return $i(this,void 0,void 0,function(){var n,r,i,o;return Zi(this,function(t){switch(t.label){case 0:return r=[],i=[],o=[],(n=e).No.isEmpty()?[3,3]:(n.No.forEach(function(t,e){o.push(n.Qo(e,s,a).then(function(t){t&&(n.isPrimaryClient&&n.sharedClientState.updateQueryState(e.targetId,t.fromCache?"not-current":"current"),r.push(t),t=hE.Nn(e.targetId,t),i.push(t))}))}),[4,Promise.all(o)]);case 1:return t.sent(),n.xo.Tr(r),[4,function(u,c){return $i(this,void 0,void 0,function(){var r,e,n,i,o,s,a;return Zi(this,function(t){switch(t.label){case 0:r=u,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return mI.forEach(c,function(e){return mI.forEach(e.Cn,function(t){return r.persistence.referenceDelegate.addReference(n,e.targetId,t)}).next(function(){return mI.forEach(e.xn,function(t){return r.persistence.referenceDelegate.removeReference(n,e.targetId,t)})})})})];case 2:return t.sent(),[3,4];case 3:if(!kI(e=t.sent()))throw e;return Fy("LocalStore","Failed to update sequence numbers: "+e),[3,4];case 4:for(n=0,i=c;n<i.length;n++)a=i[n],o=a.targetId,a.fromCache||(s=r.Bn.get(o),a=s.snapshotVersion,a=s.withLastLimboFreeSnapshotVersion(a),r.Bn=r.Bn.insert(o,a));return[2]}})})}(n.localStore,i)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}function tA(i,o){return $i(this,void 0,void 0,function(){var n,r;return Zi(this,function(t){switch(t.label){case 0:return(n=i).currentUser.isEqual(o)?[3,3]:(Fy("SyncEngine","User change. New user:",o.toKey()),[4,mE(n.localStore,o)]);case 1:return r=t.sent(),n.currentUser=o,(e=n).Bo.forEach(function(t){t.forEach(function(t){t.reject(new im(rm.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Bo.clear(),n.sharedClientState.handleUserChange(o,r.removedBatchIds,r.addedBatchIds),[4,ZC(n,r.Wn)];case 2:t.sent(),t.label=3;case 3:return[2]}var e})})}function eA(a,u,c,h){return $i(this,void 0,void 0,function(){var o,s;return Zi(this,function(t){switch(t.label){case 0:return[4,(e=(o=a).localStore,n=u,i=(r=e).Tn,r.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return i.Jt(e,n).next(function(t){return t?r.Kn.bn(e,t):mI.resolve(null)})}))];case 1:return null===(s=t.sent())?[3,6]:"pending"!==c?[3,3]:[4,iC(o.remoteStore)];case 2:return t.sent(),[3,4];case 3:"acknowledged"===c||"rejected"===c?(QC(o,u,h||null),zC(o,u),o.localStore.Tn.Xt(u)):Vy(),t.label=4;case 4:return[4,ZC(o,s)];case 5:return t.sent(),[3,7];case 6:Fy("SyncEngine","Cannot apply mutation batch with id: "+u),t.label=7;case 7:return[2]}var e,n,r,i})})}function nA(h,l){return $i(this,void 0,void 0,function(){var r,e,i,o,s,a,u,c;return Zi(this,function(t){switch(t.label){case 0:return oA(r=h),sA(r),!0!==l||!0===r.Uo?[3,3]:(e=r.sharedClientState.getAllActiveQueryTargets(),[4,rA(r,e.toArray())]);case 1:return i=t.sent(),r.Uo=!0,[4,aC(r.remoteStore,!0)];case 2:for(t.sent(),o=0,s=i;o<s.length;o++)a=s[o],zS(r.remoteStore,a);return[3,7];case 3:return!1!==l||!1===r.Uo?[3,7]:(u=[],c=Promise.resolve(),r.$o.forEach(function(t,e){r.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then(function(){return YC(r,e),EE(r.localStore,e,!0)}),QS(r.remoteStore,e)}),[4,c]);case 4:return t.sent(),[4,rA(r,u)];case 5:return t.sent(),(n=r).ko.forEach(function(t,e){QS(n.remoteStore,e)}),n.Mo.cs(),n.ko=new Map,n.Oo=new Gw(um.comparator),r.Uo=!1,[4,aC(r.remoteStore,!1)];case 6:t.sent(),t.label=7;case 7:return[2]}var n})})}function rA(p,d){return $i(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l,f;return Zi(this,function(t){switch(t.label){case 0:e=p,n=[],r=[],i=0,o=d,t.label=1;case 1:return i<o.length?(s=o[i],a=void 0,(u=e.$o.get(s))&&0!==u.length?[4,TE(e.localStore,Lb(u[0]))]:[3,7]):[3,13];case 2:a=t.sent(),c=0,h=u,t.label=3;case 3:return c<h.length?(l=h[c],l=e.No.get(l),[4,function(r,i){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,SE((e=r).localStore,i.query,!0)];case 1:return n=t.sent(),n=i.view.So(n),[2,(e.isPrimaryClient&&JC(e,i.targetId,n.Po),n)]}})})}(e,l)]):[3,6];case 4:(l=t.sent()).snapshot&&r.push(l.snapshot),t.label=5;case 5:return c++,[3,3];case 6:return[3,11];case 7:return[4,CE(e.localStore,s)];case 8:return f=t.sent(),[4,TE(e.localStore,f)];case 9:return a=t.sent(),[4,VC(e,iA(f),s,!1)];case 10:t.sent(),t.label=11;case 11:n.push(a),t.label=12;case 12:return i++,[3,1];case 13:return[2,(e.xo.Tr(r),n)]}})})}function iA(t){return Ab(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function oA(t){return t.remoteStore.remoteSyncer.applyRemoteEvent=KC.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=function(t,e){var n=t;if((t=n.ko.get(e))&&t.Co)return o_().add(t.key);var r=o_();if(!(e=n.$o.get(e)))return r;for(var i=0,o=e;i<o.length;i++)var s=o[i],s=n.No.get(s),r=r.unionWith(s.view.To);return r}.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=function(o,s,a){return $i(this,void 0,void 0,function(){var e,n,r,i;return Zi(this,function(t){switch(t.label){case 0:return(e=o).sharedClientState.updateQueryState(s,"rejected",a),i=e.ko.get(s),(n=i&&i.key)?(r=(r=new Gw(um.comparator)).insert(n,new qm(n,Bb.min())),i=o_().add(n),i=new a_(Bb.min(),new Map,new Jw(Wy),r,i),[4,KC(e,i)]):[3,2];case 1:return t.sent(),e.Oo=e.Oo.remove(n),e.ko.delete(s),$C(e),[3,4];case 2:return[4,EE(e.localStore,s,!1).then(function(){return YC(e,s,a)}).catch(PT)];case 3:t.sent(),t.label=4;case 4:return[2]}})})}.bind(null,t),t.xo.Tr=function(t,e){for(var n=t,r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,a=n.queries.get(a);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].no(s)&&(r=!0);a.Xr=s}}r&&TC(n)}.bind(null,t.eventManager),t.xo.Ko=function(t,e,n){var r=t;if(t=r.queries.get(e))for(var i=0,o=t.listeners;i<o.length;i++)o[i].onError(n);r.queries.delete(e)}.bind(null,t.eventManager),t}function sA(t){return t.remoteStore.remoteSyncer.applySuccessfulWrite=function(i,o){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:e=i,n=o.batch.batchId,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,bE(e.localStore,o)];case 2:return r=t.sent(),QC(e,n,null),zC(e,n),e.sharedClientState.updateMutationState(n,"acknowledged"),[4,ZC(e,r)];case 3:return t.sent(),[3,6];case 4:return[4,PT(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})}.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=WC.bind(null,t),t}function aA(t,e,n){var r=t;!function(f,p,d){return $i(this,void 0,void 0,function(){var a,u,c,h,l;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,14,,15]),[4,p.getMetadata()];case 1:return a=t.sent(),[4,(r=f.localStore,o=r,s=S_((i=a).createTime),o.persistence.runTransaction("hasNewerBundle","readonly",function(t){return o.He.getBundleMetadata(t,i.id)}).then(function(t){return!!t&&0<=t.createTime.compareTo(s)}))];case 2:return t.sent()?[4,p.close()]:[3,4];case 3:return[2,(t.sent(),void d._completeWith({taskState:"Success",documentsLoaded:a.totalDocuments,bytesLoaded:a.totalBytes,totalDocuments:a.totalDocuments,totalBytes:a.totalBytes}))];case 4:return d._updateProgress(DC(a)),u=new AC(a,f.localStore,p.D),[4,p.Wo()];case 5:c=t.sent(),t.label=6;case 6:return c?[4,u.fo(c)]:[3,10];case 7:return(h=t.sent())&&d._updateProgress(h),[4,p.Wo()];case 8:c=t.sent(),t.label=9;case 9:return[3,6];case 10:return[4,u.complete()];case 11:return l=t.sent(),[4,ZC(f,l.En,void 0)];case 12:return t.sent(),[4,(r=f.localStore,e=a,(n=r).persistence.runTransaction("Save bundle","readwrite",function(t){return n.He.saveBundleMetadata(t,e)}))];case 13:return t.sent(),d._completeWith(l.progress),[3,15];case 14:return jy("SyncEngine","Loading bundle failed with "+(l=t.sent())),d._failWith(l),[3,15];case 15:return[2]}var e,n,r,i,o,s})})}(r,e,n).then(function(){r.sharedClientState.notifyBundleLoaded()})}var uA,cA,hA=(yA.prototype.initialize=function(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return this.D=kS(e.databaseInfo.databaseId),this.sharedClientState=this.jo(e),this.persistence=this.Go(e),[4,this.persistence.start()];case 1:return t.sent(),this.gcScheduler=this.zo(e),this.localStore=this.Ho(e),[2]}})})},yA.prototype.zo=function(t){return null},yA.prototype.Ho=function(t){return yE(this.persistence,new lE,t.initialUser,this.D)},yA.prototype.Go=function(t){return new UE(qE.Cs,this.D)},yA.prototype.jo=function(t){return new cS},yA.prototype.terminate=function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},yA),lA=(Xi(vA,cA=hA),vA.prototype.initialize=function(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return[4,cA.prototype.initialize.call(this,e)];case 1:return t.sent(),[4,NE(this.localStore)];case 2:return t.sent(),[4,this.Jo.initialize(this,e)];case 3:return t.sent(),[4,sA(this.Jo.syncEngine)];case 4:return t.sent(),[4,iC(this.Jo.remoteStore)];case 5:return t.sent(),[2]}})})},vA.prototype.Ho=function(t){return yE(this.persistence,new lE,t.initialUser,this.D)},vA.prototype.zo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new xT(e,t.asyncQueue)},vA.prototype.Go=function(t){var e=aE(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?dT.withCacheSize(this.cacheSizeBytes):dT.DEFAULT;return new rE(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,AS(),NS(),this.D,this.sharedClientState,!!this.forceOwnership)},vA.prototype.jo=function(t){return new cS},vA),fA=(Xi(gA,uA=lA),gA.prototype.initialize=function(r){return $i(this,void 0,void 0,function(){var e,n=this;return Zi(this,function(t){switch(t.label){case 0:return[4,uA.prototype.initialize.call(this,r)];case 1:return t.sent(),e=this.Jo.syncEngine,this.sharedClientState instanceof uS?(this.sharedClientState.syncEngine={wi:eA.bind(null,e),_i:function(i,o,s,a){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return(e=i).Uo?(Fy("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!e.$o.has(o))return[3,8];switch(s){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,AE(e.localStore)];case 3:return n=t.sent(),r=a_.createSynthesizedRemoteEventForCurrentChange(o,"current"===s),[4,ZC(e,n,r)];case 4:return t.sent(),[3,8];case 5:return[4,EE(e.localStore,o,!0)];case 6:return t.sent(),YC(e,o,a),[3,8];case 7:Vy(),t.label=8;case 8:return[2]}})})}.bind(null,e),mi:function(c,h,l){return $i(this,void 0,void 0,function(){var n,e,r,i,o,s,a,u;return Zi(this,function(t){switch(t.label){case 0:if(!(n=oA(c)).Uo)return[3,10];e=0,r=h,t.label=1;case 1:return e<r.length?(r=r[e],n.$o.has(r)?(Fy("SyncEngine","Adding an already active target "+r),[3,5]):[4,CE(n.localStore,r)]):[3,6];case 2:return i=t.sent(),[4,TE(n.localStore,i)];case 3:return o=t.sent(),[4,VC(n,iA(i),o.targetId,!1)];case 4:t.sent(),zS(n.remoteStore,o),t.label=5;case 5:return e++,[3,1];case 6:s=function(e){return Zi(this,function(t){switch(t.label){case 0:return n.$o.has(e)?[4,EE(n.localStore,e,!1).then(function(){QS(n.remoteStore,e),YC(n,e)}).catch(PT)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})},a=0,u=l,t.label=7;case 7:return a<u.length?(u=u[a],[5,s(u)]):[3,10];case 8:t.sent(),t.label=9;case 9:return a++,[3,7];case 10:return[2]}})})}.bind(null,e),gn:function(t){return t.localStore.persistence.gn()}.bind(null,e),di:function(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){return[2,AE((e=n).localStore).then(function(t){return ZC(e,t)})]})})}.bind(null,e)},[4,this.sharedClientState.start()]):[3,3];case 2:t.sent(),t.label=3;case 3:return[4,this.persistence.en(function(e){return $i(n,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return[4,nA(this.Jo.syncEngine,e)];case 1:return t.sent(),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):e||this.gcScheduler.stop()),[2]}})})})];case 4:return t.sent(),[2]}})})},gA.prototype.jo=function(t){var e=AS();if(!uS.At(e))throw new im(rm.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=aE(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new uS(e,t.asyncQueue,n,t.clientId,t.initialUser)},gA),pA=(dA.prototype.initialize=function(n,r){return $i(this,void 0,void 0,function(){var e=this;return Zi(this,function(t){switch(t.label){case 0:return this.localStore?[3,2]:(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return GC(e.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=tA.bind(null,this.syncEngine),[4,aC(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},dA.prototype.createEventManager=function(t){return new pC},dA.prototype.createDatastore=function(t){var e=kS(t.databaseInfo.databaseId),n=(n=t.databaseInfo,new dS(n));return t=t.credentials,new FS(t,n,e)},dA.prototype.createRemoteStore=function(t){var e=this,n=this.localStore,r=this.datastore,i=t.asyncQueue,o=function(t){return GC(e.syncEngine,t,0)},t=new(lS.At()?lS:hS);return new RS(n,r,i,o,t)},dA.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){o=new UC(t,e,n,r,i,o);return s&&(o.Uo=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},dA.prototype.terminate=function(){return function(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=n,Fy("RemoteStore","RemoteStore shutting down."),e.Qr.add(5),[4,HS(e)];case 1:return t.sent(),e.Wr.shutdown(),e.jr.set("Unknown"),[2]}})})}(this.remoteStore)},dA);function dA(){}function gA(t,e){var n=this;return(n=uA.call(this,t,e,!1)||this).Jo=t,n.cacheSizeBytes=e,n.synchronizeTabs=!0,n}function vA(t,e,n){var r=this;return(r=cA.call(this)||this).Jo=t,r.cacheSizeBytes=e,r.forceOwnership=n,r.synchronizeTabs=!1,r}function yA(){this.synchronizeTabs=!1}function mA(n,r){void 0===r&&(r=10240);var i=0;return{read:function(){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){return i<n.byteLength?(e={value:n.slice(i,i+r),done:!1},[2,(i+=r,e)]):[2,{done:!0}]})})},cancel:function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){return[2]})})},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var bA=(NA.prototype.next=function(t){this.observer.next&&this.Yo(this.observer.next,t)},NA.prototype.error=function(t){this.observer.error?this.Yo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},NA.prototype.Xo=function(){this.muted=!0},NA.prototype.Yo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},NA),wA=(AA.prototype.close=function(){return this.Zo.cancel()},AA.prototype.getMetadata=function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){return[2,this.metadata.promise]})})},AA.prototype.Wo=function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.ec())]}})})},AA.prototype.ec=function(){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return[4,this.nc()];case 1:return null===(e=t.sent())?[2,null]:(r=this.tc.decode(e),n=Number(r),isNaN(n)&&this.sc("length string ("+r+") is not valid number"),[4,this.ic(n)]);case 2:return r=t.sent(),[2,new SC(JSON.parse(r),e.length+n)]}})})},AA.prototype.rc=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},AA.prototype.nc=function(){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return this.rc()<0?[4,this.oc()]:[3,3];case 1:if(t.sent())return[3,3];t.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((e=this.rc())<0&&this.sc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,e),[2,(this.buffer=this.buffer.slice(e),n)])}})})},AA.prototype.ic=function(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return this.buffer.length<n?[4,this.oc()]:[3,3];case 1:t.sent()&&this.sc("Reached the end of bundle when more is expected."),t.label=2;case 2:return[3,0];case 3:return e=this.tc.decode(this.buffer.slice(0,n)),[2,(this.buffer=this.buffer.slice(n),e)]}})})},AA.prototype.sc=function(t){throw this.Zo.cancel(),new Error("Invalid bundle format: "+t)},AA.prototype.oc=function(){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,this.Zo.read()];case 1:return(e=t.sent()).done||((n=new Uint8Array(this.buffer.length+e.value.length)).set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n),[2,e.done]}})})},AA),_A=(CA.prototype.lookup=function(r){return $i(this,void 0,void 0,function(){var e,n=this;return Zi(this,function(t){switch(t.label){case 0:if(this.ensureCommitNotCalled(),0<this.mutations.length)throw new im(rm.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(s,a){return $i(this,void 0,void 0,function(){var n,e,r,i,o;return Zi(this,function(t){switch(t.label){case 0:return e=D_((n=s).D)+"/documents",r={documents:a.map(function(t){return N_(n.D,t)})},[4,n.Ui("BatchGetDocuments",e,r)];case 1:return r=t.sent(),i=new Map,r.forEach(function(t){var e,t=(e=n.D,"found"in(t=t)?function(t,e){By(!!e.found),e.found.name,e.found.updateTime;var n=k_(t,e.found.name),t=S_(e.found.updateTime),e=new Gb({mapValue:{fields:e.found.fields}});return new jm(n,t,e,{})}(e,t):"missing"in t?function(t,e){By(!!e.missing),By(!!e.readTime);t=k_(t,e.missing),e=S_(e.readTime);return new qm(t,e)}(e,t):Vy());i.set(t.key.toString(),t)}),o=[],[2,(a.forEach(function(t){t=i.get(t.toString());By(!!t),o.push(t)}),o)]}})})}(this.datastore,r)];case 1:return[2,((e=t.sent()).forEach(function(t){t instanceof qm||t instanceof jm?n.recordVersion(t):Vy()}),e)]}})})},CA.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},CA.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},CA.prototype.delete=function(t){this.write(new Uw(t,this.precondition(t))),this.writtenDocs.add(t.toString())},CA.prototype.commit=function(){return $i(this,void 0,void 0,function(){var e,n=this;return Zi(this,function(t){switch(t.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return e=this.readVersions,this.mutations.forEach(function(t){e.delete(t.key.toString())}),e.forEach(function(t,e){e=um.fromPath(e);n.mutations.push(new jw(e,n.precondition(e)))}),[4,function(i,o){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return n=D_((e=i).D)+"/documents",r={writes:o.map(function(t){return M_(e.D,t)})},[4,e.Mi("Commit",n,r)];case 1:return t.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return t.sent(),this.committed=!0,[2]}})})},CA.prototype.recordVersion=function(t){var e;if(t instanceof jm)e=t.version;else{if(!(t instanceof qm))throw Vy();e=Bb.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new im(rm.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},CA.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?mw.updateTime(e):mw.none()},CA.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(this.writtenDocs.has(t.toString())||!e)return mw.exists(!0);if(e.isEqual(Bb.min()))throw new im(rm.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return mw.updateTime(e)},CA.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},CA.prototype.ensureCommitNotCalled=function(){},CA),IA=(SA.prototype.run=function(){this.ac()},SA.prototype.ac=function(){var t=this;this.rr.Yi(function(){return $i(t,void 0,void 0,function(){var e,n,r=this;return Zi(this,function(t){return e=new _A(this.datastore),(n=this.uc(e))&&n.then(function(t){r.asyncQueue.enqueueAndForget(function(){return e.commit().then(function(){r.deferred.resolve(t)}).catch(function(t){r.hc(t)})})}).catch(function(t){r.hc(t)}),[2]})})})},SA.prototype.uc=function(t){try{var e=this.updateFunction(t);return!Jy(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},SA.prototype.hc=function(t){var e=this;0<this.cc&&this.lc(t)?(--this.cc,this.asyncQueue.enqueueAndForget(function(){return e.ac(),Promise.resolve()})):this.deferred.reject(t)},SA.prototype.lc=function(t){if("FirebaseError"!==t.name)return!1;t=t.code;return"aborted"===t||"failed-precondition"===t||!Bw(t)},SA),TA=(EA.prototype.getConfiguration=function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},EA.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},EA.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new im(rm.FAILED_PRECONDITION,"The client has already been terminated.")},EA.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var n=new yI;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:t.sent(),t.label=4;case 4:return this.credentials.removeChangeListener(),n.resolve(),[3,6];case 5:return e=t.sent(),e=fC(e,"Failed to shutdown persistence"),n.reject(e),[3,6];case 6:return[2]}})})}),n.promise},EA);function EA(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=VE.UNAUTHENTICATED,this.clientId=Ky.u(),this.credentialListener=function(){},this.receivedInitialUser=new yI,this.credentials.setChangeListener(function(t){Fy("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}function SA(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.cc=5,this.rr=new xS(this.asyncQueue,"transaction_retry")}function CA(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}function AA(t,e){var n=this;this.Zo=t,this.D=e,this.metadata=new yI,this.buffer=new Uint8Array,this.tc=new TextDecoder("utf-8"),this.ec().then(function(t){t&&t.ho()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}function NA(t){this.observer=t,this.muted=!1}function kA(i,o){return $i(this,void 0,void 0,function(){var e,n,r=this;return Zi(this,function(t){switch(t.label){case 0:return i.asyncQueue.verifyOperationInProgress(),Fy("FirestoreClient","Initializing OfflineComponentProvider"),[4,i.getConfiguration()];case 1:return e=t.sent(),[4,o.initialize(e)];case 2:return t.sent(),n=e.initialUser,i.setCredentialChangeListener(function(e){n.isEqual(e)||(n=e,i.asyncQueue.enqueueRetryable(function(){return $i(r,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return[4,mE(o.localStore,e)];case 1:return t.sent(),[2]}})})}))}),o.persistence.setDatabaseDeletedListener(function(){return i.terminate()}),i.offlineComponents=o,[2]}})})}function RA(r,i){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return r.asyncQueue.verifyOperationInProgress(),[4,PA(r)];case 1:return e=t.sent(),Fy("FirestoreClient","Initializing OnlineComponentProvider"),[4,r.getConfiguration()];case 2:return n=t.sent(),[4,i.initialize(e,n)];case 3:return t.sent(),r.setCredentialChangeListener(function(t){return r.asyncQueue.enqueueRetryable(function(){return function(r,i){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return(e=r).asyncQueue.verifyOperationInProgress(),Fy("RemoteStore","RemoteStore received new credentials"),n=ZS(e),e.Qr.add(3),[4,HS(e)];case 1:return t.sent(),n&&e.jr.set("Unknown"),[4,e.remoteSyncer.handleCredentialChange(i)];case 2:return t.sent(),e.Qr.delete(3),[4,WS(e)];case 3:return t.sent(),[2]}})})}(i.remoteStore,t)})}),r.onlineComponents=i,[2]}})})}function PA(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return e.offlineComponents?[3,2]:(Fy("FirestoreClient","Using default OfflineComponentProvider"),[4,kA(e,new hA)]);case 1:t.sent(),t.label=2;case 2:return[2,e.offlineComponents]}})})}function DA(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return e.onlineComponents?[3,2]:(Fy("FirestoreClient","Using default OnlineComponentProvider"),[4,RA(e,new pA)]);case 1:t.sent(),t.label=2;case 2:return[2,e.onlineComponents]}})})}function OA(t){return PA(t).then(function(t){return t.persistence})}function xA(t){return PA(t).then(function(t){return t.localStore})}function LA(t){return DA(t).then(function(t){return t.remoteStore})}function MA(t){return DA(t).then(function(t){return t.syncEngine})}function FA(r){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,DA(r)];case 1:return e=t.sent(),[2,((n=e.eventManager).onListen=function(s,a){return $i(this,void 0,void 0,function(){var e,n,r,i,o;return Zi(this,function(t){switch(t.label){case 0:return e=oA(s),(o=e.No.get(a))?(n=o.targetId,e.sharedClientState.addLocalQueryTarget(n),r=o.view.Do(),[3,4]):[3,1];case 1:return[4,TE(e.localStore,Lb(a))];case 2:return i=t.sent(),o=e.sharedClientState.addLocalQueryTarget(i.targetId),n=i.targetId,[4,VC(e,a,n,"current"===o)];case 3:r=t.sent(),e.isPrimaryClient&&zS(e.remoteStore,i),t.label=4;case 4:return[2,r]}})})}.bind(null,e.syncEngine),n.onUnlisten=function(i,o){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return n=(e=i).No.get(o),1<(r=e.$o.get(n.targetId)).length?[2,(e.$o.set(n.targetId,r.filter(function(t){return!Fb(t,o)})),void e.No.delete(o))]:e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(n.targetId),e.sharedClientState.isActiveQueryTarget(n.targetId)?[3,2]:[4,EE(e.localStore,n.targetId,!1).then(function(){e.sharedClientState.clearQueryState(n.targetId),QS(e.remoteStore,n.targetId),YC(e,n.targetId)}).catch(PT)]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,5];case 3:return YC(e,n.targetId),[4,EE(e.localStore,n.targetId,!0)];case 4:t.sent(),t.label=5;case 5:return[2]}})})}.bind(null,e.syncEngine),n)]}})})}function UA(n,r,i){var t=this;void 0===i&&(i={});var o=new yI;return n.asyncQueue.enqueueAndForget(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=function(n,r,i,o,s){var t=new bA({next:function(t){r.enqueueAndForget(function(){return IC(n,a)});var e=t.docs.has(i);!e&&t.fromCache?s.reject(new im(rm.UNAVAILABLE,"Failed to get document because the client is offline.")):e&&t.fromCache&&o&&"server"===o.source?s.reject(new im(rm.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(t)},error:function(t){return s.reject(t)}}),a=new EC(Nb(i.path),t,{includeMetadataChanges:!0,uo:!0});return _C(n,a)},[4,FA(n)];case 1:return[2,e.apply(void 0,[t.sent(),n.asyncQueue,r,i,o])]}})})}),o.promise}function jA(n,r,i){var t=this;void 0===i&&(i={});var o=new yI;return n.asyncQueue.enqueueAndForget(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=function(e,n,t,r,i){var o=new bA({next:function(t){n.enqueueAndForget(function(){return IC(e,s)}),t.fromCache&&"server"===r.source?i.reject(new im(rm.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(t)},error:function(t){return i.reject(t)}}),s=new EC(t,o,{includeMetadataChanges:!0,uo:!0});return _C(e,s)},[4,FA(n)];case 1:return[2,e.apply(void 0,[t.sent(),n.asyncQueue,r,i,o])]}})})}),o.promise}function qA(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t}var VA=function(t,e,n,r,i,o){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.autoDetectLongPolling=o},BA=(Object.defineProperty($A.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),$A.prototype.isEqual=function(t){return t instanceof $A&&t.projectId===this.projectId&&t.database===this.database},$A),KA=new Map,GA=(JA.prototype.getToken=function(){return Promise.resolve(null)},JA.prototype.invalidateToken=function(){},JA.prototype.setChangeListener=function(t){(this.changeListener=t)(VE.UNAUTHENTICATED)},JA.prototype.removeChangeListener=function(){this.changeListener=null},JA),WA=(XA.prototype.getToken=function(){var e=this,n=this.dc,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(function(t){return e.dc!==n?(Fy("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):t?(By("string"==typeof t.accessToken),new qA(t.accessToken,e.currentUser)):null}):Promise.resolve(null)},XA.prototype.invalidateToken=function(){this.forceRefresh=!0},XA.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},XA.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.fc),this.fc=null,this.changeListener=null},XA.prototype.wc=function(){var t=this.auth&&this.auth.getUid();return By(null===t||"string"==typeof t),new VE(t)},XA),HA=(Object.defineProperty(YA.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.mc},e=this._c.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),YA),zA=(QA.prototype.getToken=function(){return Promise.resolve(new HA(this._c,this.mc))},QA.prototype.setChangeListener=function(t){t(VE.FIRST_PARTY)},QA.prototype.removeChangeListener=function(){},QA.prototype.invalidateToken=function(){},QA);function QA(t,e){this._c=t,this.mc=e}function YA(t,e){this._c=t,this.mc=e,this.type="FirstParty",this.user=VE.FIRST_PARTY}function XA(t){var e=this;this.fc=null,this.currentUser=VE.UNAUTHENTICATED,this.receivedInitialUser=!1,this.dc=0,this.changeListener=null,this.forceRefresh=!1,this.fc=function(){e.dc++,e.currentUser=e.wc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.dc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.fc):(this.fc(null),t.get().then(function(t){e.auth=t,e.fc&&e.auth.addAuthTokenListener(e.fc)},function(){}))}function JA(){this.changeListener=null}function $A(t,e){this.projectId=t,this.database=e||"(default)"}function ZA(t,e,n){if(!n)throw new im(rm.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function tN(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new im(rm.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function eN(t,e,n,r){if(!0===e&&!0===r)throw new im(rm.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function nN(t){if(!um.isDocumentKey(t))throw new im(rm.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function rN(t){if(um.isDocumentKey(t))throw new im(rm.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function iN(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":Vy();if(e instanceof Array)return"an array";var t=function(){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}();return t?"a custom "+t+" object":"an object"}function oN(t,e){if((t="_delegate"in t?t._delegate:t)instanceof e)return t;if(e.name===t.constructor.name)throw new im(rm.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");t=iN(t);throw new im(rm.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+t)}function sN(t,e){if(e<=0)throw new im(rm.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var aN,uN=(mN.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},mN),cN=(Object.defineProperty(yN.prototype,"app",{get:function(){if(!this._app)throw new im(rm.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(yN.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(yN.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),yN.prototype._setSettings=function(t){if(this._settingsFrozen)throw new im(rm.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uN(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new GA;switch(t.type){case"gapi":var e=t.client;return By(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new zA(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new im(rm.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},yN.prototype._getSettings=function(){return this._settings},yN.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},yN.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},yN.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},yN.prototype._terminate=function(){return(t=KA.get(this))&&(Fy("ComponentProvider","Removing Datastore"),KA.delete(this),t.terminate()),Promise.resolve();var t},yN),hN=function(t){this._delegate=t},lN=(Object.defineProperty(vN.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(vN.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(vN.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(vN.prototype,"parent",{get:function(){return new pN(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),vN.prototype.withConverter=function(t){return new vN(this.firestore,t,this._key)},vN),fN=(gN.prototype.withConverter=function(t){return new gN(this.firestore,t,this._query)},gN),pN=(Xi(dN,aN=fN),Object.defineProperty(dN.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(dN.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(dN.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new lN(this.firestore,null,new um(t))},enumerable:!1,configurable:!0}),dN.prototype.withConverter=function(t){return new dN(this.firestore,t,this._path)},dN);function dN(t,e,n){var r=this;return(r=aN.call(this,t,e,Nb(n))||this).firestore=t,r._path=n,r.type="collection",r}function gN(t,e,n){this._converter=e,this._query=n,this.type="query",this.firestore=t}function vN(t,e,n){this._converter=e,this._key=n,this.type="document",this.firestore=t}function yN(t,e){this._persistenceKey="(lite)",this._settings=new uN({}),this._settingsFrozen=!1,t instanceof BA?(this._databaseId=t,this._credentials=new GA):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new im(rm.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new BA(t.options.projectId)}(t),this._credentials=new WA(e))}function mN(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new im(rm.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new im(rm.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,eN("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}function bN(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof hN&&(t=t._delegate),ZA("collection","path",e),t instanceof cN)return rN(n=om.fromString.apply(om,no([e],r))),new pN(t,null,n);if(!(t instanceof lN||t instanceof pN))throw new im(rm.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return rN(n=om.fromString.apply(om,no([t.path],r)).child(om.fromString(e))),new pN(t.firestore,null,n)}function wN(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof hN&&(t=t._delegate),ZA("doc","path",e=1===arguments.length?Ky.u():e),t instanceof cN)return nN(n=om.fromString.apply(om,no([e],r))),new lN(t,null,new um(n));if(!(t instanceof lN||t instanceof pN))throw new im(rm.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return nN(n=t._path.child(om.fromString.apply(om,no([e],r)))),new lN(t.firestore,t instanceof pN?t._converter:null,new um(n))}function _N(t,e){return t instanceof hN&&(t=t._delegate),e instanceof hN&&(e=e._delegate),(t instanceof lN||t instanceof pN)&&(e instanceof lN||e instanceof pN)&&t.firestore===e.firestore&&t.path===e.path&&t._converter===e._converter}function IN(t,e){return t instanceof hN&&(t=t._delegate),e instanceof hN&&(e=e._delegate),t instanceof fN&&e instanceof fN&&t.firestore===e.firestore&&Fb(t._query,e._query)&&t._converter===e._converter}var TN=(Object.defineProperty(EN.prototype,"isShuttingDown",{get:function(){return this.Ec},enumerable:!1,configurable:!0}),EN.prototype.enqueueAndForget=function(t){this.enqueue(t)},EN.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.vc(),this.Pc(t)},EN.prototype.enterRestrictedMode=function(){var t;this.Ec||(this.Ec=!0,(t=NS())&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.bc))},EN.prototype.enqueue=function(t){return this.vc(),this.Ec?new Promise(function(t){}):this.Pc(t)},EN.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.gc.push(t),e.Vc()})},EN.prototype.Vc=function(){return $i(this,void 0,void 0,function(){var e,n=this;return Zi(this,function(t){switch(t.label){case 0:if(0===this.gc.length)return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.gc[0]()];case 2:return t.sent(),this.gc.shift(),this.rr.reset(),[3,4];case 3:if(!kI(e=t.sent()))throw e;return Fy("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:0<this.gc.length&&this.rr.Yi(function(){return n.Vc()}),t.label=5;case 5:return[2]}})})},EN.prototype.Pc=function(t){var r=this,e=this.yc.then(function(){return r.Ac=!0,t().catch(function(t){throw r.Ic=t,r.Ac=!1,Uy("INTERNAL UNHANDLED ERROR: ",(n=(e=t).message||"",n=e.stack?e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack:n)),t;var e,n}).then(function(t){return r.Ac=!1,t})});return this.yc=e},EN.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.vc(),-1<this.Rc.indexOf(t)&&(e=0);n=hC.createAndSchedule(this,t,e,n,function(t){return r.Sc(t)});return this.Tc.push(n),n},EN.prototype.vc=function(){this.Ic&&Vy()},EN.prototype.verifyOperationInProgress=function(){},EN.prototype.Dc=function(){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,e=this.yc];case 1:t.sent(),t.label=2;case 2:if(e!==this.yc)return[3,0];t.label=3;case 3:return[2]}})})},EN.prototype.Cc=function(t){for(var e=0,n=this.Tc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},EN.prototype.xc=function(r){var i=this;return this.Dc().then(function(){i.Tc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var t=0,e=i.Tc;t<e.length;t++){var n=e[t];if(n.skipDelay(),"all"!==r&&n.timerId===r)break}return i.Dc()})},EN.prototype.Nc=function(t){this.Rc.push(t)},EN.prototype.Sc=function(t){t=this.Tc.indexOf(t);this.Tc.splice(t,1)},EN);function EN(){var e=this;this.yc=Promise.resolve(),this.gc=[],this.Ec=!1,this.Tc=[],this.Ic=null,this.Ac=!1,this.Rc=[],this.rr=new xS(this,"async_queue_retry"),this.bc=function(){var t=NS();t&&Fy("AsyncQueue","Visibility state changed to "+t.visibilityState),e.rr.Zi()};var t=NS();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.bc)}function SN(i){return function(){if("object"==typeof i&&null!==i)for(var t=i,e=0,n=["next","error","complete"];e<n.length;e++){var r=n[e];if(r in t&&"function"==typeof t[r])return 1}}()}var CN,AN=(RN.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},RN.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},RN.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},RN.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},RN.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},RN.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},RN),NN=(Xi(kN,CN=cN),kN.prototype._terminate=function(){return this._firestoreClient||DN(this),this._firestoreClient.terminate()},kN);function kN(t,e){var n=this;return(n=CN.call(this,t,e)||this)._queue=new TN,n._persistenceKey="name"in t?t.name:"[DEFAULT]",n}function RN(){this._progressObserver={},this._taskCompletionResolver=new yI,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}function PN(t){return t._firestoreClient||DN(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function DN(t){var e,n,r=t._freezeSettings(),r=(e=t._databaseId,n=t._persistenceKey,new VA(e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling));t._firestoreClient=new TA(t._credentials,t._queue,r)}function ON(r,i,o){var t=this,s=new yI;return r.asyncQueue.enqueue(function(){return $i(t,void 0,void 0,function(){var n;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,kA(r,o)];case 1:return t.sent(),[4,RA(r,i)];case 2:return t.sent(),s.resolve(),[3,4];case 3:if(!("FirebaseError"===(e=n=t.sent()).name?e.code===rm.FAILED_PRECONDITION||e.code===rm.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code))throw n;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+n),s.reject(n),[3,4];case 4:return[2]}var e})})}).then(function(){return s.promise})}function xN(t){if(t._initialized||t._terminated)throw new im(rm.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var LN=(HN.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},HN),MN=(WN.fromBase64String=function(t){try{return new WN(cm.fromBase64String(t))}catch(t){throw new im(rm.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}},WN.fromUint8Array=function(t){return new WN(cm.fromUint8Array(t))},WN.prototype.toBase64=function(){return this._byteString.toBase64()},WN.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},WN.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},WN.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},WN),FN=function(t){this._methodName=t},UN=(Object.defineProperty(GN.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(GN.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),GN.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},GN.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},GN.prototype._compareTo=function(t){return Wy(this._lat,t._lat)||Wy(this._long,t._long)},GN),jN=/^__.*__$/,qN=(KN.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Aw(t,this.data,this.fieldMask,e,this.fieldTransforms):new Cw(t,this.data,e,this.fieldTransforms)},KN),VN=(BN.prototype.toMutation=function(t,e){return new Aw(t,this.data,this.fieldMask,e,this.fieldTransforms)},BN);function BN(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}function KN(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}function GN(t,e){if(!isFinite(t)||t<-90||90<t)throw new im(rm.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new im(rm.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}function WN(t){this._byteString=t}function HN(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new im(rm.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new am(t)}function zN(t){switch(t){case 0:case 2:case 1:return 1;case 3:case 4:return;default:throw Vy()}}var QN=(Object.defineProperty(JN.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(JN.prototype,"Fc",{get:function(){return this.settings.Fc},enumerable:!1,configurable:!0}),JN.prototype.Oc=function(t){return new JN(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.D,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},JN.prototype.kc=function(t){var e=null===(e=this.path)||void 0===e?void 0:e.child(t),e=this.Oc({path:e,Mc:!1});return e.Lc(t),e},JN.prototype.Bc=function(t){var e,t=null===(e=this.path)||void 0===e?void 0:e.child(t),t=this.Oc({path:t,Mc:!1});return t.$c(),t},JN.prototype.qc=function(t){return this.Oc({path:void 0,Mc:!0})},JN.prototype.Uc=function(t){return Ck(t,this.settings.methodName,this.settings.Qc||!1,this.path,this.settings.Kc)},JN.prototype.contains=function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})},JN.prototype.$c=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Lc(this.path.get(t))},JN.prototype.Lc=function(t){if(0===t.length)throw this.Uc("Document fields must not be empty");if(zN(this.Fc)&&jN.test(t))throw this.Uc('Document fields cannot begin and end with "__"')},JN),YN=(XN.prototype.Wc=function(t,e,n,r){return void 0===r&&(r=!1),new QN({Fc:t,methodName:e,Kc:n,path:am.emptyPath(),Mc:!1,Qc:r},this.databaseId,this.D,this.ignoreUndefinedProperties)},XN);function XN(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.D=n||kS(t)}function JN(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.D=n,this.ignoreUndefinedProperties=r,void 0===i&&this.$c(),this.fieldTransforms=i||[],this.fieldMask=o||[]}function $N(t){var e=t._freezeSettings(),n=kS(t._databaseId);return new YN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ZN(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Wc(o.merge||o.mergeFields?2:0,e,n,i);Ik("Data must be an object, but it was:",s,r);var a,u,r=wk(r,s);if(o.merge)a=new Kb(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var c=[],h=0,l=o.mergeFields;h<l.length;h++){var f=Tk(e,l[h],n);if(!s.contains(f))throw new im(rm.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");Ak(c,f)||c.push(f)}a=new Kb(c),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new qN(new Gb(r),a,u)}var tk,ek=(Xi(nk,tk=FN),nk.prototype._toFieldTransform=function(t){if(2!==t.Fc)throw 1===t.Fc?t.Uc(this._methodName+"() can only appear at the top level of your update data"):t.Uc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},nk.prototype.isEqual=function(t){return t instanceof nk},nk);function nk(){return null!==tk&&tk.apply(this,arguments)||this}function rk(t,e,n){return new QN({Fc:3,Kc:e.settings.Kc,methodName:t._methodName,Mc:n},e.databaseId,e.D,e.ignoreUndefinedProperties)}var ik,ok,sk,ak,uk=(Xi(gk,ak=FN),gk.prototype._toFieldTransform=function(t){return new yw(t.path,new nw)},gk.prototype.isEqual=function(t){return t instanceof gk},gk),ck=(Xi(dk,sk=FN),dk.prototype._toFieldTransform=function(t){var e=rk(this,t,!0),n=this.jc.map(function(t){return bk(t,e)}),n=new rw(n);return new yw(t.path,n)},dk.prototype.isEqual=function(t){return this===t},dk),hk=(Xi(pk,ok=FN),pk.prototype._toFieldTransform=function(t){var e=rk(this,t,!0),n=this.jc.map(function(t){return bk(t,e)}),n=new uw(n);return new yw(t.path,n)},pk.prototype.isEqual=function(t){return this===t},pk),lk=(Xi(fk,ik=FN),fk.prototype._toFieldTransform=function(t){var e=new fw(t.D,$b(t.D,this.Gc));return new yw(t.path,e)},fk.prototype.isEqual=function(t){return this===t},fk);function fk(t,e){var n=this;return(n=ik.call(this,t)||this).Gc=e,n}function pk(t,e){var n=this;return(n=ok.call(this,t)||this).jc=e,n}function dk(t,e){var n=this;return(n=sk.call(this,t)||this).jc=e,n}function gk(){return null!==ak&&ak.apply(this,arguments)||this}function vk(t,r,i,e){var o=t.Wc(1,r,i);Ik("Data must be an object, but it was:",o,e);var s=[],a=new Wb;Yy(e,function(t,e){var n=Sk(r,t,i);e instanceof hN&&(e=e._delegate);t=o.Bc(n);e instanceof ek?s.push(n):null!=(t=bk(e,t))&&(s.push(n),a.set(n,t))});e=new Kb(s);return new VN(a.v(),e,o.fieldTransforms)}function yk(t,e,n,r,i,o){var s=t.Wc(1,e,n),a=[Tk(e,r,n)],u=[i];if(o.length%2!=0)throw new im(rm.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Tk(e,o[c])),u.push(o[c+1]);for(var h,l,f,p=[],d=new Wb,g=a.length-1;0<=g;--g)Ak(p,a[g])||(h=a[g],(l=u[g])instanceof hN&&(l=l._delegate),f=s.Bc(h),l instanceof ek?p.push(h):null!=(f=bk(l,f))&&(p.push(h),d.set(h,f)));i=new Kb(p);return new VN(d.v(),i,s.fieldTransforms)}function mk(t,e,n,r){return void 0===r&&(r=!1),bk(n,t.Wc(r?4:3,e))}function bk(s,t){if(_k(s=s instanceof hN?s._delegate:s))return Ik("Unsupported field value:",t,s),wk(s,t);if(s instanceof FN)return function(t,e){if(!zN(e.Fc))throw e.Uc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Uc(t._methodName+"() is not currently supported inside arrays");t=t._toFieldTransform(e);t&&e.fieldTransforms.push(t)}(s,t),null;if(void 0===s&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.Mc&&4!==t.Fc)throw t.Uc("Nested arrays are not supported");return function(t){for(var e=[],n=0,r=0,i=s;r<i.length;r++){var o=bk(i[r],t.qc(n));null==o&&(o={nullValue:"NULL_VALUE"}),e.push(o),n++}return{arrayValue:{values:e}}}(t)}return function(t,e){if(null===(t=t instanceof hN?t._delegate:t))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return $b(e.D,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=wm.fromDate(t);return{timestampValue:T_(e.D,n)}}if(t instanceof wm)return n=new wm(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:T_(e.D,n)};if(t instanceof UN)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof MN)return{bytesValue:E_(e.D,t._byteString)};if(t instanceof lN){var n=e.databaseId,r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Uc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:C_(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Uc("Unsupported field value: "+iN(t))}(s,t)}function wk(t,n){var r={};return Xy(t)?n.path&&0<n.path.length&&n.fieldMask.push(n.path):Yy(t,function(t,e){e=bk(e,n.kc(t));null!=e&&(r[t]=e)}),{mapValue:{fields:r}}}function _k(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof wm||t instanceof UN||t instanceof MN||t instanceof lN||t instanceof FN)}function Ik(t,e,n){if(!_k(n)||("object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r))){n=iN(n);throw"an object"===n?e.Uc(t+" a custom object"):e.Uc(t+" "+n)}var r}function Tk(t,e,n){if((e=e instanceof hN?e._delegate:e)instanceof LN)return e._internalPath;if("string"==typeof e)return Sk(t,e);throw Ck("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Ek=new RegExp("[~\\*/\\[\\]]");function Sk(e,n,r){if(0<=n.search(Ek))throw Ck("Invalid field path ("+n+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,r);try{return(new(LN.bind.apply(LN,no([void 0],n.split(".")))))._internalPath}catch(t){throw Ck("Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,r)}}function Ck(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,e="Function "+e+"() called with invalid data";n&&(e+=" (via `toFirestore()`)");n="";return(o||s)&&(n+=" (found",o&&(n+=" in field "+r),s&&(n+=" in document "+i),n+=")"),new im(rm.INVALID_ARGUMENT,(e+=". ")+t+n)}function Ak(t,e){return t.some(function(t){return t.isEqual(e)})}var Nk,kk=(Object.defineProperty(Dk.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(Dk.prototype,"ref",{get:function(){return new lN(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),Dk.prototype.exists=function(){return null!==this._document},Dk.prototype.data=function(){if(this._document){if(this._converter){var t=new Rk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.toProto())}},Dk.prototype.get=function(t){if(this._document){t=this._document.data().field(Ok("DocumentSnapshot.get",t));if(null!==t)return this._userDataWriter.convertValue(t)}},Dk),Rk=(Xi(Pk,Nk=kk),Pk.prototype.data=function(){return Nk.prototype.data.call(this)},Pk);function Pk(){return null!==Nk&&Nk.apply(this,arguments)||this}function Dk(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}function Ok(t,e){return"string"==typeof e?Sk(t,e):(e instanceof hN?e._delegate:e)._internalPath}var xk,Lk,Mk=(Kk.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},Kk),Fk=(Xi(Bk,Lk=kk),Bk.prototype.exists=function(){return Lk.prototype.exists.call(this)},Bk.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Uk(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.toProto(),t.serverTimestamps)}},Bk.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){t=this._document.data().field(Ok("DocumentSnapshot.get",t));if(null!==t)return this._userDataWriter.convertValue(t,e.serverTimestamps)}},Bk),Uk=(Xi(Vk,xk=Fk),Vk.prototype.data=function(t){return void 0===t&&(t={}),xk.prototype.data.call(this,t)},Vk),jk=(Object.defineProperty(qk.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(qk.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(qk.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),qk.prototype.forEach=function(e,n){var r=this;this._snapshot.docs.forEach(function(t){e.call(n,new Uk(r._firestore,r._userDataWriter,t.key,t,new Mk(r._snapshot.mutatedKeys.has(t.key),r._snapshot.fromCache),r.query._converter))})},qk.prototype.docChanges=function(t){t=!!(t=void 0===t?{}:t).includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new im(rm.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,e){if(i._snapshot.oldDocs.isEmpty()){var n=0;return i._snapshot.docChanges.map(function(t){var e=new Uk(i._firestore,i._userDataWriter,t.doc.key,t.doc,new Mk(i._snapshot.mutatedKeys.has(t.doc.key),i._snapshot.fromCache),i.query._converter);return t.doc,{type:"added",doc:e,oldIndex:-1,newIndex:n++}})}var o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(t){var e=new Uk(i._firestore,i._userDataWriter,t.doc.key,t.doc,new Mk(i._snapshot.mutatedKeys.has(t.doc.key),i._snapshot.fromCache),i.query._converter),n=-1,r=-1;return 0!==t.type&&(n=o.indexOf(t.doc.key),o=o.delete(t.doc.key)),1!==t.type&&(r=(o=o.add(t.doc)).indexOf(t.doc.key)),{type:function(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Vy()}}(t.type),doc:e,oldIndex:n,newIndex:r}})}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},qk);function qk(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Mk(r.hasPendingWrites,r.fromCache),this.query=n}function Vk(){return null!==xk&&xk.apply(this,arguments)||this}function Bk(t,e,n,r,i,o){var s=this;return(s=Lk.call(this,t,e,n,r,o)||this)._firestore=t,s._firestoreImpl=t,s.metadata=i,s}function Kk(t,e){this.hasPendingWrites=t,this.fromCache=e}function Gk(t,e){return t instanceof Fk&&e instanceof Fk?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof jk&&e instanceof jk&&t._firestore===e._firestore&&IN(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Wk(t){if(Rb(t)&&0===t.explicitOrderBy.length)throw new im(rm.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}Sn=function(){};function Hk(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++)t=i[r]._apply(t);return t}var zk,Qk,Yk,Xk,Jk,$k=(Xi(aR,Jk=Sn),aR.prototype._apply=function(t){var e=$N(t.firestore),e=function(t,e,n,r,i,o){if(r.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new im(rm.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+i+"' queries on FieldPath.documentId().");if("in"===i||"not-in"===i){hR(o,i);for(var s=[],a=0,u=o;a<u.length;a++){var c=u[a];s.push(cR(n,t,c))}h={arrayValue:{values:s}}}else h=cR(n,t,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||hR(o,i),h=mk(e,"where",o,"in"===i||"not-in"===i);var h=Jm.create(r,i,h);return function(t,e){if(e.g()){var n=Db(t);if(null!==n&&!n.isEqual(e.field))throw new im(rm.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");n=Pb(t);null!==n&&lR(0,e.field,n)}t=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(0<=e.indexOf(i.op))return i.op}return null}(t,function(){switch(e.op){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}());if(null!==t)throw t===e.op?new im(rm.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new im(rm.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+t.toString()+"' filters.")}(t,h),h}(t._query,e,t.firestore._databaseId,this.zc,this.Hc,this.Jc);return new fN(t.firestore,t._converter,(t=t._query,e=t.filters.concat([e]),new Cb(t.path,t.collectionGroup,t.explicitOrderBy.slice(),e,t.limit,t.limitType,t.startAt,t.endAt)))},aR),Zk=(Xi(sR,Xk=Sn),sR.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new im(rm.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new im(rm.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Tb(e,n);return e=r,null!==Pb(n=t)||null!==(t=Db(n))&&lR(0,t,e.field),r}(t._query,this.zc,this.Yc);return new fN(t.firestore,t._converter,(t=t._query,e=t.explicitOrderBy.concat([e]),new Cb(t.path,t.collectionGroup,e,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)))},sR),tR=(Xi(oR,Yk=Sn),oR.prototype._apply=function(t){return new fN(t.firestore,t._converter,Mb(t._query,this.Xc,this.Zc))},oR),eR=(Xi(iR,Qk=Sn),iR.prototype._apply=function(t){var e=uR(t,this.type,this.ta,this.ea);return new fN(t.firestore,t._converter,(t=t._query,e=e,new Cb(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)))},iR),nR=(Xi(rR,zk=Sn),rR.prototype._apply=function(t){var e=uR(t,this.type,this.ta,this.ea);return new fN(t.firestore,t._converter,(t=t._query,e=e,new Cb(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)))},rR);function rR(t,e,n){var r=this;return(r=zk.call(this)||this).type=t,r.ta=e,r.ea=n,r}function iR(t,e,n){var r=this;return(r=Qk.call(this)||this).type=t,r.ta=e,r.ea=n,r}function oR(t,e,n){var r=this;return(r=Yk.call(this)||this).type=t,r.Xc=e,r.Zc=n,r}function sR(t,e){var n=this;return(n=Xk.call(this)||this).zc=t,n.Yc=e,n.type="orderBy",n}function aR(t,e,n){var r=this;return(r=Jk.call(this)||this).zc=t,r.Hc=e,r.Jc=n,r.type="where",r}function uR(t,c,e,n){if(e[0]instanceof hN&&(e[0]=e[0]._delegate),e[0]instanceof kk)return function(t,e,n,r){if(!n)throw new im(rm.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+c+"().");for(var i=[],o=0,s=xb(t);o<s.length;o++){var a=s[o];if(a.field.isKeyField())i.push(Rm(e,n.key));else{var u=n.field(a.field);if(Im(u))throw new im(rm.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===u){a=a.field.canonicalString();throw new im(rm.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+a+"' (used as the orderBy) does not exist.")}i.push(u)}}return new yb(i,r)}(t._query,t.firestore._databaseId,e[0]._document,n);var r=$N(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new im(rm.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new im(rm.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Ob(t)&&-1!==c.indexOf("/"))throw new im(rm.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(om.fromString(c));if(!um.isDocumentKey(h))throw new im(rm.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");h=new um(h);a.push(Rm(e,h))}else{c=mk(n,r,c);a.push(c)}}return new yb(a,o)}(t._query,t.firestore._databaseId,r,c,e,n)}function cR(t,e,n){if("string"==typeof(n=n instanceof hN?n._delegate:n)){if(""===n)throw new im(rm.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ob(e)&&-1!==n.indexOf("/"))throw new im(rm.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");e=e.path.child(om.fromString(n));if(!um.isDocumentKey(e))throw new im(rm.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return Rm(t,new um(e))}if(n instanceof lN)return Rm(t,n._key);throw new im(rm.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+iN(n)+".")}function hR(t,e){if(!Array.isArray(t)||0===t.length)throw new im(rm.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new im(rm.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function lR(t,e,n){if(!n.isEqual(e))throw new im(rm.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}fR.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Em(t)){case 0:return null;case 1:return t.booleanValue;case 2:return mm(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(bm(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Vy()}},fR.prototype.convertObject=function(t,n){var r=this,i={};return Yy(t.fields||{},function(t,e){i[t]=r.convertValue(e,n)}),i},fR.prototype.convertGeoPoint=function(t){return new UN(mm(t.latitude),mm(t.longitude))},fR.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},fR.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=function t(e){e=e.mapValue.fields.__previous_value__;return Im(e)?t(e):e}(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Tm(t));default:return null}},fR.prototype.convertTimestamp=function(t){t=ym(t);return new wm(t.seconds,t.nanos)},fR.prototype.convertDocumentKey=function(t,e){var n=om.fromString(t);By(z_(n));t=new BA(n.get(1),n.get(3)),n=new um(n.popFirst(5));return t.isEqual(e)||Uy("Document "+n+" contains a document reference within a different database ("+t.projectId+"/"+t.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),n},H=fR;function fR(){}function pR(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var dR,gR=(Xi(mR,dR=H),mR.prototype.convertBytes=function(t){return new MN(t)},mR.prototype.convertReference=function(t){t=this.convertDocumentKey(t,this.firestore._databaseId);return new lN(this.firestore,null,t)},mR),vR=(yR.prototype.set=function(t,e,n){this._verifyNotCommitted();t=bR(t,this._firestore),e=pR(t._converter,e,n),n=ZN(this._dataReader,"WriteBatch.set",t._key,e,null!==t._converter,n);return this._mutations.push(n.toMutation(t._key,mw.none())),this},yR.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();t=bR(t,this._firestore),e="string"==typeof(e=e instanceof hN?e._delegate:e)||e instanceof LN?yk(this._dataReader,"WriteBatch.update",t._key,e,n,r):vk(this._dataReader,"WriteBatch.update",t._key,e);return this._mutations.push(e.toMutation(t._key,mw.exists(!0))),this},yR.prototype.delete=function(t){this._verifyNotCommitted();t=bR(t,this._firestore);return this._mutations=this._mutations.concat(new Uw(t._key,mw.none())),this},yR.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,0<this._mutations.length?this._commitHandler(this._mutations):Promise.resolve()},yR.prototype._verifyNotCommitted=function(){if(this._committed)throw new im(rm.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},yR);function yR(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=$N(t)}function mR(t){var e=this;return(e=dR.call(this)||this).firestore=t,e}function bR(t,e){if((t=t instanceof hN?t._delegate:t).firestore!==e)throw new im(rm.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var wR,_R=(Xi(IR,wR=H),IR.prototype.convertBytes=function(t){return new MN(t)},IR.prototype.convertReference=function(t){t=this.convertDocumentKey(t,this.firestore._databaseId);return new lN(this.firestore,null,t)},IR);function IR(t){var e=this;return(e=wR.call(this)||this).firestore=t,e}function TR(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=oN(t,lN);var o=oN(t.firestore,NN),s=$N(o);return SR(o,[("string"==typeof(e=e instanceof hN?e._delegate:e)||e instanceof LN?yk(s,"updateDoc",t._key,e,n,r):vk(s,"updateDoc",t._key,e)).toMutation(t._key,mw.exists(!0))])}function ER(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];e instanceof hN&&(e=e._delegate);var r={includeMetadataChanges:!1},i=0;"object"!=typeof n[i]||SN(n[i])||(r=n[i],i++);var o,s,a,u,c,h,l={includeMetadataChanges:r.includeMetadataChanges};return SN(n[i])&&(o=n[i],n[i]=null===(r=o.next)||void 0===r?void 0:r.bind(o),n[i+1]=null===(r=o.error)||void 0===r?void 0:r.bind(o),n[i+2]=null===(r=o.complete)||void 0===r?void 0:r.bind(o)),e instanceof lN?(a=oN(e.firestore,NN),u=Nb(e._key.path),h={next:function(t){n[i]&&n[i](CR(a,e,t))},error:n[i+1],complete:n[i+2]}):(s=oN(e,fN),a=oN(s.firestore,NN),u=s._query,c=new _R(a),h={next:function(t){n[i]&&n[i](new jk(a,c,s,t))},error:n[i+1],complete:n[i+2]},Wk(e._query)),function(n,t,e){var r=this,i=new bA(h),o=new EC(t,i,e);return n.asyncQueue.enqueueAndForget(function(){return $i(r,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=_C,[4,FA(n)];case 1:return[2,e.apply(void 0,[t.sent(),o])]}})})}),function(){i.Xo(),n.asyncQueue.enqueueAndForget(function(){return $i(r,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=IC,[4,FA(n)];case 1:return[2,e.apply(void 0,[t.sent(),o])]}})})})}}(PN(a),u,l)}function SR(t,e){return function(n,r){var t=this,i=new yI;return n.asyncQueue.enqueueAndForget(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=BC,[4,MA(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(PN(t),e)}function CR(t,e,n){var r=n.docs.get(e._key),i=new _R(t);return new Fk(t,i,e._key,r,new Mk(n.hasPendingWrites,n.fromCache),e._converter)}var AR,NR=(RR.prototype.get=function(t){var e=this,n=bR(t,this._firestore),r=new gR(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return Vy();t=t[0];if(t instanceof qm)return new kk(e._firestore,r,n._key,null,n._converter);if(t instanceof jm)return new kk(e._firestore,r,t.key,t,n._converter);throw Vy()})},RR.prototype.set=function(t,e,n){t=bR(t,this._firestore),e=pR(t._converter,e,n),n=ZN(this._dataReader,"Transaction.set",t._key,e,null!==t._converter,n);return this._transaction.set(t._key,n),this},RR.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=bR(t,this._firestore),e="string"==typeof(e=e instanceof hN?e._delegate:e)||e instanceof LN?yk(this._dataReader,"Transaction.update",t._key,e,n,r):vk(this._dataReader,"Transaction.update",t._key,e);return this._transaction.update(t._key,e),this},RR.prototype.delete=function(t){t=bR(t,this._firestore);return this._transaction.delete(t._key),this},Xi(kR,AR=RR),kR.prototype.get=function(t){var e=this,n=bR(t,this._firestore),r=new _R(this._firestore);return AR.prototype.get.call(this,t).then(function(t){return new Fk(e._firestore,r,n._key,t._document,new Mk(!1,!1),n._converter)})},kR);function kR(t,e){var n=this;return(n=AR.call(this,t,e)||this)._firestore=t,n}function RR(t,e){this._firestore=t,this._transaction=e,this._dataReader=$N(t)}function PR(){if("undefined"==typeof Uint8Array)throw new im(rm.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function DR(){if("undefined"==typeof atob)throw new im(rm.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var OR,xR,LR,MR=(Xi(KR,LR=hN),KR.fromBase64String=function(t){return DR(),new KR(MN.fromBase64String(t))},KR.fromUint8Array=function(t){return PR(),new KR(MN.fromUint8Array(t))},KR.prototype.toBase64=function(){return DR(),this._delegate.toBase64()},KR.prototype.toUint8Array=function(){return PR(),this._delegate.toUint8Array()},KR.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},KR.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},KR),FR=(BR.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){xN(t=oN(t,NN));var n=PN(t),r=t._freezeSettings(),t=new pA;return ON(n,t,new lA(t,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},BR.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){xN(t=oN(t,NN));var e=PN(t),n=t._freezeSettings(),t=new pA;return ON(e,t,new fA(t,n.cacheSizeBytes))}(t._delegate)},BR.prototype.clearIndexedDbPersistence=function(t){return function(n){var t=this;if(n._initialized&&!n._terminated)throw new im(rm.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var r=new yI;return n._queue.enqueueAndForgetEvenWhileRestricted(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,function(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return wI.At()?(e=n+"main",[4,wI.delete(e)]):[2,Promise.resolve()];case 1:return t.sent(),[2]}})})}(aE(n._databaseId,n._persistenceKey))];case 1:return t.sent(),r.resolve(),[3,3];case 2:return e=t.sent(),r.reject(e),[3,3];case 3:return[2]}})})}),r.promise}(t._delegate)},BR),UR=(Xi(VR,xR=hN),Object.defineProperty(VR.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),VR.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},VR.prototype.useEmulator=function(t,e){var n,r;n=this._delegate,r=t,t=e,"firestore.googleapis.com"!==(e=(n=oN(n,cN))._getSettings()).host&&e.host!==r&&jy("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},e),{host:r+":"+t,ssl:!1}))},VR.prototype.enableNetwork=function(){return function(i){var t=this;return i.asyncQueue.enqueue(function(){return $i(t,void 0,void 0,function(){var n,r;return Zi(this,function(t){switch(t.label){case 0:return[4,OA(i)];case 1:return n=t.sent(),[4,LA(i)];case 2:return r=t.sent(),[2,(n.setNetworkEnabled(!0),(e=r).Qr.delete(0),WS(e))]}var e})})})}(PN(oN(this._delegate,NN)))},VR.prototype.disableNetwork=function(){return function(r){var t=this;return r.asyncQueue.enqueue(function(){return $i(t,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,OA(r)];case 1:return e=t.sent(),[4,LA(r)];case 2:return n=t.sent(),[2,(e.setNetworkEnabled(!1),function(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return(e=n).Qr.add(0),[4,HS(e)];case 1:return t.sent(),e.jr.set("Offline"),[2]}})})}(n))]}})})})}(PN(oN(this._delegate,NN)))},VR.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&eN("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.na.enableMultiTabIndexedDbPersistence(this):this.na.enableIndexedDbPersistence(this,n)},VR.prototype.clearPersistence=function(){return this.na.clearIndexedDbPersistence(this)},VR.prototype.terminate=function(){return this.sa&&(this.sa._removeServiceInstance("firestore"),this.sa._removeServiceInstance("firestore-exp")),this._delegate._delete()},VR.prototype.waitForPendingWrites=function(){return function(n){var t=this,r=new yI;return n.asyncQueue.enqueueAndForget(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=HC,[4,MA(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})}),r.promise}(PN(oN(this._delegate,NN)))},VR.prototype.onSnapshotsInSync=function(t){return e=this._delegate,t=t,function(n,t){var e=this,r=new bA(t);return n.asyncQueue.enqueueAndForget(function(){return $i(e,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=function(t,e){t.Zr.add(e),e.next()},[4,FA(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})}),function(){r.Xo(),n.asyncQueue.enqueueAndForget(function(){return $i(e,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=function(t,e){t.Zr.delete(e)},[4,FA(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})})}}(PN(oN(e,NN)),SN(t)?t:{next:t});var e},Object.defineProperty(VR.prototype,"app",{get:function(){if(!this.sa)throw new im(rm.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.sa},enumerable:!1,configurable:!0}),VR.prototype.collection=function(t){try{return new vP(this,bN(this._delegate,t))}catch(t){throw nP(t,"collection()","Firestore.collection()")}},VR.prototype.doc=function(t){try{return new tP(this,wN(this._delegate,t))}catch(t){throw nP(t,"doc()","Firestore.doc()")}},VR.prototype.collectionGroup=function(t){try{return new pP(this,function(t,e){if(t=oN(t,cN),ZA("collectionGroup","collection id",e),0<=e.indexOf("/"))throw new im(rm.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new fN(t,null,(e=e,new Cb(om.emptyPath(),e)))}(this._delegate,t))}catch(t){throw nP(t,"collectionGroup()","Firestore.collectionGroup()")}},VR.prototype.runTransaction=function(e){var n,r=this;return function(n,r){var t=this,i=new yI;return n.asyncQueue.enqueueAndForget(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,DA(n).then(function(t){return t.datastore})];case 1:return e=t.sent(),new IA(n.asyncQueue,e,r,i).run(),[2]}})})}),i.promise}(PN(n=this._delegate),function(t){return t=new NR(n,t),e(new zR(r,t))})},VR.prototype.batch=function(){var e=this;return PN(this._delegate),new QR(new vR(this._delegate,function(t){return SR(e._delegate,t)}))},VR.prototype.loadBundle=function(t){throw new im(rm.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},VR.prototype.namedQuery=function(t){throw new im(rm.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},VR),jR=(Xi(qR,OR=H),qR.prototype.convertBytes=function(t){return new MR(new MN(t))},qR.prototype.convertReference=function(t){t=this.convertDocumentKey(t,this.firestore._databaseId);return tP.ia(t,this.firestore,null)},qR);function qR(t){var e=this;return(e=OR.call(this)||this).firestore=t,e}function VR(t,e,n){var r=this;return(r=xR.call(this,e)||this).na=n,r.INTERNAL={delete:function(){return r.terminate()}},t instanceof BA||(r.sa=t),r}function BR(){}function KR(){return null!==LR&&LR.apply(this,arguments)||this}var GR,WR,HR,zR=(Xi($R,HR=hN),$R.prototype.get=function(t){var e=this,n=TP(t);return this._delegate.get(n).then(function(t){return new lP(e._firestore,new Fk(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n._converter))})},$R.prototype.set=function(t,e,n){t=TP(t);return n?(tN("Transaction.set",n),this._delegate.set(t,e,n)):this._delegate.set(t,e),this},$R.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=TP(t);return 2===arguments.length?this._delegate.update(o,e):(t=this._delegate).update.apply(t,no([o,e,n],r)),this},$R.prototype.delete=function(t){t=TP(t);return this._delegate.delete(t),this},$R),QR=(Xi(JR,WR=hN),JR.prototype.set=function(t,e,n){t=TP(t);return n?(tN("WriteBatch.set",n),this._delegate.set(t,e,n)):this._delegate.set(t,e),this},JR.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=TP(t);return 2===arguments.length?this._delegate.update(o,e):(t=this._delegate).update.apply(t,no([o,e,n],r)),this},JR.prototype.delete=function(t){t=TP(t);return this._delegate.delete(t),this},JR.prototype.commit=function(){return this._delegate.commit()},JR),YR=(Xi(XR,GR=hN),XR.prototype.fromFirestore=function(t,e){t=new Uk(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new fP(this._firestore,t),null!=e?e:{})},XR.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},XR.ra=function(t,e){var n=XR.oa,r=n.get(t);r||(r=new WeakMap,n.set(t,r));n=r.get(e);return n||(n=new XR(t,new jR(t),e),r.set(e,n)),n},XR);function XR(t,e,n){var r=this;return(r=GR.call(this,n)||this)._firestore=t,r._userDataWriter=e,r}function JR(){return null!==WR&&WR.apply(this,arguments)||this}function $R(t,e){var n=this;return(n=HR.call(this,e)||this)._firestore=t,n._userDataWriter=new jR(t),n}YR.oa=new WeakMap;var ZR,tP=(Xi(eP,ZR=hN),eP.ca=function(t,e,n){if(t.length%2!=0)throw new im(rm.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new eP(e,new lN(e._delegate,n,new um(t)))},eP.ia=function(t,e,n){return new eP(e,new lN(e._delegate,n,t))},Object.defineProperty(eP.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(eP.prototype,"parent",{get:function(){return new vP(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(eP.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),eP.prototype.collection=function(t){try{return new vP(this.firestore,bN(this._delegate,t))}catch(t){throw nP(t,"collection()","DocumentReference.collection()")}},eP.prototype.isEqual=function(t){return(t=t instanceof hN?t._delegate:t)instanceof lN&&_N(this._delegate,t)},eP.prototype.set=function(t,e){e=tN("DocumentReference.set",e);try{return function(t,e,n){t=oN(t,lN);var r=oN(t.firestore,NN),e=pR(t._converter,e,n);return SR(r,[ZN($N(r),"setDoc",t._key,e,null!==t._converter,n).toMutation(t._key,mw.none())])}(this._delegate,t,e)}catch(t){throw nP(t,"setDoc()","DocumentReference.set()")}},eP.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?TR(this._delegate,t):TR.apply(void 0,no([this._delegate,t,e],n))}catch(t){throw nP(t,"updateDoc()","DocumentReference.update()")}},eP.prototype.delete=function(){return SR(oN((t=this._delegate).firestore,NN),[new Uw(t._key,mw.none())]);var t},eP.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=rP(t),i=iP(t,function(t){return new lP(e.firestore,new Fk(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))});return ER(this._delegate,r,i)},eP.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(e){e=oN(e,lN);var n=oN(e.firestore,NN),t=PN(n),r=new _R(n);return function(n,r){var t=this,i=new yI;return n.asyncQueue.enqueueAndForget(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=function(o,s,a){return $i(this,void 0,void 0,function(){var r,i;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(e=s,(n=o).persistence.runTransaction("read document","readonly",function(t){return n.Kn.In(t,e)}))];case 1:return(i=t.sent())instanceof jm?a.resolve(i):i instanceof qm?a.resolve(null):a.reject(new im(rm.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=t.sent(),i=fC(r,"Failed to get document '"+s+" from cache"),a.reject(i),[3,3];case 3:return[2]}var e,n})})},[4,xA(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(t,e._key).then(function(t){return new Fk(n,r,e._key,t,new Mk(t instanceof jm&&t.hasLocalMutations,!0),e._converter)})}:"server"===(null==t?void 0:t.source)?function(e){e=oN(e,lN);var n=oN(e.firestore,NN);return UA(PN(n),e._key,{source:"server"}).then(function(t){return CR(n,e,t)})}:function(e){e=oN(e,lN);var n=oN(e.firestore,NN);return UA(PN(n),e._key).then(function(t){return CR(n,e,t)})})(this._delegate).then(function(t){return new lP(e.firestore,new Fk(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))})},eP.prototype.withConverter=function(t){return new eP(this.firestore,t?this._delegate.withConverter(YR.ra(this.firestore,t)):this._delegate.withConverter(null))},eP);function eP(t,e){var n=this;return(n=ZR.call(this,e)||this).firestore=t,n._userDataWriter=new jR(t),n}function nP(t,e,n){return t.message=t.message.replace(e,n),t}function rP(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!SN(r))return r}return{}}function iP(t,e){var n;return{next:function(t){n.next&&n.next(e(t))},error:null===(t=(n=SN(t[0])?t[0]:SN(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===t?void 0:t.bind(n),complete:null===(t=n.complete)||void 0===t?void 0:t.bind(n)}}var oP,sP,aP,uP,cP,hP,lP=(Xi(IP,hP=hN),Object.defineProperty(IP.prototype,"ref",{get:function(){return new tP(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(IP.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(IP.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(IP.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),IP.prototype.data=function(t){return this._delegate.data(t)},IP.prototype.get=function(t,e){return this._delegate.get(t,e)},IP.prototype.isEqual=function(t){return Gk(this._delegate,t._delegate)},IP),fP=(Xi(_P,cP=lP),_P.prototype.data=function(t){return this._delegate.data(t)},_P),pP=(Xi(wP,uP=hN),wP.prototype.where=function(t,e,n){try{return new wP(this.firestore,Hk(this._delegate,(r=n,i=e,o=Ok("where",t),new $k(o,i,r))))}catch(t){throw nP(t,/(orderBy|where)\(\)/,"Query.$1()")}var r,i,o},wP.prototype.orderBy=function(t,e){try{return new wP(this.firestore,Hk(this._delegate,(n=void 0===e?"asc":e,r=Ok("orderBy",t),new Zk(r,n))))}catch(t){throw nP(t,/(orderBy|where)\(\)/,"Query.$1()")}var n,r},wP.prototype.limit=function(t){try{return new wP(this.firestore,Hk(this._delegate,(sN("limit",e=t),new tR("limit",e,"F"))))}catch(t){throw nP(t,"limit()","Query.limit()")}var e},wP.prototype.limitToLast=function(t){try{return new wP(this.firestore,Hk(this._delegate,(sN("limitToLast",e=t),new tR("limitToLast",e,"L"))))}catch(t){throw nP(t,"limitToLast()","Query.limitToLast()")}var e},wP.prototype.startAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new wP(this.firestore,Hk(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new eR("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw nP(t,"startAt()","Query.startAt()")}},wP.prototype.startAfter=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new wP(this.firestore,Hk(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new eR("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw nP(t,"startAfter()","Query.startAfter()")}},wP.prototype.endBefore=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new wP(this.firestore,Hk(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new nR("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw nP(t,"endBefore()","Query.endBefore()")}},wP.prototype.endAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new wP(this.firestore,Hk(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new nR("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw nP(t,"endAt()","Query.endAt()")}},wP.prototype.isEqual=function(t){return IN(this._delegate,t._delegate)},wP.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(e){e=oN(e,fN);var n=oN(e.firestore,NN),t=PN(n),r=new _R(n);return function(n,r){var t=this,i=new yI;return n.asyncQueue.enqueueAndForget(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=function(i,o,s){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,SE(i,o,!0)];case 1:return r=t.sent(),e=new LC(o,r.jn),n=e.Io(r.documents),n=e.applyChanges(n,!1),s.resolve(n.snapshot),[3,3];case 2:return n=t.sent(),r=fC(n,"Failed to execute query '"+o+" against cache"),s.reject(r),[3,3];case 3:return[2]}})})},[4,xA(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(t,e._query).then(function(t){return new jk(n,r,e,t)})}:"server"===(null==t?void 0:t.source)?function(e){e=oN(e,fN);var n=oN(e.firestore,NN),t=PN(n),r=new _R(n);return jA(t,e._query,{source:"server"}).then(function(t){return new jk(n,r,e,t)})}:function(e){e=oN(e,fN);var n=oN(e.firestore,NN),t=PN(n),r=new _R(n);return Wk(e._query),jA(t,e._query).then(function(t){return new jk(n,r,e,t)})})(this._delegate).then(function(t){return new gP(e.firestore,new jk(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},wP.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=rP(t),i=iP(t,function(t){return new gP(e.firestore,new jk(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))});return ER(this._delegate,r,i)},wP.prototype.withConverter=function(t){return new wP(this.firestore,t?this._delegate.withConverter(YR.ra(this.firestore,t)):this._delegate.withConverter(null))},wP),dP=(Xi(bP,aP=hN),Object.defineProperty(bP.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(bP.prototype,"doc",{get:function(){return new fP(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(bP.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(bP.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),bP),gP=(Xi(mP,sP=hN),Object.defineProperty(mP.prototype,"query",{get:function(){return new pP(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(mP.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(mP.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(mP.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(mP.prototype,"docs",{get:function(){var e=this;return this._delegate.docs.map(function(t){return new fP(e._firestore,t)})},enumerable:!1,configurable:!0}),mP.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new dP(e._firestore,t)})},mP.prototype.forEach=function(e,n){var r=this;this._delegate.forEach(function(t){e.call(n,new fP(r._firestore,t))})},mP.prototype.isEqual=function(t){return Gk(this._delegate,t._delegate)},mP),vP=(Xi(yP,oP=pP),Object.defineProperty(yP.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(yP.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(yP.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new tP(this.firestore,t):null},enumerable:!1,configurable:!0}),yP.prototype.doc=function(t){try{return new tP(this.firestore,void 0===t?wN(this._delegate):wN(this._delegate,t))}catch(t){throw nP(t,"doc()","CollectionReference.doc()")}},yP.prototype.add=function(t){var e,n,r,i=this;return e=this._delegate,n=t,t=oN(e.firestore,NN),r=wN(e),n=pR(e._converter,n),SR(t,[ZN($N(e.firestore),"addDoc",r._key,n,null!==e._converter,{}).toMutation(r._key,mw.exists(!1))]).then(function(){return r}).then(function(t){return new tP(i.firestore,t)})},yP.prototype.isEqual=function(t){return _N(this._delegate,t._delegate)},yP.prototype.withConverter=function(t){return new yP(this.firestore,t?this._delegate.withConverter(YR.ra(this.firestore,t)):this._delegate.withConverter(null))},yP);function yP(t,e){var n=this;return(n=oP.call(this,t,e)||this).firestore=t,n._delegate=e,n}function mP(t,e){var n=this;return(n=sP.call(this,e)||this)._firestore=t,n}function bP(t,e){var n=this;return(n=aP.call(this,e)||this)._firestore=t,n}function wP(t,e){var n=this;return(n=uP.call(this,e)||this).firestore=t,n._userDataWriter=new jR(t),n}function _P(){return null!==cP&&cP.apply(this,arguments)||this}function IP(t,e){var n=this;return(n=hP.call(this,e)||this)._firestore=t,n}function TP(t){return oN(t=t instanceof hN?t._delegate:t,lN)}var EP,SP,Sn=(Xi(AP,SP=hN),AP.documentId=function(){return new AP(am.keyField().canonicalString())},AP.prototype.isEqual=function(t){return(t=t instanceof hN?t._delegate:t)instanceof LN&&this._delegate._internalPath.isEqual(t._internalPath)},AP),H=(Xi(CP,EP=hN),CP.serverTimestamp=function(){var t=new uk("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new CP(t)},CP.delete=function(){var t=new ek("deleteField");return t._methodName="FieldValue.delete",new CP(t)},CP.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ck("arrayUnion",t)}.apply(void 0,t);return n._methodName="FieldValue.arrayUnion",new CP(n)},CP.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new hk("arrayRemove",t)}.apply(void 0,t);return n._methodName="FieldValue.arrayRemove",new CP(n)},CP.increment=function(t){t=new lk("increment",t);return t._methodName="FieldValue.increment",new CP(t)},CP.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},CP);function CP(){return null!==EP&&EP.apply(this,arguments)||this}function AP(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return SP.call(this,new(LN.bind.apply(LN,no([void 0],t))))||this}function NP(t){return e=this._delegate,s=t,n=PN(e=oN(e,NN)),t=new AN,function(n,t,r){var e,i=this,o=(e=s,t=kS(t),e=function(t){if(t instanceof Uint8Array)return mA(t,void 0);if(t instanceof ArrayBuffer)return mA(new Uint8Array(t),void 0);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),new wA(e,t));n.asyncQueue.enqueueAndForget(function(){return $i(i,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=aA,[4,MA(n)];case 1:return e.apply(void 0,[t.sent(),o,r]),[2]}})})})}(n,e._databaseId,t),t;var e,s,n}function kP(t){var e=this,n=this._delegate,t=t;return function(n,r){var t=this;return n.asyncQueue.enqueue(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=function(t,e){var n=t;return n.persistence.runTransaction("Get named query","readonly",function(t){return n.He.getNamedQuery(t,e)})},[4,xA(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})})}(PN(n=oN(n,NN)),t).then(function(t){return t?new fN(n,null,t.query):null}).then(function(t){return t?new pP(e,t):null})}var RP,PP,DP={Firestore:UR,GeoPoint:UN,Timestamp:wm,Blob:MR,Transaction:zR,WriteBatch:QR,DocumentReference:tP,DocumentSnapshot:lP,Query:pP,QueryDocumentSnapshot:fP,QuerySnapshot:gP,CollectionReference:vP,FieldPath:Sn,FieldValue:H,setLogLevel:function(t){Ly.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(RP=Xl).INTERNAL.registerComponent(new Zo("firestore",function(t){var e=t.getProvider("app").getImmediate();return e=e,t=t.getProvider("auth-internal"),new UR(e,new NN(e,t),new FR)},"PUBLIC").setServiceProps(Object.assign({},DP))),RP.registerVersion("@firebase/firestore","2.2.1"),(PP=UR).prototype.loadBundle=NP,PP.prototype.namedQuery=kP;var OP,xP={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},LP=(Xi(MP,OP=Error),MP);function MP(t,e,n){e=OP.call(this,e)||this;return Object.setPrototypeOf(e,MP.prototype),e.code=t,e.details=n,e}function FP(t,e,n){var r=function(t){if(200<=t&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!xP[a])return new LP("internal","internal");r=xP[a],i=a}a=s.message;"string"==typeof a&&(i=a),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new LP(r,i,o)}var UP=(jP.prototype.getAuthToken=function(){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},jP.prototype.getInstanceIdToken=function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){if(!(this.messaging&&"Notification"in self&&"granted"===Notification.permission))return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]})})},jP.prototype.getContext=function(){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,this.getAuthToken()];case 1:return e=t.sent(),[4,this.getInstanceIdToken()];case 2:return n=t.sent(),[2,{authToken:e,instanceIdToken:n}]}})})},jP);function jP(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(function(t){return n.auth=t},function(){}),this.messaging||e.get().then(function(t){return n.messaging=t},function(){})}function qP(t,e){var n,r={};for(n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}var VP=(BP.prototype.encode=function(t){var e=this;if(null==t)return null;if("number"==typeof(t=t instanceof Number?t.valueOf():t)&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return qP(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},BP.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?qP(t,function(t){return e.decode(t)}):t},BP);function BP(){}var KP=(Object.defineProperty(GP.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),GP.prototype._url=function(t){var e=this.app_.options.projectId;return null===this.emulatorOrigin?null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t:this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t},GP.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},GP.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},GP.prototype.httpsCallable=function(e,n){var r=this;return function(t){return r.call(e,t,n||{})}},GP.prototype.postJSON=function(r,i,o){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:o["Content-Type"]="application/json",t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.fetchImpl(r,{method:"POST",body:JSON.stringify(i),headers:o})];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),[2,{status:0,json:null}];case 4:n=null,t.label=5;case 5:return t.trys.push([5,7,,8]),[4,e.json()];case 6:return n=t.sent(),[3,8];case 7:return t.sent(),[3,8];case 8:return[2,{status:e.status,json:n}]}})})},GP.prototype.call=function(c,h,l){return $i(this,void 0,void 0,function(){var i,o,s,a,u;return Zi(this,function(t){switch(t.label){case 0:return i=this._url(c),h=this.serializer.encode(h),o={data:h},s={},[4,this.contextProvider.getContext()];case 1:return(a=t.sent()).authToken&&(s.Authorization="Bearer "+a.authToken),a.instanceIdToken&&(s["Firebase-Instance-ID-Token"]=a.instanceIdToken),u=l.timeout||7e4,n=u,e=new Promise(function(t,e){r=setTimeout(function(){e(new LP("deadline-exceeded","deadline-exceeded"))},n)}),u=(a={timer:r,promise:e}).timer,a=a.promise,[4,Promise.race([WP(u,this.postJSON(i,o,s)),a,WP(u,this.cancelAllRequests)])];case 2:if(!(a=t.sent()))throw new LP("cancelled","Firebase Functions instance was deleted.");if(u=FP(a.status,a.json,this.serializer))throw u;if(!a.json)throw new LP("internal","Response is not valid JSON object.");if(void 0===(u=void 0===(u=a.json.data)?a.json.result:u))throw new LP("internal","Response is missing data field.");return[2,{data:this.serializer.decode(u)}]}var n,r,e})})},GP);function GP(t,e,n,r,i){var o=this;void 0===r&&(r="us-central1"),this.app_=t,this.fetchImpl=i,this.serializer=new VP,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(o.deleteService())}},this.contextProvider=new UP(e,n),this.cancelAllRequests=new Promise(function(t){o.deleteService=function(){return t()}});try{var s=new URL(r);this.customDomain=s.origin,this.region="us-central1"}catch(t){this.customDomain=null,this.region=r}}function WP(n,r){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,r];case 1:return e=t.sent(),clearTimeout(n),[2,e]}})})}var HP,zP,QP;function YP(n){return new Promise(function(t,e){n.onsuccess=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function XP(n,r,i){var o,t=new Promise(function(t,e){YP(o=n[r].apply(n,i)).then(t,e)});return t.request=o,t}function JP(t,n,e){e.forEach(function(e){Object.defineProperty(t.prototype,e,{get:function(){return this[n][e]},set:function(t){this[n][e]=t}})})}function $P(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return XP(this[n],t,arguments)})})}function ZP(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return this[n][t].apply(this[n],arguments)})})}function tD(t,r,e,n){n.forEach(function(n){n in e.prototype&&(t.prototype[n]=function(){return t=this[r],(e=XP(t,n,arguments)).then(function(t){if(t)return new nD(t,e.request)});var t,e})})}function eD(t){this._index=t}function nD(t,e){this._cursor=t,this._request=e}function rD(t){this._store=t}function iD(n){this._tx=n,this.complete=new Promise(function(t,e){n.oncomplete=function(){t()},n.onerror=function(){e(n.error)},n.onabort=function(){e(n.error)}})}function oD(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new iD(n)}function sD(t){this._db=t}function aD(t,e,n){var e=XP(indexedDB,"open",[t,e]),r=e.request;return r&&(r.onupgradeneeded=function(t){n&&n(new oD(r.result,t.oldVersion,r.transaction))}),e.then(function(t){return new sD(t)})}function uD(t){return XP(indexedDB,"deleteDatabase",[t])}HP=Xl,zP=fetch.bind(self),QP={Functions:KP},HP.INTERNAL.registerComponent(new Zo("functions",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),e=t.getProvider("auth-internal"),t=t.getProvider("messaging");return new KP(r,e,t,n,zP)},"PUBLIC").setServiceProps(QP).setMultipleInstances(!0)),Xl.registerVersion("@firebase/functions","0.6.4"),JP(eD,"_index",["name","keyPath","multiEntry","unique"]),$P(eD,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),tD(eD,"_index",IDBIndex,["openCursor","openKeyCursor"]),JP(nD,"_cursor",["direction","key","primaryKey","value"]),$P(nD,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(n){n in IDBCursor.prototype&&(nD.prototype[n]=function(){var e=this,t=arguments;return Promise.resolve().then(function(){return e._cursor[n].apply(e._cursor,t),YP(e._request).then(function(t){if(t)return new nD(t,e._request)})})})}),rD.prototype.createIndex=function(){return new eD(this._store.createIndex.apply(this._store,arguments))},rD.prototype.index=function(){return new eD(this._store.index.apply(this._store,arguments))},JP(rD,"_store",["name","keyPath","indexNames","autoIncrement"]),$P(rD,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),tD(rD,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),ZP(rD,"_store",IDBObjectStore,["deleteIndex"]),iD.prototype.objectStore=function(){return new rD(this._tx.objectStore.apply(this._tx,arguments))},JP(iD,"_tx",["objectStoreNames","mode"]),ZP(iD,"_tx",IDBTransaction,["abort"]),oD.prototype.createObjectStore=function(){return new rD(this._db.createObjectStore.apply(this._db,arguments))},JP(oD,"_db",["name","version","objectStoreNames"]),ZP(oD,"_db",IDBDatabase,["deleteObjectStore","close"]),sD.prototype.transaction=function(){return new iD(this._db.transaction.apply(this._db,arguments))},JP(sD,"_db",["name","version","objectStoreNames"]),ZP(sD,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(i){[rD,eD].forEach(function(t){i in t.prototype&&(t.prototype[i.replace("open","iterate")]=function(){var t=(n=arguments,Array.prototype.slice.call(n)),e=t[t.length-1],n=this._store||this._index,r=n[i].apply(n,t.slice(0,-1));r.onsuccess=function(){e(r.result)}})})}),[eD,rD].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,n){var r=this,i=[];return new Promise(function(e){r.iterateCursor(t,function(t){t?(i.push(t.value),void 0===n||i.length!=n?t.continue():e(i)):e(i)})})})});var cD=1e4,hD="w:0.4.22",lD="FIS_v2",fD="https://firebaseinstallations.googleapis.com/v1",pD=36e5,H=((Sn={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Sn["not-registered"]="Firebase Installation is not registered.",Sn["installation-not-found"]="Firebase Installation not found.",Sn["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',Sn["app-offline"]="Could not process request. Application offline.",Sn["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",Sn),dD=new Co("installations","Installations",H);function gD(t){return t instanceof Eo&&t.code.includes("request-failed")}function vD(t){t=t.projectId;return fD+"/projects/"+t+"/installations"}function yD(t){return{token:t.token,requestStatus:2,expiresIn:(t=t.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()}}function mD(n,r){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,r.json()];case 1:return e=t.sent(),e=e.error,[2,dD.create("request-failed",{requestName:n,serverCode:e.code,serverMessage:e.message,serverStatus:e.status})]}})})}function bD(t){t=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function wD(t,e){e=e.refreshToken,t=bD(t);return t.append("Authorization",lD+" "+e),t}function _D(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,n()];case 1:return 500<=(e=t.sent()).status&&e.status<600?[2,n()]:[2,e]}})})}function ID(e){return new Promise(function(t){setTimeout(t,e)})}var TD=/^[cdef][\w-]{21}$/,ED="";function SD(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;t=function(t){return btoa(String.fromCharCode.apply(String,no([],eo(t)))).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22);return TD.test(t)?t:ED}catch(t){return ED}}function CD(t){return t.appName+"!"+t.appId}var AD=new Map;function ND(t,e){t=CD(t);kD(t,e),function(t,e){var n=PD();n&&n.postMessage({key:t,fid:e});DD()}(t,e)}function kD(t,e){var n,r,i=AD.get(t);if(i)try{for(var o=to(i),s=o.next();!s.done;s=o.next())(0,s.value)(e)}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var RD=null;function PD(){return!RD&&"BroadcastChannel"in self&&((RD=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){kD(t.data.key,t.data.fid)}),RD}function DD(){0===AD.size&&RD&&(RD.close(),RD=null)}var OD,xD="firebase-installations-database",LD=1,MD="firebase-installations-store",FD=null;function UD(){return FD=FD||aD(xD,LD,function(t){0===t.oldVersion&&t.createObjectStore(MD)})}function jD(o,s){return $i(this,void 0,void 0,function(){var e,n,r,i;return Zi(this,function(t){switch(t.label){case 0:return e=CD(o),[4,UD()];case 1:return r=t.sent(),n=r.transaction(MD,"readwrite"),[4,(r=n.objectStore(MD)).get(e)];case 2:return i=t.sent(),[4,r.put(s,e)];case 3:return t.sent(),[4,n.complete];case 4:return t.sent(),i&&i.fid===s.fid||ND(o,s.fid),[2,s]}})})}function qD(r){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return e=CD(r),[4,UD()];case 1:return n=t.sent(),[4,(n=n.transaction(MD,"readwrite")).objectStore(MD).delete(e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2]}})})}function VD(s,a){return $i(this,void 0,void 0,function(){var e,n,r,i,o;return Zi(this,function(t){switch(t.label){case 0:return e=CD(s),[4,UD()];case 1:return r=t.sent(),n=r.transaction(MD,"readwrite"),[4,(r=n.objectStore(MD)).get(e)];case 2:return i=t.sent(),void 0!==(o=a(i))?[3,4]:[4,r.delete(e)];case 3:return t.sent(),[3,6];case 4:return[4,r.put(o,e)];case 5:t.sent(),t.label=6;case 6:return[4,n.complete];case 7:return t.sent(),!o||i&&i.fid===o.fid||ND(s,o.fid),[2,o]}})})}function BD(i){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return[4,VD(i,function(t){t=GD(t||{fid:SD(),registrationStatus:0}),t=function(t,e){{if(0!==e.registrationStatus)return 1===e.registrationStatus?{installationEntry:e,registrationPromise:function(i){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return[4,KD(i)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,ID(100)];case 3:return t.sent(),[4,KD(i)];case 4:return e=t.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,BD(i)];case 6:return r=t.sent(),n=r.installationEntry,(r=r.registrationPromise)?[2,r]:[2,n];case 7:return[2,e]}})})}(t)}:{installationEntry:e};if(!navigator.onLine){var n=Promise.reject(dD.create("app-offline"));return{installationEntry:e,registrationPromise:n}}e={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},t=function(r,i){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,7]),[4,function(s,t){var a=t.fid;return $i(this,void 0,void 0,function(){var e,n,r,i,o;return Zi(this,function(t){switch(t.label){case 0:return e=vD(s),n=bD(s),o={fid:a,authVersion:lD,appId:s.appId,sdkVersion:hD},r={method:"POST",headers:n,body:JSON.stringify(o)},[4,_D(function(){return fetch(e,r)})];case 1:return(i=t.sent()).ok?[4,i.json()]:[3,3];case 2:return o=t.sent(),[2,{fid:o.fid||a,registrationStatus:2,refreshToken:o.refreshToken,authToken:yD(o.authToken)}];case 3:return[4,mD("Create Installation",i)];case 4:throw t.sent()}})})}(r,i)];case 1:return e=t.sent(),[2,jD(r,e)];case 2:return gD(n=t.sent())&&409===n.customData.serverCode?[4,qD(r)]:[3,4];case 3:return t.sent(),[3,6];case 4:return[4,jD(r,{fid:i.fid,registrationStatus:0})];case 5:t.sent(),t.label=6;case 6:throw n;case 7:return[2]}})})}(t,e);return{installationEntry:e,registrationPromise:t}}}(i,t);return e=t.registrationPromise,t.installationEntry})];case 1:return(n=t.sent()).fid!==ED?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=t.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}})})}function KD(t){return VD(t,function(t){if(!t)throw dD.create("installation-not-found");return GD(t)})}function GD(t){return 1===(e=t).registrationStatus&&e.registrationTime+cD<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function WD(t,s){var a=t.appConfig,u=t.platformLoggerProvider;return $i(this,void 0,void 0,function(){var e,n,r,i,o;return Zi(this,function(t){switch(t.label){case 0:return e=function(t,e){e=e.fid;return vD(t)+"/"+e+"/authTokens:generate"}(a,s),n=wD(a,s),(o=u.getImmediate({optional:!0}))&&n.append("x-firebase-client",o.getPlatformInfoString()),o={installation:{sdkVersion:hD}},r={method:"POST",headers:n,body:JSON.stringify(o)},[4,_D(function(){return fetch(e,r)})];case 1:return(i=t.sent()).ok?[4,i.json()]:[3,3];case 2:return o=t.sent(),[2,yD(o)];case 3:return[4,mD("Generate Auth Token",i)];case 4:throw t.sent()}})})}function HD(i,o){return void 0===o&&(o=!1),$i(this,void 0,void 0,function(){var r,e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,VD(i.appConfig,function(t){if(!QD(t))throw dD.create("not-registered");var e,n=t.authToken;if(o||2!==(e=n).requestStatus||function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+pD}(e)){if(1===n.requestStatus)return r=function(n,r){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,zD(n.appConfig)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.authToken.requestStatus?[3,5]:[4,ID(100)];case 3:return t.sent(),[4,zD(n.appConfig)];case 4:return e=t.sent(),[3,2];case 5:return 0===(e=e.authToken).requestStatus?[2,HD(n,r)]:[2,e]}})})}(i,o),t;if(!navigator.onLine)throw dD.create("app-offline");n=(e=t,n={requestStatus:1,requestTime:Date.now()},Ji(Ji({},e),{authToken:n}));return r=function(i,o){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,8]),[4,WD(i,o)];case 1:return e=t.sent(),r=Ji(Ji({},o),{authToken:e}),[4,jD(i.appConfig,r)];case 2:return t.sent(),[2,e];case 3:return!gD(n=t.sent())||401!==n.customData.serverCode&&404!==n.customData.serverCode?[3,5]:[4,qD(i.appConfig)];case 4:return t.sent(),[3,7];case 5:return r=Ji(Ji({},o),{authToken:{requestStatus:0}}),[4,jD(i.appConfig,r)];case 6:t.sent(),t.label=7;case 7:throw n;case 8:return[2]}})})}(i,n),n}return t})];case 1:return e=t.sent(),r?[4,r]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=e.authToken,t.label=4;case 4:return[2,n]}})})}function zD(t){return VD(t,function(t){if(!QD(t))throw dD.create("not-registered");var e=t.authToken;return 1===(e=e).requestStatus&&e.requestTime+cD<Date.now()?Ji(Ji({},t),{authToken:{requestStatus:0}}):t})}function QD(t){return void 0!==t&&2===t.registrationStatus}function YD(e,n){return void 0===n&&(n=!1),$i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return[4,function(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,BD(n)];case 1:return(e=t.sent().registrationPromise)?[4,e]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e.appConfig)];case 1:return t.sent(),[4,HD(e,n)];case 2:return[2,t.sent().token]}})})}function XD(i,o){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return e=function(t,e){e=e.fid;return vD(t)+"/"+e}(i,o),r=wD(i,o),n={method:"DELETE",headers:r},[4,_D(function(){return fetch(e,n)})];case 1:return(r=t.sent()).ok?[3,3]:[4,mD("Delete Installation",r)];case 2:throw t.sent();case 3:return[2]}})})}function JD(t,r){var i=t.appConfig;return function(t,e){PD();var n=CD(t);(t=AD.get(n))||(t=new Set,AD.set(n,t)),t.add(e)}(i,r),function(){var t,e,n;e=r,n=CD(t=i),(t=AD.get(n))&&(t.delete(e),0===t.size&&AD.delete(n),DD())}}function $D(t){return dD.create("missing-app-config-values",{valueName:t})}(OD=Xl).INTERNAL.registerComponent(new Zo("installations",function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw $D("App Configuration");if(!t.name)throw $D("App Name");try{for(var r=to(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw $D(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(r){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,BD(r.appConfig)];case 1:return e=t.sent(),n=e.installationEntry,(e.registrationPromise||HD(r)).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(t){return YD(n,t)},delete:function(){return function(r){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,VD(e=r.appConfig,function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(n=t.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw dD.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw dD.create("app-offline");case 3:return[4,XD(e,n)];case 4:return t.sent(),[4,qD(e)];case 5:t.sent(),t.label=6;case 6:return[2]}})})}(n)},onIdChange:function(t){return JD(n,t)}}},"PUBLIC")),OD.registerVersion("@firebase/installations","0.4.22");var ZD,H=((Sn={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Sn["only-available-in-window"]="This method is available in a Window context.",Sn["only-available-in-sw"]="This method is available in a service worker context.",Sn["permission-default"]="The notification permission was not granted and dismissed instead.",Sn["permission-blocked"]="The notification permission was not granted and blocked instead.",Sn["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",Sn["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",Sn["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",Sn["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",Sn["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",Sn["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",Sn["token-update-no-token"]="FCM returned no token when updating the user to push.",Sn["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",Sn["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",Sn["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",Sn["invalid-vapid-key"]="The public VAPID key must be a string.",Sn["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",Sn),tO=new Co("messaging","Messaging",H),eO="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",nO="https://fcmregistrations.googleapis.com/v1",rO="FCM_MSG",iO="google.c.a.c_id";function oO(t){t=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,no([],eo(t)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(Sn=ZD=ZD||{}).PUSH_RECEIVED="push-received",Sn.NOTIFICATION_CLICKED="notification-clicked";var sO="fcm_token_details_db",aO=5,uO="fcm_token_object_Store";function cO(s){return $i(this,void 0,void 0,function(){var e,o,n=this;return Zi(this,function(t){switch(t.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=t.sent(),!e.map(function(t){return t.name}).includes(sO))return[2,null];t.label=2;case 2:return o=null,[4,aD(sO,aO,function(i){return $i(n,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return i.oldVersion<2?[2]:i.objectStoreNames.contains(uO)?[4,(r=i.transaction.objectStore(uO)).index("fcmSenderId").get(s)]:[2];case 1:return e=t.sent(),[4,r.clear()];case 2:if(t.sent(),!e)return[2];if(2===i.oldVersion){if(!(n=e).auth||!n.p256dh||!n.endpoint)return[2];o={token:n.fcmToken,createTime:null!==(r=n.createTime)&&void 0!==r?r:Date.now(),subscriptionOptions:{auth:n.auth,p256dh:n.p256dh,endpoint:n.endpoint,swScope:n.swScope,vapidKey:"string"==typeof n.vapidKey?n.vapidKey:oO(n.vapidKey)}}}else(3===i.oldVersion||4===i.oldVersion)&&(o={token:(n=e).fcmToken,createTime:n.createTime,subscriptionOptions:{auth:oO(n.auth),p256dh:oO(n.p256dh),endpoint:n.endpoint,swScope:n.swScope,vapidKey:oO(n.vapidKey)}});return[2]}})})})];case 3:return t.sent().close(),[4,uD(sO)];case 4:return t.sent(),[4,uD("fcm_vapid_details_db")];case 5:return t.sent(),[4,uD("undefined")];case 6:return t.sent(),[2,function(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&0<t.createTime&&"string"==typeof t.token&&0<t.token.length&&"string"==typeof e.auth&&0<e.auth.length&&"string"==typeof e.p256dh&&0<e.p256dh.length&&"string"==typeof e.endpoint&&0<e.endpoint.length&&"string"==typeof e.swScope&&0<e.swScope.length&&"string"==typeof e.vapidKey&&0<e.vapidKey.length}(o)?o:null]}})})}var hO="firebase-messaging-database",lO=1,fO="firebase-messaging-store",pO=null;function dO(){return pO=pO||aD(hO,lO,function(t){0===t.oldVersion&&t.createObjectStore(fO)})}function gO(r){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return e=yO(r),[4,dO()];case 1:return[4,t.sent().transaction(fO).objectStore(fO).get(e)];case 2:return(e=t.sent())?[2,e]:[3,3];case 3:return[4,cO(r.appConfig.senderId)];case 4:return(n=t.sent())?[4,vO(r,n)]:[3,6];case 5:return t.sent(),[2,n];case 6:return[2]}})})}function vO(r,i){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return e=yO(r),[4,dO()];case 1:return n=t.sent(),[4,(n=n.transaction(fO,"readwrite")).objectStore(fO).put(i,e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2,i]}})})}function yO(t){return t.appConfig.appId}function mO(r,i){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,wO(r)];case 1:e=t.sent(),e={method:"DELETE",headers:e},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(bO(r.appConfig)+"/"+i,e)];case 3:return[4,t.sent().json()];case 4:if((e=t.sent()).error)throw n=e.error.message,tO.create("token-unsubscribe-failed",{errorInfo:n});return[3,6];case 5:throw n=t.sent(),tO.create("token-unsubscribe-failed",{errorInfo:n});case 6:return[2]}})})}function bO(t){t=t.projectId;return nO+"/projects/"+t+"/registrations"}function wO(t){var n=t.appConfig,r=t.installations;return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,r.getToken()];case 1:return e=t.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}})})}function _O(t){var e=t.p256dh,n=t.auth,r=t.endpoint,t=t.vapidKey,e={web:{endpoint:r,auth:n,p256dh:e}};return t!==eO&&(e.web.applicationPubKey=t),e}function IO(c,h,l){return $i(this,void 0,void 0,function(){var s,a,u;return Zi(this,function(t){switch(t.label){case 0:if("granted"!==Notification.permission)throw tO.create("permission-blocked");return[4,function(n,r){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,n.pushManager.getSubscription()];case 1:return(e=t.sent())?[2,e]:[2,n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(t){for(var t=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),e=atob(t),n=new Uint8Array(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}(r)})]}})})}(h,l)];case 1:return u=t.sent(),[4,gO(c)];case 2:return s=t.sent(),a={vapidKey:l,swScope:h.scope,endpoint:u.endpoint,auth:oO(u.getKey("auth")),p256dh:oO(u.getKey("p256dh"))},s?[3,3]:[2,EO(c,a)];case 3:if(e=s.subscriptionOptions,r=(n=a).vapidKey===e.vapidKey,i=n.endpoint===e.endpoint,o=n.auth===e.auth,e=n.p256dh===e.p256dh,r&&i&&o&&e)return[3,8];t.label=4;case 4:return t.trys.push([4,6,,7]),[4,mO(c,s.token)];case 5:return t.sent(),[3,7];case 6:return u=t.sent(),console.warn(u),[3,7];case 7:return[2,EO(c,a)];case 8:return Date.now()>=s.createTime+6048e5?[2,function(i,o,s){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,5]),[4,function(o,s){return $i(this,void 0,void 0,function(){var e,n,r,i;return Zi(this,function(t){switch(t.label){case 0:return[4,wO(o)];case 1:e=t.sent(),n=_O(s.subscriptionOptions),n={method:"PATCH",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(bO(o.appConfig)+"/"+s.token,n)];case 3:return[4,t.sent().json()];case 4:return r=t.sent(),[3,6];case 5:throw i=t.sent(),tO.create("token-update-failed",{errorInfo:i});case 6:if(r.error)throw i=r.error.message,tO.create("token-update-failed",{errorInfo:i});if(!r.token)throw tO.create("token-update-no-token");return[2,r.token]}})})}(o,i)];case 1:return e=t.sent(),n=Ji(Ji({},i),{token:e,createTime:Date.now()}),[4,vO(o,n)];case 2:return t.sent(),[2,e];case 3:return r=t.sent(),[4,TO(o,s)];case 4:throw t.sent(),r;case 5:return[2]}})})}({token:s.token,createTime:Date.now(),subscriptionOptions:a},c,h)]:[2,s.token];case 9:return[2]}var e,n,r,i,o})})}function TO(n,r){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,gO(n)];case 1:return(e=t.sent())?[4,mO(n,e.token)]:[3,4];case 2:return t.sent(),[4,function(r){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return e=yO(r),[4,dO()];case 1:return n=t.sent(),[4,(n=n.transaction(fO,"readwrite")).objectStore(fO).delete(e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2]}})})}(n)];case 3:t.sent(),t.label=4;case 4:return[4,r.pushManager.getSubscription()];case 5:return(e=t.sent())?[2,e.unsubscribe()]:[2,!0]}})})}function EO(n,r){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,function(o,s){return $i(this,void 0,void 0,function(){var e,n,r,i;return Zi(this,function(t){switch(t.label){case 0:return[4,wO(o)];case 1:e=t.sent(),n=_O(s),n={method:"POST",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(bO(o.appConfig),n)];case 3:return[4,t.sent().json()];case 4:return r=t.sent(),[3,6];case 5:throw i=t.sent(),tO.create("token-subscribe-failed",{errorInfo:i});case 6:if(r.error)throw i=r.error.message,tO.create("token-subscribe-failed",{errorInfo:i});if(!r.token)throw tO.create("token-subscribe-no-token");return[2,r.token]}})})}(n,r)];case 1:return e=t.sent(),e={token:e,createTime:Date.now(),subscriptionOptions:r},[4,vO(n,e)];case 2:return t.sent(),[2,e.token]}})})}function SO(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(!e.notification)return;t.notification={};var n=e.notification.title;n&&(t.notification.title=n);n=e.notification.body;n&&(t.notification.body=n);e=e.notification.image;e&&(t.notification.image=e)}(e,t),function(t,e){if(!e.data)return;t.data=e.data}(e,t),function(t,e){if(!e.fcmOptions)return;t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);e=e.fcmOptions.analytics_label;e&&(t.fcmOptions.analyticsLabel=e)}(e,t),e}function CO(t){return"object"==typeof t&&t&&iO in t}function AO(e){return new Promise(function(t){setTimeout(t,e)})}var NO=(Object.defineProperty(kO.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),kO.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw tO.create("invalid-bg-handler");this.bgMessageHandler=t},kO.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},kO.prototype.getToken=function(){var n;return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return this.vapidKey?[3,2]:[4,gO(this.firebaseDependencies)];case 1:e=t.sent(),this.vapidKey=null!==(n=null===(n=null==e?void 0:e.subscriptionOptions)||void 0===n?void 0:n.vapidKey)&&void 0!==n?n:eO,t.label=2;case 2:return[2,IO(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},kO.prototype.deleteToken=function(){return TO(this.firebaseDependencies,self.registration)},kO.prototype.requestPermission=function(){throw tO.create("only-available-in-window")},kO.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw tO.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw tO.create("invalid-vapid-key");this.vapidKey=t},kO.prototype.useServiceWorker=function(){throw tO.create("only-available-in-window")},kO.prototype.onMessage=function(){throw tO.create("only-available-in-window")},kO.prototype.onTokenRefresh=function(){throw tO.create("only-available-in-window")},kO.prototype.onPush=function(a){return $i(this,void 0,void 0,function(){var i,o,s;return Zi(this,function(t){switch(t.label){case 0:return(s=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(t){return null}}(a))?[4,RO()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return(i=t.sent(),i.some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))?[2,function(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=ZD.PUSH_RECEIVED;try{for(var i=to(t),o=i.next();!o.done;o=i.next())o.value.postMessage(e)}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}(i,s)]:(o=!1,s.notification?[4,function(t){var e=t.actions,n=Notification.maxActions;e&&n&&e.length>n&&console.warn("This browser only supports "+n+" actions. The remaining actions will not be displayed.");return self.registration.showNotification(null!==(n=t.title)&&void 0!==n?n:"",t)}(((r=Ji({},(e=s).notification)).data=((n={})[rO]=e,n),r))]:[3,3]);case 2:t.sent(),o=!0,t.label=3;case 3:return!0===o&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(s=SO(s),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(s):this.bgMessageHandler.next(s)),[4,AO(1e3)]);case 4:return t.sent(),[2]}var e,n,r})})},kO.prototype.onSubChange=function(n){var r;return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return n.newSubscription?[3,2]:[4,TO(this.firebaseDependencies,self.registration)];case 1:return t.sent(),[2];case 2:return[4,gO(this.firebaseDependencies)];case 3:return e=t.sent(),[4,TO(this.firebaseDependencies,self.registration)];case 4:return t.sent(),[4,IO(this.firebaseDependencies,self.registration,null!==(r=null===(r=null==e?void 0:e.subscriptionOptions)||void 0===r?void 0:r.vapidKey)&&void 0!==r?r:eO)];case 5:return t.sent(),[2]}})})},kO.prototype.onNotificationClick=function(s){var a;return $i(this,void 0,void 0,function(){var e,n,r,i,o;return Zi(this,function(t){switch(t.label){case 0:return(e=null===(a=null===(a=s.notification)||void 0===a?void 0:a.data)||void 0===a?void 0:a[rO])?s.action?[2]:(s.stopImmediatePropagation(),s.notification.close(),(n=function(t){var e,n=null!==(e=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==e?e:null===(n=t.notification)||void 0===n?void 0:n.click_action;if(n)return n;return CO(t.data)?self.location.origin:null}(e))?(r=new URL(n,self.location.href),i=new URL(self.location.origin),r.host!==i.host?[2]:[4,function(u){return $i(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return Zi(this,function(t){switch(t.label){case 0:return[4,RO()];case 1:e=t.sent();try{for(n=to(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),u.host===o.host)return[2,i]}catch(t){s={error:t}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return[2,null]}})})}(r)]):[2]):[2];case 1:return(o=t.sent())?[3,4]:[4,self.clients.openWindow(n)];case 2:return o=t.sent(),[4,AO(3e3)];case 3:return t.sent(),[3,6];case 4:return[4,o.focus()];case 5:o=t.sent(),t.label=6;case 6:return o?(e.messageType=ZD.NOTIFICATION_CLICKED,e.isFirebaseMessaging=!0,[2,o.postMessage(e)]):[2]}})})},kO);function kO(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(t){t.waitUntil(e.onPush(t))}),self.addEventListener("pushsubscriptionchange",function(t){t.waitUntil(e.onSubChange(t))}),self.addEventListener("notificationclick",function(t){t.waitUntil(e.onNotificationClick(t))})}function RO(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}var PO=(Object.defineProperty(DO.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),DO.prototype.messageEventListener=function(i){return $i(this,void 0,void 0,function(){var n,r;return Zi(this,function(t){switch(t.label){case 0:return(n=i.data).isFirebaseMessaging?(this.onMessageCallback&&n.messageType===ZD.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback((delete(e=Object.assign({},n)).messageType,delete e.isFirebaseMessaging,e)):this.onMessageCallback.next(Object.assign({},n))),CO(r=n.data)&&"1"===r["google.c.a.e"]?[4,this.logEvent(n.messageType,r)]:[3,2]):[2];case 1:t.sent(),t.label=2;case 2:return[2]}var e})})},DO.prototype.getVapidKey=function(){return this.vapidKey},DO.prototype.getSwReg=function(){return this.swRegistration},DO.prototype.getToken=function(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:t.sent(),t.label=2;case 2:if("granted"!==Notification.permission)throw tO.create("permission-blocked");return[4,this.updateVapidKey(null==e?void 0:e.vapidKey)];case 3:return t.sent(),[4,this.updateSwReg(null==e?void 0:e.serviceWorkerRegistration)];case 4:return t.sent(),[2,IO(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},DO.prototype.updateVapidKey=function(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){return e?this.vapidKey=e:this.vapidKey||(this.vapidKey=eO),[2]})})},DO.prototype.updateSwReg=function(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return e||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:if(!e&&this.swRegistration)return[2];if(!(e instanceof ServiceWorkerRegistration))throw tO.create("invalid-sw-registration");return this.swRegistration=e,[2]}})})},DO.prototype.registerDefaultSw=function(){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),e=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return e.swRegistration=t.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw e=t.sent(),tO.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}})})},DO.prototype.deleteToken=function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,TO(this.firebaseDependencies,this.swRegistration)]}})})},DO.prototype.requestPermission=function(){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?tO.create("permission-blocked"):tO.create("permission-default")}})})},DO.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw tO.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw tO.create("invalid-vapid-key");this.vapidKey=t},DO.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw tO.create("invalid-sw-registration");if(this.swRegistration)throw tO.create("use-sw-after-get-token");this.swRegistration=t},DO.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},DO.prototype.setBackgroundMessageHandler=function(){throw tO.create("only-available-in-sw")},DO.prototype.onBackgroundMessage=function(){throw tO.create("only-available-in-sw")},DO.prototype.onTokenRefresh=function(){return function(){}},DO.prototype.logEvent=function(n,r){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=function(t){switch(t){case ZD.NOTIFICATION_CLICKED:return"notification_open";case ZD.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(n),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return t.sent().logEvent(e,{message_id:r[iO],message_name:r["google.c.a.c_l"],message_time:r["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},DO);function DO(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(t){return e.messageEventListener(t)})}function OO(t){return tO.create("missing-app-config-values",{valueName:t})}H={isSupported:xO};function xO(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}Xl.INTERNAL.registerComponent(new Zo("messaging",function(t){var e=t.getProvider("app").getImmediate(),t={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw OO("App Configuration Object");if(!t.name)throw OO("App Name");var r=t.options;try{for(var i=to(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw OO(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!xO())throw tO.create("unsupported-browser");return new(self&&"ServiceWorkerGlobalScope"in self?NO:PO)(t)},"PUBLIC").setServiceProps(H));var LO,MO="firebasestorage.googleapis.com",FO="storageBucket",UO=(Xi(jO,LO=Eo),jO.prototype._codeEquals=function(t){return qO(t)===this.code},Object.defineProperty(jO.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(jO.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),jO);function jO(t,e){t=LO.call(this,qO(t),"Firebase Storage: "+e+" ("+qO(t)+")")||this;return t.customData={serverResponse:null},Object.setPrototypeOf(t,jO.prototype),t}function qO(t){return"storage/"+t}function VO(){return new UO("unknown","An unknown error occurred, please check the error payload for server response.")}function BO(){return new UO("canceled","User canceled the upload/download.")}function KO(){return new UO("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function GO(t){return new UO("invalid-argument",t)}function WO(){return new UO("app-deleted","The Firebase app was deleted.")}function HO(t){return new UO("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function zO(t,e){return new UO("invalid-format","String does not match format '"+t+"': "+e)}function QO(t){throw new UO("internal-error","Internal error: "+t)}var YO={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},XO=function(t,e){this.data=t,this.contentType=e||null};function JO(t,e){switch(t){case YO.RAW:return new XO($O(e));case YO.BASE64:case YO.BASE64URL:return new XO(ZO(t,e));case YO.DATA_URL:return new XO(function(t){t=new tx(t);return t.base64?ZO(YO.BASE64,t.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw zO(YO.DATA_URL,"Malformed data URL.")}return $O(e)}(t.rest)}(e),new tx(e).contentType)}throw VO()}function $O(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function ZO(e,t){switch(e){case YO.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw zO(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case YO.BASE64URL:r=-1!==t.indexOf("+"),n=-1!==t.indexOf("/");if(r||n)throw zO(e,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var i;try{i=atob(t)}catch(t){throw zO(e,"Invalid character found")}for(var o=new Uint8Array(i.length),s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return o}var tx=function(t){var e;if(this.base64=!1,(this.contentType=null)===(e=t.match(/^data:([^,]+)?,/)))throw zO(YO.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r=e[1]||null;null!=r&&(this.base64=(n=";base64",(e=r).length>=n.length&&e.substring(e.length-n.length)===n),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)};var ex,nx={STATE_CHANGED:"state_changed"},rx={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ix(t){switch(t){case"running":case"pausing":case"canceling":return rx.RUNNING;case"paused":return rx.PAUSED;case"success":return rx.SUCCESS;case"canceled":return rx.CANCELED;case"error":default:return rx.ERROR}}(Sn=ex=ex||{})[Sn.NO_ERROR=0]="NO_ERROR",Sn[Sn.NETWORK_ERROR=1]="NETWORK_ERROR",Sn[Sn.ABORT=2]="ABORT";var ox=(sx.prototype.send=function(t,e,n,r){if(this.sent_)throw QO("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},sx.prototype.getErrorCode=function(){if(!this.sent_)throw QO("cannot .getErrorCode() before sending");return this.errorCode_},sx.prototype.getStatus=function(){if(!this.sent_)throw QO("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},sx.prototype.getResponseText=function(){if(!this.sent_)throw QO("cannot .getResponseText() before sending");return this.xhr_.responseText},sx.prototype.abort=function(){this.xhr_.abort()},sx.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},sx.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},sx.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},sx);function sx(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=ex.NO_ERROR,this.sendPromise_=new Promise(function(t){e.xhr_.addEventListener("abort",function(){e.errorCode_=ex.ABORT,t(e)}),e.xhr_.addEventListener("error",function(){e.errorCode_=ex.NETWORK_ERROR,t(e)}),e.xhr_.addEventListener("load",function(){t(e)})})}var ax=(ux.prototype.createXhrIo=function(){return new ox},ux);function ux(){}var cx=(Object.defineProperty(hx.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(hx.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),hx.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},hx.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},hx.makeFromBucketSpec=function(e){var t;try{t=hx.makeFromUrl(e)}catch(t){return new hx(e,"")}if(""===t.path)return t;throw new UO("invalid-default-bucket","Invalid default bucket '"+e+"'.")},hx.makeFromUrl=function(t){var e=null,n="([A-Za-z0-9.\\-_]+)";var r=new RegExp("^gs://"+n+"(/(.*))?$","i");function i(t){t.path_=decodeURIComponent(t.path)}for(var o=MO.replace(/[.]/g,"\\."),s=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+o+"/v[A-Za-z0-9_]+/b/"+n+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+n+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:i}],a=0;a<s.length;a++){var u=s[a],c=u.regex.exec(t);if(c){e=new hx(c[u.indices.bucket],c[u.indices.path]||"");u.postModify(e);break}}if(null==e)throw new UO("invalid-url","Invalid URL '"+t+"'.");return e},hx);function hx(t,e){this.bucket=t,this.path_=e}var lx=(fx.prototype.getPromise=function(){return this.promise_},fx.prototype.cancel=function(t){},fx);function fx(t){this.promise_=Promise.reject(t)}function px(t){return"string"==typeof t||t instanceof String}function dx(t){return gx()&&t instanceof Blob}function gx(){return"undefined"!=typeof Blob}function vx(t,e,n,r){if(r<e)throw GO("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(n<r)throw GO("Invalid value for '"+t+"'. Expected "+n+" or less.")}function yx(t){return"https://"+MO+"/v0"+t}function mx(t){var e,n=encodeURIComponent,r="?";for(e in t)t.hasOwnProperty(e)&&(r=r+(n(e)+"="+n(t[e]))+"&");return r=r.slice(0,-1)}var bx=(wx.prototype.start_=function(){var e,n,t,r,i,o,s,a,u,c=this;function h(t,e){var n,r=c.resolve_,i=c.reject_,o=e.xhr;if(e.wasSuccessCode)try{var s=c.callback_(o,o.getResponseText());void 0!==s?r(s):r()}catch(t){i(t)}else null!==o?((n=VO()).serverResponse=o.getResponseText(),c.errorCallback_?i(c.errorCallback_(o,n)):i(n)):e.canceled?i(n=(c.appDelete_?WO:BO)()):i(n=new UO("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}function l(){return 2===s}function f(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a||(a=!0,n.apply(null,t))}function p(t){i=setTimeout(function(){i=null,e(d,l())},t)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];a||(t||l()||o?f.call.apply(f,no([null,t],e)):(r<64&&(r*=2),p(1===s?(s=2,0):1e3*(r+Math.random()))))}function g(t){u||(u=!0,a||(null!==i?(t||(s=2),clearTimeout(i),p(0)):t||(s=1)))}this.canceled_?h(0,new _x(!1,null,!0)):this.backoffId_=(e=function(r,t){function i(t){var e=t.loaded,t=t.lengthComputable?t.total:-1;null!==c.progressCallback_&&c.progressCallback_(e,t)}t?r(!1,new _x(!1,null,!0)):(t=c.pool_.createXhrIo(),c.pendingXhr_=t,null!==c.progressCallback_&&t.addUploadProgressListener(i),t.send(c.url_,c.method_,c.body_,c.headers_).then(function(t){null!==c.progressCallback_&&t.removeUploadProgressListener(i),c.pendingXhr_=null;var e=t.getErrorCode()===ex.NO_ERROR,n=t.getStatus();e&&!c.isRetryStatusCode_(n)?(n=-1!==c.successCodes_.indexOf(n),r(!0,new _x(n,t))):(t=t.getErrorCode()===ex.ABORT,r(!1,new _x(!1,null,t)))}))},n=h,t=this.timeout_,i=null,u=a=o=!(r=1),p(s=0),setTimeout(function(){o=!0,g(!0)},t),g)},wx.prototype.getPromise=function(){return this.promise_},wx.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},wx.prototype.isRetryStatusCode_=function(t){var e=500<=t&&t<600,n=-1!==[408,429].indexOf(t),t=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||t},wx);function wx(t,e,n,r,i,o,s,a,u,c,h){var l=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise(function(t,e){l.resolve_=t,l.reject_=e,l.start_()})}var _x=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function Ix(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(gx())return new Blob(t);throw new UO("unsupported-environment","This browser doesn't seem to support creating Blobs")}var Tx=(Ex.prototype.size=function(){return this.size_},Ex.prototype.type=function(){return this.type_},Ex.prototype.slice=function(t,e){if(dx(this.data_)){var n=this.data_,r=(i=t,r=e,(n=n).webkitSlice?n.webkitSlice(i,r):n.mozSlice?n.mozSlice(i,r):n.slice?n.slice(i,r):null);return null===r?null:new Ex(r)}var i,r;return new Ex(new Uint8Array(this.data_.buffer,t,e-t),!0)},Ex.getBlob=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(gx()){var n=t.map(function(t){return t instanceof Ex?t.data_:t});return new Ex(Ix.apply(null,n))}var n=t.map(function(t){return px(t)?JO(YO.RAW,t).data:t.data_}),r=0;n.forEach(function(t){r+=t.byteLength});var i=new Uint8Array(r),o=0;return n.forEach(function(t){for(var e=0;e<t.length;e++)i[o++]=t[e]}),new Ex(i,!0)},Ex.prototype.uploadData=function(){return this.data_},Ex);function Ex(t,e){var n=0,r="";dx(t)?(n=(this.data_=t).size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}function Sx(t){var e,n;try{e=JSON.parse(t)}catch(t){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function Cx(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Ax(t,e){return e}var Nx=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Ax},kx=null;function Rx(){if(kx)return kx;var t=[];t.push(new Nx("bucket")),t.push(new Nx("generation")),t.push(new Nx("metageneration")),t.push(new Nx("name","fullPath",!0));var e=new Nx("name");e.xform=function(t,e){return!px(e=e)||e.length<2?e:Cx(e)},t.push(e);e=new Nx("size");return e.xform=function(t,e){return void 0!==e?Number(e):e},t.push(e),t.push(new Nx("timeCreated")),t.push(new Nx("updated")),t.push(new Nx("md5Hash",null,!0)),t.push(new Nx("cacheControl",null,!0)),t.push(new Nx("contentDisposition",null,!0)),t.push(new Nx("contentEncoding",null,!0)),t.push(new Nx("contentLanguage",null,!0)),t.push(new Nx("contentType",null,!0)),t.push(new Nx("metadata","customMetadata",!0)),kx=t}function Px(n,r){Object.defineProperty(n,"ref",{get:function(){var t=n.bucket,e=n.fullPath,e=new cx(t,e);return r._makeStorageReference(e)}})}function Dx(t,e,n){e=Sx(e);if(null===e)return null;return function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return Px(r,t),r}(t,e,n)}function Ox(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var xx="prefixes",Lx="items";function Mx(t,e,n){n=Sx(n);if(null===n)return null;return function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[xx])for(var i=0,o=n[xx];i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new cx(e,s));r.prefixes.push(a)}if(n[Lx])for(var u=0,c=n[Lx];u<c.length;u++){var h=c[u],a=t._makeStorageReference(new cx(e,h.name));r.items.push(a)}return r}(t,e,n)}var Fx=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function Ux(t){if(!t)throw VO()}function jx(n,r){return function(t,e){return Ux(null!==(e=Dx(n,e,r))),e}}function qx(n,r){return function(t,e){return Ux(null!==(e=Mx(n,r,e))),e}}function Vx(r,i){return function(t,e){var n=Dx(r,e,i);return Ux(null!==n),function(r,t){if(null===(t=Sx(t)))return null;if(!px(t.downloadTokens))return null;if(0===(t=t.downloadTokens).length)return null;var i=encodeURIComponent;return t.split(",").map(function(t){var e=r.bucket,n=r.fullPath;return yx("/b/"+i(e)+"/o/"+i(n))+mx({alt:"media",token:t})})[0]}(n,e)}}function Bx(i){return function(t,e){var n,r=401===t.getStatus()?new UO("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(n=i.bucket,new UO("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(r=i.path,new UO("unauthorized","User does not have permission to access '"+r+"'.")):e;return r.serverResponse=e.serverResponse,r}}function Kx(r){var i=Bx(r);return function(t,e){var n=i(t,e);return 404===t.getStatus()&&(t=r.path,n=new UO("object-not-found","Object '"+t+"' does not exist.")),n.serverResponse=e.serverResponse,n}}function Gx(t,e,n){var r=yx(e.fullServerUrl()),i=t.maxOperationRetryTime,i=new Fx(r,"GET",jx(t,n),i);return i.errorHandler=Kx(e),i}function Wx(t,e,n){n=Object.assign({},n);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=(t=e,(e=null)&&e.contentType||t&&t.type()||"application/octet-stream")),n}function Hx(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};var a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=Wx(e,r,i),i="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Ox(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",a="\r\n--"+a+"--",r=Tx.getBlob(i,r,a);if(null===r)throw KO();a={name:u.fullPath},u=yx(o),o=t.maxUploadRetryTime,o=new Fx(u,"POST",jx(t,n),o);return o.urlParams=a,o.headers=s,o.body=r.uploadData(),o.errorHandler=Bx(e),o}var zx=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function Qx(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){Ux(!1)}return Ux(!!n&&-1!==(e||["active"]).indexOf(n)),n}function Yx(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=Wx(e,r,i),i={name:s.fullPath},o=yx(o),r={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},n=Ox(s,n),t=t.maxUploadRetryTime;t=new Fx(o,"POST",function(t){var e;Qx(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){Ux(!1)}return Ux(px(e)),e},t);return t.urlParams=i,t.headers=r,t.body=n,t.errorHandler=Bx(e),t}function Xx(t,e,n,i){t=t.maxUploadRetryTime,t=new Fx(n,"POST",function(t){var e=Qx(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){Ux(!1)}n||Ux(!1);var r=Number(n);return Ux(!isNaN(r)),new zx(r,i.size(),"final"===e)},t);return t.headers={"X-Goog-Upload-Command":"query"},t.errorHandler=Bx(e),t}function Jx(t,o,e,s,n,a,r,i){var u=new zx(0,0);if(r?(u.current=r.current,u.total=r.total):(u.current=0,u.total=s.size()),s.size()!==u.total)throw new UO("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,h=c;0<n&&(h=Math.min(h,n));r=u.current,n=r+h,c={"X-Goog-Upload-Command":h===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},r=s.slice(r,n);if(null===r)throw KO();n=o.maxUploadRetryTime,n=new Fx(e,"POST",function(t,e){var n=Qx(t,["active","final"]),r=u.current+h,i=s.size(),e="final"===n?jx(o,a)(t,e):null;return new zx(r,i,"final"===n,e)},n);return n.headers=c,n.body=r.uploadData(),n.progressCallback=i||null,n.errorHandler=Bx(t),n}var $x=function(t,e,n){"function"==typeof t||null!=e||null!=n?(this.next=t,this.error=e,this.complete=n):(t=t,this.next=t.next,this.error=t.error,this.complete=t.complete)};function Zx(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Promise.resolve().then(function(){return n.apply(void 0,t)})}}var tL=(eL.prototype._makeProgressCallback=function(){var e=this,n=this._transferred;return function(t){return e._updateProgress(n+t)}},eL.prototype._shouldDoResumable=function(t){return 262144<t.size()},eL.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},eL.prototype._resolveToken=function(e){var n=this;this._ref.storage._getAuthToken().then(function(t){switch(n._state){case"running":e(t);break;case"canceling":n._transition("canceled");break;case"pausing":n._transition("paused")}})},eL.prototype._createResumable=function(){var n=this;this._resolveToken(function(t){var e=Yx(n._ref.storage,n._ref._location,n._mappings,n._blob,n._metadata),t=n._ref.storage._makeRequest(e,t);(n._request=t).getPromise().then(function(t){n._request=void 0,n._uploadUrl=t,n._needToFetchStatus=!1,n.completeTransitions_()},n._errorHandler)})},eL.prototype._fetchStatus=function(){var n=this,r=this._uploadUrl;this._resolveToken(function(t){var e=Xx(n._ref.storage,n._ref._location,r,n._blob),t=n._ref.storage._makeRequest(e,t);(n._request=t).getPromise().then(function(t){n._request=void 0,n._updateProgress(t.current),n._needToFetchStatus=!1,t.finalized&&(n._needToFetchMetadata=!0),n.completeTransitions_()},n._errorHandler)})},eL.prototype._continueUpload=function(){var n=this,r=262144*this._chunkMultiplier,i=new zx(this._transferred,this._blob.size()),o=this._uploadUrl;this._resolveToken(function(t){var e;try{e=Jx(n._ref._location,n._ref.storage,o,n._blob,r,n._mappings,i,n._makeProgressCallback())}catch(t){return n._error=t,void n._transition("error")}t=n._ref.storage._makeRequest(e,t);(n._request=t).getPromise().then(function(t){n._increaseMultiplier(),n._request=void 0,n._updateProgress(t.current),t.finalized?(n._metadata=t.metadata,n._transition("success")):n.completeTransitions_()},n._errorHandler)})},eL.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},eL.prototype._fetchMetadata=function(){var n=this;this._resolveToken(function(t){var e=Gx(n._ref.storage,n._ref._location,n._mappings),t=n._ref.storage._makeRequest(e,t);(n._request=t).getPromise().then(function(t){n._request=void 0,n._metadata=t,n._transition("success")},n._metadataErrorHandler)})},eL.prototype._oneShotUpload=function(){var n=this;this._resolveToken(function(t){var e=Hx(n._ref.storage,n._ref._location,n._mappings,n._blob,n._metadata),t=n._ref.storage._makeRequest(e,t);(n._request=t).getPromise().then(function(t){n._request=void 0,n._metadata=t,n._updateProgress(n._blob.size()),n._transition("success")},n._errorHandler)})},eL.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},eL.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=BO(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},eL.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(eL.prototype,"snapshot",{get:function(){var t=ix(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),eL.prototype.on=function(t,e,n,r){var i=this,o=new $x(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},eL.prototype.then=function(t,e){return this._promise.then(t,e)},eL.prototype.catch=function(t){return this.then(null,t)},eL.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},eL.prototype._removeObserver=function(t){t=this._observers.indexOf(t);-1!==t&&this._observers.splice(t,1)},eL.prototype._notifyObservers=function(){var e=this;this._finishPromise(),this._observers.slice().forEach(function(t){e._notifyObserver(t)})},eL.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(ix(this._state)){case rx.SUCCESS:Zx(this._resolve.bind(null,this.snapshot))();break;case rx.CANCELED:case rx.ERROR:Zx(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},eL.prototype._notifyObserver=function(t){switch(ix(this._state)){case rx.RUNNING:case rx.PAUSED:t.next&&Zx(t.next.bind(t,this.snapshot))();break;case rx.SUCCESS:t.complete&&Zx(t.complete.bind(t))();break;case rx.CANCELED:case rx.ERROR:t.error&&Zx(t.error.bind(t,this._error))();break;default:t.error&&Zx(t.error.bind(t,this._error))()}},eL.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},eL.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},eL.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},eL);function eL(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=Rx(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}var nL=(rL.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},rL.prototype._newRef=function(t,e){return new rL(t,e)},Object.defineProperty(rL.prototype,"root",{get:function(){var t=new cx(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(rL.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(rL.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(rL.prototype,"name",{get:function(){return Cx(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(rL.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(rL.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===t)return null;t=new cx(this._location.bucket,t);return new rL(this._service,t)},enumerable:!1,configurable:!0}),rL.prototype._throwIfRoot=function(t){if(""===this._location.path)throw HO(t)},rL);function rL(t,e){this._service=t,this._location=e instanceof cx?e:cx.makeFromUrl(e)}function iL(t){var e={prefixes:[],items:[]};return function r(i,o,s){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,oL(i,{pageToken:s})];case 1:return e=t.sent(),(n=o.prefixes).push.apply(n,e.prefixes),(n=o.items).push.apply(n,e.items),null==e.nextPageToken?[3,3]:[4,r(i,o,e.nextPageToken)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(t,e).then(function(){return e})}function oL(c,h){return $i(this,void 0,void 0,function(){var a,u;return Zi(this,function(t){switch(t.label){case 0:return null!=h&&"number"==typeof h.maxResults&&vx("options.maxResults",1,1e3,h.maxResults),[4,c.storage._getAuthToken()];case 1:return a=t.sent(),u=h||{},e=c.storage,n=c._location,r="/",i=u.pageToken,o=u.maxResults,s={},n.isRoot?s.prefix="":s.prefix=n.path+"/",r&&0<r.length&&(s.delimiter=r),i&&(s.pageToken=i),o&&(s.maxResults=o),i=yx(n.bucketOnlyServerUrl()),o=e.maxOperationRetryTime,(o=new Fx(i,"GET",qx(e,n.bucket),o)).urlParams=s,o.errorHandler=Bx(n),[2,c.storage._makeRequest(o,a).getPromise()]}var e,n,r,i,o,s})})}function sL(u,c){return $i(this,void 0,void 0,function(){var a;return Zi(this,function(t){switch(t.label){case 0:return u._throwIfRoot("updateMetadata"),[4,u.storage._getAuthToken()];case 1:return a=t.sent(),e=u.storage,n=u._location,r=c,i=Rx(),o=yx(n.fullServerUrl()),s=Ox(r,i),r=e.maxOperationRetryTime,(r=new Fx(o,"PATCH",jx(e,i),r)).headers={"Content-Type":"application/json; charset=utf-8"},r.body=s,r.errorHandler=Kx(n),[2,u.storage._makeRequest(r,a).getPromise()]}var e,n,r,i,o,s})})}function aL(a){return $i(this,void 0,void 0,function(){var s;return Zi(this,function(t){switch(t.label){case 0:return a._throwIfRoot("getDownloadURL"),[4,a.storage._getAuthToken()];case 1:return s=t.sent(),e=a.storage,n=a._location,r=Rx(),i=yx(n.fullServerUrl()),o=e.maxOperationRetryTime,(o=new Fx(i,"GET",Vx(e,r),o)).errorHandler=Kx(n),[2,a.storage._makeRequest(o,s).getPromise().then(function(t){if(null===t)throw new UO("no-download-url","The given file does not have any download URLs.");return t})]}var e,n,r,i,o})})}function uL(o){return $i(this,void 0,void 0,function(){var i;return Zi(this,function(t){switch(t.label){case 0:return o._throwIfRoot("deleteObject"),[4,o.storage._getAuthToken()];case 1:return i=t.sent(),e=o.storage,n=o._location,r=yx(n.fullServerUrl()),e=e.maxOperationRetryTime,(e=new Fx(r,"DELETE",function(t,e){},e)).successCodes=[200,204],e.errorHandler=Kx(n),[2,o.storage._makeRequest(e,i).getPromise()]}var e,n,r})})}function cL(t,e){var n,e=(n=t._location.path,e=(e=e).split("/").filter(function(t){return 0<t.length}).join("/"),0===n.length?e:n+"/"+e),e=new cx(t._location.bucket,e);return new nL(t.storage,e)}function hL(t){return/^[A-Za-z]+:\/\//.test(t)}function lL(t,e){if(t instanceof pL){var n=t;if(null==n._bucket)throw new UO("no-default-bucket","No default bucket found. Did you set the '"+FO+"' property when initializing the app?");n=new nL(n,n._bucket);return null!=e?lL(n,e):n}if(void 0===e)return t;if(e.includes(".."))throw GO('`path` param cannot contain ".."');return cL(t,e)}function fL(t,e){if(e&&hL(e)){if(t instanceof pL)return new nL(t,e);throw GO("To use ref(service, url), the first argument must be a Storage instance.")}return lL(t,e)}var pL=(Object.defineProperty(dL.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){vx("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(dL.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){vx("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),dL.prototype._getAuthToken=function(){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return(e=this._authProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:if(null!==(e=t.sent()))return[2,e.accessToken];t.label=2;case 2:return[2,null]}})})},dL.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},dL.prototype._makeStorageReference=function(t){return new nL(this,t)},dL.prototype._makeRequest=function(t,e){var n=this;if(this._deleted)return new lx(WO());var r,i,o,s,a,u,c=(r=t,i=this._appId,o=e,s=this._pool,a=this._firebaseVersion,u=mx(r.urlParams),t=r.url+u,e=Object.assign({},r.headers),u=e,(i=i)&&(u["X-Firebase-GMPID"]=i),i=e,null!==(o=o)&&0<o.length&&(i.Authorization="Firebase "+o),a=a,e["X-Firebase-Storage-Version"]="webjs/"+(null!=a?a:"AppManager"),new bx(t,r.method,e,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,s));return this._requests.add(c),c.getPromise().then(function(){return n._requests.delete(c)},function(){return n._requests.delete(c)}),c},dL);function dL(t,e,n,r,i){this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?cx.makeFromBucketSpec(r):null==(r=null==(r=this.app.options)?void 0:r[FO])?null:cx.makeFromBucketSpec(r)}function gL(t,e,n){return e=e,n=n,(t=t)._throwIfRoot("uploadBytesResumable"),new tL(t,new Tx(e),n)}function vL(t){return function(r){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return r._throwIfRoot("getMetadata"),[4,r.storage._getAuthToken()];case 1:return e=t.sent(),n=Gx(r.storage,r._location,Rx()),[2,r.storage._makeRequest(n,e).getPromise()]}})})}(t)}function yL(t,e){return fL(t,e)}var mL=(Object.defineProperty(bL.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(bL.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(bL.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(bL.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),bL);function bL(t,e,n){this._delegate=t,this.task=e,this.ref=n}var wL=(Object.defineProperty(_L.prototype,"snapshot",{get:function(){return new mL(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),_L.prototype.then=function(e,t){var n=this;return this._delegate.then(function(t){if(e)return e(new mL(t,n,n._ref))},t)},_L.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new mL(t,i,i._ref))}:{next:e.next?function(t){return e.next(new mL(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},_L);function _L(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}var IL=(Object.defineProperty(TL.prototype,"prefixes",{get:function(){var e=this;return this._delegate.prefixes.map(function(t){return new EL(t,e._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(TL.prototype,"items",{get:function(){var e=this;return this._delegate.items.map(function(t){return new EL(t,e._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(TL.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),TL);function TL(t,e){this._delegate=t,this._service=e}var EL=(Object.defineProperty(SL.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(SL.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(SL.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),SL.prototype.toString=function(){return this._delegate.toString()},SL.prototype.child=function(t){return new SL(cL(this._delegate,t),this.storage)},Object.defineProperty(SL.prototype,"root",{get:function(){return new SL(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(SL.prototype,"parent",{get:function(){var t=this._delegate.parent;return null==t?null:new SL(t,this.storage)},enumerable:!1,configurable:!0}),SL.prototype.put=function(t,e){return this._throwIfRoot("put"),new wL(gL(this._delegate,t,e),this)},SL.prototype.putString=function(t,e,n){void 0===e&&(e=YO.RAW),this._throwIfRoot("putString");t=JO(e,t),n=Ji({},n);return null==n.contentType&&null!=t.contentType&&(n.contentType=t.contentType),new wL(new tL(this._delegate,new Tx(t.data,!0),n),this)},SL.prototype.listAll=function(){var e=this;return iL(this._delegate).then(function(t){return new IL(t,e.storage)})},SL.prototype.list=function(t){var e=this;return oL(this._delegate,t||void 0).then(function(t){return new IL(t,e.storage)})},SL.prototype.getMetadata=function(){return vL(this._delegate)},SL.prototype.updateMetadata=function(t){return sL(this._delegate,t)},SL.prototype.getDownloadURL=function(){return aL(this._delegate)},SL.prototype.delete=function(){return this._throwIfRoot("delete"),uL(this._delegate)},SL.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw HO(t)},SL);function SL(t,e){this._delegate=t,this.storage=e}var CL=(Object.defineProperty(AL.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(AL.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),AL.prototype.ref=function(t){if(hL(t))throw GO("ref() expected a child path but got a URL, use refFromURL instead.");return new EL(yL(this._delegate,t),this)},AL.prototype.refFromURL=function(t){if(!hL(t))throw GO("refFromURL() expected a full URL but got a child path, use ref() instead.");try{cx.makeFromUrl(t)}catch(t){throw GO("refFromUrl() expected a valid full URL but got an invalid one.")}return new EL(yL(this._delegate,t),this)},AL.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},AL.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},AL);function AL(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}var NL,kL;function RL(t,e){var n=e.instanceIdentifier,e=t.getProvider("app").getImmediate(),t=t.getProvider("auth-internal");return new CL(e,new pL(e,t,new ax,n,Xl.SDK_VERSION))}kL={TaskState:rx,TaskEvent:nx,StringFormat:YO,Storage:pL,Reference:EL},(NL=Xl).INTERNAL.registerComponent(new Zo("storage",RL,"PUBLIC").setServiceProps(kL).setMultipleInstances(!0)),NL.registerVersion("@firebase/storage","0.4.5");var PL,DL,OL="0.4.8",xL="FB-PERF-TRACE-MEASURE",LL="@firebase/performance/config",ML="@firebase/performance/configexpire",H="Performance",Sn=((Sn={})["trace started"]="Trace {$traceName} was started before.",Sn["trace stopped"]="Trace {$traceName} is not running.",Sn["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",Sn["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",Sn["no window"]="Window is not available.",Sn["no app id"]="App id is not available.",Sn["no project id"]="Project id is not available.",Sn["no api key"]="Api key is not available.",Sn["invalid cc log"]="Attempted to queue invalid cc event",Sn["FB not default"]="Performance can only start when Firebase app instance is the default one.",Sn["RC response not ok"]="RC response is not ok",Sn["invalid attribute name"]="Attribute name {$attributeName} is invalid.",Sn["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",Sn["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",Sn["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",Sn),FL=new Co("performance",H,Sn),UL=new fs(H);UL.logLevel=ss.INFO;var jL,qL=(VL.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},VL.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},VL.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},VL.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},VL.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},VL.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},VL.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!bo()||(UL.info("IndexedDB is not supported by current browswer"),!1):(UL.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},VL.prototype.setupObserver=function(t,i){this.PerformanceObserver&&new this.PerformanceObserver(function(t){for(var e=0,n=t.getEntries();e<n.length;e++){var r=n[e];i(r)}}).observe({entryTypes:[t]})},VL.getInstance=function(){return PL=void 0===PL?new VL(DL):PL},VL);function VL(t){if(!(this.window=t))throw FL.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}function BL(t,e){var n=t.length-e.length;if(n<0||1<n)throw FL.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var KL,GL,WL=(HL.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw FL.create("no app id");return t},HL.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw FL.create("no project id");return t},HL.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw FL.create("no api key");return t},HL.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},HL.getInstance=function(){return jL=void 0===jL?new HL:jL},HL);function HL(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=BL("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=BL("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}(H=GL=GL||{})[H.UNKNOWN=0]="UNKNOWN",H[H.VISIBLE=1]="VISIBLE",H[H.HIDDEN=2]="HIDDEN";var zL=["firebase_","google_","ga_"],QL=new RegExp("^[a-zA-Z]\\w*$");function YL(){switch(qL.getInstance().document.visibilityState){case"visible":return GL.VISIBLE;case"hidden":return GL.HIDDEN;default:return GL.UNKNOWN}}var XL="0.0.1",JL={loggingEnabled:!0},$L="FIREBASE_INSTALLATIONS_AUTH";function ZL(t){var n,e=function(){var t=qL.getInstance().localStorage;if(!t)return;var e=t.getItem(ML);if(!e||!function(t){return Number(t)>Date.now()}(e))return;var n=t.getItem(LL);if(!n)return;try{return JSON.parse(n)}catch(t){return}}();return e?(eM(e),Promise.resolve()):(n=t,function(){var t=WL.getInstance().installationsService.getToken();return t.then(function(t){}),t}().then(function(t){var e="https://firebaseremoteconfig.googleapis.com/v1/projects/"+WL.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+WL.getInstance().getApiKey(),t=new Request(e,{method:"POST",headers:{Authorization:$L+" "+t},body:JSON.stringify({app_instance_id:n,app_instance_id_token:t,app_id:WL.getInstance().getAppId(),app_version:OL,sdk_version:XL})});return fetch(t).then(function(t){if(t.ok)return t.json();throw FL.create("RC response not ok")})}).catch(function(){UL.info(tM)}).then(eM).then(function(t){var e=qL.getInstance().localStorage;if(!t||!e)return;e.setItem(LL,JSON.stringify(t)),e.setItem(ML,String(Date.now()+60*WL.getInstance().configTimeToLive*60*1e3))},function(){}))}var tM="Could not fetch config, will use default configs";function eM(t){if(!t)return t;var e=WL.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0!==n.fpr_enabled?"true"===String(n.fpr_enabled):JL.loggingEnabled,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=nM(e.tracesSamplingRate),e.logNetworkAfterSampling=nM(e.networkRequestsSamplingRate),t}function nM(t){return Math.random()<=t}var rM,iM=1;function oM(){return iM=2,rM=rM||function(){var n=qL.getInstance().document;return new Promise(function(t){var e;n&&"complete"!==n.readyState?(e=function(){"complete"===n.readyState&&(n.removeEventListener("readystatechange",e),t())},n.addEventListener("readystatechange",e)):t()})}().then(function(){return(t=WL.getInstance().installationsService.getId()).then(function(t){KL=t}),t;var t}).then(ZL).then(sM,sM)}function sM(){iM=3}var aM,uM=1e4,cM=5500,hM=3,lM=1e3,fM=hM,pM=[],dM=!1;function gM(t){setTimeout(function(){var t,e;if(0!==fM)return pM.length?(t=pM.splice(0,lM),e=t.map(function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}}),void function(t,r){return function(t){var e=WL.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then(function(t){return t.ok||UL.info("Call to Firebase backend failed."),t.json()}).then(function(t){var e=Number(t.nextRequestWaitMillis),n=uM;isNaN(e)||(n=Math.max(e,n));t=t.logResponseDetails;Array.isArray(t)&&0<t.length&&"RETRY_REQUEST_LATER"===t[0].responseAction&&(pM=no(no([],r),pM),UL.info("Retry transport request later.")),fM=hM,gM(n)})}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:WL.getInstance().logSource,log_event:e},t).catch(function(){pM=no(no([],t),pM),fM--,UL.info("Tries left: "+fM+"."),gM(uM)})):gM(uM)},t)}function vM(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t){if(!t.eventTime||!t.message)throw FL.create("invalid cc log");pM=no(no([],pM),[t])}({message:n.apply(void 0,t),eventTime:Date.now()})}}function yM(t,e){(aM=aM||vM(wM))(t,e)}function mM(t){var e=WL.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&qL.getInstance().requiredApisAvailable()&&(t.isAuto&&YL()!==GL.VISIBLE||(3===iM?bM(t):oM().then(function(){return bM(t)},function(){return bM(t)})))}function bM(t){var e;!KL||(e=WL.getInstance()).loggingEnabled&&e.logTraceAfterSampling&&setTimeout(function(){return yM(t,1)},0)}function wM(t,e){return(0===e?function(t){t={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},t={application_info:_M(),network_request_metric:t};return JSON.stringify(t)}:function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);t=t.getAttributes();0!==Object.keys(t).length&&(e.custom_attributes=t);e={application_info:_M(),trace_metric:e};return JSON.stringify(e)})(t)}function _M(){return{google_app_id:WL.getInstance().getAppId(),app_instance_id:KL,web_app_info:{sdk_version:OL,page_url:qL.getInstance().getUrl(),service_worker_status:"serviceWorker"in(t=qL.getInstance().navigator)?t.serviceWorker.controller?2:3:1,visibility_state:YL(),effective_connection_type:function(){var t=qL.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0};var t}var IM=["_fp","_fcp","_fid"];var TM=(EM.prototype.start=function(){if(1!==this.state)throw FL.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},EM.prototype.stop=function(){if(2!==this.state)throw FL.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),mM(this)},EM.prototype.record=function(t,e,n){if(t<=0)throw FL.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw FL.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Ji({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}mM(this)},EM.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},EM.prototype.putMetric=function(t,e){if(n=t,r=this.name,0===n.length||100<n.length||!(r&&r.startsWith("_wt_")&&-1<IM.indexOf(n))&&n.startsWith("_"))throw FL.create("invalid custom metric name",{customMetricName:t});var n,r;this.counters[t]=(t=e,(e=Math.floor(t))<t&&UL.info("Metric value should be an Integer, setting the value as : "+e+"."),e)},EM.prototype.getMetric=function(t){return this.counters[t]||0},EM.prototype.putAttribute=function(t,e){var n,r,i=!(0===(n=t).length||40<n.length)&&(!zL.some(function(t){return n.startsWith(t)})&&!!n.match(QL)),r=0!==(r=e).length&&r.length<=100;if(i&&r)this.customAttributes[t]=e;else{if(!i)throw FL.create("invalid attribute name",{attributeName:t});if(!r)throw FL.create("invalid attribute value",{attributeValue:e})}},EM.prototype.getAttribute=function(t){return this.customAttributes[t]},EM.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},EM.prototype.getAttributes=function(){return Ji({},this.customAttributes)},EM.prototype.setStartTime=function(t){this.startTimeUs=t},EM.prototype.setDuration=function(t){this.durationUs=t},EM.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),t=t&&t[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))},EM.createOobTrace=function(t,e,n){var r,i=qL.getInstance().getUrl();i&&(r=new EM("_wt_"+i,!0),i=Math.floor(1e3*qL.getInstance().getTimeOrigin()),r.setStartTime(i),t&&t[0]&&(r.setDuration(Math.floor(1e3*t[0].duration)),r.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),r.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),r.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),e&&((t=e.find(function(t){return"first-paint"===t.name}))&&t.startTime&&r.putMetric("_fp",Math.floor(1e3*t.startTime)),(e=e.find(function(t){return"first-contentful-paint"===t.name}))&&e.startTime&&r.putMetric("_fcp",Math.floor(1e3*e.startTime)),n&&r.putMetric("_fid",Math.floor(1e3*n))),mM(r))},EM.createUserTimingTrace=function(t){mM(new EM(t,!1,t))},EM);function EM(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=qL.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||xL+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}function SM(t){var e,n,r,i=t;i&&void 0!==i.responseStart&&(n=qL.getInstance().getTimeOrigin(),r=Math.floor(1e3*(i.startTime+n)),t=i.responseStart?Math.floor(1e3*(i.responseStart-i.startTime)):void 0,n=Math.floor(1e3*(i.responseEnd-i.startTime)),i={url:i.name&&i.name.split("?")[0],responsePayloadBytes:i.transferSize,startTimeUs:r,timeToResponseInitiatedUs:t,timeToResponseCompletedUs:n},e=i,(r=WL.getInstance()).instrumentationEnabled&&(t=e.url,n=r.logEndPointUrl.split("?")[0],i=r.flTransportEndpointUrl.split("?")[0],t!==n&&t!==i&&r.loggingEnabled&&r.logNetworkAfterSampling&&setTimeout(function(){return yM(e,0)},0)))}var CM=5e3;function AM(){KL&&(setTimeout(function(){var t=qL.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");{var r;t.onFirstInputDelay?(r=setTimeout(function(){TM.createOobTrace(e,n),r=void 0},CM),t.onFirstInputDelay(function(t){r&&(clearTimeout(r),TM.createOobTrace(e,n,t))})):TM.createOobTrace(e,n)}},0),setTimeout(function(){for(var t=qL.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++)SM(r[n]);t.setupObserver("resource",SM)},0),setTimeout(function(){for(var t=qL.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++)NM(r[n]);t.setupObserver("measure",NM)},0))}function NM(t){t=t.name;t.substring(0,xL.length)!==xL&&TM.createUserTimingTrace(t)}var kM=(RM.prototype.trace=function(t){return new TM(t)},Object.defineProperty(RM.prototype,"instrumentationEnabled",{get:function(){return WL.getInstance().instrumentationEnabled},set:function(t){WL.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(RM.prototype,"dataCollectionEnabled",{get:function(){return WL.getInstance().dataCollectionEnabled},set:function(t){WL.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),RM);function RM(t){this.app=t,qL.getInstance().requiredApisAvailable()&&wo().then(function(t){t&&(dM||(gM(cM),dM=!0),oM().then(AM,AM))}).catch(function(t){UL.info("Environment doesn't support IndexedDB: "+t)})}var PM;function DM(t,e){if("[DEFAULT]"!==t.name)throw FL.create("FB not default");if("undefined"==typeof window)throw FL.create("no window");return DL=window,WL.getInstance().firebaseAppInstance=t,WL.getInstance().installationsService=e,new kM(t)}(PM=Xl).INTERNAL.registerComponent(new Zo("performance",function(t){var e=t.getProvider("app").getImmediate(),t=t.getProvider("installations").getImmediate();return DM(e,t)},"PUBLIC")),PM.registerVersion("@firebase/performance","0.4.8");var OM,xM,LM="firebase_id",MM="origin",FM=6e4,UM="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",jM="https://www.googletagmanager.com/gtag/js";(H=OM=OM||{}).EVENT="event",H.SET="set",H.CONFIG="config",(H=xM=xM||{}).ADD_SHIPPING_INFO="add_shipping_info",H.ADD_PAYMENT_INFO="add_payment_info",H.ADD_TO_CART="add_to_cart",H.ADD_TO_WISHLIST="add_to_wishlist",H.BEGIN_CHECKOUT="begin_checkout",H.CHECKOUT_PROGRESS="checkout_progress",H.EXCEPTION="exception",H.GENERATE_LEAD="generate_lead",H.LOGIN="login",H.PAGE_VIEW="page_view",H.PURCHASE="purchase",H.REFUND="refund",H.REMOVE_FROM_CART="remove_from_cart",H.SCREEN_VIEW="screen_view",H.SEARCH="search",H.SELECT_CONTENT="select_content",H.SELECT_ITEM="select_item",H.SELECT_PROMOTION="select_promotion",H.SET_CHECKOUT_OPTION="set_checkout_option",H.SHARE="share",H.SIGN_UP="sign_up",H.TIMING_COMPLETE="timing_complete",H.VIEW_CART="view_cart",H.VIEW_ITEM="view_item",H.VIEW_ITEM_LIST="view_item_list",H.VIEW_PROMOTION="view_promotion",H.VIEW_SEARCH_RESULTS="view_search_results";var qM=new fs("@firebase/analytics");function VM(o,s,a,u){return function(n,r,i){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,6,,7]),n!==OM.EVENT?[3,2]:[4,function(u,c,h,l,f){return $i(this,void 0,void 0,function(){var n,r,e,i,o,s,a;return Zi(this,function(t){switch(t.label){case 0:return(t.trys.push([0,4,,5]),n=[],f&&f.send_to)?(a=f.send_to,Array.isArray(a)||(a=[a]),[4,Promise.all(h)]):[3,2];case 1:for(r=t.sent(),e=function(e){var t=r.find(function(t){return t.measurementId===e}),t=t&&c[t.appId];if(!t)return n=[],"break";n.push(t)},i=0,o=a;i<o.length&&(s=o[i],"break"!==e(s));i++);t.label=2;case 2:return 0===n.length&&(n=Object.values(c)),[4,Promise.all(n)];case 3:return t.sent(),u(OM.EVENT,l,f||{}),[3,5];case 4:return a=t.sent(),qM.error(a),[3,5];case 5:return[2]}})})}(o,s,a,r,i)];case 1:return t.sent(),[3,5];case 2:return n!==OM.CONFIG?[3,4]:[4,function(r,i,o,s,a,u){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:e=s[a],t.label=1;case 1:return t.trys.push([1,7,,8]),e?[4,i[e]]:[3,3];case 2:return t.sent(),[3,6];case 3:return[4,Promise.all(o)];case 4:return n=t.sent(),(n=n.find(function(t){return t.measurementId===a}))?[4,i[n.appId]]:[3,6];case 5:t.sent(),t.label=6;case 6:return[3,8];case 7:return n=t.sent(),qM.error(n),[3,8];case 8:return r(OM.CONFIG,a,u),[2]}})})}(o,s,a,u,r,i)];case 3:return t.sent(),[3,5];case 4:o(OM.SET,r),t.label=5;case 5:return[3,7];case 6:return e=t.sent(),qM.error(e),[3,7];case 7:return[2]}})})}}var H=((H={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",H["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",H["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",H["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",H["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",H["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",H["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",H["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',H["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',H),BM=new Co("analytics","Analytics",H),KM=30;function GM(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}var WM=new(GM.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},GM.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},GM.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},GM);function HM(o){var s;return $i(this,void 0,void 0,function(){var e,n,r,i;return Zi(this,function(t){switch(t.label){case 0:return e=o.appId,i=o.apiKey,i={method:"GET",headers:new Headers({Accept:"application/json","x-goog-api-key":i})},e=UM.replace("{app-id}",e),[4,fetch(e,i)];case 1:if(200===(n=t.sent()).status||304===n.status)return[3,6];r="",t.label=2;case 2:return t.trys.push([2,4,,5]),[4,n.json()];case 3:return i=t.sent(),null!==(s=i.error)&&void 0!==s&&s.message&&(r=i.error.message),[3,5];case 4:return t.sent(),[3,5];case 5:throw BM.create("config-fetch-failed",{httpStatus:n.status,responseMessage:r});case 6:return[2,n.json()]}})})}function zM(a,u,c){return void 0===u&&(u=WM),$i(this,void 0,void 0,function(){var e,n,r,i,o,s=this;return Zi(this,function(t){if(i=a.options,e=i.appId,n=i.apiKey,r=i.measurementId,!e)throw BM.create("no-app-id");if(n)return i=u.getThrottleMetadata(e)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new XM,setTimeout(function(){return $i(s,void 0,void 0,function(){return Zi(this,function(t){return o.abort(),[2]})})},void 0!==c?c:FM),[2,function s(a,t,u,c){var h=t.throttleEndTimeMillis,l=t.backoffCount;void 0===c&&(c=WM);return $i(this,void 0,void 0,function(){var e,n,r,i,o;return Zi(this,function(t){switch(t.label){case 0:e=a.appId,n=a.measurementId,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,QM(u,h)];case 2:return t.sent(),[3,4];case 3:if(i=t.sent(),n)return qM.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+n+' provided in the "measurementId" field in the local Firebase config. ['+i.message+"]"),[2,{appId:e,measurementId:n}];throw i;case 4:return t.trys.push([4,6,,7]),[4,HM(a)];case 5:return o=t.sent(),c.deleteThrottleMetadata(e),[2,o];case 6:if(YM(r=t.sent()))return i=503===Number(r.customData.httpStatus)?$o(l,c.intervalMillis,KM):$o(l,c.intervalMillis),o={throttleEndTimeMillis:Date.now()+i,backoffCount:l+1},c.setThrottleMetadata(e,o),qM.debug("Calling attemptFetch again in "+i+" millis"),[2,s(a,o,u,c)];if(c.deleteThrottleMetadata(e),n)return qM.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+n+' provided in the "measurementId" field in the local Firebase config. ['+r.message+"]"),[2,{appId:e,measurementId:n}];throw r;case 7:return[2]}})})}({appId:e,apiKey:n,measurementId:r},i,o,u)];if(r)return[2,{measurementId:r,appId:e}];throw BM.create("no-api-key")})})}function QM(i,o){return new Promise(function(t,e){var n=Math.max(o-Date.now(),0),r=setTimeout(t,n);i.addEventListener(function(){clearTimeout(r),e(BM.create("fetch-throttle",{throttleEndTimeMillis:o}))})})}function YM(t){if(t instanceof Eo&&t.customData){t=Number(t.customData.httpStatus);return 429===t||500===t||503===t||504===t}}var XM=(JM.prototype.addEventListener=function(t){this.listeners.push(t)},JM.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},JM);function JM(){this.listeners=[]}function $M(a,u,c,h,l,f){return $i(this,void 0,void 0,function(){var i,o,s;return Zi(this,function(t){switch(t.label){case 0:return(i=zM(a)).then(function(t){c[t.measurementId]=t.appId,a.options.measurementId&&t.measurementId!==a.options.measurementId&&qM.warn("The measurement ID in the local Firebase config ("+a.options.measurementId+") does not match the measurement ID fetched from the server ("+t.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(t){return qM.error(t)}),u.push(i),o=function(){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return bo()?[3,1]:(qM.warn(BM.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return t.trys.push([1,3,,4]),[4,wo()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),qM.warn(BM.create("indexeddb-unavailable",{errorInfo:e}).message),[2,!1];case 4:return[2,!0]}})})}().then(function(t){if(t)return h.getId()}),[4,Promise.all([i,o])];case 1:return s=t.sent(),i=s[0],o=s[1],function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(jM))return r}}()||(e=f,n=i.measurementId,(r=document.createElement("script")).src=jM+"?l="+e+"&id="+n,r.async=!0,document.head.appendChild(r)),l("js",new Date),(s={})[MM]="firebase",s.update=!0,s=s,null!=o&&(s[LM]=o),l(OM.CONFIG,i.measurementId,s),[2,i.measurementId]}var e,n,r})})}var ZM,tF,eF={},nF=[],rF={},iF="dataLayer",oF="gtag",sF=!1;function aF(t){if(sF)throw BM.create("already-initialized");t.dataLayerName&&(iF=t.dataLayerName),t.gtagName&&(oF=t.gtagName)}function uF(t,e){i=[],vo()&&i.push("This is a browser extension environment."),_o()||i.push("Cookies are not available."),0<i.length&&(i=i.map(function(t,e){return"("+(e+1)+") "+t}).join(" "),i=BM.create("invalid-analytics-context",{errorInfo:i}),qM.warn(i.message));var n,r,i,o,s,a,u=t.options.appId;if(!u)throw BM.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw BM.create("no-api-key");qM.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=eF[u])throw BM.create("already-exists",{id:u});return sF||(s=iF,a=[],Array.isArray(window[s])?a=window[s]:window[s]=a,n=eF,r=nF,i=rF,o=iF,s=oF,a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[o].push(arguments)},window[s]&&"function"==typeof window[s]&&(a=window[s]),window[s]=VM(a,n,r,i),s={gtagCore:a,wrappedGtag:window[s]},tF=s.wrappedGtag,ZM=s.gtagCore,sF=!0),eF[u]=$M(t,nF,rF,e,ZM,iF),{app:t,logEvent:function(t,e,n){!function(n,r,i,o,s){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return s&&s.global?(n(OM.EVENT,i,o),[2]):[3,1];case 1:return[4,r];case 2:e=t.sent(),e=Ji(Ji({},o),{send_to:e}),n(OM.EVENT,i,e),t.label=3;case 3:return[2]}})})}(tF,eF[u],t,e,n).catch(function(t){return qM.error(t)})},setCurrentScreen:function(t,e){!function(n,r,i,o){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return o&&o.global?(n(OM.SET,{screen_name:i}),[2,Promise.resolve()]):[3,1];case 1:return[4,r];case 2:e=t.sent(),n(OM.CONFIG,e,{update:!0,screen_name:i}),t.label=3;case 3:return[2]}})})}(tF,eF[u],t,e).catch(function(t){return qM.error(t)})},setUserId:function(t,e){!function(n,r,i,o){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return o&&o.global?(n(OM.SET,{user_id:i}),[2,Promise.resolve()]):[3,1];case 1:return[4,r];case 2:e=t.sent(),n(OM.CONFIG,e,{update:!0,user_id:i}),t.label=3;case 3:return[2]}})})}(tF,eF[u],t,e).catch(function(t){return qM.error(t)})},setUserProperties:function(t,e){!function(s,a,u,c){return $i(this,void 0,void 0,function(){var e,n,r,i,o;return Zi(this,function(t){switch(t.label){case 0:if(!c||!c.global)return[3,1];for(e={},n=0,r=Object.keys(u);n<r.length;n++)i=r[n],e["user_properties."+i]=u[i];return s(OM.SET,e),[2,Promise.resolve()];case 1:return[4,a];case 2:o=t.sent(),s(OM.CONFIG,o,{update:!0,user_properties:u}),t.label=3;case 3:return[2]}})})}(tF,eF[u],t,e).catch(function(t){return qM.error(t)})},setAnalyticsCollectionEnabled:function(t){!function(n,r){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,n];case 1:return e=t.sent(),window["ga-disable-"+e]=!r,[2]}})})}(eF[u],t).catch(function(t){return qM.error(t)})},INTERNAL:{delete:function(){return delete eF[u],Promise.resolve()}}}}var cF,hF="analytics";function lF(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:if(vo())return[2,!1];if(!_o())return[2,!1];if(!bo())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,wo()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}})})}(cF=Xl).INTERNAL.registerComponent(new Zo(hF,function(t){return uF(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:aF,EventName:xM,isSupported:lF})),cF.INTERNAL.registerComponent(new Zo("analytics-internal",function(t){try{return{logEvent:t.getProvider(hF).getImmediate().logEvent}}catch(t){throw BM.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),cF.registerVersion("@firebase/analytics","0.6.6");var fF=(pF.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,e=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+e+"."),e},pF.prototype.fetch=function(i){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return(r=t.sent(),e=r[0],(r=r[1])&&this.isCachedDataFresh(i.cacheMaxAgeMillis,e))?[2,r]:(i.eTag=r&&r.eTag,[4,this.client.fetch(i)]);case 2:return n=t.sent(),r=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===n.status&&r.push(this.storage.setLastSuccessfulFetchResponse(n)),[4,Promise.all(r)];case 3:return t.sent(),[2,n]}})})},pF);function pF(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}var H=((H={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",H["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",H["registration-api-key"]="Undefined API key. Check Firebase app initialization.",H["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",H["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",H["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",H["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",H["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",H["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",H["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',H["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',H["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",H["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",H),dF=new Co("remoteconfig","Remote Config",H);var gF=(vF.prototype.fetch=function(f){return $i(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,h,l;return Zi(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:o=t.sent(),n=o[0],i=o[1],r=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=r+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,r={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":f.eTag||"*"},i={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:i,app_id:this.appId,language_code:(e=void 0===e?navigator:e).languages&&e.languages[0]||e.language},i={method:"POST",headers:r,body:JSON.stringify(i)},o=fetch(o,i),i=new Promise(function(t,e){f.signal.addEventListener(function(){var t=new Error("The operation was aborted.");t.name="AbortError",e(t)})}),t.label=2;case 2:return t.trys.push([2,5,,6]),[4,Promise.race([o,i])];case 3:return t.sent(),[4,o];case 4:return l=t.sent(),[3,6];case 5:throw i=t.sent(),o="fetch-client-network","AbortError"===i.name&&(o="fetch-timeout"),dF.create(o,{originalErrorMessage:i.message});case 6:if(s=l.status,a=l.headers.get("ETag")||void 0,200!==l.status)return[3,11];h=void 0,t.label=7;case 7:return t.trys.push([7,9,,10]),[4,l.json()];case 8:return h=t.sent(),[3,10];case 9:throw l=t.sent(),dF.create("fetch-client-parse",{originalErrorMessage:l.message});case 10:u=h.entries,c=h.state,t.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===c?s=500:"NO_CHANGE"===c?s=304:"NO_TEMPLATE"!==c&&"EMPTY_CONFIG"!==c||(u={}),304!==s&&200!==s)throw dF.create("fetch-status",{httpStatus:s});return[2,{status:s,eTag:a,config:u}]}var e})})},vF);function vF(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}var yF=(mF.prototype.addEventListener=function(t){this.listeners.push(t)},mF.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},mF);function mF(){this.listeners=[]}var bF=["1","true","t","yes","y","on"],wF=(_F.prototype.asString=function(){return this._value},_F.prototype.asBoolean=function(){return"static"!==this._source&&0<=bF.indexOf(this._value.toLowerCase())},_F.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return t=isNaN(t)?0:t},_F.prototype.getSource=function(){return this._source},_F);function _F(t,e){void 0===e&&(e=""),this._source=t,this._value=e}var IF=(TF.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=ss.DEBUG;break;case"silent":this._logger.logLevel=ss.SILENT;break;default:this._logger.logLevel=ss.ERROR}},Object.defineProperty(TF.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(TF.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),TF.prototype.activate=function(){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return n=t.sent(),e=n[0],n=n[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return t.sent(),[2,!0]}})})},TF.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},TF.prototype.fetch=function(){return $i(this,void 0,void 0,function(){var r,i,o,s=this;return Zi(this,function(t){switch(t.label){case 0:r=new yF,setTimeout(function(){return $i(s,void 0,void 0,function(){return Zi(this,function(t){return r.abort(),[2]})})},this.settings.fetchTimeoutMillis),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:r})];case 2:return t.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return t.sent(),[3,6];case 4:return i=t.sent(),n="fetch-throttle",o=(e=i)instanceof Eo&&-1!==e.code.indexOf(n)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(o)];case 5:throw t.sent(),i;case 6:return[2]}var e,n})})},TF.prototype.fetchAndActivate=function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},TF.prototype.getAll=function(){var n=this;return function(t,e){void 0===t&&(t={});void 0===e&&(e={});return Object.keys(Ji(Ji({},t),e))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce(function(t,e){return t[e]=n.getValue(e),t},{})},TF.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},TF.prototype.getNumber=function(t){return this.getValue(t).asNumber()},TF.prototype.getString=function(t){return this.getValue(t).asString()},TF.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new wF("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new wF("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new wF("static"))},TF);function TF(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}function EF(t,e){t=t.target.error||void 0;return dF.create(e,{originalErrorMessage:t&&t.message})}var SF="app_namespace_store",CF="firebase_remote_config",AF=1;var NF=(kF.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},kF.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},kF.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},kF.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},kF.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},kF.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},kF.prototype.getActiveConfig=function(){return this.get("active_config")},kF.prototype.setActiveConfig=function(t){return this.set("active_config",t)},kF.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},kF.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},kF.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},kF.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},kF.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},kF.prototype.get=function(a){return $i(this,void 0,void 0,function(){var o,s=this;return Zi(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(e,n){var t=o.transaction([SF],"readonly").objectStore(SF),r=s.createCompositeKey(a);try{var i=t.get(r);i.onerror=function(t){n(EF(t,"storage-get"))},i.onsuccess=function(t){t=t.target.result;e(t?t.value:void 0)}}catch(t){n(dF.create("storage-get",{originalErrorMessage:t&&t.message}))}})]}})})},kF.prototype.set=function(a,u){return $i(this,void 0,void 0,function(){var o,s=this;return Zi(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([SF],"readwrite").objectStore(SF),r=s.createCompositeKey(a);try{var i=n.put({compositeKey:r,value:u});i.onerror=function(t){e(EF(t,"storage-set"))},i.onsuccess=function(){t()}}catch(t){e(dF.create("storage-set",{originalErrorMessage:t&&t.message}))}})]}})})},kF.prototype.delete=function(a){return $i(this,void 0,void 0,function(){var o,s=this;return Zi(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([SF],"readwrite").objectStore(SF),r=s.createCompositeKey(a);try{var i=n.delete(r);i.onerror=function(t){e(EF(t,"storage-delete"))},i.onsuccess=function(){t()}}catch(t){e(dF.create("storage-delete",{originalErrorMessage:t&&t.message}))}})]}})})},kF.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},kF);function kF(t,e,n,r){void 0===r&&(r=new Promise(function(e,n){var t=indexedDB.open(CF,AF);t.onerror=function(t){n(EF(t,"storage-open"))},t.onsuccess=function(t){e(t.target.result)},t.onupgradeneeded=function(t){var e=t.target.result;0===t.oldVersion&&e.createObjectStore(SF,{keyPath:"compositeKey"})}})),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}var RF=(PF.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},PF.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},PF.prototype.getActiveConfig=function(){return this.activeConfig},PF.prototype.loadFromStorage=function(){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),[4,e];case 1:return(e=t.sent())&&(this.lastFetchStatus=e),[4,n];case 2:return(n=t.sent())&&(this.lastSuccessfulFetchTimestampMillis=n),[4,r];case 3:return(r=t.sent())&&(this.activeConfig=r),[2]}})})},PF.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},PF.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},PF.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},PF);function PF(t){this.storage=t}var DF=(OF.prototype.fetch=function(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=t.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(n,e)]}})})},OF.prototype.attemptFetch=function(r,t){var s=t.throttleEndTimeMillis,a=t.backoffCount;return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,(i=r.signal,o=s,new Promise(function(t,e){var n=Math.max(o-Date.now(),0),r=setTimeout(t,n);i.addEventListener(function(){clearTimeout(r),e(dF.create("fetch-throttle",{throttleEndTimeMillis:o}))})}))];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),[4,this.client.fetch(r)];case 3:return e=t.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return t.sent(),[2,e];case 5:if(!function(t){if(t instanceof Eo&&t.customData){t=Number(t.customData.httpStatus);return 429===t||500===t||503===t||504===t}}(n=t.sent()))throw n;return n={throttleEndTimeMillis:Date.now()+$o(a),backoffCount:a+1},[4,this.storage.setThrottleMetadata(n)];case 6:return t.sent(),[2,this.attemptFetch(r,n)];case 7:return[2]}var i,o})})},OF);function OF(t,e){this.client=t,this.storage=e}var xF,LF="@firebase/remote-config";return(xF=Xl).INTERNAL.registerComponent(new Zo("remoteConfig",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw dF.create("registration-window");var o=r.options,s=o.projectId,a=o.apiKey,u=o.appId;if(!s)throw dF.create("registration-project-id");if(!a)throw dF.create("registration-api-key");if(!u)throw dF.create("registration-app-id");n=n||"firebase";e=new NF(u,r.name,n),t=new RF(e),o=new fs(LF);o.logLevel=ss.ERROR;u=new gF(i,xF.SDK_VERSION,n,s,a,u),u=new DF(u,e),u=new fF(u,e,t,o),o=new IF(r,u,t,e,o);return o.ensureInitialized(),o},"PUBLIC").setMultipleInstances(!0)),xF.registerVersion(LF,"0.1.33"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the CDN builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nhttps://www.gstatic.com/firebasejs/5.0.0/firebase-<PACKAGE>.js\n"),Xl.registerVersion("firebase","8.3.1","cdn"),Xl});
//# sourceMappingURL=firebase.js.map
